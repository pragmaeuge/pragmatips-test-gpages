(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();var vi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function c1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function iE(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var a=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return t[r]}})}),n}var kl={exports:{}},yi={},Bl={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sd;function oE(){if(sd)return Se;sd=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),l=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),g=Symbol.iterator;function d(N){return N===null||typeof N!="object"?null:(N=g&&N[g]||N["@@iterator"],typeof N=="function"?N:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,T={};function x(N,b,q){this.props=N,this.context=b,this.refs=T,this.updater=q||v}x.prototype.isReactComponent={},x.prototype.setState=function(N,b){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,b,"setState")},x.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function m(){}m.prototype=x.prototype;function O(N,b,q){this.props=N,this.context=b,this.refs=T,this.updater=q||v}var w=O.prototype=new m;w.constructor=O,S(w,x.prototype),w.isPureReactComponent=!0;var R=Array.isArray,M=Object.prototype.hasOwnProperty,D={current:null},V={key:!0,ref:!0,__self:!0,__source:!0};function B(N,b,q){var le,xe={},Te=null,ye=null;if(b!=null)for(le in b.ref!==void 0&&(ye=b.ref),b.key!==void 0&&(Te=""+b.key),b)M.call(b,le)&&!V.hasOwnProperty(le)&&(xe[le]=b[le]);var De=arguments.length-2;if(De===1)xe.children=q;else if(1<De){for(var Be=Array(De),yt=0;yt<De;yt++)Be[yt]=arguments[yt+2];xe.children=Be}if(N&&N.defaultProps)for(le in De=N.defaultProps,De)xe[le]===void 0&&(xe[le]=De[le]);return{$$typeof:t,type:N,key:Te,ref:ye,props:xe,_owner:D.current}}function z(N,b){return{$$typeof:t,type:N.type,key:b,ref:N.ref,props:N.props,_owner:N._owner}}function k(N){return typeof N=="object"&&N!==null&&N.$$typeof===t}function U(N){var b={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(q){return b[q]})}var H=/\/+/g;function P(N,b){return typeof N=="object"&&N!==null&&N.key!=null?U(""+N.key):b.toString(36)}function A(N,b,q,le,xe){var Te=typeof N;(Te==="undefined"||Te==="boolean")&&(N=null);var ye=!1;if(N===null)ye=!0;else switch(Te){case"string":case"number":ye=!0;break;case"object":switch(N.$$typeof){case t:case e:ye=!0}}if(ye)return ye=N,xe=xe(ye),N=le===""?"."+P(ye,0):le,R(xe)?(q="",N!=null&&(q=N.replace(H,"$&/")+"/"),A(xe,b,q,"",function(yt){return yt})):xe!=null&&(k(xe)&&(xe=z(xe,q+(!xe.key||ye&&ye.key===xe.key?"":(""+xe.key).replace(H,"$&/")+"/")+N)),b.push(xe)),1;if(ye=0,le=le===""?".":le+":",R(N))for(var De=0;De<N.length;De++){Te=N[De];var Be=le+P(Te,De);ye+=A(Te,b,q,Be,xe)}else if(Be=d(N),typeof Be=="function")for(N=Be.call(N),De=0;!(Te=N.next()).done;)Te=Te.value,Be=le+P(Te,De++),ye+=A(Te,b,q,Be,xe);else if(Te==="object")throw b=String(N),Error("Objects are not valid as a React child (found: "+(b==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":b)+"). If you meant to render a collection of children, use an array instead.");return ye}function ne(N,b,q){if(N==null)return N;var le=[],xe=0;return A(N,le,"","",function(Te){return b.call(q,Te,xe++)}),le}function ae(N){if(N._status===-1){var b=N._result;b=b(),b.then(function(q){(N._status===0||N._status===-1)&&(N._status=1,N._result=q)},function(q){(N._status===0||N._status===-1)&&(N._status=2,N._result=q)}),N._status===-1&&(N._status=0,N._result=b)}if(N._status===1)return N._result.default;throw N._result}var se={current:null},Q={transition:null},j={ReactCurrentDispatcher:se,ReactCurrentBatchConfig:Q,ReactCurrentOwner:D};function G(){throw Error("act(...) is not supported in production builds of React.")}return Se.Children={map:ne,forEach:function(N,b,q){ne(N,function(){b.apply(this,arguments)},q)},count:function(N){var b=0;return ne(N,function(){b++}),b},toArray:function(N){return ne(N,function(b){return b})||[]},only:function(N){if(!k(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Se.Component=x,Se.Fragment=n,Se.Profiler=a,Se.PureComponent=O,Se.StrictMode=r,Se.Suspense=f,Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j,Se.act=G,Se.cloneElement=function(N,b,q){if(N==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+N+".");var le=S({},N.props),xe=N.key,Te=N.ref,ye=N._owner;if(b!=null){if(b.ref!==void 0&&(Te=b.ref,ye=D.current),b.key!==void 0&&(xe=""+b.key),N.type&&N.type.defaultProps)var De=N.type.defaultProps;for(Be in b)M.call(b,Be)&&!V.hasOwnProperty(Be)&&(le[Be]=b[Be]===void 0&&De!==void 0?De[Be]:b[Be])}var Be=arguments.length-2;if(Be===1)le.children=q;else if(1<Be){De=Array(Be);for(var yt=0;yt<Be;yt++)De[yt]=arguments[yt+2];le.children=De}return{$$typeof:t,type:N.type,key:xe,ref:Te,props:le,_owner:ye}},Se.createContext=function(N){return N={$$typeof:o,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},N.Provider={$$typeof:s,_context:N},N.Consumer=N},Se.createElement=B,Se.createFactory=function(N){var b=B.bind(null,N);return b.type=N,b},Se.createRef=function(){return{current:null}},Se.forwardRef=function(N){return{$$typeof:c,render:N}},Se.isValidElement=k,Se.lazy=function(N){return{$$typeof:h,_payload:{_status:-1,_result:N},_init:ae}},Se.memo=function(N,b){return{$$typeof:l,type:N,compare:b===void 0?null:b}},Se.startTransition=function(N){var b=Q.transition;Q.transition={};try{N()}finally{Q.transition=b}},Se.unstable_act=G,Se.useCallback=function(N,b){return se.current.useCallback(N,b)},Se.useContext=function(N){return se.current.useContext(N)},Se.useDebugValue=function(){},Se.useDeferredValue=function(N){return se.current.useDeferredValue(N)},Se.useEffect=function(N,b){return se.current.useEffect(N,b)},Se.useId=function(){return se.current.useId()},Se.useImperativeHandle=function(N,b,q){return se.current.useImperativeHandle(N,b,q)},Se.useInsertionEffect=function(N,b){return se.current.useInsertionEffect(N,b)},Se.useLayoutEffect=function(N,b){return se.current.useLayoutEffect(N,b)},Se.useMemo=function(N,b){return se.current.useMemo(N,b)},Se.useReducer=function(N,b,q){return se.current.useReducer(N,b,q)},Se.useRef=function(N){return se.current.useRef(N)},Se.useState=function(N){return se.current.useState(N)},Se.useSyncExternalStore=function(N,b,q){return se.current.useSyncExternalStore(N,b,q)},Se.useTransition=function(){return se.current.useTransition()},Se.version="18.3.1",Se}var id;function f1(){return id||(id=1,Bl.exports=oE()),Bl.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var od;function uE(){if(od)return yi;od=1;var t=f1(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,a=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(c,f,l){var h,g={},d=null,v=null;l!==void 0&&(d=""+l),f.key!==void 0&&(d=""+f.key),f.ref!==void 0&&(v=f.ref);for(h in f)r.call(f,h)&&!s.hasOwnProperty(h)&&(g[h]=f[h]);if(c&&c.defaultProps)for(h in f=c.defaultProps,f)g[h]===void 0&&(g[h]=f[h]);return{$$typeof:e,type:c,key:d,ref:v,props:g,_owner:a.current}}return yi.Fragment=n,yi.jsx=o,yi.jsxs=o,yi}var ud;function cE(){return ud||(ud=1,kl.exports=uE()),kl.exports}var _e=cE(),Y=f1(),uu={},Fl={exports:{}},Ht={},Nl={exports:{}},Ul={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cd;function fE(){return cd||(cd=1,function(t){function e(Q,j){var G=Q.length;Q.push(j);e:for(;0<G;){var N=G-1>>>1,b=Q[N];if(0<a(b,j))Q[N]=j,Q[G]=b,G=N;else break e}}function n(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var j=Q[0],G=Q.pop();if(G!==j){Q[0]=G;e:for(var N=0,b=Q.length,q=b>>>1;N<q;){var le=2*(N+1)-1,xe=Q[le],Te=le+1,ye=Q[Te];if(0>a(xe,G))Te<b&&0>a(ye,xe)?(Q[N]=ye,Q[Te]=G,N=Te):(Q[N]=xe,Q[le]=G,N=le);else if(Te<b&&0>a(ye,G))Q[N]=ye,Q[Te]=G,N=Te;else break e}}return j}function a(Q,j){var G=Q.sortIndex-j.sortIndex;return G!==0?G:Q.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var f=[],l=[],h=1,g=null,d=3,v=!1,S=!1,T=!1,x=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(Q){for(var j=n(l);j!==null;){if(j.callback===null)r(l);else if(j.startTime<=Q)r(l),j.sortIndex=j.expirationTime,e(f,j);else break;j=n(l)}}function R(Q){if(T=!1,w(Q),!S)if(n(f)!==null)S=!0,ae(M);else{var j=n(l);j!==null&&se(R,j.startTime-Q)}}function M(Q,j){S=!1,T&&(T=!1,m(B),B=-1),v=!0;var G=d;try{for(w(j),g=n(f);g!==null&&(!(g.expirationTime>j)||Q&&!U());){var N=g.callback;if(typeof N=="function"){g.callback=null,d=g.priorityLevel;var b=N(g.expirationTime<=j);j=t.unstable_now(),typeof b=="function"?g.callback=b:g===n(f)&&r(f),w(j)}else r(f);g=n(f)}if(g!==null)var q=!0;else{var le=n(l);le!==null&&se(R,le.startTime-j),q=!1}return q}finally{g=null,d=G,v=!1}}var D=!1,V=null,B=-1,z=5,k=-1;function U(){return!(t.unstable_now()-k<z)}function H(){if(V!==null){var Q=t.unstable_now();k=Q;var j=!0;try{j=V(!0,Q)}finally{j?P():(D=!1,V=null)}}else D=!1}var P;if(typeof O=="function")P=function(){O(H)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,ne=A.port2;A.port1.onmessage=H,P=function(){ne.postMessage(null)}}else P=function(){x(H,0)};function ae(Q){V=Q,D||(D=!0,P())}function se(Q,j){B=x(function(){Q(t.unstable_now())},j)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Q){Q.callback=null},t.unstable_continueExecution=function(){S||v||(S=!0,ae(M))},t.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<Q?Math.floor(1e3/Q):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(f)},t.unstable_next=function(Q){switch(d){case 1:case 2:case 3:var j=3;break;default:j=d}var G=d;d=j;try{return Q()}finally{d=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Q,j){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var G=d;d=Q;try{return j()}finally{d=G}},t.unstable_scheduleCallback=function(Q,j,G){var N=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?N+G:N):G=N,Q){case 1:var b=-1;break;case 2:b=250;break;case 5:b=1073741823;break;case 4:b=1e4;break;default:b=5e3}return b=G+b,Q={id:h++,callback:j,priorityLevel:Q,startTime:G,expirationTime:b,sortIndex:-1},G>N?(Q.sortIndex=G,e(l,Q),n(f)===null&&Q===n(l)&&(T?(m(B),B=-1):T=!0,se(R,G-N))):(Q.sortIndex=b,e(f,Q),S||v||(S=!0,ae(M))),Q},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(Q){var j=d;return function(){var G=d;d=j;try{return Q.apply(this,arguments)}finally{d=G}}}}(Ul)),Ul}var fd;function lE(){return fd||(fd=1,Nl.exports=fE()),Nl.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ld;function gE(){if(ld)return Ht;ld=1;var t=f1(),e=lE();function n(i){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+i,p=1;p<arguments.length;p++)u+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+i+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,a={};function s(i,u){o(i,u),o(i+"Capture",u)}function o(i,u){for(a[i]=u,i=0;i<u.length;i++)r.add(u[i])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,l=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},g={};function d(i){return f.call(g,i)?!0:f.call(h,i)?!1:l.test(i)?g[i]=!0:(h[i]=!0,!1)}function v(i,u,p,y){if(p!==null&&p.type===0)return!1;switch(typeof u){case"function":case"symbol":return!0;case"boolean":return y?!1:p!==null?!p.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function S(i,u,p,y){if(u===null||typeof u>"u"||v(i,u,p,y))return!0;if(y)return!1;if(p!==null)switch(p.type){case 3:return!u;case 4:return u===!1;case 5:return isNaN(u);case 6:return isNaN(u)||1>u}return!1}function T(i,u,p,y,C,E,_){this.acceptsBooleans=u===2||u===3||u===4,this.attributeName=y,this.attributeNamespace=C,this.mustUseProperty=p,this.propertyName=i,this.type=u,this.sanitizeURL=E,this.removeEmptyString=_}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){x[i]=new T(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var u=i[0];x[u]=new T(u,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){x[i]=new T(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){x[i]=new T(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){x[i]=new T(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){x[i]=new T(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){x[i]=new T(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){x[i]=new T(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){x[i]=new T(i,5,!1,i.toLowerCase(),null,!1,!1)});var m=/[\-:]([a-z])/g;function O(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var u=i.replace(m,O);x[u]=new T(u,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var u=i.replace(m,O);x[u]=new T(u,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var u=i.replace(m,O);x[u]=new T(u,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){x[i]=new T(i,1,!1,i.toLowerCase(),null,!1,!1)}),x.xlinkHref=new T("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){x[i]=new T(i,1,!1,i.toLowerCase(),null,!0,!0)});function w(i,u,p,y){var C=x.hasOwnProperty(u)?x[u]:null;(C!==null?C.type!==0:y||!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(S(u,p,C,y)&&(p=null),y||C===null?d(u)&&(p===null?i.removeAttribute(u):i.setAttribute(u,""+p)):C.mustUseProperty?i[C.propertyName]=p===null?C.type===3?!1:"":p:(u=C.attributeName,y=C.attributeNamespace,p===null?i.removeAttribute(u):(C=C.type,p=C===3||C===4&&p===!0?"":""+p,y?i.setAttributeNS(y,u,p):i.setAttribute(u,p))))}var R=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,M=Symbol.for("react.element"),D=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),U=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),ne=Symbol.for("react.memo"),ae=Symbol.for("react.lazy"),se=Symbol.for("react.offscreen"),Q=Symbol.iterator;function j(i){return i===null||typeof i!="object"?null:(i=Q&&i[Q]||i["@@iterator"],typeof i=="function"?i:null)}var G=Object.assign,N;function b(i){if(N===void 0)try{throw Error()}catch(p){var u=p.stack.trim().match(/\n( *(at )?)/);N=u&&u[1]||""}return`
`+N+i}var q=!1;function le(i,u){if(!i||q)return"";q=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(I){var y=I}Reflect.construct(i,[],u)}else{try{u.call()}catch(I){y=I}i.call(u.prototype)}else{try{throw Error()}catch(I){y=I}i()}}catch(I){if(I&&y&&typeof I.stack=="string"){for(var C=I.stack.split(`
`),E=y.stack.split(`
`),_=C.length-1,F=E.length-1;1<=_&&0<=F&&C[_]!==E[F];)F--;for(;1<=_&&0<=F;_--,F--)if(C[_]!==E[F]){if(_!==1||F!==1)do if(_--,F--,0>F||C[_]!==E[F]){var $=`
`+C[_].replace(" at new "," at ");return i.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",i.displayName)),$}while(1<=_&&0<=F);break}}}finally{q=!1,Error.prepareStackTrace=p}return(i=i?i.displayName||i.name:"")?b(i):""}function xe(i){switch(i.tag){case 5:return b(i.type);case 16:return b("Lazy");case 13:return b("Suspense");case 19:return b("SuspenseList");case 0:case 2:case 15:return i=le(i.type,!1),i;case 11:return i=le(i.type.render,!1),i;case 1:return i=le(i.type,!0),i;default:return""}}function Te(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case V:return"Fragment";case D:return"Portal";case z:return"Profiler";case B:return"StrictMode";case P:return"Suspense";case A:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case U:return(i.displayName||"Context")+".Consumer";case k:return(i._context.displayName||"Context")+".Provider";case H:var u=i.render;return i=i.displayName,i||(i=u.displayName||u.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case ne:return u=i.displayName||null,u!==null?u:Te(i.type)||"Memo";case ae:u=i._payload,i=i._init;try{return Te(i(u))}catch{}}return null}function ye(i){var u=i.type;switch(i.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=u.render,i=i.displayName||i.name||"",u.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Te(u);case 8:return u===B?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function De(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Be(i){var u=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function yt(i){var u=Be(i)?"checked":"value",p=Object.getOwnPropertyDescriptor(i.constructor.prototype,u),y=""+i[u];if(!i.hasOwnProperty(u)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var C=p.get,E=p.set;return Object.defineProperty(i,u,{configurable:!0,get:function(){return C.call(this)},set:function(_){y=""+_,E.call(this,_)}}),Object.defineProperty(i,u,{enumerable:p.enumerable}),{getValue:function(){return y},setValue:function(_){y=""+_},stopTracking:function(){i._valueTracker=null,delete i[u]}}}}function On(i){i._valueTracker||(i._valueTracker=yt(i))}function lp(i){if(!i)return!1;var u=i._valueTracker;if(!u)return!0;var p=u.getValue(),y="";return i&&(y=Be(i)?i.checked?"true":"false":i.value),i=y,i!==p?(u.setValue(i),!0):!1}function Zi(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function $c(i,u){var p=u.checked;return G({},u,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:p??i._wrapperState.initialChecked})}function gp(i,u){var p=u.defaultValue==null?"":u.defaultValue,y=u.checked!=null?u.checked:u.defaultChecked;p=De(u.value!=null?u.value:p),i._wrapperState={initialChecked:y,initialValue:p,controlled:u.type==="checkbox"||u.type==="radio"?u.checked!=null:u.value!=null}}function pp(i,u){u=u.checked,u!=null&&w(i,"checked",u,!1)}function zc(i,u){pp(i,u);var p=De(u.value),y=u.type;if(p!=null)y==="number"?(p===0&&i.value===""||i.value!=p)&&(i.value=""+p):i.value!==""+p&&(i.value=""+p);else if(y==="submit"||y==="reset"){i.removeAttribute("value");return}u.hasOwnProperty("value")?Wc(i,u.type,p):u.hasOwnProperty("defaultValue")&&Wc(i,u.type,De(u.defaultValue)),u.checked==null&&u.defaultChecked!=null&&(i.defaultChecked=!!u.defaultChecked)}function hp(i,u,p){if(u.hasOwnProperty("value")||u.hasOwnProperty("defaultValue")){var y=u.type;if(!(y!=="submit"&&y!=="reset"||u.value!==void 0&&u.value!==null))return;u=""+i._wrapperState.initialValue,p||u===i.value||(i.value=u),i.defaultValue=u}p=i.name,p!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,p!==""&&(i.name=p)}function Wc(i,u,p){(u!=="number"||Zi(i.ownerDocument)!==i)&&(p==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+p&&(i.defaultValue=""+p))}var Vs=Array.isArray;function Fa(i,u,p,y){if(i=i.options,u){u={};for(var C=0;C<p.length;C++)u["$"+p[C]]=!0;for(p=0;p<i.length;p++)C=u.hasOwnProperty("$"+i[p].value),i[p].selected!==C&&(i[p].selected=C),C&&y&&(i[p].defaultSelected=!0)}else{for(p=""+De(p),u=null,C=0;C<i.length;C++){if(i[C].value===p){i[C].selected=!0,y&&(i[C].defaultSelected=!0);return}u!==null||i[C].disabled||(u=i[C])}u!==null&&(u.selected=!0)}}function Hc(i,u){if(u.dangerouslySetInnerHTML!=null)throw Error(n(91));return G({},u,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function dp(i,u){var p=u.value;if(p==null){if(p=u.children,u=u.defaultValue,p!=null){if(u!=null)throw Error(n(92));if(Vs(p)){if(1<p.length)throw Error(n(93));p=p[0]}u=p}u==null&&(u=""),p=u}i._wrapperState={initialValue:De(p)}}function vp(i,u){var p=De(u.value),y=De(u.defaultValue);p!=null&&(p=""+p,p!==i.value&&(i.value=p),u.defaultValue==null&&i.defaultValue!==p&&(i.defaultValue=p)),y!=null&&(i.defaultValue=""+y)}function yp(i){var u=i.textContent;u===i._wrapperState.initialValue&&u!==""&&u!==null&&(i.value=u)}function Tp(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function bc(i,u){return i==null||i==="http://www.w3.org/1999/xhtml"?Tp(u):i==="http://www.w3.org/2000/svg"&&u==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Ji,xp=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(u,p,y,C){MSApp.execUnsafeLocalFunction(function(){return i(u,p,y,C)})}:i}(function(i,u){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=u;else{for(Ji=Ji||document.createElement("div"),Ji.innerHTML="<svg>"+u.valueOf().toString()+"</svg>",u=Ji.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;u.firstChild;)i.appendChild(u.firstChild)}});function ks(i,u){if(u){var p=i.firstChild;if(p&&p===i.lastChild&&p.nodeType===3){p.nodeValue=u;return}}i.textContent=u}var Bs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lC=["Webkit","ms","Moz","O"];Object.keys(Bs).forEach(function(i){lC.forEach(function(u){u=u+i.charAt(0).toUpperCase()+i.substring(1),Bs[u]=Bs[i]})});function Sp(i,u,p){return u==null||typeof u=="boolean"||u===""?"":p||typeof u!="number"||u===0||Bs.hasOwnProperty(i)&&Bs[i]?(""+u).trim():u+"px"}function Cp(i,u){i=i.style;for(var p in u)if(u.hasOwnProperty(p)){var y=p.indexOf("--")===0,C=Sp(p,u[p],y);p==="float"&&(p="cssFloat"),y?i.setProperty(p,C):i[p]=C}}var gC=G({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ac(i,u){if(u){if(gC[i]&&(u.children!=null||u.dangerouslySetInnerHTML!=null))throw Error(n(137,i));if(u.dangerouslySetInnerHTML!=null){if(u.children!=null)throw Error(n(60));if(typeof u.dangerouslySetInnerHTML!="object"||!("__html"in u.dangerouslySetInnerHTML))throw Error(n(61))}if(u.style!=null&&typeof u.style!="object")throw Error(n(62))}}function jc(i,u){if(i.indexOf("-")===-1)return typeof u.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kc=null;function Pc(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Xc=null,Na=null,Ua=null;function wp(i){if(i=ti(i)){if(typeof Xc!="function")throw Error(n(280));var u=i.stateNode;u&&(u=Eo(u),Xc(i.stateNode,i.type,u))}}function Ep(i){Na?Ua?Ua.push(i):Ua=[i]:Na=i}function mp(){if(Na){var i=Na,u=Ua;if(Ua=Na=null,wp(i),u)for(i=0;i<u.length;i++)wp(u[i])}}function Rp(i,u){return i(u)}function Op(){}var Ic=!1;function Dp(i,u,p){if(Ic)return i(u,p);Ic=!0;try{return Rp(i,u,p)}finally{Ic=!1,(Na!==null||Ua!==null)&&(Op(),mp())}}function Fs(i,u){var p=i.stateNode;if(p===null)return null;var y=Eo(p);if(y===null)return null;p=y[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(i=i.type,y=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!y;break e;default:i=!1}if(i)return null;if(p&&typeof p!="function")throw Error(n(231,u,typeof p));return p}var Yc=!1;if(c)try{var Ns={};Object.defineProperty(Ns,"passive",{get:function(){Yc=!0}}),window.addEventListener("test",Ns,Ns),window.removeEventListener("test",Ns,Ns)}catch{Yc=!1}function pC(i,u,p,y,C,E,_,F,$){var I=Array.prototype.slice.call(arguments,3);try{u.apply(p,I)}catch(ee){this.onError(ee)}}var Us=!1,eo=null,to=!1,qc=null,hC={onError:function(i){Us=!0,eo=i}};function dC(i,u,p,y,C,E,_,F,$){Us=!1,eo=null,pC.apply(hC,arguments)}function vC(i,u,p,y,C,E,_,F,$){if(dC.apply(this,arguments),Us){if(Us){var I=eo;Us=!1,eo=null}else throw Error(n(198));to||(to=!0,qc=I)}}function Jr(i){var u=i,p=i;if(i.alternate)for(;u.return;)u=u.return;else{i=u;do u=i,u.flags&4098&&(p=u.return),i=u.return;while(i)}return u.tag===3?p:null}function Mp(i){if(i.tag===13){var u=i.memoizedState;if(u===null&&(i=i.alternate,i!==null&&(u=i.memoizedState)),u!==null)return u.dehydrated}return null}function Lp(i){if(Jr(i)!==i)throw Error(n(188))}function yC(i){var u=i.alternate;if(!u){if(u=Jr(i),u===null)throw Error(n(188));return u!==i?null:i}for(var p=i,y=u;;){var C=p.return;if(C===null)break;var E=C.alternate;if(E===null){if(y=C.return,y!==null){p=y;continue}break}if(C.child===E.child){for(E=C.child;E;){if(E===p)return Lp(C),i;if(E===y)return Lp(C),u;E=E.sibling}throw Error(n(188))}if(p.return!==y.return)p=C,y=E;else{for(var _=!1,F=C.child;F;){if(F===p){_=!0,p=C,y=E;break}if(F===y){_=!0,y=C,p=E;break}F=F.sibling}if(!_){for(F=E.child;F;){if(F===p){_=!0,p=E,y=C;break}if(F===y){_=!0,y=E,p=C;break}F=F.sibling}if(!_)throw Error(n(189))}}if(p.alternate!==y)throw Error(n(190))}if(p.tag!==3)throw Error(n(188));return p.stateNode.current===p?i:u}function _p(i){return i=yC(i),i!==null?Vp(i):null}function Vp(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var u=Vp(i);if(u!==null)return u;i=i.sibling}return null}var kp=e.unstable_scheduleCallback,Bp=e.unstable_cancelCallback,TC=e.unstable_shouldYield,xC=e.unstable_requestPaint,Qe=e.unstable_now,SC=e.unstable_getCurrentPriorityLevel,Qc=e.unstable_ImmediatePriority,Fp=e.unstable_UserBlockingPriority,no=e.unstable_NormalPriority,CC=e.unstable_LowPriority,Np=e.unstable_IdlePriority,ro=null,Dn=null;function wC(i){if(Dn&&typeof Dn.onCommitFiberRoot=="function")try{Dn.onCommitFiberRoot(ro,i,void 0,(i.current.flags&128)===128)}catch{}}var fn=Math.clz32?Math.clz32:RC,EC=Math.log,mC=Math.LN2;function RC(i){return i>>>=0,i===0?32:31-(EC(i)/mC|0)|0}var ao=64,so=4194304;function Gs(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function io(i,u){var p=i.pendingLanes;if(p===0)return 0;var y=0,C=i.suspendedLanes,E=i.pingedLanes,_=p&268435455;if(_!==0){var F=_&~C;F!==0?y=Gs(F):(E&=_,E!==0&&(y=Gs(E)))}else _=p&~C,_!==0?y=Gs(_):E!==0&&(y=Gs(E));if(y===0)return 0;if(u!==0&&u!==y&&!(u&C)&&(C=y&-y,E=u&-u,C>=E||C===16&&(E&4194240)!==0))return u;if(y&4&&(y|=p&16),u=i.entangledLanes,u!==0)for(i=i.entanglements,u&=y;0<u;)p=31-fn(u),C=1<<p,y|=i[p],u&=~C;return y}function OC(i,u){switch(i){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function DC(i,u){for(var p=i.suspendedLanes,y=i.pingedLanes,C=i.expirationTimes,E=i.pendingLanes;0<E;){var _=31-fn(E),F=1<<_,$=C[_];$===-1?(!(F&p)||F&y)&&(C[_]=OC(F,u)):$<=u&&(i.expiredLanes|=F),E&=~F}}function Zc(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Up(){var i=ao;return ao<<=1,!(ao&4194240)&&(ao=64),i}function Jc(i){for(var u=[],p=0;31>p;p++)u.push(i);return u}function $s(i,u,p){i.pendingLanes|=u,u!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,u=31-fn(u),i[u]=p}function MC(i,u){var p=i.pendingLanes&~u;i.pendingLanes=u,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=u,i.mutableReadLanes&=u,i.entangledLanes&=u,u=i.entanglements;var y=i.eventTimes;for(i=i.expirationTimes;0<p;){var C=31-fn(p),E=1<<C;u[C]=0,y[C]=-1,i[C]=-1,p&=~E}}function ef(i,u){var p=i.entangledLanes|=u;for(i=i.entanglements;p;){var y=31-fn(p),C=1<<y;C&u|i[y]&u&&(i[y]|=u),p&=~C}}var Fe=0;function Gp(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var $p,tf,zp,Wp,Hp,nf=!1,oo=[],vr=null,yr=null,Tr=null,zs=new Map,Ws=new Map,xr=[],LC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bp(i,u){switch(i){case"focusin":case"focusout":vr=null;break;case"dragenter":case"dragleave":yr=null;break;case"mouseover":case"mouseout":Tr=null;break;case"pointerover":case"pointerout":zs.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ws.delete(u.pointerId)}}function Hs(i,u,p,y,C,E){return i===null||i.nativeEvent!==E?(i={blockedOn:u,domEventName:p,eventSystemFlags:y,nativeEvent:E,targetContainers:[C]},u!==null&&(u=ti(u),u!==null&&tf(u)),i):(i.eventSystemFlags|=y,u=i.targetContainers,C!==null&&u.indexOf(C)===-1&&u.push(C),i)}function _C(i,u,p,y,C){switch(u){case"focusin":return vr=Hs(vr,i,u,p,y,C),!0;case"dragenter":return yr=Hs(yr,i,u,p,y,C),!0;case"mouseover":return Tr=Hs(Tr,i,u,p,y,C),!0;case"pointerover":var E=C.pointerId;return zs.set(E,Hs(zs.get(E)||null,i,u,p,y,C)),!0;case"gotpointercapture":return E=C.pointerId,Ws.set(E,Hs(Ws.get(E)||null,i,u,p,y,C)),!0}return!1}function Ap(i){var u=ea(i.target);if(u!==null){var p=Jr(u);if(p!==null){if(u=p.tag,u===13){if(u=Mp(p),u!==null){i.blockedOn=u,Hp(i.priority,function(){zp(p)});return}}else if(u===3&&p.stateNode.current.memoizedState.isDehydrated){i.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}i.blockedOn=null}function uo(i){if(i.blockedOn!==null)return!1;for(var u=i.targetContainers;0<u.length;){var p=af(i.domEventName,i.eventSystemFlags,u[0],i.nativeEvent);if(p===null){p=i.nativeEvent;var y=new p.constructor(p.type,p);Kc=y,p.target.dispatchEvent(y),Kc=null}else return u=ti(p),u!==null&&tf(u),i.blockedOn=p,!1;u.shift()}return!0}function jp(i,u,p){uo(i)&&p.delete(u)}function VC(){nf=!1,vr!==null&&uo(vr)&&(vr=null),yr!==null&&uo(yr)&&(yr=null),Tr!==null&&uo(Tr)&&(Tr=null),zs.forEach(jp),Ws.forEach(jp)}function bs(i,u){i.blockedOn===u&&(i.blockedOn=null,nf||(nf=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,VC)))}function As(i){function u(C){return bs(C,i)}if(0<oo.length){bs(oo[0],i);for(var p=1;p<oo.length;p++){var y=oo[p];y.blockedOn===i&&(y.blockedOn=null)}}for(vr!==null&&bs(vr,i),yr!==null&&bs(yr,i),Tr!==null&&bs(Tr,i),zs.forEach(u),Ws.forEach(u),p=0;p<xr.length;p++)y=xr[p],y.blockedOn===i&&(y.blockedOn=null);for(;0<xr.length&&(p=xr[0],p.blockedOn===null);)Ap(p),p.blockedOn===null&&xr.shift()}var Ga=R.ReactCurrentBatchConfig,co=!0;function kC(i,u,p,y){var C=Fe,E=Ga.transition;Ga.transition=null;try{Fe=1,rf(i,u,p,y)}finally{Fe=C,Ga.transition=E}}function BC(i,u,p,y){var C=Fe,E=Ga.transition;Ga.transition=null;try{Fe=4,rf(i,u,p,y)}finally{Fe=C,Ga.transition=E}}function rf(i,u,p,y){if(co){var C=af(i,u,p,y);if(C===null)wf(i,u,y,fo,p),bp(i,y);else if(_C(C,i,u,p,y))y.stopPropagation();else if(bp(i,y),u&4&&-1<LC.indexOf(i)){for(;C!==null;){var E=ti(C);if(E!==null&&$p(E),E=af(i,u,p,y),E===null&&wf(i,u,y,fo,p),E===C)break;C=E}C!==null&&y.stopPropagation()}else wf(i,u,y,null,p)}}var fo=null;function af(i,u,p,y){if(fo=null,i=Pc(y),i=ea(i),i!==null)if(u=Jr(i),u===null)i=null;else if(p=u.tag,p===13){if(i=Mp(u),i!==null)return i;i=null}else if(p===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;i=null}else u!==i&&(i=null);return fo=i,null}function Kp(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(SC()){case Qc:return 1;case Fp:return 4;case no:case CC:return 16;case Np:return 536870912;default:return 16}default:return 16}}var Sr=null,sf=null,lo=null;function Pp(){if(lo)return lo;var i,u=sf,p=u.length,y,C="value"in Sr?Sr.value:Sr.textContent,E=C.length;for(i=0;i<p&&u[i]===C[i];i++);var _=p-i;for(y=1;y<=_&&u[p-y]===C[E-y];y++);return lo=C.slice(i,1<y?1-y:void 0)}function go(i){var u=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&u===13&&(i=13)):i=u,i===10&&(i=13),32<=i||i===13?i:0}function po(){return!0}function Xp(){return!1}function At(i){function u(p,y,C,E,_){this._reactName=p,this._targetInst=C,this.type=y,this.nativeEvent=E,this.target=_,this.currentTarget=null;for(var F in i)i.hasOwnProperty(F)&&(p=i[F],this[F]=p?p(E):E[F]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?po:Xp,this.isPropagationStopped=Xp,this}return G(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=po)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=po)},persist:function(){},isPersistent:po}),u}var $a={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},of=At($a),js=G({},$a,{view:0,detail:0}),FC=At(js),uf,cf,Ks,ho=G({},js,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lf,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ks&&(Ks&&i.type==="mousemove"?(uf=i.screenX-Ks.screenX,cf=i.screenY-Ks.screenY):cf=uf=0,Ks=i),uf)},movementY:function(i){return"movementY"in i?i.movementY:cf}}),Ip=At(ho),NC=G({},ho,{dataTransfer:0}),UC=At(NC),GC=G({},js,{relatedTarget:0}),ff=At(GC),$C=G({},$a,{animationName:0,elapsedTime:0,pseudoElement:0}),zC=At($C),WC=G({},$a,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),HC=At(WC),bC=G({},$a,{data:0}),Yp=At(bC),AC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},KC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function PC(i){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(i):(i=KC[i])?!!u[i]:!1}function lf(){return PC}var XC=G({},js,{key:function(i){if(i.key){var u=AC[i.key]||i.key;if(u!=="Unidentified")return u}return i.type==="keypress"?(i=go(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?jC[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lf,charCode:function(i){return i.type==="keypress"?go(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?go(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),IC=At(XC),YC=G({},ho,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qp=At(YC),qC=G({},js,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lf}),QC=At(qC),ZC=G({},$a,{propertyName:0,elapsedTime:0,pseudoElement:0}),JC=At(ZC),ew=G({},ho,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),tw=At(ew),nw=[9,13,27,32],gf=c&&"CompositionEvent"in window,Ps=null;c&&"documentMode"in document&&(Ps=document.documentMode);var rw=c&&"TextEvent"in window&&!Ps,Qp=c&&(!gf||Ps&&8<Ps&&11>=Ps),Zp=" ",Jp=!1;function e0(i,u){switch(i){case"keyup":return nw.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function t0(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var za=!1;function aw(i,u){switch(i){case"compositionend":return t0(u);case"keypress":return u.which!==32?null:(Jp=!0,Zp);case"textInput":return i=u.data,i===Zp&&Jp?null:i;default:return null}}function sw(i,u){if(za)return i==="compositionend"||!gf&&e0(i,u)?(i=Pp(),lo=sf=Sr=null,za=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return Qp&&u.locale!=="ko"?null:u.data;default:return null}}var iw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function n0(i){var u=i&&i.nodeName&&i.nodeName.toLowerCase();return u==="input"?!!iw[i.type]:u==="textarea"}function r0(i,u,p,y){Ep(y),u=So(u,"onChange"),0<u.length&&(p=new of("onChange","change",null,p,y),i.push({event:p,listeners:u}))}var Xs=null,Is=null;function ow(i){C0(i,0)}function vo(i){var u=ja(i);if(lp(u))return i}function uw(i,u){if(i==="change")return u}var a0=!1;if(c){var pf;if(c){var hf="oninput"in document;if(!hf){var s0=document.createElement("div");s0.setAttribute("oninput","return;"),hf=typeof s0.oninput=="function"}pf=hf}else pf=!1;a0=pf&&(!document.documentMode||9<document.documentMode)}function i0(){Xs&&(Xs.detachEvent("onpropertychange",o0),Is=Xs=null)}function o0(i){if(i.propertyName==="value"&&vo(Is)){var u=[];r0(u,Is,i,Pc(i)),Dp(ow,u)}}function cw(i,u,p){i==="focusin"?(i0(),Xs=u,Is=p,Xs.attachEvent("onpropertychange",o0)):i==="focusout"&&i0()}function fw(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return vo(Is)}function lw(i,u){if(i==="click")return vo(u)}function gw(i,u){if(i==="input"||i==="change")return vo(u)}function pw(i,u){return i===u&&(i!==0||1/i===1/u)||i!==i&&u!==u}var ln=typeof Object.is=="function"?Object.is:pw;function Ys(i,u){if(ln(i,u))return!0;if(typeof i!="object"||i===null||typeof u!="object"||u===null)return!1;var p=Object.keys(i),y=Object.keys(u);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var C=p[y];if(!f.call(u,C)||!ln(i[C],u[C]))return!1}return!0}function u0(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function c0(i,u){var p=u0(i);i=0;for(var y;p;){if(p.nodeType===3){if(y=i+p.textContent.length,i<=u&&y>=u)return{node:p,offset:u-i};i=y}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=u0(p)}}function f0(i,u){return i&&u?i===u?!0:i&&i.nodeType===3?!1:u&&u.nodeType===3?f0(i,u.parentNode):"contains"in i?i.contains(u):i.compareDocumentPosition?!!(i.compareDocumentPosition(u)&16):!1:!1}function l0(){for(var i=window,u=Zi();u instanceof i.HTMLIFrameElement;){try{var p=typeof u.contentWindow.location.href=="string"}catch{p=!1}if(p)i=u.contentWindow;else break;u=Zi(i.document)}return u}function df(i){var u=i&&i.nodeName&&i.nodeName.toLowerCase();return u&&(u==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||u==="textarea"||i.contentEditable==="true")}function hw(i){var u=l0(),p=i.focusedElem,y=i.selectionRange;if(u!==p&&p&&p.ownerDocument&&f0(p.ownerDocument.documentElement,p)){if(y!==null&&df(p)){if(u=y.start,i=y.end,i===void 0&&(i=u),"selectionStart"in p)p.selectionStart=u,p.selectionEnd=Math.min(i,p.value.length);else if(i=(u=p.ownerDocument||document)&&u.defaultView||window,i.getSelection){i=i.getSelection();var C=p.textContent.length,E=Math.min(y.start,C);y=y.end===void 0?E:Math.min(y.end,C),!i.extend&&E>y&&(C=y,y=E,E=C),C=c0(p,E);var _=c0(p,y);C&&_&&(i.rangeCount!==1||i.anchorNode!==C.node||i.anchorOffset!==C.offset||i.focusNode!==_.node||i.focusOffset!==_.offset)&&(u=u.createRange(),u.setStart(C.node,C.offset),i.removeAllRanges(),E>y?(i.addRange(u),i.extend(_.node,_.offset)):(u.setEnd(_.node,_.offset),i.addRange(u)))}}for(u=[],i=p;i=i.parentNode;)i.nodeType===1&&u.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<u.length;p++)i=u[p],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var dw=c&&"documentMode"in document&&11>=document.documentMode,Wa=null,vf=null,qs=null,yf=!1;function g0(i,u,p){var y=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;yf||Wa==null||Wa!==Zi(y)||(y=Wa,"selectionStart"in y&&df(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),qs&&Ys(qs,y)||(qs=y,y=So(vf,"onSelect"),0<y.length&&(u=new of("onSelect","select",null,u,p),i.push({event:u,listeners:y}),u.target=Wa)))}function yo(i,u){var p={};return p[i.toLowerCase()]=u.toLowerCase(),p["Webkit"+i]="webkit"+u,p["Moz"+i]="moz"+u,p}var Ha={animationend:yo("Animation","AnimationEnd"),animationiteration:yo("Animation","AnimationIteration"),animationstart:yo("Animation","AnimationStart"),transitionend:yo("Transition","TransitionEnd")},Tf={},p0={};c&&(p0=document.createElement("div").style,"AnimationEvent"in window||(delete Ha.animationend.animation,delete Ha.animationiteration.animation,delete Ha.animationstart.animation),"TransitionEvent"in window||delete Ha.transitionend.transition);function To(i){if(Tf[i])return Tf[i];if(!Ha[i])return i;var u=Ha[i],p;for(p in u)if(u.hasOwnProperty(p)&&p in p0)return Tf[i]=u[p];return i}var h0=To("animationend"),d0=To("animationiteration"),v0=To("animationstart"),y0=To("transitionend"),T0=new Map,x0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cr(i,u){T0.set(i,u),s(u,[i])}for(var xf=0;xf<x0.length;xf++){var Sf=x0[xf],vw=Sf.toLowerCase(),yw=Sf[0].toUpperCase()+Sf.slice(1);Cr(vw,"on"+yw)}Cr(h0,"onAnimationEnd"),Cr(d0,"onAnimationIteration"),Cr(v0,"onAnimationStart"),Cr("dblclick","onDoubleClick"),Cr("focusin","onFocus"),Cr("focusout","onBlur"),Cr(y0,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qs));function S0(i,u,p){var y=i.type||"unknown-event";i.currentTarget=p,vC(y,u,void 0,i),i.currentTarget=null}function C0(i,u){u=(u&4)!==0;for(var p=0;p<i.length;p++){var y=i[p],C=y.event;y=y.listeners;e:{var E=void 0;if(u)for(var _=y.length-1;0<=_;_--){var F=y[_],$=F.instance,I=F.currentTarget;if(F=F.listener,$!==E&&C.isPropagationStopped())break e;S0(C,F,I),E=$}else for(_=0;_<y.length;_++){if(F=y[_],$=F.instance,I=F.currentTarget,F=F.listener,$!==E&&C.isPropagationStopped())break e;S0(C,F,I),E=$}}}if(to)throw i=qc,to=!1,qc=null,i}function We(i,u){var p=u[Mf];p===void 0&&(p=u[Mf]=new Set);var y=i+"__bubble";p.has(y)||(w0(u,i,2,!1),p.add(y))}function Cf(i,u,p){var y=0;u&&(y|=4),w0(p,i,y,u)}var xo="_reactListening"+Math.random().toString(36).slice(2);function Zs(i){if(!i[xo]){i[xo]=!0,r.forEach(function(p){p!=="selectionchange"&&(Tw.has(p)||Cf(p,!1,i),Cf(p,!0,i))});var u=i.nodeType===9?i:i.ownerDocument;u===null||u[xo]||(u[xo]=!0,Cf("selectionchange",!1,u))}}function w0(i,u,p,y){switch(Kp(u)){case 1:var C=kC;break;case 4:C=BC;break;default:C=rf}p=C.bind(null,u,p,i),C=void 0,!Yc||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(C=!0),y?C!==void 0?i.addEventListener(u,p,{capture:!0,passive:C}):i.addEventListener(u,p,!0):C!==void 0?i.addEventListener(u,p,{passive:C}):i.addEventListener(u,p,!1)}function wf(i,u,p,y,C){var E=y;if(!(u&1)&&!(u&2)&&y!==null)e:for(;;){if(y===null)return;var _=y.tag;if(_===3||_===4){var F=y.stateNode.containerInfo;if(F===C||F.nodeType===8&&F.parentNode===C)break;if(_===4)for(_=y.return;_!==null;){var $=_.tag;if(($===3||$===4)&&($=_.stateNode.containerInfo,$===C||$.nodeType===8&&$.parentNode===C))return;_=_.return}for(;F!==null;){if(_=ea(F),_===null)return;if($=_.tag,$===5||$===6){y=E=_;continue e}F=F.parentNode}}y=y.return}Dp(function(){var I=E,ee=Pc(p),te=[];e:{var J=T0.get(i);if(J!==void 0){var ie=of,ue=i;switch(i){case"keypress":if(go(p)===0)break e;case"keydown":case"keyup":ie=IC;break;case"focusin":ue="focus",ie=ff;break;case"focusout":ue="blur",ie=ff;break;case"beforeblur":case"afterblur":ie=ff;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=Ip;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=UC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=QC;break;case h0:case d0:case v0:ie=zC;break;case y0:ie=JC;break;case"scroll":ie=FC;break;case"wheel":ie=tw;break;case"copy":case"cut":case"paste":ie=HC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=qp}var ce=(u&4)!==0,Ze=!ce&&i==="scroll",K=ce?J!==null?J+"Capture":null:J;ce=[];for(var W=I,X;W!==null;){X=W;var re=X.stateNode;if(X.tag===5&&re!==null&&(X=re,K!==null&&(re=Fs(W,K),re!=null&&ce.push(Js(W,re,X)))),Ze)break;W=W.return}0<ce.length&&(J=new ie(J,ue,null,p,ee),te.push({event:J,listeners:ce}))}}if(!(u&7)){e:{if(J=i==="mouseover"||i==="pointerover",ie=i==="mouseout"||i==="pointerout",J&&p!==Kc&&(ue=p.relatedTarget||p.fromElement)&&(ea(ue)||ue[Yn]))break e;if((ie||J)&&(J=ee.window===ee?ee:(J=ee.ownerDocument)?J.defaultView||J.parentWindow:window,ie?(ue=p.relatedTarget||p.toElement,ie=I,ue=ue?ea(ue):null,ue!==null&&(Ze=Jr(ue),ue!==Ze||ue.tag!==5&&ue.tag!==6)&&(ue=null)):(ie=null,ue=I),ie!==ue)){if(ce=Ip,re="onMouseLeave",K="onMouseEnter",W="mouse",(i==="pointerout"||i==="pointerover")&&(ce=qp,re="onPointerLeave",K="onPointerEnter",W="pointer"),Ze=ie==null?J:ja(ie),X=ue==null?J:ja(ue),J=new ce(re,W+"leave",ie,p,ee),J.target=Ze,J.relatedTarget=X,re=null,ea(ee)===I&&(ce=new ce(K,W+"enter",ue,p,ee),ce.target=X,ce.relatedTarget=Ze,re=ce),Ze=re,ie&&ue)t:{for(ce=ie,K=ue,W=0,X=ce;X;X=ba(X))W++;for(X=0,re=K;re;re=ba(re))X++;for(;0<W-X;)ce=ba(ce),W--;for(;0<X-W;)K=ba(K),X--;for(;W--;){if(ce===K||K!==null&&ce===K.alternate)break t;ce=ba(ce),K=ba(K)}ce=null}else ce=null;ie!==null&&E0(te,J,ie,ce,!1),ue!==null&&Ze!==null&&E0(te,Ze,ue,ce,!0)}}e:{if(J=I?ja(I):window,ie=J.nodeName&&J.nodeName.toLowerCase(),ie==="select"||ie==="input"&&J.type==="file")var fe=uw;else if(n0(J))if(a0)fe=gw;else{fe=fw;var ge=cw}else(ie=J.nodeName)&&ie.toLowerCase()==="input"&&(J.type==="checkbox"||J.type==="radio")&&(fe=lw);if(fe&&(fe=fe(i,I))){r0(te,fe,p,ee);break e}ge&&ge(i,J,I),i==="focusout"&&(ge=J._wrapperState)&&ge.controlled&&J.type==="number"&&Wc(J,"number",J.value)}switch(ge=I?ja(I):window,i){case"focusin":(n0(ge)||ge.contentEditable==="true")&&(Wa=ge,vf=I,qs=null);break;case"focusout":qs=vf=Wa=null;break;case"mousedown":yf=!0;break;case"contextmenu":case"mouseup":case"dragend":yf=!1,g0(te,p,ee);break;case"selectionchange":if(dw)break;case"keydown":case"keyup":g0(te,p,ee)}var pe;if(gf)e:{switch(i){case"compositionstart":var he="onCompositionStart";break e;case"compositionend":he="onCompositionEnd";break e;case"compositionupdate":he="onCompositionUpdate";break e}he=void 0}else za?e0(i,p)&&(he="onCompositionEnd"):i==="keydown"&&p.keyCode===229&&(he="onCompositionStart");he&&(Qp&&p.locale!=="ko"&&(za||he!=="onCompositionStart"?he==="onCompositionEnd"&&za&&(pe=Pp()):(Sr=ee,sf="value"in Sr?Sr.value:Sr.textContent,za=!0)),ge=So(I,he),0<ge.length&&(he=new Yp(he,i,null,p,ee),te.push({event:he,listeners:ge}),pe?he.data=pe:(pe=t0(p),pe!==null&&(he.data=pe)))),(pe=rw?aw(i,p):sw(i,p))&&(I=So(I,"onBeforeInput"),0<I.length&&(ee=new Yp("onBeforeInput","beforeinput",null,p,ee),te.push({event:ee,listeners:I}),ee.data=pe))}C0(te,u)})}function Js(i,u,p){return{instance:i,listener:u,currentTarget:p}}function So(i,u){for(var p=u+"Capture",y=[];i!==null;){var C=i,E=C.stateNode;C.tag===5&&E!==null&&(C=E,E=Fs(i,p),E!=null&&y.unshift(Js(i,E,C)),E=Fs(i,u),E!=null&&y.push(Js(i,E,C))),i=i.return}return y}function ba(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function E0(i,u,p,y,C){for(var E=u._reactName,_=[];p!==null&&p!==y;){var F=p,$=F.alternate,I=F.stateNode;if($!==null&&$===y)break;F.tag===5&&I!==null&&(F=I,C?($=Fs(p,E),$!=null&&_.unshift(Js(p,$,F))):C||($=Fs(p,E),$!=null&&_.push(Js(p,$,F)))),p=p.return}_.length!==0&&i.push({event:u,listeners:_})}var xw=/\r\n?/g,Sw=/\u0000|\uFFFD/g;function m0(i){return(typeof i=="string"?i:""+i).replace(xw,`
`).replace(Sw,"")}function Co(i,u,p){if(u=m0(u),m0(i)!==u&&p)throw Error(n(425))}function wo(){}var Ef=null,mf=null;function Rf(i,u){return i==="textarea"||i==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var Of=typeof setTimeout=="function"?setTimeout:void 0,Cw=typeof clearTimeout=="function"?clearTimeout:void 0,R0=typeof Promise=="function"?Promise:void 0,ww=typeof queueMicrotask=="function"?queueMicrotask:typeof R0<"u"?function(i){return R0.resolve(null).then(i).catch(Ew)}:Of;function Ew(i){setTimeout(function(){throw i})}function Df(i,u){var p=u,y=0;do{var C=p.nextSibling;if(i.removeChild(p),C&&C.nodeType===8)if(p=C.data,p==="/$"){if(y===0){i.removeChild(C),As(u);return}y--}else p!=="$"&&p!=="$?"&&p!=="$!"||y++;p=C}while(p);As(u)}function wr(i){for(;i!=null;i=i.nextSibling){var u=i.nodeType;if(u===1||u===3)break;if(u===8){if(u=i.data,u==="$"||u==="$!"||u==="$?")break;if(u==="/$")return null}}return i}function O0(i){i=i.previousSibling;for(var u=0;i;){if(i.nodeType===8){var p=i.data;if(p==="$"||p==="$!"||p==="$?"){if(u===0)return i;u--}else p==="/$"&&u++}i=i.previousSibling}return null}var Aa=Math.random().toString(36).slice(2),Mn="__reactFiber$"+Aa,ei="__reactProps$"+Aa,Yn="__reactContainer$"+Aa,Mf="__reactEvents$"+Aa,mw="__reactListeners$"+Aa,Rw="__reactHandles$"+Aa;function ea(i){var u=i[Mn];if(u)return u;for(var p=i.parentNode;p;){if(u=p[Yn]||p[Mn]){if(p=u.alternate,u.child!==null||p!==null&&p.child!==null)for(i=O0(i);i!==null;){if(p=i[Mn])return p;i=O0(i)}return u}i=p,p=i.parentNode}return null}function ti(i){return i=i[Mn]||i[Yn],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function ja(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(n(33))}function Eo(i){return i[ei]||null}var Lf=[],Ka=-1;function Er(i){return{current:i}}function He(i){0>Ka||(i.current=Lf[Ka],Lf[Ka]=null,Ka--)}function Ue(i,u){Ka++,Lf[Ka]=i.current,i.current=u}var mr={},Ct=Er(mr),Ut=Er(!1),ta=mr;function Pa(i,u){var p=i.type.contextTypes;if(!p)return mr;var y=i.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===u)return y.__reactInternalMemoizedMaskedChildContext;var C={},E;for(E in p)C[E]=u[E];return y&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=u,i.__reactInternalMemoizedMaskedChildContext=C),C}function Gt(i){return i=i.childContextTypes,i!=null}function mo(){He(Ut),He(Ct)}function D0(i,u,p){if(Ct.current!==mr)throw Error(n(168));Ue(Ct,u),Ue(Ut,p)}function M0(i,u,p){var y=i.stateNode;if(u=u.childContextTypes,typeof y.getChildContext!="function")return p;y=y.getChildContext();for(var C in y)if(!(C in u))throw Error(n(108,ye(i)||"Unknown",C));return G({},p,y)}function Ro(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||mr,ta=Ct.current,Ue(Ct,i),Ue(Ut,Ut.current),!0}function L0(i,u,p){var y=i.stateNode;if(!y)throw Error(n(169));p?(i=M0(i,u,ta),y.__reactInternalMemoizedMergedChildContext=i,He(Ut),He(Ct),Ue(Ct,i)):He(Ut),Ue(Ut,p)}var qn=null,Oo=!1,_f=!1;function _0(i){qn===null?qn=[i]:qn.push(i)}function Ow(i){Oo=!0,_0(i)}function Rr(){if(!_f&&qn!==null){_f=!0;var i=0,u=Fe;try{var p=qn;for(Fe=1;i<p.length;i++){var y=p[i];do y=y(!0);while(y!==null)}qn=null,Oo=!1}catch(C){throw qn!==null&&(qn=qn.slice(i+1)),kp(Qc,Rr),C}finally{Fe=u,_f=!1}}return null}var Xa=[],Ia=0,Do=null,Mo=0,Qt=[],Zt=0,na=null,Qn=1,Zn="";function ra(i,u){Xa[Ia++]=Mo,Xa[Ia++]=Do,Do=i,Mo=u}function V0(i,u,p){Qt[Zt++]=Qn,Qt[Zt++]=Zn,Qt[Zt++]=na,na=i;var y=Qn;i=Zn;var C=32-fn(y)-1;y&=~(1<<C),p+=1;var E=32-fn(u)+C;if(30<E){var _=C-C%5;E=(y&(1<<_)-1).toString(32),y>>=_,C-=_,Qn=1<<32-fn(u)+C|p<<C|y,Zn=E+i}else Qn=1<<E|p<<C|y,Zn=i}function Vf(i){i.return!==null&&(ra(i,1),V0(i,1,0))}function kf(i){for(;i===Do;)Do=Xa[--Ia],Xa[Ia]=null,Mo=Xa[--Ia],Xa[Ia]=null;for(;i===na;)na=Qt[--Zt],Qt[Zt]=null,Zn=Qt[--Zt],Qt[Zt]=null,Qn=Qt[--Zt],Qt[Zt]=null}var jt=null,Kt=null,Ae=!1,gn=null;function k0(i,u){var p=nn(5,null,null,0);p.elementType="DELETED",p.stateNode=u,p.return=i,u=i.deletions,u===null?(i.deletions=[p],i.flags|=16):u.push(p)}function B0(i,u){switch(i.tag){case 5:var p=i.type;return u=u.nodeType!==1||p.toLowerCase()!==u.nodeName.toLowerCase()?null:u,u!==null?(i.stateNode=u,jt=i,Kt=wr(u.firstChild),!0):!1;case 6:return u=i.pendingProps===""||u.nodeType!==3?null:u,u!==null?(i.stateNode=u,jt=i,Kt=null,!0):!1;case 13:return u=u.nodeType!==8?null:u,u!==null?(p=na!==null?{id:Qn,overflow:Zn}:null,i.memoizedState={dehydrated:u,treeContext:p,retryLane:1073741824},p=nn(18,null,null,0),p.stateNode=u,p.return=i,i.child=p,jt=i,Kt=null,!0):!1;default:return!1}}function Bf(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Ff(i){if(Ae){var u=Kt;if(u){var p=u;if(!B0(i,u)){if(Bf(i))throw Error(n(418));u=wr(p.nextSibling);var y=jt;u&&B0(i,u)?k0(y,p):(i.flags=i.flags&-4097|2,Ae=!1,jt=i)}}else{if(Bf(i))throw Error(n(418));i.flags=i.flags&-4097|2,Ae=!1,jt=i}}}function F0(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;jt=i}function Lo(i){if(i!==jt)return!1;if(!Ae)return F0(i),Ae=!0,!1;var u;if((u=i.tag!==3)&&!(u=i.tag!==5)&&(u=i.type,u=u!=="head"&&u!=="body"&&!Rf(i.type,i.memoizedProps)),u&&(u=Kt)){if(Bf(i))throw N0(),Error(n(418));for(;u;)k0(i,u),u=wr(u.nextSibling)}if(F0(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));e:{for(i=i.nextSibling,u=0;i;){if(i.nodeType===8){var p=i.data;if(p==="/$"){if(u===0){Kt=wr(i.nextSibling);break e}u--}else p!=="$"&&p!=="$!"&&p!=="$?"||u++}i=i.nextSibling}Kt=null}}else Kt=jt?wr(i.stateNode.nextSibling):null;return!0}function N0(){for(var i=Kt;i;)i=wr(i.nextSibling)}function Ya(){Kt=jt=null,Ae=!1}function Nf(i){gn===null?gn=[i]:gn.push(i)}var Dw=R.ReactCurrentBatchConfig;function ni(i,u,p){if(i=p.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(n(309));var y=p.stateNode}if(!y)throw Error(n(147,i));var C=y,E=""+i;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===E?u.ref:(u=function(_){var F=C.refs;_===null?delete F[E]:F[E]=_},u._stringRef=E,u)}if(typeof i!="string")throw Error(n(284));if(!p._owner)throw Error(n(290,i))}return i}function _o(i,u){throw i=Object.prototype.toString.call(u),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":i))}function U0(i){var u=i._init;return u(i._payload)}function G0(i){function u(K,W){if(i){var X=K.deletions;X===null?(K.deletions=[W],K.flags|=16):X.push(W)}}function p(K,W){if(!i)return null;for(;W!==null;)u(K,W),W=W.sibling;return null}function y(K,W){for(K=new Map;W!==null;)W.key!==null?K.set(W.key,W):K.set(W.index,W),W=W.sibling;return K}function C(K,W){return K=Br(K,W),K.index=0,K.sibling=null,K}function E(K,W,X){return K.index=X,i?(X=K.alternate,X!==null?(X=X.index,X<W?(K.flags|=2,W):X):(K.flags|=2,W)):(K.flags|=1048576,W)}function _(K){return i&&K.alternate===null&&(K.flags|=2),K}function F(K,W,X,re){return W===null||W.tag!==6?(W=Ol(X,K.mode,re),W.return=K,W):(W=C(W,X),W.return=K,W)}function $(K,W,X,re){var fe=X.type;return fe===V?ee(K,W,X.props.children,re,X.key):W!==null&&(W.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===ae&&U0(fe)===W.type)?(re=C(W,X.props),re.ref=ni(K,W,X),re.return=K,re):(re=eu(X.type,X.key,X.props,null,K.mode,re),re.ref=ni(K,W,X),re.return=K,re)}function I(K,W,X,re){return W===null||W.tag!==4||W.stateNode.containerInfo!==X.containerInfo||W.stateNode.implementation!==X.implementation?(W=Dl(X,K.mode,re),W.return=K,W):(W=C(W,X.children||[]),W.return=K,W)}function ee(K,W,X,re,fe){return W===null||W.tag!==7?(W=la(X,K.mode,re,fe),W.return=K,W):(W=C(W,X),W.return=K,W)}function te(K,W,X){if(typeof W=="string"&&W!==""||typeof W=="number")return W=Ol(""+W,K.mode,X),W.return=K,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case M:return X=eu(W.type,W.key,W.props,null,K.mode,X),X.ref=ni(K,null,W),X.return=K,X;case D:return W=Dl(W,K.mode,X),W.return=K,W;case ae:var re=W._init;return te(K,re(W._payload),X)}if(Vs(W)||j(W))return W=la(W,K.mode,X,null),W.return=K,W;_o(K,W)}return null}function J(K,W,X,re){var fe=W!==null?W.key:null;if(typeof X=="string"&&X!==""||typeof X=="number")return fe!==null?null:F(K,W,""+X,re);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case M:return X.key===fe?$(K,W,X,re):null;case D:return X.key===fe?I(K,W,X,re):null;case ae:return fe=X._init,J(K,W,fe(X._payload),re)}if(Vs(X)||j(X))return fe!==null?null:ee(K,W,X,re,null);_o(K,X)}return null}function ie(K,W,X,re,fe){if(typeof re=="string"&&re!==""||typeof re=="number")return K=K.get(X)||null,F(W,K,""+re,fe);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case M:return K=K.get(re.key===null?X:re.key)||null,$(W,K,re,fe);case D:return K=K.get(re.key===null?X:re.key)||null,I(W,K,re,fe);case ae:var ge=re._init;return ie(K,W,X,ge(re._payload),fe)}if(Vs(re)||j(re))return K=K.get(X)||null,ee(W,K,re,fe,null);_o(W,re)}return null}function ue(K,W,X,re){for(var fe=null,ge=null,pe=W,he=W=0,gt=null;pe!==null&&he<X.length;he++){pe.index>he?(gt=pe,pe=null):gt=pe.sibling;var Le=J(K,pe,X[he],re);if(Le===null){pe===null&&(pe=gt);break}i&&pe&&Le.alternate===null&&u(K,pe),W=E(Le,W,he),ge===null?fe=Le:ge.sibling=Le,ge=Le,pe=gt}if(he===X.length)return p(K,pe),Ae&&ra(K,he),fe;if(pe===null){for(;he<X.length;he++)pe=te(K,X[he],re),pe!==null&&(W=E(pe,W,he),ge===null?fe=pe:ge.sibling=pe,ge=pe);return Ae&&ra(K,he),fe}for(pe=y(K,pe);he<X.length;he++)gt=ie(pe,K,he,X[he],re),gt!==null&&(i&&gt.alternate!==null&&pe.delete(gt.key===null?he:gt.key),W=E(gt,W,he),ge===null?fe=gt:ge.sibling=gt,ge=gt);return i&&pe.forEach(function(Fr){return u(K,Fr)}),Ae&&ra(K,he),fe}function ce(K,W,X,re){var fe=j(X);if(typeof fe!="function")throw Error(n(150));if(X=fe.call(X),X==null)throw Error(n(151));for(var ge=fe=null,pe=W,he=W=0,gt=null,Le=X.next();pe!==null&&!Le.done;he++,Le=X.next()){pe.index>he?(gt=pe,pe=null):gt=pe.sibling;var Fr=J(K,pe,Le.value,re);if(Fr===null){pe===null&&(pe=gt);break}i&&pe&&Fr.alternate===null&&u(K,pe),W=E(Fr,W,he),ge===null?fe=Fr:ge.sibling=Fr,ge=Fr,pe=gt}if(Le.done)return p(K,pe),Ae&&ra(K,he),fe;if(pe===null){for(;!Le.done;he++,Le=X.next())Le=te(K,Le.value,re),Le!==null&&(W=E(Le,W,he),ge===null?fe=Le:ge.sibling=Le,ge=Le);return Ae&&ra(K,he),fe}for(pe=y(K,pe);!Le.done;he++,Le=X.next())Le=ie(pe,K,he,Le.value,re),Le!==null&&(i&&Le.alternate!==null&&pe.delete(Le.key===null?he:Le.key),W=E(Le,W,he),ge===null?fe=Le:ge.sibling=Le,ge=Le);return i&&pe.forEach(function(sE){return u(K,sE)}),Ae&&ra(K,he),fe}function Ze(K,W,X,re){if(typeof X=="object"&&X!==null&&X.type===V&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case M:e:{for(var fe=X.key,ge=W;ge!==null;){if(ge.key===fe){if(fe=X.type,fe===V){if(ge.tag===7){p(K,ge.sibling),W=C(ge,X.props.children),W.return=K,K=W;break e}}else if(ge.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===ae&&U0(fe)===ge.type){p(K,ge.sibling),W=C(ge,X.props),W.ref=ni(K,ge,X),W.return=K,K=W;break e}p(K,ge);break}else u(K,ge);ge=ge.sibling}X.type===V?(W=la(X.props.children,K.mode,re,X.key),W.return=K,K=W):(re=eu(X.type,X.key,X.props,null,K.mode,re),re.ref=ni(K,W,X),re.return=K,K=re)}return _(K);case D:e:{for(ge=X.key;W!==null;){if(W.key===ge)if(W.tag===4&&W.stateNode.containerInfo===X.containerInfo&&W.stateNode.implementation===X.implementation){p(K,W.sibling),W=C(W,X.children||[]),W.return=K,K=W;break e}else{p(K,W);break}else u(K,W);W=W.sibling}W=Dl(X,K.mode,re),W.return=K,K=W}return _(K);case ae:return ge=X._init,Ze(K,W,ge(X._payload),re)}if(Vs(X))return ue(K,W,X,re);if(j(X))return ce(K,W,X,re);_o(K,X)}return typeof X=="string"&&X!==""||typeof X=="number"?(X=""+X,W!==null&&W.tag===6?(p(K,W.sibling),W=C(W,X),W.return=K,K=W):(p(K,W),W=Ol(X,K.mode,re),W.return=K,K=W),_(K)):p(K,W)}return Ze}var qa=G0(!0),$0=G0(!1),Vo=Er(null),ko=null,Qa=null,Uf=null;function Gf(){Uf=Qa=ko=null}function $f(i){var u=Vo.current;He(Vo),i._currentValue=u}function zf(i,u,p){for(;i!==null;){var y=i.alternate;if((i.childLanes&u)!==u?(i.childLanes|=u,y!==null&&(y.childLanes|=u)):y!==null&&(y.childLanes&u)!==u&&(y.childLanes|=u),i===p)break;i=i.return}}function Za(i,u){ko=i,Uf=Qa=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&u&&($t=!0),i.firstContext=null)}function Jt(i){var u=i._currentValue;if(Uf!==i)if(i={context:i,memoizedValue:u,next:null},Qa===null){if(ko===null)throw Error(n(308));Qa=i,ko.dependencies={lanes:0,firstContext:i}}else Qa=Qa.next=i;return u}var aa=null;function Wf(i){aa===null?aa=[i]:aa.push(i)}function z0(i,u,p,y){var C=u.interleaved;return C===null?(p.next=p,Wf(u)):(p.next=C.next,C.next=p),u.interleaved=p,Jn(i,y)}function Jn(i,u){i.lanes|=u;var p=i.alternate;for(p!==null&&(p.lanes|=u),p=i,i=i.return;i!==null;)i.childLanes|=u,p=i.alternate,p!==null&&(p.childLanes|=u),p=i,i=i.return;return p.tag===3?p.stateNode:null}var Or=!1;function Hf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function W0(i,u){i=i.updateQueue,u.updateQueue===i&&(u.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function er(i,u){return{eventTime:i,lane:u,tag:0,payload:null,callback:null,next:null}}function Dr(i,u,p){var y=i.updateQueue;if(y===null)return null;if(y=y.shared,Me&2){var C=y.pending;return C===null?u.next=u:(u.next=C.next,C.next=u),y.pending=u,Jn(i,p)}return C=y.interleaved,C===null?(u.next=u,Wf(y)):(u.next=C.next,C.next=u),y.interleaved=u,Jn(i,p)}function Bo(i,u,p){if(u=u.updateQueue,u!==null&&(u=u.shared,(p&4194240)!==0)){var y=u.lanes;y&=i.pendingLanes,p|=y,u.lanes=p,ef(i,p)}}function H0(i,u){var p=i.updateQueue,y=i.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var C=null,E=null;if(p=p.firstBaseUpdate,p!==null){do{var _={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};E===null?C=E=_:E=E.next=_,p=p.next}while(p!==null);E===null?C=E=u:E=E.next=u}else C=E=u;p={baseState:y.baseState,firstBaseUpdate:C,lastBaseUpdate:E,shared:y.shared,effects:y.effects},i.updateQueue=p;return}i=p.lastBaseUpdate,i===null?p.firstBaseUpdate=u:i.next=u,p.lastBaseUpdate=u}function Fo(i,u,p,y){var C=i.updateQueue;Or=!1;var E=C.firstBaseUpdate,_=C.lastBaseUpdate,F=C.shared.pending;if(F!==null){C.shared.pending=null;var $=F,I=$.next;$.next=null,_===null?E=I:_.next=I,_=$;var ee=i.alternate;ee!==null&&(ee=ee.updateQueue,F=ee.lastBaseUpdate,F!==_&&(F===null?ee.firstBaseUpdate=I:F.next=I,ee.lastBaseUpdate=$))}if(E!==null){var te=C.baseState;_=0,ee=I=$=null,F=E;do{var J=F.lane,ie=F.eventTime;if((y&J)===J){ee!==null&&(ee=ee.next={eventTime:ie,lane:0,tag:F.tag,payload:F.payload,callback:F.callback,next:null});e:{var ue=i,ce=F;switch(J=u,ie=p,ce.tag){case 1:if(ue=ce.payload,typeof ue=="function"){te=ue.call(ie,te,J);break e}te=ue;break e;case 3:ue.flags=ue.flags&-65537|128;case 0:if(ue=ce.payload,J=typeof ue=="function"?ue.call(ie,te,J):ue,J==null)break e;te=G({},te,J);break e;case 2:Or=!0}}F.callback!==null&&F.lane!==0&&(i.flags|=64,J=C.effects,J===null?C.effects=[F]:J.push(F))}else ie={eventTime:ie,lane:J,tag:F.tag,payload:F.payload,callback:F.callback,next:null},ee===null?(I=ee=ie,$=te):ee=ee.next=ie,_|=J;if(F=F.next,F===null){if(F=C.shared.pending,F===null)break;J=F,F=J.next,J.next=null,C.lastBaseUpdate=J,C.shared.pending=null}}while(!0);if(ee===null&&($=te),C.baseState=$,C.firstBaseUpdate=I,C.lastBaseUpdate=ee,u=C.shared.interleaved,u!==null){C=u;do _|=C.lane,C=C.next;while(C!==u)}else E===null&&(C.shared.lanes=0);oa|=_,i.lanes=_,i.memoizedState=te}}function b0(i,u,p){if(i=u.effects,u.effects=null,i!==null)for(u=0;u<i.length;u++){var y=i[u],C=y.callback;if(C!==null){if(y.callback=null,y=p,typeof C!="function")throw Error(n(191,C));C.call(y)}}}var ri={},Ln=Er(ri),ai=Er(ri),si=Er(ri);function sa(i){if(i===ri)throw Error(n(174));return i}function bf(i,u){switch(Ue(si,u),Ue(ai,i),Ue(Ln,ri),i=u.nodeType,i){case 9:case 11:u=(u=u.documentElement)?u.namespaceURI:bc(null,"");break;default:i=i===8?u.parentNode:u,u=i.namespaceURI||null,i=i.tagName,u=bc(u,i)}He(Ln),Ue(Ln,u)}function Ja(){He(Ln),He(ai),He(si)}function A0(i){sa(si.current);var u=sa(Ln.current),p=bc(u,i.type);u!==p&&(Ue(ai,i),Ue(Ln,p))}function Af(i){ai.current===i&&(He(Ln),He(ai))}var Ke=Er(0);function No(i){for(var u=i;u!==null;){if(u.tag===13){var p=u.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||p.data==="$!"))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if(u.flags&128)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===i)break;for(;u.sibling===null;){if(u.return===null||u.return===i)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var jf=[];function Kf(){for(var i=0;i<jf.length;i++)jf[i]._workInProgressVersionPrimary=null;jf.length=0}var Uo=R.ReactCurrentDispatcher,Pf=R.ReactCurrentBatchConfig,ia=0,Pe=null,at=null,ft=null,Go=!1,ii=!1,oi=0,Mw=0;function wt(){throw Error(n(321))}function Xf(i,u){if(u===null)return!1;for(var p=0;p<u.length&&p<i.length;p++)if(!ln(i[p],u[p]))return!1;return!0}function If(i,u,p,y,C,E){if(ia=E,Pe=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,Uo.current=i===null||i.memoizedState===null?kw:Bw,i=p(y,C),ii){E=0;do{if(ii=!1,oi=0,25<=E)throw Error(n(301));E+=1,ft=at=null,u.updateQueue=null,Uo.current=Fw,i=p(y,C)}while(ii)}if(Uo.current=Wo,u=at!==null&&at.next!==null,ia=0,ft=at=Pe=null,Go=!1,u)throw Error(n(300));return i}function Yf(){var i=oi!==0;return oi=0,i}function _n(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ft===null?Pe.memoizedState=ft=i:ft=ft.next=i,ft}function en(){if(at===null){var i=Pe.alternate;i=i!==null?i.memoizedState:null}else i=at.next;var u=ft===null?Pe.memoizedState:ft.next;if(u!==null)ft=u,at=i;else{if(i===null)throw Error(n(310));at=i,i={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},ft===null?Pe.memoizedState=ft=i:ft=ft.next=i}return ft}function ui(i,u){return typeof u=="function"?u(i):u}function qf(i){var u=en(),p=u.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=i;var y=at,C=y.baseQueue,E=p.pending;if(E!==null){if(C!==null){var _=C.next;C.next=E.next,E.next=_}y.baseQueue=C=E,p.pending=null}if(C!==null){E=C.next,y=y.baseState;var F=_=null,$=null,I=E;do{var ee=I.lane;if((ia&ee)===ee)$!==null&&($=$.next={lane:0,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null}),y=I.hasEagerState?I.eagerState:i(y,I.action);else{var te={lane:ee,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null};$===null?(F=$=te,_=y):$=$.next=te,Pe.lanes|=ee,oa|=ee}I=I.next}while(I!==null&&I!==E);$===null?_=y:$.next=F,ln(y,u.memoizedState)||($t=!0),u.memoizedState=y,u.baseState=_,u.baseQueue=$,p.lastRenderedState=y}if(i=p.interleaved,i!==null){C=i;do E=C.lane,Pe.lanes|=E,oa|=E,C=C.next;while(C!==i)}else C===null&&(p.lanes=0);return[u.memoizedState,p.dispatch]}function Qf(i){var u=en(),p=u.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=i;var y=p.dispatch,C=p.pending,E=u.memoizedState;if(C!==null){p.pending=null;var _=C=C.next;do E=i(E,_.action),_=_.next;while(_!==C);ln(E,u.memoizedState)||($t=!0),u.memoizedState=E,u.baseQueue===null&&(u.baseState=E),p.lastRenderedState=E}return[E,y]}function j0(){}function K0(i,u){var p=Pe,y=en(),C=u(),E=!ln(y.memoizedState,C);if(E&&(y.memoizedState=C,$t=!0),y=y.queue,Zf(I0.bind(null,p,y,i),[i]),y.getSnapshot!==u||E||ft!==null&&ft.memoizedState.tag&1){if(p.flags|=2048,ci(9,X0.bind(null,p,y,C,u),void 0,null),lt===null)throw Error(n(349));ia&30||P0(p,u,C)}return C}function P0(i,u,p){i.flags|=16384,i={getSnapshot:u,value:p},u=Pe.updateQueue,u===null?(u={lastEffect:null,stores:null},Pe.updateQueue=u,u.stores=[i]):(p=u.stores,p===null?u.stores=[i]:p.push(i))}function X0(i,u,p,y){u.value=p,u.getSnapshot=y,Y0(u)&&q0(i)}function I0(i,u,p){return p(function(){Y0(u)&&q0(i)})}function Y0(i){var u=i.getSnapshot;i=i.value;try{var p=u();return!ln(i,p)}catch{return!0}}function q0(i){var u=Jn(i,1);u!==null&&vn(u,i,1,-1)}function Q0(i){var u=_n();return typeof i=="function"&&(i=i()),u.memoizedState=u.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ui,lastRenderedState:i},u.queue=i,i=i.dispatch=Vw.bind(null,Pe,i),[u.memoizedState,i]}function ci(i,u,p,y){return i={tag:i,create:u,destroy:p,deps:y,next:null},u=Pe.updateQueue,u===null?(u={lastEffect:null,stores:null},Pe.updateQueue=u,u.lastEffect=i.next=i):(p=u.lastEffect,p===null?u.lastEffect=i.next=i:(y=p.next,p.next=i,i.next=y,u.lastEffect=i)),i}function Z0(){return en().memoizedState}function $o(i,u,p,y){var C=_n();Pe.flags|=i,C.memoizedState=ci(1|u,p,void 0,y===void 0?null:y)}function zo(i,u,p,y){var C=en();y=y===void 0?null:y;var E=void 0;if(at!==null){var _=at.memoizedState;if(E=_.destroy,y!==null&&Xf(y,_.deps)){C.memoizedState=ci(u,p,E,y);return}}Pe.flags|=i,C.memoizedState=ci(1|u,p,E,y)}function J0(i,u){return $o(8390656,8,i,u)}function Zf(i,u){return zo(2048,8,i,u)}function eh(i,u){return zo(4,2,i,u)}function th(i,u){return zo(4,4,i,u)}function nh(i,u){if(typeof u=="function")return i=i(),u(i),function(){u(null)};if(u!=null)return i=i(),u.current=i,function(){u.current=null}}function rh(i,u,p){return p=p!=null?p.concat([i]):null,zo(4,4,nh.bind(null,u,i),p)}function Jf(){}function ah(i,u){var p=en();u=u===void 0?null:u;var y=p.memoizedState;return y!==null&&u!==null&&Xf(u,y[1])?y[0]:(p.memoizedState=[i,u],i)}function sh(i,u){var p=en();u=u===void 0?null:u;var y=p.memoizedState;return y!==null&&u!==null&&Xf(u,y[1])?y[0]:(i=i(),p.memoizedState=[i,u],i)}function ih(i,u,p){return ia&21?(ln(p,u)||(p=Up(),Pe.lanes|=p,oa|=p,i.baseState=!0),u):(i.baseState&&(i.baseState=!1,$t=!0),i.memoizedState=p)}function Lw(i,u){var p=Fe;Fe=p!==0&&4>p?p:4,i(!0);var y=Pf.transition;Pf.transition={};try{i(!1),u()}finally{Fe=p,Pf.transition=y}}function oh(){return en().memoizedState}function _w(i,u,p){var y=Vr(i);if(p={lane:y,action:p,hasEagerState:!1,eagerState:null,next:null},uh(i))ch(u,p);else if(p=z0(i,u,p,y),p!==null){var C=Mt();vn(p,i,y,C),fh(p,u,y)}}function Vw(i,u,p){var y=Vr(i),C={lane:y,action:p,hasEagerState:!1,eagerState:null,next:null};if(uh(i))ch(u,C);else{var E=i.alternate;if(i.lanes===0&&(E===null||E.lanes===0)&&(E=u.lastRenderedReducer,E!==null))try{var _=u.lastRenderedState,F=E(_,p);if(C.hasEagerState=!0,C.eagerState=F,ln(F,_)){var $=u.interleaved;$===null?(C.next=C,Wf(u)):(C.next=$.next,$.next=C),u.interleaved=C;return}}catch{}finally{}p=z0(i,u,C,y),p!==null&&(C=Mt(),vn(p,i,y,C),fh(p,u,y))}}function uh(i){var u=i.alternate;return i===Pe||u!==null&&u===Pe}function ch(i,u){ii=Go=!0;var p=i.pending;p===null?u.next=u:(u.next=p.next,p.next=u),i.pending=u}function fh(i,u,p){if(p&4194240){var y=u.lanes;y&=i.pendingLanes,p|=y,u.lanes=p,ef(i,p)}}var Wo={readContext:Jt,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useInsertionEffect:wt,useLayoutEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useMutableSource:wt,useSyncExternalStore:wt,useId:wt,unstable_isNewReconciler:!1},kw={readContext:Jt,useCallback:function(i,u){return _n().memoizedState=[i,u===void 0?null:u],i},useContext:Jt,useEffect:J0,useImperativeHandle:function(i,u,p){return p=p!=null?p.concat([i]):null,$o(4194308,4,nh.bind(null,u,i),p)},useLayoutEffect:function(i,u){return $o(4194308,4,i,u)},useInsertionEffect:function(i,u){return $o(4,2,i,u)},useMemo:function(i,u){var p=_n();return u=u===void 0?null:u,i=i(),p.memoizedState=[i,u],i},useReducer:function(i,u,p){var y=_n();return u=p!==void 0?p(u):u,y.memoizedState=y.baseState=u,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:u},y.queue=i,i=i.dispatch=_w.bind(null,Pe,i),[y.memoizedState,i]},useRef:function(i){var u=_n();return i={current:i},u.memoizedState=i},useState:Q0,useDebugValue:Jf,useDeferredValue:function(i){return _n().memoizedState=i},useTransition:function(){var i=Q0(!1),u=i[0];return i=Lw.bind(null,i[1]),_n().memoizedState=i,[u,i]},useMutableSource:function(){},useSyncExternalStore:function(i,u,p){var y=Pe,C=_n();if(Ae){if(p===void 0)throw Error(n(407));p=p()}else{if(p=u(),lt===null)throw Error(n(349));ia&30||P0(y,u,p)}C.memoizedState=p;var E={value:p,getSnapshot:u};return C.queue=E,J0(I0.bind(null,y,E,i),[i]),y.flags|=2048,ci(9,X0.bind(null,y,E,p,u),void 0,null),p},useId:function(){var i=_n(),u=lt.identifierPrefix;if(Ae){var p=Zn,y=Qn;p=(y&~(1<<32-fn(y)-1)).toString(32)+p,u=":"+u+"R"+p,p=oi++,0<p&&(u+="H"+p.toString(32)),u+=":"}else p=Mw++,u=":"+u+"r"+p.toString(32)+":";return i.memoizedState=u},unstable_isNewReconciler:!1},Bw={readContext:Jt,useCallback:ah,useContext:Jt,useEffect:Zf,useImperativeHandle:rh,useInsertionEffect:eh,useLayoutEffect:th,useMemo:sh,useReducer:qf,useRef:Z0,useState:function(){return qf(ui)},useDebugValue:Jf,useDeferredValue:function(i){var u=en();return ih(u,at.memoizedState,i)},useTransition:function(){var i=qf(ui)[0],u=en().memoizedState;return[i,u]},useMutableSource:j0,useSyncExternalStore:K0,useId:oh,unstable_isNewReconciler:!1},Fw={readContext:Jt,useCallback:ah,useContext:Jt,useEffect:Zf,useImperativeHandle:rh,useInsertionEffect:eh,useLayoutEffect:th,useMemo:sh,useReducer:Qf,useRef:Z0,useState:function(){return Qf(ui)},useDebugValue:Jf,useDeferredValue:function(i){var u=en();return at===null?u.memoizedState=i:ih(u,at.memoizedState,i)},useTransition:function(){var i=Qf(ui)[0],u=en().memoizedState;return[i,u]},useMutableSource:j0,useSyncExternalStore:K0,useId:oh,unstable_isNewReconciler:!1};function pn(i,u){if(i&&i.defaultProps){u=G({},u),i=i.defaultProps;for(var p in i)u[p]===void 0&&(u[p]=i[p]);return u}return u}function el(i,u,p,y){u=i.memoizedState,p=p(y,u),p=p==null?u:G({},u,p),i.memoizedState=p,i.lanes===0&&(i.updateQueue.baseState=p)}var Ho={isMounted:function(i){return(i=i._reactInternals)?Jr(i)===i:!1},enqueueSetState:function(i,u,p){i=i._reactInternals;var y=Mt(),C=Vr(i),E=er(y,C);E.payload=u,p!=null&&(E.callback=p),u=Dr(i,E,C),u!==null&&(vn(u,i,C,y),Bo(u,i,C))},enqueueReplaceState:function(i,u,p){i=i._reactInternals;var y=Mt(),C=Vr(i),E=er(y,C);E.tag=1,E.payload=u,p!=null&&(E.callback=p),u=Dr(i,E,C),u!==null&&(vn(u,i,C,y),Bo(u,i,C))},enqueueForceUpdate:function(i,u){i=i._reactInternals;var p=Mt(),y=Vr(i),C=er(p,y);C.tag=2,u!=null&&(C.callback=u),u=Dr(i,C,y),u!==null&&(vn(u,i,y,p),Bo(u,i,y))}};function lh(i,u,p,y,C,E,_){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(y,E,_):u.prototype&&u.prototype.isPureReactComponent?!Ys(p,y)||!Ys(C,E):!0}function gh(i,u,p){var y=!1,C=mr,E=u.contextType;return typeof E=="object"&&E!==null?E=Jt(E):(C=Gt(u)?ta:Ct.current,y=u.contextTypes,E=(y=y!=null)?Pa(i,C):mr),u=new u(p,E),i.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Ho,i.stateNode=u,u._reactInternals=i,y&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=C,i.__reactInternalMemoizedMaskedChildContext=E),u}function ph(i,u,p,y){i=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(p,y),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(p,y),u.state!==i&&Ho.enqueueReplaceState(u,u.state,null)}function tl(i,u,p,y){var C=i.stateNode;C.props=p,C.state=i.memoizedState,C.refs={},Hf(i);var E=u.contextType;typeof E=="object"&&E!==null?C.context=Jt(E):(E=Gt(u)?ta:Ct.current,C.context=Pa(i,E)),C.state=i.memoizedState,E=u.getDerivedStateFromProps,typeof E=="function"&&(el(i,u,E,p),C.state=i.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(u=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),u!==C.state&&Ho.enqueueReplaceState(C,C.state,null),Fo(i,p,C,y),C.state=i.memoizedState),typeof C.componentDidMount=="function"&&(i.flags|=4194308)}function es(i,u){try{var p="",y=u;do p+=xe(y),y=y.return;while(y);var C=p}catch(E){C=`
Error generating stack: `+E.message+`
`+E.stack}return{value:i,source:u,stack:C,digest:null}}function nl(i,u,p){return{value:i,source:null,stack:p??null,digest:u??null}}function rl(i,u){try{console.error(u.value)}catch(p){setTimeout(function(){throw p})}}var Nw=typeof WeakMap=="function"?WeakMap:Map;function hh(i,u,p){p=er(-1,p),p.tag=3,p.payload={element:null};var y=u.value;return p.callback=function(){Io||(Io=!0,Tl=y),rl(i,u)},p}function dh(i,u,p){p=er(-1,p),p.tag=3;var y=i.type.getDerivedStateFromError;if(typeof y=="function"){var C=u.value;p.payload=function(){return y(C)},p.callback=function(){rl(i,u)}}var E=i.stateNode;return E!==null&&typeof E.componentDidCatch=="function"&&(p.callback=function(){rl(i,u),typeof y!="function"&&(Lr===null?Lr=new Set([this]):Lr.add(this));var _=u.stack;this.componentDidCatch(u.value,{componentStack:_!==null?_:""})}),p}function vh(i,u,p){var y=i.pingCache;if(y===null){y=i.pingCache=new Nw;var C=new Set;y.set(u,C)}else C=y.get(u),C===void 0&&(C=new Set,y.set(u,C));C.has(p)||(C.add(p),i=Yw.bind(null,i,u,p),u.then(i,i))}function yh(i){do{var u;if((u=i.tag===13)&&(u=i.memoizedState,u=u!==null?u.dehydrated!==null:!0),u)return i;i=i.return}while(i!==null);return null}function Th(i,u,p,y,C){return i.mode&1?(i.flags|=65536,i.lanes=C,i):(i===u?i.flags|=65536:(i.flags|=128,p.flags|=131072,p.flags&=-52805,p.tag===1&&(p.alternate===null?p.tag=17:(u=er(-1,1),u.tag=2,Dr(p,u,1))),p.lanes|=1),i)}var Uw=R.ReactCurrentOwner,$t=!1;function Dt(i,u,p,y){u.child=i===null?$0(u,null,p,y):qa(u,i.child,p,y)}function xh(i,u,p,y,C){p=p.render;var E=u.ref;return Za(u,C),y=If(i,u,p,y,E,C),p=Yf(),i!==null&&!$t?(u.updateQueue=i.updateQueue,u.flags&=-2053,i.lanes&=~C,tr(i,u,C)):(Ae&&p&&Vf(u),u.flags|=1,Dt(i,u,y,C),u.child)}function Sh(i,u,p,y,C){if(i===null){var E=p.type;return typeof E=="function"&&!Rl(E)&&E.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(u.tag=15,u.type=E,Ch(i,u,E,y,C)):(i=eu(p.type,null,y,u,u.mode,C),i.ref=u.ref,i.return=u,u.child=i)}if(E=i.child,!(i.lanes&C)){var _=E.memoizedProps;if(p=p.compare,p=p!==null?p:Ys,p(_,y)&&i.ref===u.ref)return tr(i,u,C)}return u.flags|=1,i=Br(E,y),i.ref=u.ref,i.return=u,u.child=i}function Ch(i,u,p,y,C){if(i!==null){var E=i.memoizedProps;if(Ys(E,y)&&i.ref===u.ref)if($t=!1,u.pendingProps=y=E,(i.lanes&C)!==0)i.flags&131072&&($t=!0);else return u.lanes=i.lanes,tr(i,u,C)}return al(i,u,p,y,C)}function wh(i,u,p){var y=u.pendingProps,C=y.children,E=i!==null?i.memoizedState:null;if(y.mode==="hidden")if(!(u.mode&1))u.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ue(ns,Pt),Pt|=p;else{if(!(p&1073741824))return i=E!==null?E.baseLanes|p:p,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:i,cachePool:null,transitions:null},u.updateQueue=null,Ue(ns,Pt),Pt|=i,null;u.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=E!==null?E.baseLanes:p,Ue(ns,Pt),Pt|=y}else E!==null?(y=E.baseLanes|p,u.memoizedState=null):y=p,Ue(ns,Pt),Pt|=y;return Dt(i,u,C,p),u.child}function Eh(i,u){var p=u.ref;(i===null&&p!==null||i!==null&&i.ref!==p)&&(u.flags|=512,u.flags|=2097152)}function al(i,u,p,y,C){var E=Gt(p)?ta:Ct.current;return E=Pa(u,E),Za(u,C),p=If(i,u,p,y,E,C),y=Yf(),i!==null&&!$t?(u.updateQueue=i.updateQueue,u.flags&=-2053,i.lanes&=~C,tr(i,u,C)):(Ae&&y&&Vf(u),u.flags|=1,Dt(i,u,p,C),u.child)}function mh(i,u,p,y,C){if(Gt(p)){var E=!0;Ro(u)}else E=!1;if(Za(u,C),u.stateNode===null)Ao(i,u),gh(u,p,y),tl(u,p,y,C),y=!0;else if(i===null){var _=u.stateNode,F=u.memoizedProps;_.props=F;var $=_.context,I=p.contextType;typeof I=="object"&&I!==null?I=Jt(I):(I=Gt(p)?ta:Ct.current,I=Pa(u,I));var ee=p.getDerivedStateFromProps,te=typeof ee=="function"||typeof _.getSnapshotBeforeUpdate=="function";te||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(F!==y||$!==I)&&ph(u,_,y,I),Or=!1;var J=u.memoizedState;_.state=J,Fo(u,y,_,C),$=u.memoizedState,F!==y||J!==$||Ut.current||Or?(typeof ee=="function"&&(el(u,p,ee,y),$=u.memoizedState),(F=Or||lh(u,p,F,y,J,$,I))?(te||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(u.flags|=4194308)):(typeof _.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=y,u.memoizedState=$),_.props=y,_.state=$,_.context=I,y=F):(typeof _.componentDidMount=="function"&&(u.flags|=4194308),y=!1)}else{_=u.stateNode,W0(i,u),F=u.memoizedProps,I=u.type===u.elementType?F:pn(u.type,F),_.props=I,te=u.pendingProps,J=_.context,$=p.contextType,typeof $=="object"&&$!==null?$=Jt($):($=Gt(p)?ta:Ct.current,$=Pa(u,$));var ie=p.getDerivedStateFromProps;(ee=typeof ie=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(F!==te||J!==$)&&ph(u,_,y,$),Or=!1,J=u.memoizedState,_.state=J,Fo(u,y,_,C);var ue=u.memoizedState;F!==te||J!==ue||Ut.current||Or?(typeof ie=="function"&&(el(u,p,ie,y),ue=u.memoizedState),(I=Or||lh(u,p,I,y,J,ue,$)||!1)?(ee||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(y,ue,$),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(y,ue,$)),typeof _.componentDidUpdate=="function"&&(u.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof _.componentDidUpdate!="function"||F===i.memoizedProps&&J===i.memoizedState||(u.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||F===i.memoizedProps&&J===i.memoizedState||(u.flags|=1024),u.memoizedProps=y,u.memoizedState=ue),_.props=y,_.state=ue,_.context=$,y=I):(typeof _.componentDidUpdate!="function"||F===i.memoizedProps&&J===i.memoizedState||(u.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||F===i.memoizedProps&&J===i.memoizedState||(u.flags|=1024),y=!1)}return sl(i,u,p,y,E,C)}function sl(i,u,p,y,C,E){Eh(i,u);var _=(u.flags&128)!==0;if(!y&&!_)return C&&L0(u,p,!1),tr(i,u,E);y=u.stateNode,Uw.current=u;var F=_&&typeof p.getDerivedStateFromError!="function"?null:y.render();return u.flags|=1,i!==null&&_?(u.child=qa(u,i.child,null,E),u.child=qa(u,null,F,E)):Dt(i,u,F,E),u.memoizedState=y.state,C&&L0(u,p,!0),u.child}function Rh(i){var u=i.stateNode;u.pendingContext?D0(i,u.pendingContext,u.pendingContext!==u.context):u.context&&D0(i,u.context,!1),bf(i,u.containerInfo)}function Oh(i,u,p,y,C){return Ya(),Nf(C),u.flags|=256,Dt(i,u,p,y),u.child}var il={dehydrated:null,treeContext:null,retryLane:0};function ol(i){return{baseLanes:i,cachePool:null,transitions:null}}function Dh(i,u,p){var y=u.pendingProps,C=Ke.current,E=!1,_=(u.flags&128)!==0,F;if((F=_)||(F=i!==null&&i.memoizedState===null?!1:(C&2)!==0),F?(E=!0,u.flags&=-129):(i===null||i.memoizedState!==null)&&(C|=1),Ue(Ke,C&1),i===null)return Ff(u),i=u.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(u.mode&1?i.data==="$!"?u.lanes=8:u.lanes=1073741824:u.lanes=1,null):(_=y.children,i=y.fallback,E?(y=u.mode,E=u.child,_={mode:"hidden",children:_},!(y&1)&&E!==null?(E.childLanes=0,E.pendingProps=_):E=tu(_,y,0,null),i=la(i,y,p,null),E.return=u,i.return=u,E.sibling=i,u.child=E,u.child.memoizedState=ol(p),u.memoizedState=il,i):ul(u,_));if(C=i.memoizedState,C!==null&&(F=C.dehydrated,F!==null))return Gw(i,u,_,y,F,C,p);if(E){E=y.fallback,_=u.mode,C=i.child,F=C.sibling;var $={mode:"hidden",children:y.children};return!(_&1)&&u.child!==C?(y=u.child,y.childLanes=0,y.pendingProps=$,u.deletions=null):(y=Br(C,$),y.subtreeFlags=C.subtreeFlags&14680064),F!==null?E=Br(F,E):(E=la(E,_,p,null),E.flags|=2),E.return=u,y.return=u,y.sibling=E,u.child=y,y=E,E=u.child,_=i.child.memoizedState,_=_===null?ol(p):{baseLanes:_.baseLanes|p,cachePool:null,transitions:_.transitions},E.memoizedState=_,E.childLanes=i.childLanes&~p,u.memoizedState=il,y}return E=i.child,i=E.sibling,y=Br(E,{mode:"visible",children:y.children}),!(u.mode&1)&&(y.lanes=p),y.return=u,y.sibling=null,i!==null&&(p=u.deletions,p===null?(u.deletions=[i],u.flags|=16):p.push(i)),u.child=y,u.memoizedState=null,y}function ul(i,u){return u=tu({mode:"visible",children:u},i.mode,0,null),u.return=i,i.child=u}function bo(i,u,p,y){return y!==null&&Nf(y),qa(u,i.child,null,p),i=ul(u,u.pendingProps.children),i.flags|=2,u.memoizedState=null,i}function Gw(i,u,p,y,C,E,_){if(p)return u.flags&256?(u.flags&=-257,y=nl(Error(n(422))),bo(i,u,_,y)):u.memoizedState!==null?(u.child=i.child,u.flags|=128,null):(E=y.fallback,C=u.mode,y=tu({mode:"visible",children:y.children},C,0,null),E=la(E,C,_,null),E.flags|=2,y.return=u,E.return=u,y.sibling=E,u.child=y,u.mode&1&&qa(u,i.child,null,_),u.child.memoizedState=ol(_),u.memoizedState=il,E);if(!(u.mode&1))return bo(i,u,_,null);if(C.data==="$!"){if(y=C.nextSibling&&C.nextSibling.dataset,y)var F=y.dgst;return y=F,E=Error(n(419)),y=nl(E,y,void 0),bo(i,u,_,y)}if(F=(_&i.childLanes)!==0,$t||F){if(y=lt,y!==null){switch(_&-_){case 4:C=2;break;case 16:C=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:C=32;break;case 536870912:C=268435456;break;default:C=0}C=C&(y.suspendedLanes|_)?0:C,C!==0&&C!==E.retryLane&&(E.retryLane=C,Jn(i,C),vn(y,i,C,-1))}return ml(),y=nl(Error(n(421))),bo(i,u,_,y)}return C.data==="$?"?(u.flags|=128,u.child=i.child,u=qw.bind(null,i),C._reactRetry=u,null):(i=E.treeContext,Kt=wr(C.nextSibling),jt=u,Ae=!0,gn=null,i!==null&&(Qt[Zt++]=Qn,Qt[Zt++]=Zn,Qt[Zt++]=na,Qn=i.id,Zn=i.overflow,na=u),u=ul(u,y.children),u.flags|=4096,u)}function Mh(i,u,p){i.lanes|=u;var y=i.alternate;y!==null&&(y.lanes|=u),zf(i.return,u,p)}function cl(i,u,p,y,C){var E=i.memoizedState;E===null?i.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:C}:(E.isBackwards=u,E.rendering=null,E.renderingStartTime=0,E.last=y,E.tail=p,E.tailMode=C)}function Lh(i,u,p){var y=u.pendingProps,C=y.revealOrder,E=y.tail;if(Dt(i,u,y.children,p),y=Ke.current,y&2)y=y&1|2,u.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=u.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Mh(i,p,u);else if(i.tag===19)Mh(i,p,u);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===u)break e;for(;i.sibling===null;){if(i.return===null||i.return===u)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}y&=1}if(Ue(Ke,y),!(u.mode&1))u.memoizedState=null;else switch(C){case"forwards":for(p=u.child,C=null;p!==null;)i=p.alternate,i!==null&&No(i)===null&&(C=p),p=p.sibling;p=C,p===null?(C=u.child,u.child=null):(C=p.sibling,p.sibling=null),cl(u,!1,C,p,E);break;case"backwards":for(p=null,C=u.child,u.child=null;C!==null;){if(i=C.alternate,i!==null&&No(i)===null){u.child=C;break}i=C.sibling,C.sibling=p,p=C,C=i}cl(u,!0,p,null,E);break;case"together":cl(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function Ao(i,u){!(u.mode&1)&&i!==null&&(i.alternate=null,u.alternate=null,u.flags|=2)}function tr(i,u,p){if(i!==null&&(u.dependencies=i.dependencies),oa|=u.lanes,!(p&u.childLanes))return null;if(i!==null&&u.child!==i.child)throw Error(n(153));if(u.child!==null){for(i=u.child,p=Br(i,i.pendingProps),u.child=p,p.return=u;i.sibling!==null;)i=i.sibling,p=p.sibling=Br(i,i.pendingProps),p.return=u;p.sibling=null}return u.child}function $w(i,u,p){switch(u.tag){case 3:Rh(u),Ya();break;case 5:A0(u);break;case 1:Gt(u.type)&&Ro(u);break;case 4:bf(u,u.stateNode.containerInfo);break;case 10:var y=u.type._context,C=u.memoizedProps.value;Ue(Vo,y._currentValue),y._currentValue=C;break;case 13:if(y=u.memoizedState,y!==null)return y.dehydrated!==null?(Ue(Ke,Ke.current&1),u.flags|=128,null):p&u.child.childLanes?Dh(i,u,p):(Ue(Ke,Ke.current&1),i=tr(i,u,p),i!==null?i.sibling:null);Ue(Ke,Ke.current&1);break;case 19:if(y=(p&u.childLanes)!==0,i.flags&128){if(y)return Lh(i,u,p);u.flags|=128}if(C=u.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),Ue(Ke,Ke.current),y)break;return null;case 22:case 23:return u.lanes=0,wh(i,u,p)}return tr(i,u,p)}var _h,fl,Vh,kh;_h=function(i,u){for(var p=u.child;p!==null;){if(p.tag===5||p.tag===6)i.appendChild(p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===u)break;for(;p.sibling===null;){if(p.return===null||p.return===u)return;p=p.return}p.sibling.return=p.return,p=p.sibling}},fl=function(){},Vh=function(i,u,p,y){var C=i.memoizedProps;if(C!==y){i=u.stateNode,sa(Ln.current);var E=null;switch(p){case"input":C=$c(i,C),y=$c(i,y),E=[];break;case"select":C=G({},C,{value:void 0}),y=G({},y,{value:void 0}),E=[];break;case"textarea":C=Hc(i,C),y=Hc(i,y),E=[];break;default:typeof C.onClick!="function"&&typeof y.onClick=="function"&&(i.onclick=wo)}Ac(p,y);var _;p=null;for(I in C)if(!y.hasOwnProperty(I)&&C.hasOwnProperty(I)&&C[I]!=null)if(I==="style"){var F=C[I];for(_ in F)F.hasOwnProperty(_)&&(p||(p={}),p[_]="")}else I!=="dangerouslySetInnerHTML"&&I!=="children"&&I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&I!=="autoFocus"&&(a.hasOwnProperty(I)?E||(E=[]):(E=E||[]).push(I,null));for(I in y){var $=y[I];if(F=C!=null?C[I]:void 0,y.hasOwnProperty(I)&&$!==F&&($!=null||F!=null))if(I==="style")if(F){for(_ in F)!F.hasOwnProperty(_)||$&&$.hasOwnProperty(_)||(p||(p={}),p[_]="");for(_ in $)$.hasOwnProperty(_)&&F[_]!==$[_]&&(p||(p={}),p[_]=$[_])}else p||(E||(E=[]),E.push(I,p)),p=$;else I==="dangerouslySetInnerHTML"?($=$?$.__html:void 0,F=F?F.__html:void 0,$!=null&&F!==$&&(E=E||[]).push(I,$)):I==="children"?typeof $!="string"&&typeof $!="number"||(E=E||[]).push(I,""+$):I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&(a.hasOwnProperty(I)?($!=null&&I==="onScroll"&&We("scroll",i),E||F===$||(E=[])):(E=E||[]).push(I,$))}p&&(E=E||[]).push("style",p);var I=E;(u.updateQueue=I)&&(u.flags|=4)}},kh=function(i,u,p,y){p!==y&&(u.flags|=4)};function fi(i,u){if(!Ae)switch(i.tailMode){case"hidden":u=i.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?i.tail=null:p.sibling=null;break;case"collapsed":p=i.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?u||i.tail===null?i.tail=null:i.tail.sibling=null:y.sibling=null}}function Et(i){var u=i.alternate!==null&&i.alternate.child===i.child,p=0,y=0;if(u)for(var C=i.child;C!==null;)p|=C.lanes|C.childLanes,y|=C.subtreeFlags&14680064,y|=C.flags&14680064,C.return=i,C=C.sibling;else for(C=i.child;C!==null;)p|=C.lanes|C.childLanes,y|=C.subtreeFlags,y|=C.flags,C.return=i,C=C.sibling;return i.subtreeFlags|=y,i.childLanes=p,u}function zw(i,u,p){var y=u.pendingProps;switch(kf(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(u),null;case 1:return Gt(u.type)&&mo(),Et(u),null;case 3:return y=u.stateNode,Ja(),He(Ut),He(Ct),Kf(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(i===null||i.child===null)&&(Lo(u)?u.flags|=4:i===null||i.memoizedState.isDehydrated&&!(u.flags&256)||(u.flags|=1024,gn!==null&&(Cl(gn),gn=null))),fl(i,u),Et(u),null;case 5:Af(u);var C=sa(si.current);if(p=u.type,i!==null&&u.stateNode!=null)Vh(i,u,p,y,C),i.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!y){if(u.stateNode===null)throw Error(n(166));return Et(u),null}if(i=sa(Ln.current),Lo(u)){y=u.stateNode,p=u.type;var E=u.memoizedProps;switch(y[Mn]=u,y[ei]=E,i=(u.mode&1)!==0,p){case"dialog":We("cancel",y),We("close",y);break;case"iframe":case"object":case"embed":We("load",y);break;case"video":case"audio":for(C=0;C<Qs.length;C++)We(Qs[C],y);break;case"source":We("error",y);break;case"img":case"image":case"link":We("error",y),We("load",y);break;case"details":We("toggle",y);break;case"input":gp(y,E),We("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!E.multiple},We("invalid",y);break;case"textarea":dp(y,E),We("invalid",y)}Ac(p,E),C=null;for(var _ in E)if(E.hasOwnProperty(_)){var F=E[_];_==="children"?typeof F=="string"?y.textContent!==F&&(E.suppressHydrationWarning!==!0&&Co(y.textContent,F,i),C=["children",F]):typeof F=="number"&&y.textContent!==""+F&&(E.suppressHydrationWarning!==!0&&Co(y.textContent,F,i),C=["children",""+F]):a.hasOwnProperty(_)&&F!=null&&_==="onScroll"&&We("scroll",y)}switch(p){case"input":On(y),hp(y,E,!0);break;case"textarea":On(y),yp(y);break;case"select":case"option":break;default:typeof E.onClick=="function"&&(y.onclick=wo)}y=C,u.updateQueue=y,y!==null&&(u.flags|=4)}else{_=C.nodeType===9?C:C.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Tp(p)),i==="http://www.w3.org/1999/xhtml"?p==="script"?(i=_.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof y.is=="string"?i=_.createElement(p,{is:y.is}):(i=_.createElement(p),p==="select"&&(_=i,y.multiple?_.multiple=!0:y.size&&(_.size=y.size))):i=_.createElementNS(i,p),i[Mn]=u,i[ei]=y,_h(i,u,!1,!1),u.stateNode=i;e:{switch(_=jc(p,y),p){case"dialog":We("cancel",i),We("close",i),C=y;break;case"iframe":case"object":case"embed":We("load",i),C=y;break;case"video":case"audio":for(C=0;C<Qs.length;C++)We(Qs[C],i);C=y;break;case"source":We("error",i),C=y;break;case"img":case"image":case"link":We("error",i),We("load",i),C=y;break;case"details":We("toggle",i),C=y;break;case"input":gp(i,y),C=$c(i,y),We("invalid",i);break;case"option":C=y;break;case"select":i._wrapperState={wasMultiple:!!y.multiple},C=G({},y,{value:void 0}),We("invalid",i);break;case"textarea":dp(i,y),C=Hc(i,y),We("invalid",i);break;default:C=y}Ac(p,C),F=C;for(E in F)if(F.hasOwnProperty(E)){var $=F[E];E==="style"?Cp(i,$):E==="dangerouslySetInnerHTML"?($=$?$.__html:void 0,$!=null&&xp(i,$)):E==="children"?typeof $=="string"?(p!=="textarea"||$!=="")&&ks(i,$):typeof $=="number"&&ks(i,""+$):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(a.hasOwnProperty(E)?$!=null&&E==="onScroll"&&We("scroll",i):$!=null&&w(i,E,$,_))}switch(p){case"input":On(i),hp(i,y,!1);break;case"textarea":On(i),yp(i);break;case"option":y.value!=null&&i.setAttribute("value",""+De(y.value));break;case"select":i.multiple=!!y.multiple,E=y.value,E!=null?Fa(i,!!y.multiple,E,!1):y.defaultValue!=null&&Fa(i,!!y.multiple,y.defaultValue,!0);break;default:typeof C.onClick=="function"&&(i.onclick=wo)}switch(p){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(u.flags|=4)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return Et(u),null;case 6:if(i&&u.stateNode!=null)kh(i,u,i.memoizedProps,y);else{if(typeof y!="string"&&u.stateNode===null)throw Error(n(166));if(p=sa(si.current),sa(Ln.current),Lo(u)){if(y=u.stateNode,p=u.memoizedProps,y[Mn]=u,(E=y.nodeValue!==p)&&(i=jt,i!==null))switch(i.tag){case 3:Co(y.nodeValue,p,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Co(y.nodeValue,p,(i.mode&1)!==0)}E&&(u.flags|=4)}else y=(p.nodeType===9?p:p.ownerDocument).createTextNode(y),y[Mn]=u,u.stateNode=y}return Et(u),null;case 13:if(He(Ke),y=u.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Ae&&Kt!==null&&u.mode&1&&!(u.flags&128))N0(),Ya(),u.flags|=98560,E=!1;else if(E=Lo(u),y!==null&&y.dehydrated!==null){if(i===null){if(!E)throw Error(n(318));if(E=u.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(n(317));E[Mn]=u}else Ya(),!(u.flags&128)&&(u.memoizedState=null),u.flags|=4;Et(u),E=!1}else gn!==null&&(Cl(gn),gn=null),E=!0;if(!E)return u.flags&65536?u:null}return u.flags&128?(u.lanes=p,u):(y=y!==null,y!==(i!==null&&i.memoizedState!==null)&&y&&(u.child.flags|=8192,u.mode&1&&(i===null||Ke.current&1?st===0&&(st=3):ml())),u.updateQueue!==null&&(u.flags|=4),Et(u),null);case 4:return Ja(),fl(i,u),i===null&&Zs(u.stateNode.containerInfo),Et(u),null;case 10:return $f(u.type._context),Et(u),null;case 17:return Gt(u.type)&&mo(),Et(u),null;case 19:if(He(Ke),E=u.memoizedState,E===null)return Et(u),null;if(y=(u.flags&128)!==0,_=E.rendering,_===null)if(y)fi(E,!1);else{if(st!==0||i!==null&&i.flags&128)for(i=u.child;i!==null;){if(_=No(i),_!==null){for(u.flags|=128,fi(E,!1),y=_.updateQueue,y!==null&&(u.updateQueue=y,u.flags|=4),u.subtreeFlags=0,y=p,p=u.child;p!==null;)E=p,i=y,E.flags&=14680066,_=E.alternate,_===null?(E.childLanes=0,E.lanes=i,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=_.childLanes,E.lanes=_.lanes,E.child=_.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=_.memoizedProps,E.memoizedState=_.memoizedState,E.updateQueue=_.updateQueue,E.type=_.type,i=_.dependencies,E.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),p=p.sibling;return Ue(Ke,Ke.current&1|2),u.child}i=i.sibling}E.tail!==null&&Qe()>rs&&(u.flags|=128,y=!0,fi(E,!1),u.lanes=4194304)}else{if(!y)if(i=No(_),i!==null){if(u.flags|=128,y=!0,p=i.updateQueue,p!==null&&(u.updateQueue=p,u.flags|=4),fi(E,!0),E.tail===null&&E.tailMode==="hidden"&&!_.alternate&&!Ae)return Et(u),null}else 2*Qe()-E.renderingStartTime>rs&&p!==1073741824&&(u.flags|=128,y=!0,fi(E,!1),u.lanes=4194304);E.isBackwards?(_.sibling=u.child,u.child=_):(p=E.last,p!==null?p.sibling=_:u.child=_,E.last=_)}return E.tail!==null?(u=E.tail,E.rendering=u,E.tail=u.sibling,E.renderingStartTime=Qe(),u.sibling=null,p=Ke.current,Ue(Ke,y?p&1|2:p&1),u):(Et(u),null);case 22:case 23:return El(),y=u.memoizedState!==null,i!==null&&i.memoizedState!==null!==y&&(u.flags|=8192),y&&u.mode&1?Pt&1073741824&&(Et(u),u.subtreeFlags&6&&(u.flags|=8192)):Et(u),null;case 24:return null;case 25:return null}throw Error(n(156,u.tag))}function Ww(i,u){switch(kf(u),u.tag){case 1:return Gt(u.type)&&mo(),i=u.flags,i&65536?(u.flags=i&-65537|128,u):null;case 3:return Ja(),He(Ut),He(Ct),Kf(),i=u.flags,i&65536&&!(i&128)?(u.flags=i&-65537|128,u):null;case 5:return Af(u),null;case 13:if(He(Ke),i=u.memoizedState,i!==null&&i.dehydrated!==null){if(u.alternate===null)throw Error(n(340));Ya()}return i=u.flags,i&65536?(u.flags=i&-65537|128,u):null;case 19:return He(Ke),null;case 4:return Ja(),null;case 10:return $f(u.type._context),null;case 22:case 23:return El(),null;case 24:return null;default:return null}}var jo=!1,mt=!1,Hw=typeof WeakSet=="function"?WeakSet:Set,oe=null;function ts(i,u){var p=i.ref;if(p!==null)if(typeof p=="function")try{p(null)}catch(y){Ie(i,u,y)}else p.current=null}function ll(i,u,p){try{p()}catch(y){Ie(i,u,y)}}var Bh=!1;function bw(i,u){if(Ef=co,i=l0(),df(i)){if("selectionStart"in i)var p={start:i.selectionStart,end:i.selectionEnd};else e:{p=(p=i.ownerDocument)&&p.defaultView||window;var y=p.getSelection&&p.getSelection();if(y&&y.rangeCount!==0){p=y.anchorNode;var C=y.anchorOffset,E=y.focusNode;y=y.focusOffset;try{p.nodeType,E.nodeType}catch{p=null;break e}var _=0,F=-1,$=-1,I=0,ee=0,te=i,J=null;t:for(;;){for(var ie;te!==p||C!==0&&te.nodeType!==3||(F=_+C),te!==E||y!==0&&te.nodeType!==3||($=_+y),te.nodeType===3&&(_+=te.nodeValue.length),(ie=te.firstChild)!==null;)J=te,te=ie;for(;;){if(te===i)break t;if(J===p&&++I===C&&(F=_),J===E&&++ee===y&&($=_),(ie=te.nextSibling)!==null)break;te=J,J=te.parentNode}te=ie}p=F===-1||$===-1?null:{start:F,end:$}}else p=null}p=p||{start:0,end:0}}else p=null;for(mf={focusedElem:i,selectionRange:p},co=!1,oe=u;oe!==null;)if(u=oe,i=u.child,(u.subtreeFlags&1028)!==0&&i!==null)i.return=u,oe=i;else for(;oe!==null;){u=oe;try{var ue=u.alternate;if(u.flags&1024)switch(u.tag){case 0:case 11:case 15:break;case 1:if(ue!==null){var ce=ue.memoizedProps,Ze=ue.memoizedState,K=u.stateNode,W=K.getSnapshotBeforeUpdate(u.elementType===u.type?ce:pn(u.type,ce),Ze);K.__reactInternalSnapshotBeforeUpdate=W}break;case 3:var X=u.stateNode.containerInfo;X.nodeType===1?X.textContent="":X.nodeType===9&&X.documentElement&&X.removeChild(X.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(re){Ie(u,u.return,re)}if(i=u.sibling,i!==null){i.return=u.return,oe=i;break}oe=u.return}return ue=Bh,Bh=!1,ue}function li(i,u,p){var y=u.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var C=y=y.next;do{if((C.tag&i)===i){var E=C.destroy;C.destroy=void 0,E!==void 0&&ll(u,p,E)}C=C.next}while(C!==y)}}function Ko(i,u){if(u=u.updateQueue,u=u!==null?u.lastEffect:null,u!==null){var p=u=u.next;do{if((p.tag&i)===i){var y=p.create;p.destroy=y()}p=p.next}while(p!==u)}}function gl(i){var u=i.ref;if(u!==null){var p=i.stateNode;switch(i.tag){case 5:i=p;break;default:i=p}typeof u=="function"?u(i):u.current=i}}function Fh(i){var u=i.alternate;u!==null&&(i.alternate=null,Fh(u)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(u=i.stateNode,u!==null&&(delete u[Mn],delete u[ei],delete u[Mf],delete u[mw],delete u[Rw])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Nh(i){return i.tag===5||i.tag===3||i.tag===4}function Uh(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Nh(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function pl(i,u,p){var y=i.tag;if(y===5||y===6)i=i.stateNode,u?p.nodeType===8?p.parentNode.insertBefore(i,u):p.insertBefore(i,u):(p.nodeType===8?(u=p.parentNode,u.insertBefore(i,p)):(u=p,u.appendChild(i)),p=p._reactRootContainer,p!=null||u.onclick!==null||(u.onclick=wo));else if(y!==4&&(i=i.child,i!==null))for(pl(i,u,p),i=i.sibling;i!==null;)pl(i,u,p),i=i.sibling}function hl(i,u,p){var y=i.tag;if(y===5||y===6)i=i.stateNode,u?p.insertBefore(i,u):p.appendChild(i);else if(y!==4&&(i=i.child,i!==null))for(hl(i,u,p),i=i.sibling;i!==null;)hl(i,u,p),i=i.sibling}var Tt=null,hn=!1;function Mr(i,u,p){for(p=p.child;p!==null;)Gh(i,u,p),p=p.sibling}function Gh(i,u,p){if(Dn&&typeof Dn.onCommitFiberUnmount=="function")try{Dn.onCommitFiberUnmount(ro,p)}catch{}switch(p.tag){case 5:mt||ts(p,u);case 6:var y=Tt,C=hn;Tt=null,Mr(i,u,p),Tt=y,hn=C,Tt!==null&&(hn?(i=Tt,p=p.stateNode,i.nodeType===8?i.parentNode.removeChild(p):i.removeChild(p)):Tt.removeChild(p.stateNode));break;case 18:Tt!==null&&(hn?(i=Tt,p=p.stateNode,i.nodeType===8?Df(i.parentNode,p):i.nodeType===1&&Df(i,p),As(i)):Df(Tt,p.stateNode));break;case 4:y=Tt,C=hn,Tt=p.stateNode.containerInfo,hn=!0,Mr(i,u,p),Tt=y,hn=C;break;case 0:case 11:case 14:case 15:if(!mt&&(y=p.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){C=y=y.next;do{var E=C,_=E.destroy;E=E.tag,_!==void 0&&(E&2||E&4)&&ll(p,u,_),C=C.next}while(C!==y)}Mr(i,u,p);break;case 1:if(!mt&&(ts(p,u),y=p.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=p.memoizedProps,y.state=p.memoizedState,y.componentWillUnmount()}catch(F){Ie(p,u,F)}Mr(i,u,p);break;case 21:Mr(i,u,p);break;case 22:p.mode&1?(mt=(y=mt)||p.memoizedState!==null,Mr(i,u,p),mt=y):Mr(i,u,p);break;default:Mr(i,u,p)}}function $h(i){var u=i.updateQueue;if(u!==null){i.updateQueue=null;var p=i.stateNode;p===null&&(p=i.stateNode=new Hw),u.forEach(function(y){var C=Qw.bind(null,i,y);p.has(y)||(p.add(y),y.then(C,C))})}}function dn(i,u){var p=u.deletions;if(p!==null)for(var y=0;y<p.length;y++){var C=p[y];try{var E=i,_=u,F=_;e:for(;F!==null;){switch(F.tag){case 5:Tt=F.stateNode,hn=!1;break e;case 3:Tt=F.stateNode.containerInfo,hn=!0;break e;case 4:Tt=F.stateNode.containerInfo,hn=!0;break e}F=F.return}if(Tt===null)throw Error(n(160));Gh(E,_,C),Tt=null,hn=!1;var $=C.alternate;$!==null&&($.return=null),C.return=null}catch(I){Ie(C,u,I)}}if(u.subtreeFlags&12854)for(u=u.child;u!==null;)zh(u,i),u=u.sibling}function zh(i,u){var p=i.alternate,y=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(dn(u,i),Vn(i),y&4){try{li(3,i,i.return),Ko(3,i)}catch(ce){Ie(i,i.return,ce)}try{li(5,i,i.return)}catch(ce){Ie(i,i.return,ce)}}break;case 1:dn(u,i),Vn(i),y&512&&p!==null&&ts(p,p.return);break;case 5:if(dn(u,i),Vn(i),y&512&&p!==null&&ts(p,p.return),i.flags&32){var C=i.stateNode;try{ks(C,"")}catch(ce){Ie(i,i.return,ce)}}if(y&4&&(C=i.stateNode,C!=null)){var E=i.memoizedProps,_=p!==null?p.memoizedProps:E,F=i.type,$=i.updateQueue;if(i.updateQueue=null,$!==null)try{F==="input"&&E.type==="radio"&&E.name!=null&&pp(C,E),jc(F,_);var I=jc(F,E);for(_=0;_<$.length;_+=2){var ee=$[_],te=$[_+1];ee==="style"?Cp(C,te):ee==="dangerouslySetInnerHTML"?xp(C,te):ee==="children"?ks(C,te):w(C,ee,te,I)}switch(F){case"input":zc(C,E);break;case"textarea":vp(C,E);break;case"select":var J=C._wrapperState.wasMultiple;C._wrapperState.wasMultiple=!!E.multiple;var ie=E.value;ie!=null?Fa(C,!!E.multiple,ie,!1):J!==!!E.multiple&&(E.defaultValue!=null?Fa(C,!!E.multiple,E.defaultValue,!0):Fa(C,!!E.multiple,E.multiple?[]:"",!1))}C[ei]=E}catch(ce){Ie(i,i.return,ce)}}break;case 6:if(dn(u,i),Vn(i),y&4){if(i.stateNode===null)throw Error(n(162));C=i.stateNode,E=i.memoizedProps;try{C.nodeValue=E}catch(ce){Ie(i,i.return,ce)}}break;case 3:if(dn(u,i),Vn(i),y&4&&p!==null&&p.memoizedState.isDehydrated)try{As(u.containerInfo)}catch(ce){Ie(i,i.return,ce)}break;case 4:dn(u,i),Vn(i);break;case 13:dn(u,i),Vn(i),C=i.child,C.flags&8192&&(E=C.memoizedState!==null,C.stateNode.isHidden=E,!E||C.alternate!==null&&C.alternate.memoizedState!==null||(yl=Qe())),y&4&&$h(i);break;case 22:if(ee=p!==null&&p.memoizedState!==null,i.mode&1?(mt=(I=mt)||ee,dn(u,i),mt=I):dn(u,i),Vn(i),y&8192){if(I=i.memoizedState!==null,(i.stateNode.isHidden=I)&&!ee&&i.mode&1)for(oe=i,ee=i.child;ee!==null;){for(te=oe=ee;oe!==null;){switch(J=oe,ie=J.child,J.tag){case 0:case 11:case 14:case 15:li(4,J,J.return);break;case 1:ts(J,J.return);var ue=J.stateNode;if(typeof ue.componentWillUnmount=="function"){y=J,p=J.return;try{u=y,ue.props=u.memoizedProps,ue.state=u.memoizedState,ue.componentWillUnmount()}catch(ce){Ie(y,p,ce)}}break;case 5:ts(J,J.return);break;case 22:if(J.memoizedState!==null){bh(te);continue}}ie!==null?(ie.return=J,oe=ie):bh(te)}ee=ee.sibling}e:for(ee=null,te=i;;){if(te.tag===5){if(ee===null){ee=te;try{C=te.stateNode,I?(E=C.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none"):(F=te.stateNode,$=te.memoizedProps.style,_=$!=null&&$.hasOwnProperty("display")?$.display:null,F.style.display=Sp("display",_))}catch(ce){Ie(i,i.return,ce)}}}else if(te.tag===6){if(ee===null)try{te.stateNode.nodeValue=I?"":te.memoizedProps}catch(ce){Ie(i,i.return,ce)}}else if((te.tag!==22&&te.tag!==23||te.memoizedState===null||te===i)&&te.child!==null){te.child.return=te,te=te.child;continue}if(te===i)break e;for(;te.sibling===null;){if(te.return===null||te.return===i)break e;ee===te&&(ee=null),te=te.return}ee===te&&(ee=null),te.sibling.return=te.return,te=te.sibling}}break;case 19:dn(u,i),Vn(i),y&4&&$h(i);break;case 21:break;default:dn(u,i),Vn(i)}}function Vn(i){var u=i.flags;if(u&2){try{e:{for(var p=i.return;p!==null;){if(Nh(p)){var y=p;break e}p=p.return}throw Error(n(160))}switch(y.tag){case 5:var C=y.stateNode;y.flags&32&&(ks(C,""),y.flags&=-33);var E=Uh(i);hl(i,E,C);break;case 3:case 4:var _=y.stateNode.containerInfo,F=Uh(i);pl(i,F,_);break;default:throw Error(n(161))}}catch($){Ie(i,i.return,$)}i.flags&=-3}u&4096&&(i.flags&=-4097)}function Aw(i,u,p){oe=i,Wh(i)}function Wh(i,u,p){for(var y=(i.mode&1)!==0;oe!==null;){var C=oe,E=C.child;if(C.tag===22&&y){var _=C.memoizedState!==null||jo;if(!_){var F=C.alternate,$=F!==null&&F.memoizedState!==null||mt;F=jo;var I=mt;if(jo=_,(mt=$)&&!I)for(oe=C;oe!==null;)_=oe,$=_.child,_.tag===22&&_.memoizedState!==null?Ah(C):$!==null?($.return=_,oe=$):Ah(C);for(;E!==null;)oe=E,Wh(E),E=E.sibling;oe=C,jo=F,mt=I}Hh(i)}else C.subtreeFlags&8772&&E!==null?(E.return=C,oe=E):Hh(i)}}function Hh(i){for(;oe!==null;){var u=oe;if(u.flags&8772){var p=u.alternate;try{if(u.flags&8772)switch(u.tag){case 0:case 11:case 15:mt||Ko(5,u);break;case 1:var y=u.stateNode;if(u.flags&4&&!mt)if(p===null)y.componentDidMount();else{var C=u.elementType===u.type?p.memoizedProps:pn(u.type,p.memoizedProps);y.componentDidUpdate(C,p.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var E=u.updateQueue;E!==null&&b0(u,E,y);break;case 3:var _=u.updateQueue;if(_!==null){if(p=null,u.child!==null)switch(u.child.tag){case 5:p=u.child.stateNode;break;case 1:p=u.child.stateNode}b0(u,_,p)}break;case 5:var F=u.stateNode;if(p===null&&u.flags&4){p=F;var $=u.memoizedProps;switch(u.type){case"button":case"input":case"select":case"textarea":$.autoFocus&&p.focus();break;case"img":$.src&&(p.src=$.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(u.memoizedState===null){var I=u.alternate;if(I!==null){var ee=I.memoizedState;if(ee!==null){var te=ee.dehydrated;te!==null&&As(te)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}mt||u.flags&512&&gl(u)}catch(J){Ie(u,u.return,J)}}if(u===i){oe=null;break}if(p=u.sibling,p!==null){p.return=u.return,oe=p;break}oe=u.return}}function bh(i){for(;oe!==null;){var u=oe;if(u===i){oe=null;break}var p=u.sibling;if(p!==null){p.return=u.return,oe=p;break}oe=u.return}}function Ah(i){for(;oe!==null;){var u=oe;try{switch(u.tag){case 0:case 11:case 15:var p=u.return;try{Ko(4,u)}catch($){Ie(u,p,$)}break;case 1:var y=u.stateNode;if(typeof y.componentDidMount=="function"){var C=u.return;try{y.componentDidMount()}catch($){Ie(u,C,$)}}var E=u.return;try{gl(u)}catch($){Ie(u,E,$)}break;case 5:var _=u.return;try{gl(u)}catch($){Ie(u,_,$)}}}catch($){Ie(u,u.return,$)}if(u===i){oe=null;break}var F=u.sibling;if(F!==null){F.return=u.return,oe=F;break}oe=u.return}}var jw=Math.ceil,Po=R.ReactCurrentDispatcher,dl=R.ReactCurrentOwner,tn=R.ReactCurrentBatchConfig,Me=0,lt=null,nt=null,xt=0,Pt=0,ns=Er(0),st=0,gi=null,oa=0,Xo=0,vl=0,pi=null,zt=null,yl=0,rs=1/0,nr=null,Io=!1,Tl=null,Lr=null,Yo=!1,_r=null,qo=0,hi=0,xl=null,Qo=-1,Zo=0;function Mt(){return Me&6?Qe():Qo!==-1?Qo:Qo=Qe()}function Vr(i){return i.mode&1?Me&2&&xt!==0?xt&-xt:Dw.transition!==null?(Zo===0&&(Zo=Up()),Zo):(i=Fe,i!==0||(i=window.event,i=i===void 0?16:Kp(i.type)),i):1}function vn(i,u,p,y){if(50<hi)throw hi=0,xl=null,Error(n(185));$s(i,p,y),(!(Me&2)||i!==lt)&&(i===lt&&(!(Me&2)&&(Xo|=p),st===4&&kr(i,xt)),Wt(i,y),p===1&&Me===0&&!(u.mode&1)&&(rs=Qe()+500,Oo&&Rr()))}function Wt(i,u){var p=i.callbackNode;DC(i,u);var y=io(i,i===lt?xt:0);if(y===0)p!==null&&Bp(p),i.callbackNode=null,i.callbackPriority=0;else if(u=y&-y,i.callbackPriority!==u){if(p!=null&&Bp(p),u===1)i.tag===0?Ow(Kh.bind(null,i)):_0(Kh.bind(null,i)),ww(function(){!(Me&6)&&Rr()}),p=null;else{switch(Gp(y)){case 1:p=Qc;break;case 4:p=Fp;break;case 16:p=no;break;case 536870912:p=Np;break;default:p=no}p=Jh(p,jh.bind(null,i))}i.callbackPriority=u,i.callbackNode=p}}function jh(i,u){if(Qo=-1,Zo=0,Me&6)throw Error(n(327));var p=i.callbackNode;if(as()&&i.callbackNode!==p)return null;var y=io(i,i===lt?xt:0);if(y===0)return null;if(y&30||y&i.expiredLanes||u)u=Jo(i,y);else{u=y;var C=Me;Me|=2;var E=Xh();(lt!==i||xt!==u)&&(nr=null,rs=Qe()+500,ca(i,u));do try{Xw();break}catch(F){Ph(i,F)}while(!0);Gf(),Po.current=E,Me=C,nt!==null?u=0:(lt=null,xt=0,u=st)}if(u!==0){if(u===2&&(C=Zc(i),C!==0&&(y=C,u=Sl(i,C))),u===1)throw p=gi,ca(i,0),kr(i,y),Wt(i,Qe()),p;if(u===6)kr(i,y);else{if(C=i.current.alternate,!(y&30)&&!Kw(C)&&(u=Jo(i,y),u===2&&(E=Zc(i),E!==0&&(y=E,u=Sl(i,E))),u===1))throw p=gi,ca(i,0),kr(i,y),Wt(i,Qe()),p;switch(i.finishedWork=C,i.finishedLanes=y,u){case 0:case 1:throw Error(n(345));case 2:fa(i,zt,nr);break;case 3:if(kr(i,y),(y&130023424)===y&&(u=yl+500-Qe(),10<u)){if(io(i,0)!==0)break;if(C=i.suspendedLanes,(C&y)!==y){Mt(),i.pingedLanes|=i.suspendedLanes&C;break}i.timeoutHandle=Of(fa.bind(null,i,zt,nr),u);break}fa(i,zt,nr);break;case 4:if(kr(i,y),(y&4194240)===y)break;for(u=i.eventTimes,C=-1;0<y;){var _=31-fn(y);E=1<<_,_=u[_],_>C&&(C=_),y&=~E}if(y=C,y=Qe()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*jw(y/1960))-y,10<y){i.timeoutHandle=Of(fa.bind(null,i,zt,nr),y);break}fa(i,zt,nr);break;case 5:fa(i,zt,nr);break;default:throw Error(n(329))}}}return Wt(i,Qe()),i.callbackNode===p?jh.bind(null,i):null}function Sl(i,u){var p=pi;return i.current.memoizedState.isDehydrated&&(ca(i,u).flags|=256),i=Jo(i,u),i!==2&&(u=zt,zt=p,u!==null&&Cl(u)),i}function Cl(i){zt===null?zt=i:zt.push.apply(zt,i)}function Kw(i){for(var u=i;;){if(u.flags&16384){var p=u.updateQueue;if(p!==null&&(p=p.stores,p!==null))for(var y=0;y<p.length;y++){var C=p[y],E=C.getSnapshot;C=C.value;try{if(!ln(E(),C))return!1}catch{return!1}}}if(p=u.child,u.subtreeFlags&16384&&p!==null)p.return=u,u=p;else{if(u===i)break;for(;u.sibling===null;){if(u.return===null||u.return===i)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function kr(i,u){for(u&=~vl,u&=~Xo,i.suspendedLanes|=u,i.pingedLanes&=~u,i=i.expirationTimes;0<u;){var p=31-fn(u),y=1<<p;i[p]=-1,u&=~y}}function Kh(i){if(Me&6)throw Error(n(327));as();var u=io(i,0);if(!(u&1))return Wt(i,Qe()),null;var p=Jo(i,u);if(i.tag!==0&&p===2){var y=Zc(i);y!==0&&(u=y,p=Sl(i,y))}if(p===1)throw p=gi,ca(i,0),kr(i,u),Wt(i,Qe()),p;if(p===6)throw Error(n(345));return i.finishedWork=i.current.alternate,i.finishedLanes=u,fa(i,zt,nr),Wt(i,Qe()),null}function wl(i,u){var p=Me;Me|=1;try{return i(u)}finally{Me=p,Me===0&&(rs=Qe()+500,Oo&&Rr())}}function ua(i){_r!==null&&_r.tag===0&&!(Me&6)&&as();var u=Me;Me|=1;var p=tn.transition,y=Fe;try{if(tn.transition=null,Fe=1,i)return i()}finally{Fe=y,tn.transition=p,Me=u,!(Me&6)&&Rr()}}function El(){Pt=ns.current,He(ns)}function ca(i,u){i.finishedWork=null,i.finishedLanes=0;var p=i.timeoutHandle;if(p!==-1&&(i.timeoutHandle=-1,Cw(p)),nt!==null)for(p=nt.return;p!==null;){var y=p;switch(kf(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&mo();break;case 3:Ja(),He(Ut),He(Ct),Kf();break;case 5:Af(y);break;case 4:Ja();break;case 13:He(Ke);break;case 19:He(Ke);break;case 10:$f(y.type._context);break;case 22:case 23:El()}p=p.return}if(lt=i,nt=i=Br(i.current,null),xt=Pt=u,st=0,gi=null,vl=Xo=oa=0,zt=pi=null,aa!==null){for(u=0;u<aa.length;u++)if(p=aa[u],y=p.interleaved,y!==null){p.interleaved=null;var C=y.next,E=p.pending;if(E!==null){var _=E.next;E.next=C,y.next=_}p.pending=y}aa=null}return i}function Ph(i,u){do{var p=nt;try{if(Gf(),Uo.current=Wo,Go){for(var y=Pe.memoizedState;y!==null;){var C=y.queue;C!==null&&(C.pending=null),y=y.next}Go=!1}if(ia=0,ft=at=Pe=null,ii=!1,oi=0,dl.current=null,p===null||p.return===null){st=1,gi=u,nt=null;break}e:{var E=i,_=p.return,F=p,$=u;if(u=xt,F.flags|=32768,$!==null&&typeof $=="object"&&typeof $.then=="function"){var I=$,ee=F,te=ee.tag;if(!(ee.mode&1)&&(te===0||te===11||te===15)){var J=ee.alternate;J?(ee.updateQueue=J.updateQueue,ee.memoizedState=J.memoizedState,ee.lanes=J.lanes):(ee.updateQueue=null,ee.memoizedState=null)}var ie=yh(_);if(ie!==null){ie.flags&=-257,Th(ie,_,F,E,u),ie.mode&1&&vh(E,I,u),u=ie,$=I;var ue=u.updateQueue;if(ue===null){var ce=new Set;ce.add($),u.updateQueue=ce}else ue.add($);break e}else{if(!(u&1)){vh(E,I,u),ml();break e}$=Error(n(426))}}else if(Ae&&F.mode&1){var Ze=yh(_);if(Ze!==null){!(Ze.flags&65536)&&(Ze.flags|=256),Th(Ze,_,F,E,u),Nf(es($,F));break e}}E=$=es($,F),st!==4&&(st=2),pi===null?pi=[E]:pi.push(E),E=_;do{switch(E.tag){case 3:E.flags|=65536,u&=-u,E.lanes|=u;var K=hh(E,$,u);H0(E,K);break e;case 1:F=$;var W=E.type,X=E.stateNode;if(!(E.flags&128)&&(typeof W.getDerivedStateFromError=="function"||X!==null&&typeof X.componentDidCatch=="function"&&(Lr===null||!Lr.has(X)))){E.flags|=65536,u&=-u,E.lanes|=u;var re=dh(E,F,u);H0(E,re);break e}}E=E.return}while(E!==null)}Yh(p)}catch(fe){u=fe,nt===p&&p!==null&&(nt=p=p.return);continue}break}while(!0)}function Xh(){var i=Po.current;return Po.current=Wo,i===null?Wo:i}function ml(){(st===0||st===3||st===2)&&(st=4),lt===null||!(oa&268435455)&&!(Xo&268435455)||kr(lt,xt)}function Jo(i,u){var p=Me;Me|=2;var y=Xh();(lt!==i||xt!==u)&&(nr=null,ca(i,u));do try{Pw();break}catch(C){Ph(i,C)}while(!0);if(Gf(),Me=p,Po.current=y,nt!==null)throw Error(n(261));return lt=null,xt=0,st}function Pw(){for(;nt!==null;)Ih(nt)}function Xw(){for(;nt!==null&&!TC();)Ih(nt)}function Ih(i){var u=Zh(i.alternate,i,Pt);i.memoizedProps=i.pendingProps,u===null?Yh(i):nt=u,dl.current=null}function Yh(i){var u=i;do{var p=u.alternate;if(i=u.return,u.flags&32768){if(p=Ww(p,u),p!==null){p.flags&=32767,nt=p;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{st=6,nt=null;return}}else if(p=zw(p,u,Pt),p!==null){nt=p;return}if(u=u.sibling,u!==null){nt=u;return}nt=u=i}while(u!==null);st===0&&(st=5)}function fa(i,u,p){var y=Fe,C=tn.transition;try{tn.transition=null,Fe=1,Iw(i,u,p,y)}finally{tn.transition=C,Fe=y}return null}function Iw(i,u,p,y){do as();while(_r!==null);if(Me&6)throw Error(n(327));p=i.finishedWork;var C=i.finishedLanes;if(p===null)return null;if(i.finishedWork=null,i.finishedLanes=0,p===i.current)throw Error(n(177));i.callbackNode=null,i.callbackPriority=0;var E=p.lanes|p.childLanes;if(MC(i,E),i===lt&&(nt=lt=null,xt=0),!(p.subtreeFlags&2064)&&!(p.flags&2064)||Yo||(Yo=!0,Jh(no,function(){return as(),null})),E=(p.flags&15990)!==0,p.subtreeFlags&15990||E){E=tn.transition,tn.transition=null;var _=Fe;Fe=1;var F=Me;Me|=4,dl.current=null,bw(i,p),zh(p,i),hw(mf),co=!!Ef,mf=Ef=null,i.current=p,Aw(p),xC(),Me=F,Fe=_,tn.transition=E}else i.current=p;if(Yo&&(Yo=!1,_r=i,qo=C),E=i.pendingLanes,E===0&&(Lr=null),wC(p.stateNode),Wt(i,Qe()),u!==null)for(y=i.onRecoverableError,p=0;p<u.length;p++)C=u[p],y(C.value,{componentStack:C.stack,digest:C.digest});if(Io)throw Io=!1,i=Tl,Tl=null,i;return qo&1&&i.tag!==0&&as(),E=i.pendingLanes,E&1?i===xl?hi++:(hi=0,xl=i):hi=0,Rr(),null}function as(){if(_r!==null){var i=Gp(qo),u=tn.transition,p=Fe;try{if(tn.transition=null,Fe=16>i?16:i,_r===null)var y=!1;else{if(i=_r,_r=null,qo=0,Me&6)throw Error(n(331));var C=Me;for(Me|=4,oe=i.current;oe!==null;){var E=oe,_=E.child;if(oe.flags&16){var F=E.deletions;if(F!==null){for(var $=0;$<F.length;$++){var I=F[$];for(oe=I;oe!==null;){var ee=oe;switch(ee.tag){case 0:case 11:case 15:li(8,ee,E)}var te=ee.child;if(te!==null)te.return=ee,oe=te;else for(;oe!==null;){ee=oe;var J=ee.sibling,ie=ee.return;if(Fh(ee),ee===I){oe=null;break}if(J!==null){J.return=ie,oe=J;break}oe=ie}}}var ue=E.alternate;if(ue!==null){var ce=ue.child;if(ce!==null){ue.child=null;do{var Ze=ce.sibling;ce.sibling=null,ce=Ze}while(ce!==null)}}oe=E}}if(E.subtreeFlags&2064&&_!==null)_.return=E,oe=_;else e:for(;oe!==null;){if(E=oe,E.flags&2048)switch(E.tag){case 0:case 11:case 15:li(9,E,E.return)}var K=E.sibling;if(K!==null){K.return=E.return,oe=K;break e}oe=E.return}}var W=i.current;for(oe=W;oe!==null;){_=oe;var X=_.child;if(_.subtreeFlags&2064&&X!==null)X.return=_,oe=X;else e:for(_=W;oe!==null;){if(F=oe,F.flags&2048)try{switch(F.tag){case 0:case 11:case 15:Ko(9,F)}}catch(fe){Ie(F,F.return,fe)}if(F===_){oe=null;break e}var re=F.sibling;if(re!==null){re.return=F.return,oe=re;break e}oe=F.return}}if(Me=C,Rr(),Dn&&typeof Dn.onPostCommitFiberRoot=="function")try{Dn.onPostCommitFiberRoot(ro,i)}catch{}y=!0}return y}finally{Fe=p,tn.transition=u}}return!1}function qh(i,u,p){u=es(p,u),u=hh(i,u,1),i=Dr(i,u,1),u=Mt(),i!==null&&($s(i,1,u),Wt(i,u))}function Ie(i,u,p){if(i.tag===3)qh(i,i,p);else for(;u!==null;){if(u.tag===3){qh(u,i,p);break}else if(u.tag===1){var y=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Lr===null||!Lr.has(y))){i=es(p,i),i=dh(u,i,1),u=Dr(u,i,1),i=Mt(),u!==null&&($s(u,1,i),Wt(u,i));break}}u=u.return}}function Yw(i,u,p){var y=i.pingCache;y!==null&&y.delete(u),u=Mt(),i.pingedLanes|=i.suspendedLanes&p,lt===i&&(xt&p)===p&&(st===4||st===3&&(xt&130023424)===xt&&500>Qe()-yl?ca(i,0):vl|=p),Wt(i,u)}function Qh(i,u){u===0&&(i.mode&1?(u=so,so<<=1,!(so&130023424)&&(so=4194304)):u=1);var p=Mt();i=Jn(i,u),i!==null&&($s(i,u,p),Wt(i,p))}function qw(i){var u=i.memoizedState,p=0;u!==null&&(p=u.retryLane),Qh(i,p)}function Qw(i,u){var p=0;switch(i.tag){case 13:var y=i.stateNode,C=i.memoizedState;C!==null&&(p=C.retryLane);break;case 19:y=i.stateNode;break;default:throw Error(n(314))}y!==null&&y.delete(u),Qh(i,p)}var Zh;Zh=function(i,u,p){if(i!==null)if(i.memoizedProps!==u.pendingProps||Ut.current)$t=!0;else{if(!(i.lanes&p)&&!(u.flags&128))return $t=!1,$w(i,u,p);$t=!!(i.flags&131072)}else $t=!1,Ae&&u.flags&1048576&&V0(u,Mo,u.index);switch(u.lanes=0,u.tag){case 2:var y=u.type;Ao(i,u),i=u.pendingProps;var C=Pa(u,Ct.current);Za(u,p),C=If(null,u,y,i,C,p);var E=Yf();return u.flags|=1,typeof C=="object"&&C!==null&&typeof C.render=="function"&&C.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,Gt(y)?(E=!0,Ro(u)):E=!1,u.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,Hf(u),C.updater=Ho,u.stateNode=C,C._reactInternals=u,tl(u,y,i,p),u=sl(null,u,y,!0,E,p)):(u.tag=0,Ae&&E&&Vf(u),Dt(null,u,C,p),u=u.child),u;case 16:y=u.elementType;e:{switch(Ao(i,u),i=u.pendingProps,C=y._init,y=C(y._payload),u.type=y,C=u.tag=Jw(y),i=pn(y,i),C){case 0:u=al(null,u,y,i,p);break e;case 1:u=mh(null,u,y,i,p);break e;case 11:u=xh(null,u,y,i,p);break e;case 14:u=Sh(null,u,y,pn(y.type,i),p);break e}throw Error(n(306,y,""))}return u;case 0:return y=u.type,C=u.pendingProps,C=u.elementType===y?C:pn(y,C),al(i,u,y,C,p);case 1:return y=u.type,C=u.pendingProps,C=u.elementType===y?C:pn(y,C),mh(i,u,y,C,p);case 3:e:{if(Rh(u),i===null)throw Error(n(387));y=u.pendingProps,E=u.memoizedState,C=E.element,W0(i,u),Fo(u,y,null,p);var _=u.memoizedState;if(y=_.element,E.isDehydrated)if(E={element:y,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},u.updateQueue.baseState=E,u.memoizedState=E,u.flags&256){C=es(Error(n(423)),u),u=Oh(i,u,y,p,C);break e}else if(y!==C){C=es(Error(n(424)),u),u=Oh(i,u,y,p,C);break e}else for(Kt=wr(u.stateNode.containerInfo.firstChild),jt=u,Ae=!0,gn=null,p=$0(u,null,y,p),u.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(Ya(),y===C){u=tr(i,u,p);break e}Dt(i,u,y,p)}u=u.child}return u;case 5:return A0(u),i===null&&Ff(u),y=u.type,C=u.pendingProps,E=i!==null?i.memoizedProps:null,_=C.children,Rf(y,C)?_=null:E!==null&&Rf(y,E)&&(u.flags|=32),Eh(i,u),Dt(i,u,_,p),u.child;case 6:return i===null&&Ff(u),null;case 13:return Dh(i,u,p);case 4:return bf(u,u.stateNode.containerInfo),y=u.pendingProps,i===null?u.child=qa(u,null,y,p):Dt(i,u,y,p),u.child;case 11:return y=u.type,C=u.pendingProps,C=u.elementType===y?C:pn(y,C),xh(i,u,y,C,p);case 7:return Dt(i,u,u.pendingProps,p),u.child;case 8:return Dt(i,u,u.pendingProps.children,p),u.child;case 12:return Dt(i,u,u.pendingProps.children,p),u.child;case 10:e:{if(y=u.type._context,C=u.pendingProps,E=u.memoizedProps,_=C.value,Ue(Vo,y._currentValue),y._currentValue=_,E!==null)if(ln(E.value,_)){if(E.children===C.children&&!Ut.current){u=tr(i,u,p);break e}}else for(E=u.child,E!==null&&(E.return=u);E!==null;){var F=E.dependencies;if(F!==null){_=E.child;for(var $=F.firstContext;$!==null;){if($.context===y){if(E.tag===1){$=er(-1,p&-p),$.tag=2;var I=E.updateQueue;if(I!==null){I=I.shared;var ee=I.pending;ee===null?$.next=$:($.next=ee.next,ee.next=$),I.pending=$}}E.lanes|=p,$=E.alternate,$!==null&&($.lanes|=p),zf(E.return,p,u),F.lanes|=p;break}$=$.next}}else if(E.tag===10)_=E.type===u.type?null:E.child;else if(E.tag===18){if(_=E.return,_===null)throw Error(n(341));_.lanes|=p,F=_.alternate,F!==null&&(F.lanes|=p),zf(_,p,u),_=E.sibling}else _=E.child;if(_!==null)_.return=E;else for(_=E;_!==null;){if(_===u){_=null;break}if(E=_.sibling,E!==null){E.return=_.return,_=E;break}_=_.return}E=_}Dt(i,u,C.children,p),u=u.child}return u;case 9:return C=u.type,y=u.pendingProps.children,Za(u,p),C=Jt(C),y=y(C),u.flags|=1,Dt(i,u,y,p),u.child;case 14:return y=u.type,C=pn(y,u.pendingProps),C=pn(y.type,C),Sh(i,u,y,C,p);case 15:return Ch(i,u,u.type,u.pendingProps,p);case 17:return y=u.type,C=u.pendingProps,C=u.elementType===y?C:pn(y,C),Ao(i,u),u.tag=1,Gt(y)?(i=!0,Ro(u)):i=!1,Za(u,p),gh(u,y,C),tl(u,y,C,p),sl(null,u,y,!0,i,p);case 19:return Lh(i,u,p);case 22:return wh(i,u,p)}throw Error(n(156,u.tag))};function Jh(i,u){return kp(i,u)}function Zw(i,u,p,y){this.tag=i,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nn(i,u,p,y){return new Zw(i,u,p,y)}function Rl(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Jw(i){if(typeof i=="function")return Rl(i)?1:0;if(i!=null){if(i=i.$$typeof,i===H)return 11;if(i===ne)return 14}return 2}function Br(i,u){var p=i.alternate;return p===null?(p=nn(i.tag,u,i.key,i.mode),p.elementType=i.elementType,p.type=i.type,p.stateNode=i.stateNode,p.alternate=i,i.alternate=p):(p.pendingProps=u,p.type=i.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=i.flags&14680064,p.childLanes=i.childLanes,p.lanes=i.lanes,p.child=i.child,p.memoizedProps=i.memoizedProps,p.memoizedState=i.memoizedState,p.updateQueue=i.updateQueue,u=i.dependencies,p.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},p.sibling=i.sibling,p.index=i.index,p.ref=i.ref,p}function eu(i,u,p,y,C,E){var _=2;if(y=i,typeof i=="function")Rl(i)&&(_=1);else if(typeof i=="string")_=5;else e:switch(i){case V:return la(p.children,C,E,u);case B:_=8,C|=8;break;case z:return i=nn(12,p,u,C|2),i.elementType=z,i.lanes=E,i;case P:return i=nn(13,p,u,C),i.elementType=P,i.lanes=E,i;case A:return i=nn(19,p,u,C),i.elementType=A,i.lanes=E,i;case se:return tu(p,C,E,u);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case k:_=10;break e;case U:_=9;break e;case H:_=11;break e;case ne:_=14;break e;case ae:_=16,y=null;break e}throw Error(n(130,i==null?i:typeof i,""))}return u=nn(_,p,u,C),u.elementType=i,u.type=y,u.lanes=E,u}function la(i,u,p,y){return i=nn(7,i,y,u),i.lanes=p,i}function tu(i,u,p,y){return i=nn(22,i,y,u),i.elementType=se,i.lanes=p,i.stateNode={isHidden:!1},i}function Ol(i,u,p){return i=nn(6,i,null,u),i.lanes=p,i}function Dl(i,u,p){return u=nn(4,i.children!==null?i.children:[],i.key,u),u.lanes=p,u.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},u}function eE(i,u,p,y,C){this.tag=u,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jc(0),this.expirationTimes=Jc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jc(0),this.identifierPrefix=y,this.onRecoverableError=C,this.mutableSourceEagerHydrationData=null}function Ml(i,u,p,y,C,E,_,F,$){return i=new eE(i,u,p,F,$),u===1?(u=1,E===!0&&(u|=8)):u=0,E=nn(3,null,null,u),i.current=E,E.stateNode=i,E.memoizedState={element:y,isDehydrated:p,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hf(E),i}function tE(i,u,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:D,key:y==null?null:""+y,children:i,containerInfo:u,implementation:p}}function ed(i){if(!i)return mr;i=i._reactInternals;e:{if(Jr(i)!==i||i.tag!==1)throw Error(n(170));var u=i;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(Gt(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(n(171))}if(i.tag===1){var p=i.type;if(Gt(p))return M0(i,p,u)}return u}function td(i,u,p,y,C,E,_,F,$){return i=Ml(p,y,!0,i,C,E,_,F,$),i.context=ed(null),p=i.current,y=Mt(),C=Vr(p),E=er(y,C),E.callback=u??null,Dr(p,E,C),i.current.lanes=C,$s(i,C,y),Wt(i,y),i}function nu(i,u,p,y){var C=u.current,E=Mt(),_=Vr(C);return p=ed(p),u.context===null?u.context=p:u.pendingContext=p,u=er(E,_),u.payload={element:i},y=y===void 0?null:y,y!==null&&(u.callback=y),i=Dr(C,u,_),i!==null&&(vn(i,C,_,E),Bo(i,C,_)),_}function ru(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function nd(i,u){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var p=i.retryLane;i.retryLane=p!==0&&p<u?p:u}}function Ll(i,u){nd(i,u),(i=i.alternate)&&nd(i,u)}var rd=typeof reportError=="function"?reportError:function(i){console.error(i)};function _l(i){this._internalRoot=i}au.prototype.render=_l.prototype.render=function(i){var u=this._internalRoot;if(u===null)throw Error(n(409));nu(i,u,null,null)},au.prototype.unmount=_l.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var u=i.containerInfo;ua(function(){nu(null,i,null,null)}),u[Yn]=null}};function au(i){this._internalRoot=i}au.prototype.unstable_scheduleHydration=function(i){if(i){var u=Wp();i={blockedOn:null,target:i,priority:u};for(var p=0;p<xr.length&&u!==0&&u<xr[p].priority;p++);xr.splice(p,0,i),p===0&&Ap(i)}};function Vl(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function su(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function ad(){}function nE(i,u,p,y,C){if(C){if(typeof y=="function"){var E=y;y=function(){var I=ru(_);E.call(I)}}var _=td(u,y,i,0,null,!1,!1,"",ad);return i._reactRootContainer=_,i[Yn]=_.current,Zs(i.nodeType===8?i.parentNode:i),ua(),_}for(;C=i.lastChild;)i.removeChild(C);if(typeof y=="function"){var F=y;y=function(){var I=ru($);F.call(I)}}var $=Ml(i,0,!1,null,null,!1,!1,"",ad);return i._reactRootContainer=$,i[Yn]=$.current,Zs(i.nodeType===8?i.parentNode:i),ua(function(){nu(u,$,p,y)}),$}function iu(i,u,p,y,C){var E=p._reactRootContainer;if(E){var _=E;if(typeof C=="function"){var F=C;C=function(){var $=ru(_);F.call($)}}nu(u,_,i,C)}else _=nE(p,u,i,C,y);return ru(_)}$p=function(i){switch(i.tag){case 3:var u=i.stateNode;if(u.current.memoizedState.isDehydrated){var p=Gs(u.pendingLanes);p!==0&&(ef(u,p|1),Wt(u,Qe()),!(Me&6)&&(rs=Qe()+500,Rr()))}break;case 13:ua(function(){var y=Jn(i,1);if(y!==null){var C=Mt();vn(y,i,1,C)}}),Ll(i,1)}},tf=function(i){if(i.tag===13){var u=Jn(i,134217728);if(u!==null){var p=Mt();vn(u,i,134217728,p)}Ll(i,134217728)}},zp=function(i){if(i.tag===13){var u=Vr(i),p=Jn(i,u);if(p!==null){var y=Mt();vn(p,i,u,y)}Ll(i,u)}},Wp=function(){return Fe},Hp=function(i,u){var p=Fe;try{return Fe=i,u()}finally{Fe=p}},Xc=function(i,u,p){switch(u){case"input":if(zc(i,p),u=p.name,p.type==="radio"&&u!=null){for(p=i;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll("input[name="+JSON.stringify(""+u)+'][type="radio"]'),u=0;u<p.length;u++){var y=p[u];if(y!==i&&y.form===i.form){var C=Eo(y);if(!C)throw Error(n(90));lp(y),zc(y,C)}}}break;case"textarea":vp(i,p);break;case"select":u=p.value,u!=null&&Fa(i,!!p.multiple,u,!1)}},Rp=wl,Op=ua;var rE={usingClientEntryPoint:!1,Events:[ti,ja,Eo,Ep,mp,wl]},di={findFiberByHostInstance:ea,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},aE={bundleType:di.bundleType,version:di.version,rendererPackageName:di.rendererPackageName,rendererConfig:di.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:R.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=_p(i),i===null?null:i.stateNode},findFiberByHostInstance:di.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ou=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ou.isDisabled&&ou.supportsFiber)try{ro=ou.inject(aE),Dn=ou}catch{}}return Ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rE,Ht.createPortal=function(i,u){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vl(u))throw Error(n(200));return tE(i,u,null,p)},Ht.createRoot=function(i,u){if(!Vl(i))throw Error(n(299));var p=!1,y="",C=rd;return u!=null&&(u.unstable_strictMode===!0&&(p=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onRecoverableError!==void 0&&(C=u.onRecoverableError)),u=Ml(i,1,!1,null,null,p,!1,y,C),i[Yn]=u.current,Zs(i.nodeType===8?i.parentNode:i),new _l(u)},Ht.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var u=i._reactInternals;if(u===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=_p(u),i=i===null?null:i.stateNode,i},Ht.flushSync=function(i){return ua(i)},Ht.hydrate=function(i,u,p){if(!su(u))throw Error(n(200));return iu(null,i,u,!0,p)},Ht.hydrateRoot=function(i,u,p){if(!Vl(i))throw Error(n(405));var y=p!=null&&p.hydratedSources||null,C=!1,E="",_=rd;if(p!=null&&(p.unstable_strictMode===!0&&(C=!0),p.identifierPrefix!==void 0&&(E=p.identifierPrefix),p.onRecoverableError!==void 0&&(_=p.onRecoverableError)),u=td(u,null,i,1,p??null,C,!1,E,_),i[Yn]=u.current,Zs(i),y)for(i=0;i<y.length;i++)p=y[i],C=p._getVersion,C=C(p._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[p,C]:u.mutableSourceEagerHydrationData.push(p,C);return new au(u)},Ht.render=function(i,u,p){if(!su(u))throw Error(n(200));return iu(null,i,u,!1,p)},Ht.unmountComponentAtNode=function(i){if(!su(i))throw Error(n(40));return i._reactRootContainer?(ua(function(){iu(null,null,i,!1,function(){i._reactRootContainer=null,i[Yn]=null})}),!0):!1},Ht.unstable_batchedUpdates=wl,Ht.unstable_renderSubtreeIntoContainer=function(i,u,p,y){if(!su(p))throw Error(n(200));if(i==null||i._reactInternals===void 0)throw Error(n(38));return iu(i,u,p,!1,y)},Ht.version="18.3.1-next-f1338f8080-20240426",Ht}var gd;function pE(){if(gd)return Fl.exports;gd=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Fl.exports=gE(),Fl.exports}var pd;function hE(){if(pd)return uu;pd=1;var t=pE();return uu.createRoot=t.createRoot,uu.hydrateRoot=t.hydrateRoot,uu}var dE=hE(),Re=1e-6,dt=typeof Float32Array<"u"?Float32Array:Array,vE=Math.PI/180;function yE(t){return t*vE}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function Cy(){var t=new dt(9);return dt!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function l1(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function TE(t){var e=new dt(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function xE(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function SE(t,e,n,r,a,s,o,c,f){var l=new dt(9);return l[0]=t,l[1]=e,l[2]=n,l[3]=r,l[4]=a,l[5]=s,l[6]=o,l[7]=c,l[8]=f,l}function CE(t,e,n,r,a,s,o,c,f,l){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=s,t[5]=o,t[6]=c,t[7]=f,t[8]=l,t}function Va(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function wy(t,e){if(t===e){var n=e[1],r=e[2],a=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=a}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function g1(t,e){var n=e[0],r=e[1],a=e[2],s=e[3],o=e[4],c=e[5],f=e[6],l=e[7],h=e[8],g=h*o-c*l,d=-h*s+c*f,v=l*s-o*f,S=n*g+r*d+a*v;return S?(S=1/S,t[0]=g*S,t[1]=(-h*r+a*l)*S,t[2]=(c*r-a*o)*S,t[3]=d*S,t[4]=(h*n-a*f)*S,t[5]=(-c*n+a*s)*S,t[6]=v*S,t[7]=(-l*n+r*f)*S,t[8]=(o*n-r*s)*S,t):null}function wE(t,e){var n=e[0],r=e[1],a=e[2],s=e[3],o=e[4],c=e[5],f=e[6],l=e[7],h=e[8];return t[0]=o*h-c*l,t[1]=a*l-r*h,t[2]=r*c-a*o,t[3]=c*f-s*h,t[4]=n*h-a*f,t[5]=a*s-n*c,t[6]=s*l-o*f,t[7]=r*f-n*l,t[8]=n*o-r*s,t}function EE(t){var e=t[0],n=t[1],r=t[2],a=t[3],s=t[4],o=t[5],c=t[6],f=t[7],l=t[8];return e*(l*s-o*f)+n*(-l*a+o*c)+r*(f*a-s*c)}function Ey(t,e,n){var r=e[0],a=e[1],s=e[2],o=e[3],c=e[4],f=e[5],l=e[6],h=e[7],g=e[8],d=n[0],v=n[1],S=n[2],T=n[3],x=n[4],m=n[5],O=n[6],w=n[7],R=n[8];return t[0]=d*r+v*o+S*l,t[1]=d*a+v*c+S*h,t[2]=d*s+v*f+S*g,t[3]=T*r+x*o+m*l,t[4]=T*a+x*c+m*h,t[5]=T*s+x*f+m*g,t[6]=O*r+w*o+R*l,t[7]=O*a+w*c+R*h,t[8]=O*s+w*f+R*g,t}function mE(t,e,n){var r=e[0],a=e[1],s=e[2],o=e[3],c=e[4],f=e[5],l=e[6],h=e[7],g=e[8],d=n[0],v=n[1];return t[0]=r,t[1]=a,t[2]=s,t[3]=o,t[4]=c,t[5]=f,t[6]=d*r+v*o+l,t[7]=d*a+v*c+h,t[8]=d*s+v*f+g,t}function RE(t,e,n){var r=e[0],a=e[1],s=e[2],o=e[3],c=e[4],f=e[5],l=e[6],h=e[7],g=e[8],d=Math.sin(n),v=Math.cos(n);return t[0]=v*r+d*o,t[1]=v*a+d*c,t[2]=v*s+d*f,t[3]=v*o-d*r,t[4]=v*c-d*a,t[5]=v*f-d*s,t[6]=l,t[7]=h,t[8]=g,t}function OE(t,e,n){var r=n[0],a=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function DE(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function ME(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function LE(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function _E(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function VE(t,e){var n=e[0],r=e[1],a=e[2],s=e[3],o=n+n,c=r+r,f=a+a,l=n*o,h=r*o,g=r*c,d=a*o,v=a*c,S=a*f,T=s*o,x=s*c,m=s*f;return t[0]=1-g-S,t[3]=h-m,t[6]=d+x,t[1]=h+m,t[4]=1-l-S,t[7]=v-T,t[2]=d-x,t[5]=v+T,t[8]=1-l-g,t}function kE(t,e){var n=e[0],r=e[1],a=e[2],s=e[3],o=e[4],c=e[5],f=e[6],l=e[7],h=e[8],g=e[9],d=e[10],v=e[11],S=e[12],T=e[13],x=e[14],m=e[15],O=n*c-r*o,w=n*f-a*o,R=n*l-s*o,M=r*f-a*c,D=r*l-s*c,V=a*l-s*f,B=h*T-g*S,z=h*x-d*S,k=h*m-v*S,U=g*x-d*T,H=g*m-v*T,P=d*m-v*x,A=O*P-w*H+R*U+M*k-D*z+V*B;return A?(A=1/A,t[0]=(c*P-f*H+l*U)*A,t[1]=(f*k-o*P-l*z)*A,t[2]=(o*H-c*k+l*B)*A,t[3]=(a*H-r*P-s*U)*A,t[4]=(n*P-a*k+s*z)*A,t[5]=(r*k-n*H-s*B)*A,t[6]=(T*V-x*D+m*M)*A,t[7]=(x*R-S*V-m*w)*A,t[8]=(S*D-T*R+m*O)*A,t):null}function BE(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function FE(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function NE(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function UE(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function my(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function GE(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function $E(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t}function zE(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function WE(t,e){var n=t[0],r=t[1],a=t[2],s=t[3],o=t[4],c=t[5],f=t[6],l=t[7],h=t[8],g=e[0],d=e[1],v=e[2],S=e[3],T=e[4],x=e[5],m=e[6],O=e[7],w=e[8];return Math.abs(n-g)<=Re*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(r-d)<=Re*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(a-v)<=Re*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(s-S)<=Re*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(o-T)<=Re*Math.max(1,Math.abs(o),Math.abs(T))&&Math.abs(c-x)<=Re*Math.max(1,Math.abs(c),Math.abs(x))&&Math.abs(f-m)<=Re*Math.max(1,Math.abs(f),Math.abs(m))&&Math.abs(l-O)<=Re*Math.max(1,Math.abs(l),Math.abs(O))&&Math.abs(h-w)<=Re*Math.max(1,Math.abs(h),Math.abs(w))}var HE=Ey,bE=my;const AE=Object.freeze(Object.defineProperty({__proto__:null,add:UE,adjoint:wE,clone:TE,copy:xE,create:Cy,determinant:EE,equals:WE,exactEquals:zE,frob:NE,fromMat2d:_E,fromMat4:l1,fromQuat:VE,fromRotation:ME,fromScaling:LE,fromTranslation:DE,fromValues:SE,identity:Va,invert:g1,mul:HE,multiply:Ey,multiplyScalar:GE,multiplyScalarAndAdd:$E,normalFromMat4:kE,projection:BE,rotate:RE,scale:OE,set:CE,str:FE,sub:bE,subtract:my,translate:mE,transpose:wy},Symbol.toStringTag,{value:"Module"}));function p1(){var t=new dt(16);return dt!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function jE(t){var e=new dt(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function St(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function KE(t,e,n,r,a,s,o,c,f,l,h,g,d,v,S,T){var x=new dt(16);return x[0]=t,x[1]=e,x[2]=n,x[3]=r,x[4]=a,x[5]=s,x[6]=o,x[7]=c,x[8]=f,x[9]=l,x[10]=h,x[11]=g,x[12]=d,x[13]=v,x[14]=S,x[15]=T,x}function PE(t,e,n,r,a,s,o,c,f,l,h,g,d,v,S,T,x){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=s,t[5]=o,t[6]=c,t[7]=f,t[8]=l,t[9]=h,t[10]=g,t[11]=d,t[12]=v,t[13]=S,t[14]=T,t[15]=x,t}function Ce(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ze(t,e){if(t===e){var n=e[1],r=e[2],a=e[3],s=e[6],o=e[7],c=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=s,t[11]=e[14],t[12]=a,t[13]=o,t[14]=c}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function Ft(t,e){var n=e[0],r=e[1],a=e[2],s=e[3],o=e[4],c=e[5],f=e[6],l=e[7],h=e[8],g=e[9],d=e[10],v=e[11],S=e[12],T=e[13],x=e[14],m=e[15],O=n*c-r*o,w=n*f-a*o,R=n*l-s*o,M=r*f-a*c,D=r*l-s*c,V=a*l-s*f,B=h*T-g*S,z=h*x-d*S,k=h*m-v*S,U=g*x-d*T,H=g*m-v*T,P=d*m-v*x,A=O*P-w*H+R*U+M*k-D*z+V*B;return A?(A=1/A,t[0]=(c*P-f*H+l*U)*A,t[1]=(a*H-r*P-s*U)*A,t[2]=(T*V-x*D+m*M)*A,t[3]=(d*D-g*V-v*M)*A,t[4]=(f*k-o*P-l*z)*A,t[5]=(n*P-a*k+s*z)*A,t[6]=(x*R-S*V-m*w)*A,t[7]=(h*V-d*R+v*w)*A,t[8]=(o*H-c*k+l*B)*A,t[9]=(r*k-n*H-s*B)*A,t[10]=(S*D-T*R+m*O)*A,t[11]=(g*R-h*D-v*O)*A,t[12]=(c*z-o*U-f*B)*A,t[13]=(n*U-r*z+a*B)*A,t[14]=(T*w-S*M-x*O)*A,t[15]=(h*M-g*w+d*O)*A,t):null}function XE(t,e){var n=e[0],r=e[1],a=e[2],s=e[3],o=e[4],c=e[5],f=e[6],l=e[7],h=e[8],g=e[9],d=e[10],v=e[11],S=e[12],T=e[13],x=e[14],m=e[15];return t[0]=c*(d*m-v*x)-g*(f*m-l*x)+T*(f*v-l*d),t[1]=-(r*(d*m-v*x)-g*(a*m-s*x)+T*(a*v-s*d)),t[2]=r*(f*m-l*x)-c*(a*m-s*x)+T*(a*l-s*f),t[3]=-(r*(f*v-l*d)-c*(a*v-s*d)+g*(a*l-s*f)),t[4]=-(o*(d*m-v*x)-h*(f*m-l*x)+S*(f*v-l*d)),t[5]=n*(d*m-v*x)-h*(a*m-s*x)+S*(a*v-s*d),t[6]=-(n*(f*m-l*x)-o*(a*m-s*x)+S*(a*l-s*f)),t[7]=n*(f*v-l*d)-o*(a*v-s*d)+h*(a*l-s*f),t[8]=o*(g*m-v*T)-h*(c*m-l*T)+S*(c*v-l*g),t[9]=-(n*(g*m-v*T)-h*(r*m-s*T)+S*(r*v-s*g)),t[10]=n*(c*m-l*T)-o*(r*m-s*T)+S*(r*l-s*c),t[11]=-(n*(c*v-l*g)-o*(r*v-s*g)+h*(r*l-s*c)),t[12]=-(o*(g*x-d*T)-h*(c*x-f*T)+S*(c*d-f*g)),t[13]=n*(g*x-d*T)-h*(r*x-a*T)+S*(r*d-a*g),t[14]=-(n*(c*x-f*T)-o*(r*x-a*T)+S*(r*f-a*c)),t[15]=n*(c*d-f*g)-o*(r*d-a*g)+h*(r*f-a*c),t}function IE(t){var e=t[0],n=t[1],r=t[2],a=t[3],s=t[4],o=t[5],c=t[6],f=t[7],l=t[8],h=t[9],g=t[10],d=t[11],v=t[12],S=t[13],T=t[14],x=t[15],m=e*o-n*s,O=e*c-r*s,w=e*f-a*s,R=n*c-r*o,M=n*f-a*o,D=r*f-a*c,V=l*S-h*v,B=l*T-g*v,z=l*x-d*v,k=h*T-g*S,U=h*x-d*S,H=g*x-d*T;return m*H-O*U+w*k+R*z-M*B+D*V}function ut(t,e,n){var r=e[0],a=e[1],s=e[2],o=e[3],c=e[4],f=e[5],l=e[6],h=e[7],g=e[8],d=e[9],v=e[10],S=e[11],T=e[12],x=e[13],m=e[14],O=e[15],w=n[0],R=n[1],M=n[2],D=n[3];return t[0]=w*r+R*c+M*g+D*T,t[1]=w*a+R*f+M*d+D*x,t[2]=w*s+R*l+M*v+D*m,t[3]=w*o+R*h+M*S+D*O,w=n[4],R=n[5],M=n[6],D=n[7],t[4]=w*r+R*c+M*g+D*T,t[5]=w*a+R*f+M*d+D*x,t[6]=w*s+R*l+M*v+D*m,t[7]=w*o+R*h+M*S+D*O,w=n[8],R=n[9],M=n[10],D=n[11],t[8]=w*r+R*c+M*g+D*T,t[9]=w*a+R*f+M*d+D*x,t[10]=w*s+R*l+M*v+D*m,t[11]=w*o+R*h+M*S+D*O,w=n[12],R=n[13],M=n[14],D=n[15],t[12]=w*r+R*c+M*g+D*T,t[13]=w*a+R*f+M*d+D*x,t[14]=w*s+R*l+M*v+D*m,t[15]=w*o+R*h+M*S+D*O,t}function tt(t,e,n){var r=n[0],a=n[1],s=n[2],o,c,f,l,h,g,d,v,S,T,x,m;return e===t?(t[12]=e[0]*r+e[4]*a+e[8]*s+e[12],t[13]=e[1]*r+e[5]*a+e[9]*s+e[13],t[14]=e[2]*r+e[6]*a+e[10]*s+e[14],t[15]=e[3]*r+e[7]*a+e[11]*s+e[15]):(o=e[0],c=e[1],f=e[2],l=e[3],h=e[4],g=e[5],d=e[6],v=e[7],S=e[8],T=e[9],x=e[10],m=e[11],t[0]=o,t[1]=c,t[2]=f,t[3]=l,t[4]=h,t[5]=g,t[6]=d,t[7]=v,t[8]=S,t[9]=T,t[10]=x,t[11]=m,t[12]=o*r+h*a+S*s+e[12],t[13]=c*r+g*a+T*s+e[13],t[14]=f*r+d*a+x*s+e[14],t[15]=l*r+v*a+m*s+e[15]),t}function La(t,e,n){var r=n[0],a=n[1],s=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Tn(t,e,n,r){var a=r[0],s=r[1],o=r[2],c=Math.hypot(a,s,o),f,l,h,g,d,v,S,T,x,m,O,w,R,M,D,V,B,z,k,U,H,P,A,ne;return c<Re?null:(c=1/c,a*=c,s*=c,o*=c,f=Math.sin(n),l=Math.cos(n),h=1-l,g=e[0],d=e[1],v=e[2],S=e[3],T=e[4],x=e[5],m=e[6],O=e[7],w=e[8],R=e[9],M=e[10],D=e[11],V=a*a*h+l,B=s*a*h+o*f,z=o*a*h-s*f,k=a*s*h-o*f,U=s*s*h+l,H=o*s*h+a*f,P=a*o*h+s*f,A=s*o*h-a*f,ne=o*o*h+l,t[0]=g*V+T*B+w*z,t[1]=d*V+x*B+R*z,t[2]=v*V+m*B+M*z,t[3]=S*V+O*B+D*z,t[4]=g*k+T*U+w*H,t[5]=d*k+x*U+R*H,t[6]=v*k+m*U+M*H,t[7]=S*k+O*U+D*H,t[8]=g*P+T*A+w*ne,t[9]=d*P+x*A+R*ne,t[10]=v*P+m*A+M*ne,t[11]=S*P+O*A+D*ne,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function h1(t,e,n){var r=Math.sin(n),a=Math.cos(n),s=e[4],o=e[5],c=e[6],f=e[7],l=e[8],h=e[9],g=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*a+l*r,t[5]=o*a+h*r,t[6]=c*a+g*r,t[7]=f*a+d*r,t[8]=l*a-s*r,t[9]=h*a-o*r,t[10]=g*a-c*r,t[11]=d*a-f*r,t}function d1(t,e,n){var r=Math.sin(n),a=Math.cos(n),s=e[0],o=e[1],c=e[2],f=e[3],l=e[8],h=e[9],g=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*a-l*r,t[1]=o*a-h*r,t[2]=c*a-g*r,t[3]=f*a-d*r,t[8]=s*r+l*a,t[9]=o*r+h*a,t[10]=c*r+g*a,t[11]=f*r+d*a,t}function v1(t,e,n){var r=Math.sin(n),a=Math.cos(n),s=e[0],o=e[1],c=e[2],f=e[3],l=e[4],h=e[5],g=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*a+l*r,t[1]=o*a+h*r,t[2]=c*a+g*r,t[3]=f*a+d*r,t[4]=l*a-s*r,t[5]=h*a-o*r,t[6]=g*a-c*r,t[7]=d*a-f*r,t}function Ry(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function Oy(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Dy(t,e,n){var r=n[0],a=n[1],s=n[2],o=Math.hypot(r,a,s),c,f,l;return o<Re?null:(o=1/o,r*=o,a*=o,s*=o,c=Math.sin(e),f=Math.cos(e),l=1-f,t[0]=r*r*l+f,t[1]=a*r*l+s*c,t[2]=s*r*l-a*c,t[3]=0,t[4]=r*a*l-s*c,t[5]=a*a*l+f,t[6]=s*a*l+r*c,t[7]=0,t[8]=r*s*l+a*c,t[9]=a*s*l-r*c,t[10]=s*s*l+f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function YE(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function qE(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function QE(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function My(t,e,n){var r=e[0],a=e[1],s=e[2],o=e[3],c=r+r,f=a+a,l=s+s,h=r*c,g=r*f,d=r*l,v=a*f,S=a*l,T=s*l,x=o*c,m=o*f,O=o*l;return t[0]=1-(v+T),t[1]=g+O,t[2]=d-m,t[3]=0,t[4]=g-O,t[5]=1-(h+T),t[6]=S+x,t[7]=0,t[8]=d+m,t[9]=S-x,t[10]=1-(h+v),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function ZE(t,e){var n=new dt(3),r=-e[0],a=-e[1],s=-e[2],o=e[3],c=e[4],f=e[5],l=e[6],h=e[7],g=r*r+a*a+s*s+o*o;return g>0?(n[0]=(c*o+h*r+f*s-l*a)*2/g,n[1]=(f*o+h*a+l*r-c*s)*2/g,n[2]=(l*o+h*s+c*a-f*r)*2/g):(n[0]=(c*o+h*r+f*s-l*a)*2,n[1]=(f*o+h*a+l*r-c*s)*2,n[2]=(l*o+h*s+c*a-f*r)*2),My(t,e,n),t}function JE(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function Ly(t,e){var n=e[0],r=e[1],a=e[2],s=e[4],o=e[5],c=e[6],f=e[8],l=e[9],h=e[10];return t[0]=Math.hypot(n,r,a),t[1]=Math.hypot(s,o,c),t[2]=Math.hypot(f,l,h),t}function Fg(t,e){var n=new dt(3);Ly(n,e);var r=1/n[0],a=1/n[1],s=1/n[2],o=e[0]*r,c=e[1]*a,f=e[2]*s,l=e[4]*r,h=e[5]*a,g=e[6]*s,d=e[8]*r,v=e[9]*a,S=e[10]*s,T=o+h+S,x=0;return T>0?(x=Math.sqrt(T+1)*2,t[3]=.25*x,t[0]=(g-v)/x,t[1]=(d-f)/x,t[2]=(c-l)/x):o>h&&o>S?(x=Math.sqrt(1+o-h-S)*2,t[3]=(g-v)/x,t[0]=.25*x,t[1]=(c+l)/x,t[2]=(d+f)/x):h>S?(x=Math.sqrt(1+h-o-S)*2,t[3]=(d-f)/x,t[0]=(c+l)/x,t[1]=.25*x,t[2]=(g+v)/x):(x=Math.sqrt(1+S-o-h)*2,t[3]=(c-l)/x,t[0]=(d+f)/x,t[1]=(g+v)/x,t[2]=.25*x),t}function _y(t,e,n,r){var a=e[0],s=e[1],o=e[2],c=e[3],f=a+a,l=s+s,h=o+o,g=a*f,d=a*l,v=a*h,S=s*l,T=s*h,x=o*h,m=c*f,O=c*l,w=c*h,R=r[0],M=r[1],D=r[2];return t[0]=(1-(S+x))*R,t[1]=(d+w)*R,t[2]=(v-O)*R,t[3]=0,t[4]=(d-w)*M,t[5]=(1-(g+x))*M,t[6]=(T+m)*M,t[7]=0,t[8]=(v+O)*D,t[9]=(T-m)*D,t[10]=(1-(g+S))*D,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function em(t,e,n,r,a){var s=e[0],o=e[1],c=e[2],f=e[3],l=s+s,h=o+o,g=c+c,d=s*l,v=s*h,S=s*g,T=o*h,x=o*g,m=c*g,O=f*l,w=f*h,R=f*g,M=r[0],D=r[1],V=r[2],B=a[0],z=a[1],k=a[2],U=(1-(T+m))*M,H=(v+R)*M,P=(S-w)*M,A=(v-R)*D,ne=(1-(d+m))*D,ae=(x+O)*D,se=(S+w)*V,Q=(x-O)*V,j=(1-(d+T))*V;return t[0]=U,t[1]=H,t[2]=P,t[3]=0,t[4]=A,t[5]=ne,t[6]=ae,t[7]=0,t[8]=se,t[9]=Q,t[10]=j,t[11]=0,t[12]=n[0]+B-(U*B+A*z+se*k),t[13]=n[1]+z-(H*B+ne*z+Q*k),t[14]=n[2]+k-(P*B+ae*z+j*k),t[15]=1,t}function nc(t,e){var n=e[0],r=e[1],a=e[2],s=e[3],o=n+n,c=r+r,f=a+a,l=n*o,h=r*o,g=r*c,d=a*o,v=a*c,S=a*f,T=s*o,x=s*c,m=s*f;return t[0]=1-g-S,t[1]=h+m,t[2]=d-x,t[3]=0,t[4]=h-m,t[5]=1-l-S,t[6]=v+T,t[7]=0,t[8]=d+x,t[9]=v-T,t[10]=1-l-g,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function tm(t,e,n,r,a,s,o){var c=1/(n-e),f=1/(a-r),l=1/(s-o);return t[0]=s*2*c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s*2*f,t[6]=0,t[7]=0,t[8]=(n+e)*c,t[9]=(a+r)*f,t[10]=(o+s)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*l,t[15]=0,t}function Vy(t,e,n,r,a){var s=1/Math.tan(e/2),o;return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,a!=null&&a!==1/0?(o=1/(r-a),t[10]=(a+r)*o,t[14]=2*a*r*o):(t[10]=-1,t[14]=-2*r),t}var nm=Vy;function rm(t,e,n,r,a){var s=1/Math.tan(e/2),o;return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,a!=null&&a!==1/0?(o=1/(r-a),t[10]=a*o,t[14]=a*r*o):(t[10]=-1,t[14]=-r),t}function am(t,e,n,r){var a=Math.tan(e.upDegrees*Math.PI/180),s=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),c=Math.tan(e.rightDegrees*Math.PI/180),f=2/(o+c),l=2/(a+s);return t[0]=f,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-((o-c)*f*.5),t[9]=(a-s)*l*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function ky(t,e,n,r,a,s,o){var c=1/(e-n),f=1/(r-a),l=1/(s-o);return t[0]=-2*c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*f,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*c,t[13]=(a+r)*f,t[14]=(o+s)*l,t[15]=1,t}var By=ky;function sm(t,e,n,r,a,s,o){var c=1/(e-n),f=1/(r-a),l=1/(s-o);return t[0]=-2*c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*f,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=l,t[11]=0,t[12]=(e+n)*c,t[13]=(a+r)*f,t[14]=s*l,t[15]=1,t}function Fy(t,e,n,r){var a,s,o,c,f,l,h,g,d,v,S=e[0],T=e[1],x=e[2],m=r[0],O=r[1],w=r[2],R=n[0],M=n[1],D=n[2];return Math.abs(S-R)<Re&&Math.abs(T-M)<Re&&Math.abs(x-D)<Re?Ce(t):(h=S-R,g=T-M,d=x-D,v=1/Math.hypot(h,g,d),h*=v,g*=v,d*=v,a=O*d-w*g,s=w*h-m*d,o=m*g-O*h,v=Math.hypot(a,s,o),v?(v=1/v,a*=v,s*=v,o*=v):(a=0,s=0,o=0),c=g*o-d*s,f=d*a-h*o,l=h*s-g*a,v=Math.hypot(c,f,l),v?(v=1/v,c*=v,f*=v,l*=v):(c=0,f=0,l=0),t[0]=a,t[1]=c,t[2]=h,t[3]=0,t[4]=s,t[5]=f,t[6]=g,t[7]=0,t[8]=o,t[9]=l,t[10]=d,t[11]=0,t[12]=-(a*S+s*T+o*x),t[13]=-(c*S+f*T+l*x),t[14]=-(h*S+g*T+d*x),t[15]=1,t)}function im(t,e,n,r){var a=e[0],s=e[1],o=e[2],c=r[0],f=r[1],l=r[2],h=a-n[0],g=s-n[1],d=o-n[2],v=h*h+g*g+d*d;v>0&&(v=1/Math.sqrt(v),h*=v,g*=v,d*=v);var S=f*d-l*g,T=l*h-c*d,x=c*g-f*h;return v=S*S+T*T+x*x,v>0&&(v=1/Math.sqrt(v),S*=v,T*=v,x*=v),t[0]=S,t[1]=T,t[2]=x,t[3]=0,t[4]=g*x-d*T,t[5]=d*S-h*x,t[6]=h*T-g*S,t[7]=0,t[8]=h,t[9]=g,t[10]=d,t[11]=0,t[12]=a,t[13]=s,t[14]=o,t[15]=1,t}function om(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function um(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function cm(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function Ny(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function fm(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function lm(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function gm(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function pm(t,e){var n=t[0],r=t[1],a=t[2],s=t[3],o=t[4],c=t[5],f=t[6],l=t[7],h=t[8],g=t[9],d=t[10],v=t[11],S=t[12],T=t[13],x=t[14],m=t[15],O=e[0],w=e[1],R=e[2],M=e[3],D=e[4],V=e[5],B=e[6],z=e[7],k=e[8],U=e[9],H=e[10],P=e[11],A=e[12],ne=e[13],ae=e[14],se=e[15];return Math.abs(n-O)<=Re*Math.max(1,Math.abs(n),Math.abs(O))&&Math.abs(r-w)<=Re*Math.max(1,Math.abs(r),Math.abs(w))&&Math.abs(a-R)<=Re*Math.max(1,Math.abs(a),Math.abs(R))&&Math.abs(s-M)<=Re*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(o-D)<=Re*Math.max(1,Math.abs(o),Math.abs(D))&&Math.abs(c-V)<=Re*Math.max(1,Math.abs(c),Math.abs(V))&&Math.abs(f-B)<=Re*Math.max(1,Math.abs(f),Math.abs(B))&&Math.abs(l-z)<=Re*Math.max(1,Math.abs(l),Math.abs(z))&&Math.abs(h-k)<=Re*Math.max(1,Math.abs(h),Math.abs(k))&&Math.abs(g-U)<=Re*Math.max(1,Math.abs(g),Math.abs(U))&&Math.abs(d-H)<=Re*Math.max(1,Math.abs(d),Math.abs(H))&&Math.abs(v-P)<=Re*Math.max(1,Math.abs(v),Math.abs(P))&&Math.abs(S-A)<=Re*Math.max(1,Math.abs(S),Math.abs(A))&&Math.abs(T-ne)<=Re*Math.max(1,Math.abs(T),Math.abs(ne))&&Math.abs(x-ae)<=Re*Math.max(1,Math.abs(x),Math.abs(ae))&&Math.abs(m-se)<=Re*Math.max(1,Math.abs(m),Math.abs(se))}var Ng=ut,hm=Ny;const Ug=Object.freeze(Object.defineProperty({__proto__:null,add:cm,adjoint:XE,clone:jE,copy:St,create:p1,determinant:IE,equals:pm,exactEquals:gm,frob:um,fromQuat:nc,fromQuat2:ZE,fromRotation:Dy,fromRotationTranslation:My,fromRotationTranslationScale:_y,fromRotationTranslationScaleOrigin:em,fromScaling:Oy,fromTranslation:Ry,fromValues:KE,fromXRotation:YE,fromYRotation:qE,fromZRotation:QE,frustum:tm,getRotation:Fg,getScaling:Ly,getTranslation:JE,identity:Ce,invert:Ft,lookAt:Fy,mul:Ng,multiply:ut,multiplyScalar:fm,multiplyScalarAndAdd:lm,ortho:By,orthoNO:ky,orthoZO:sm,perspective:nm,perspectiveFromFieldOfView:am,perspectiveNO:Vy,perspectiveZO:rm,rotate:Tn,rotateX:h1,rotateY:d1,rotateZ:v1,scale:La,set:PE,str:om,sub:hm,subtract:Ny,targetTo:im,translate:tt,transpose:ze},Symbol.toStringTag,{value:"Module"}));function Uy(){var t=new dt(3);return dt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Gg(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function hd(t,e,n){var r=new dt(3);return r[0]=t,r[1]=e,r[2]=n,r}function $n(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function Ri(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function Pr(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function Hr(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function dm(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function Xr(t,e){var n=e[0],r=e[1],a=e[2],s=n*n+r*r+a*a;return s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t}function y1(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function vs(t,e,n){var r=e[0],a=e[1],s=e[2],o=n[0],c=n[1],f=n[2];return t[0]=a*f-s*c,t[1]=s*o-r*f,t[2]=r*c-a*o,t}function Ve(t,e,n){var r=e[0],a=e[1],s=e[2],o=n[3]*r+n[7]*a+n[11]*s+n[15];return o=o||1,t[0]=(n[0]*r+n[4]*a+n[8]*s+n[12])/o,t[1]=(n[1]*r+n[5]*a+n[9]*s+n[13])/o,t[2]=(n[2]*r+n[6]*a+n[10]*s+n[14])/o,t}function dd(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function vd(t,e){var n=t[0],r=t[1],a=t[2],s=e[0],o=e[1],c=e[2];return Math.abs(n-s)<=Re*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(r-o)<=Re*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(a-c)<=Re*Math.max(1,Math.abs(a),Math.abs(c))}var $g=Pr,Gy=Gg;(function(){var t=Uy();return function(e,n,r,a,s,o){var c,f;for(n||(n=3),r||(r=0),a?f=Math.min(a*n+r,e.length):f=e.length,c=r;c<f;c+=n)t[0]=e[c],t[1]=e[c+1],t[2]=e[c+2],s(t,t,o),e[c]=t[0],e[c+1]=t[1],e[c+2]=t[2];return e}})();function vm(){var t=new dt(4);return dt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function ym(t,e,n,r){var a=new dt(4);return a[0]=t,a[1]=e,a[2]=n,a[3]=r,a}function Tm(t,e){var n=e[0],r=e[1],a=e[2],s=e[3],o=n*n+r*r+a*a+s*s;return o>0&&(o=1/Math.sqrt(o)),t[0]=n*o,t[1]=r*o,t[2]=a*o,t[3]=s*o,t}function cu(t,e,n){var r=e[0],a=e[1],s=e[2],o=e[3];return t[0]=n[0]*r+n[4]*a+n[8]*s+n[12]*o,t[1]=n[1]*r+n[5]*a+n[9]*s+n[13]*o,t[2]=n[2]*r+n[6]*a+n[10]*s+n[14]*o,t[3]=n[3]*r+n[7]*a+n[11]*s+n[15]*o,t}(function(){var t=vm();return function(e,n,r,a,s,o){var c,f;for(n||(n=4),r||(r=0),a?f=Math.min(a*n+r,e.length):f=e.length,c=r;c<f;c+=n)t[0]=e[c],t[1]=e[c+1],t[2]=e[c+2],t[3]=e[c+3],s(t,t,o),e[c]=t[0],e[c+1]=t[1],e[c+2]=t[2],e[c+3]=t[3];return e}})();function _a(){var t=new dt(4);return dt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function T1(t,e,n){n=n*.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function xm(t,e){var n=Math.acos(e[3])*2,r=Math.sin(n/2);return r>Re?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function yd(t,e,n){var r=e[0],a=e[1],s=e[2],o=e[3],c=n[0],f=n[1],l=n[2],h=n[3];return t[0]=r*h+o*c+a*l-s*f,t[1]=a*h+o*f+s*c-r*l,t[2]=s*h+o*l+r*f-a*c,t[3]=o*h-r*c-a*f-s*l,t}function Wu(t,e,n,r){var a=e[0],s=e[1],o=e[2],c=e[3],f=n[0],l=n[1],h=n[2],g=n[3],d,v,S,T,x;return v=a*f+s*l+o*h+c*g,v<0&&(v=-v,f=-f,l=-l,h=-h,g=-g),1-v>Re?(d=Math.acos(v),S=Math.sin(d),T=Math.sin((1-r)*d)/S,x=Math.sin(r*d)/S):(T=1-r,x=r),t[0]=T*a+x*f,t[1]=T*s+x*l,t[2]=T*o+x*h,t[3]=T*c+x*g,t}function Sm(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function Cm(t,e){var n=e[0]+e[4]+e[8],r;if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var a=0;e[4]>e[0]&&(a=1),e[8]>e[a*3+a]&&(a=2);var s=(a+1)%3,o=(a+2)%3;r=Math.sqrt(e[a*3+a]-e[s*3+s]-e[o*3+o]+1),t[a]=.5*r,r=.5/r,t[3]=(e[s*3+o]-e[o*3+s])*r,t[s]=(e[s*3+a]+e[a*3+s])*r,t[o]=(e[o*3+a]+e[a*3+o])*r}return t}var Td=ym,$y=Tm;(function(){var t=Uy(),e=hd(1,0,0),n=hd(0,1,0);return function(r,a,s){var o=y1(a,s);return o<-.999999?(vs(t,e,a),Gy(t)<1e-6&&vs(t,n,a),Xr(t,t),T1(r,t,Math.PI),r):o>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(vs(t,a,s),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+o,$y(r,r))}})();(function(){var t=_a(),e=_a();return function(n,r,a,s,o,c){return Wu(t,r,o,c),Wu(e,a,s,c),Wu(n,t,e,2*c*(1-c)),n}})();(function(){var t=Cy();return function(e,n,r,a){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=a[0],t[4]=a[1],t[7]=a[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],$y(e,Cm(e,t))}})();var Gl,xd;function wm(){return xd||(xd=1,Gl=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,a,s;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(a=r;a--!==0;)if(!t(e[a],n[a]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(n).length)return!1;for(a=r;a--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[a]))return!1;for(a=r;a--!==0;){var o=s[a];if(!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n}),Gl}var Em=wm();const mm=c1(Em);var $l,Sd;function zy(){if(Sd)return $l;Sd=1;var t=Object.prototype.toString;return $l=function(n){var r=t.call(n),a=r==="[object Arguments]";return a||(a=r!=="[object Array]"&&n!==null&&typeof n=="object"&&typeof n.length=="number"&&n.length>=0&&t.call(n.callee)==="[object Function]"),a},$l}var zl,Cd;function Rm(){if(Cd)return zl;Cd=1;var t;if(!Object.keys){var e=Object.prototype.hasOwnProperty,n=Object.prototype.toString,r=zy(),a=Object.prototype.propertyIsEnumerable,s=!a.call({toString:null},"toString"),o=a.call(function(){},"prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],f=function(d){var v=d.constructor;return v&&v.prototype===d},l={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},h=function(){if(typeof window>"u")return!1;for(var d in window)try{if(!l["$"+d]&&e.call(window,d)&&window[d]!==null&&typeof window[d]=="object")try{f(window[d])}catch{return!0}}catch{return!0}return!1}(),g=function(d){if(typeof window>"u"||!h)return f(d);try{return f(d)}catch{return!1}};t=function(v){var S=v!==null&&typeof v=="object",T=n.call(v)==="[object Function]",x=r(v),m=S&&n.call(v)==="[object String]",O=[];if(!S&&!T&&!x)throw new TypeError("Object.keys called on a non-object");var w=o&&T;if(m&&v.length>0&&!e.call(v,0))for(var R=0;R<v.length;++R)O.push(String(R));if(x&&v.length>0)for(var M=0;M<v.length;++M)O.push(String(M));else for(var D in v)!(w&&D==="prototype")&&e.call(v,D)&&O.push(String(D));if(s)for(var V=g(v),B=0;B<c.length;++B)!(V&&c[B]==="constructor")&&e.call(v,c[B])&&O.push(c[B]);return O}}return zl=t,zl}var Wl,wd;function Om(){if(wd)return Wl;wd=1;var t=Array.prototype.slice,e=zy(),n=Object.keys,r=n?function(o){return n(o)}:Rm(),a=Object.keys;return r.shim=function(){if(Object.keys){var o=function(){var c=Object.keys(arguments);return c&&c.length===arguments.length}(1,2);o||(Object.keys=function(f){return e(f)?a(t.call(f)):a(f)})}else Object.keys=r;return Object.keys||r},Wl=r,Wl}var Hl,Ed;function Wy(){if(Ed)return Hl;Ed=1;var t=Object.defineProperty||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return Hl=t,Hl}var bl,md;function Dm(){return md||(md=1,bl=SyntaxError),bl}var Al,Rd;function Mm(){return Rd||(Rd=1,Al=TypeError),Al}var jl,Od;function Lm(){return Od||(Od=1,jl=Object.getOwnPropertyDescriptor),jl}var Kl,Dd;function _m(){if(Dd)return Kl;Dd=1;var t=Lm();if(t)try{t([],"length")}catch{t=null}return Kl=t,Kl}var Pl,Md;function Vm(){if(Md)return Pl;Md=1;var t=Wy(),e=Dm(),n=Mm(),r=_m();return Pl=function(s,o,c){if(!s||typeof s!="object"&&typeof s!="function")throw new n("`obj` must be an object or a function`");if(typeof o!="string"&&typeof o!="symbol")throw new n("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new n("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new n("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new n("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new n("`loose`, if provided, must be a boolean");var f=arguments.length>3?arguments[3]:null,l=arguments.length>4?arguments[4]:null,h=arguments.length>5?arguments[5]:null,g=arguments.length>6?arguments[6]:!1,d=!!r&&r(s,o);if(t)t(s,o,{configurable:h===null&&d?d.configurable:!h,enumerable:f===null&&d?d.enumerable:!f,value:c,writable:l===null&&d?d.writable:!l});else if(g||!f&&!l&&!h)s[o]=c;else throw new e("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Pl}var Xl,Ld;function km(){if(Ld)return Xl;Ld=1;var t=Wy(),e=function(){return!!t};return e.hasArrayLengthDefineBug=function(){if(!t)return null;try{return t([],"length",{value:1}).length!==1}catch{return!0}},Xl=e,Xl}var Il,_d;function Hy(){if(_d)return Il;_d=1;var t=Om(),e=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",n=Object.prototype.toString,r=Array.prototype.concat,a=Vm(),s=function(l){return typeof l=="function"&&n.call(l)==="[object Function]"},o=km()(),c=function(l,h,g,d){if(h in l){if(d===!0){if(l[h]===g)return}else if(!s(d)||!d())return}o?a(l,h,g,!0):a(l,h,g)},f=function(l,h){var g=arguments.length>2?arguments[2]:{},d=t(h);e&&(d=r.call(d,Object.getOwnPropertySymbols(h)));for(var v=0;v<d.length;v+=1)c(l,d[v],h[d[v]],g[d[v]])};return f.supportsDescriptors=!!o,Il=f,Il}var Ti={exports:{}},Vd;function by(){return Vd||(Vd=1,typeof self<"u"?Ti.exports=self:typeof window<"u"?Ti.exports=window:Ti.exports=Function("return this")()),Ti.exports}var Yl,kd;function Ay(){if(kd)return Yl;kd=1;var t=by();return Yl=function(){return typeof vi!="object"||!vi||vi.Math!==Math||vi.Array!==Array?t:vi},Yl}var ql,Bd;function Bm(){if(Bd)return ql;Bd=1;var t=Hy(),e=Ay();return ql=function(){var r=e();if(t.supportsDescriptors){var a=Object.getOwnPropertyDescriptor(r,"globalThis");(!a||a.configurable&&(a.enumerable||!a.writable||globalThis!==r))&&Object.defineProperty(r,"globalThis",{configurable:!0,enumerable:!1,value:r,writable:!0})}else(typeof globalThis!="object"||globalThis!==r)&&(r.globalThis=r);return r},ql}var Ql,Fd;function Fm(){if(Fd)return Ql;Fd=1;var t=Hy(),e=by(),n=Ay(),r=Bm(),a=n(),s=function(){return a};return t(s,{getPolyfill:n,implementation:e,shim:r}),Ql=s,Ql}var Nm=Fm();const Um=c1(Nm),Cn=Um(),jy={vtkObject:()=>null};function Yt(t){if(t==null||t.isA)return t;if(!t.vtkClass)return Cn.console&&Cn.console.error&&Cn.console.error("Invalid VTK object"),null;const e=jy[t.vtkClass];if(!e)return Cn.console&&Cn.console.error&&Cn.console.error(`No vtk class found for Object of type ${t.vtkClass}`),null;const n={...t};Object.keys(n).forEach(a=>{n[a]&&typeof n[a]=="object"&&n[a].vtkClass&&(n[a]=Yt(n[a]))});const r=e(n);return r&&r.modified&&r.modified(),r}function Gm(t,e){jy[t]=e}Yt.register=Gm;class Zl extends Array{push(){for(let e=0;e<arguments.length;e++)this.includes(arguments[e])||super.push(arguments[e]);return this.length}}let zg=0;const Ky=Symbol("void");function $m(){return zg}const Py={};function Ca(){}const zm=["log","debug","info","warn","error","time","timeEnd","group","groupEnd"];zm.forEach(t=>{Py[t]=Ca});Cn.console=console.hasOwnProperty("log")?console:Py;const Yr={debug:Ca,error:Cn.console.error||Ca,info:Cn.console.info||Ca,log:Cn.console.log||Ca,warn:Cn.console.warn||Ca};function Xy(t,e){Yr[t]&&(Yr[t]=e||Ca)}function Iy(){Yr.log(...arguments)}function Yy(){Yr.info(...arguments)}function rc(){Yr.debug(...arguments)}function we(){Yr.error(...arguments)}function mc(){Yr.warn(...arguments)}const Nd={};function qy(t){Nd[t]||(Yr.error(t),Nd[t]=!0)}const Ot=Object.create(null);Ot.Float32Array=Float32Array;Ot.Float64Array=Float64Array;Ot.Uint8Array=Uint8Array;Ot.Int8Array=Int8Array;Ot.Uint16Array=Uint16Array;Ot.Int16Array=Int16Array;Ot.Uint32Array=Uint32Array;Ot.Int32Array=Int32Array;Ot.Uint8ClampedArray=Uint8ClampedArray;try{Ot.BigInt64Array=BigInt64Array,Ot.BigUint64Array=BigUint64Array}catch{}function Rs(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return new(Ot[t]||Float64Array)(...n)}function x1(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return(Ot[t]||Float64Array).from(...n)}function Rc(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Ye(t){return Rc(t[0]==="_"?t.slice(1):t)}function Qy(t){return t.charAt(0).toLowerCase()+t.slice(1)}function Zy(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e3;const r=["TB","GB","MB","KB"];let a=Number(t),s="B";for(;a>n;)a/=n,s=r.pop();return`${a.toFixed(e)} ${s}`}function Jy(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:" ";const n=[];let r=t;for(;r>1e3;)n.push(`000${r%1e3}`.slice(-3)),r=Math.floor(r/1e3);return r>0&&n.push(r),n.reverse(),n.join(e)}function eT(t){Object.keys(t).forEach(e=>{Array.isArray(t[e])&&(t[e]=[].concat(t[e]))})}function Wm(t){return Object.values(Ot).some(e=>t instanceof e)}function Hm(t,e){if(t===e)return!0;if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}function bm(t,e){return Object.keys(t).find(n=>t[n]===e)}function tT(t){return t&&t.isA?t.getState():t}function S1(t){setTimeout(t,0)}function nT(t,e){const n=performance.now();t.finally(()=>{const r=performance.now()-n;e(r)})}function vt(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};eT(e);const n=[];if(Number.isInteger(e.mtime)||(e.mtime=++zg),!("classHierarchy"in e))e.classHierarchy=new Zl("vtkObject");else if(!(e.classHierarchy instanceof Zl)){const s=new Zl;for(let o=0;o<e.classHierarchy.length;o++)s.push(e.classHierarchy[o]);e.classHierarchy=s}function r(s){n[s]=null}function a(s){function o(){r(s)}return Object.freeze({unsubscribe:o})}return t.isDeleted=()=>!!e.deleted,t.modified=s=>{if(e.deleted){we("instance deleted - cannot call any method");return}s&&s<t.getMTime()||(e.mtime=++zg,n.forEach(o=>o&&o(t)))},t.onModified=s=>{if(e.deleted)return we("instance deleted - cannot call any method"),null;const o=n.length;return n.push(s),a(o)},t.getMTime=()=>e.mtime,t.isA=s=>{let o=e.classHierarchy.length;for(;o--;)if(e.classHierarchy[o]===s)return!0;return!1},t.getClassName=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.classHierarchy[e.classHierarchy.length-1-s]},t.set=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,f=!1;return Object.keys(s).forEach(l=>{const h=c?null:t[`set${Rc(l)}`];h&&Array.isArray(s[l])&&h.length>1?f=h(...s[l])||f:h?f=h(s[l])||f:(["mtime"].indexOf(l)===-1&&!o&&mc(`Warning: Set value to model directly ${l}, ${s[l]}`),f=e[l]!==s[l]||f,e[l]=s[l])}),f},t.get=function(){for(var s=arguments.length,o=new Array(s),c=0;c<s;c++)o[c]=arguments[c];if(!o.length)return e;const f={};return o.forEach(l=>{f[l]=e[l]}),f},t.getReferenceByName=s=>e[s],t.delete=()=>{Object.keys(e).forEach(s=>delete e[s]),n.forEach((s,o)=>r(o)),e.deleted=!0},t.getState=()=>{if(e.deleted)return null;const s={...e,vtkClass:t.getClassName()};Object.keys(s).forEach(c=>{s[c]===null||s[c]===void 0||c[0]==="_"?delete s[c]:s[c].isA?s[c]=s[c].getState():Array.isArray(s[c])?s[c]=s[c].map(tT):Wm(s[c])&&(s[c]=Array.from(s[c]))});const o={};return Object.keys(s).sort().forEach(c=>{o[c]=s[c]}),o.mtime&&delete o.mtime,o},t.shallowCopy=function(s){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(s.getClassName()!==t.getClassName())throw new Error(`Cannot ShallowCopy ${s.getClassName()} into ${t.getClassName()}`);const c=s.get(),f=Object.keys(e).sort();Object.keys(c).sort().forEach(h=>{const g=f.indexOf(h);g===-1?o&&rc(`add ${h} in shallowCopy`):f.splice(g,1),e[h]=c[h]}),f.length&&o&&rc(`Untouched keys: ${f.join(", ")}`),t.modified()},t.toJSON=function(){return t.getState()},t}const Am={object(t,e,n){return function(){return{...e[n.name]}}}};function Nt(t,e,n){n.forEach(r=>{if(typeof r=="object"){const a=Am[r.type];a?t[`get${Ye(r.name)}`]=a(t,e,r):t[`get${Ye(r.name)}`]=()=>e[r.name]}else t[`get${Ye(r)}`]=()=>e[r]})}const rT={enum(t,e,n){const r=`_on${Ye(n.name)}Changed`;return a=>{var s;if(typeof a=="string"){if(n.enum[a]!==void 0)return e[n.name]!==n.enum[a]?(e[n.name]=n.enum[a],t.modified(),!0):!1;throw we(`Set Enum with invalid argument ${n}, ${a}`),new RangeError("Set Enum with invalid string argument")}if(typeof a=="number"){if(e[n.name]!==a){if(Object.keys(n.enum).map(o=>n.enum[o]).indexOf(a)!==-1){const o=e[n.name];return e[n.name]=a,(s=e[r])==null||s.call(e,t,e,a,o),t.modified(),!0}throw we(`Set Enum outside numeric range ${n}, ${a}`),new RangeError("Set Enum outside numeric range")}return!1}throw we(`Set Enum with invalid argument (String/Number) ${n}, ${a}`),new TypeError("Set Enum with invalid argument (String/Number)")}},object(t,e,n){var a;((a=n.params)==null?void 0:a.length)===1&&mc('Setter of type "object" with a single "param" field is not supported');const r=`_on${Ye(n.name)}Changed`;return function(){var l,h;for(var s=arguments.length,o=new Array(s),c=0;c<s;c++)o[c]=arguments[c];let f;if(o.length>1&&((l=n.params)!=null&&l.length)?f=n.params.reduce((g,d,v)=>Object.assign(g,{[d]:o[v]}),{}):f=o[0],!mm(e[n.name],f)){const g=e[n.name];return e[n.name]=f,(h=e[r])==null||h.call(e,t,e,f,g),t.modified(),!0}return!1}}};function Ud(t){if(typeof t=="object"){const e=rT[t.type];if(e)return(n,r)=>e(n,r,t);throw we(`No setter for field ${t}`),new TypeError("No setter for field")}return function(n,r){const a=`_on${Ye(t)}Changed`;return function(o){var c;if(r.deleted)return we("instance deleted - cannot call any method"),!1;if(r[t]!==o){const f=r[t.name];return r[t]=o,(c=r[a])==null||c.call(r,n,r,o,f),n.modified(),!0}return!1}}}function Hi(t,e,n){n.forEach(r=>{typeof r=="object"?t[`set${Ye(r.name)}`]=Ud(r)(t,e):t[`set${Ye(r)}`]=Ud(r)(t,e)})}function ct(t,e,n){Nt(t,e,n),Hi(t,e,n)}function Os(t,e,n){n.forEach(r=>{t[`get${Ye(r)}`]=()=>e[r]?Array.from(e[r]):e[r],t[`get${Ye(r)}ByReference`]=()=>e[r]})}function C1(t,e,n,r){let a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:void 0;n.forEach(s=>{if(e[s]&&r&&e[s].length!==r)throw new RangeError(`Invalid initial number of values for array (${s})`);const o=`_on${Ye(s)}Changed`;t[`set${Ye(s)}`]=function(){var v;if(e.deleted)return we("instance deleted - cannot call any method"),!1;for(var c=arguments.length,f=new Array(c),l=0;l<c;l++)f[l]=arguments[l];let h=f,g,d=!1;if(h.length===1&&(h[0]==null||h[0].length>=0)&&(h=h[0],d=!0),h==null)g=e[s]!==h;else{if(r&&h.length!==r)if(h.length<r&&a!==void 0)for(h=Array.from(h),d=!1;h.length<r;)h.push(a);else throw new RangeError(`Invalid number of values for array setter (${s})`);g=e[s]==null||e[s].length!==h.length;for(let S=0;!g&&S<h.length;++S)g=e[s][S]!==h[S];g&&d&&(h=Array.from(h))}if(g){const S=e[s.name];e[s]=h,(v=e[o])==null||v.call(e,t,e,h,S),t.modified()}return g},t[`set${Ye(s)}From`]=c=>{const f=e[s];c.forEach((l,h)=>{f[h]=l})}})}function w1(t,e,n,r){let a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:void 0;Os(t,e,n),C1(t,e,n,r,a)}function bi(t,e,n){for(let r=0;r<n.length;r++){const a=n[r];e[a]!==void 0&&(e[`_${a}`]=e[a],delete e[a])}}function aT(t,e,n,r){e.inputData?e.inputData=e.inputData.map(Yt):e.inputData=[],e.inputConnection?e.inputConnection=e.inputConnection.map(Yt):e.inputConnection=[],e.output?e.output=e.output.map(Yt):e.output=[],e.inputArrayToProcess?e.inputArrayToProcess=e.inputArrayToProcess.map(Yt):e.inputArrayToProcess=[],e.numberOfInputs=n;function a(v){let S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(e.deleted){we("instance deleted - cannot call any method");return}if(S>=e.numberOfInputs){we(`algorithm ${t.getClassName()} only has ${e.numberOfInputs} input ports. To add more input ports, use addInputData()`);return}(e.inputData[S]!==v||e.inputConnection[S])&&(e.inputData[S]=v,e.inputConnection[S]=null,t.modified&&t.modified())}function s(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.inputConnection[v]&&(e.inputData[v]=e.inputConnection[v]()),e.inputData[v]}function o(v){let S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(e.deleted){we("instance deleted - cannot call any method");return}if(S>=e.numberOfInputs){let T=`algorithm ${t.getClassName()} only has `;T+=`${e.numberOfInputs}`,T+=" input ports. To add more input ports, use addInputConnection()",we(T);return}e.inputData[S]=null,e.inputConnection[S]=v}function c(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.inputConnection[v]}function f(){let v=e.numberOfInputs;for(;v&&!e.inputData[v-1]&&!e.inputConnection[v-1];)v--;return v===e.numberOfInputs&&e.numberOfInputs++,v}function l(v){if(e.deleted){we("instance deleted - cannot call any method");return}o(v,f())}function h(v){if(e.deleted){we("instance deleted - cannot call any method");return}a(v,f())}function g(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.deleted?(we("instance deleted - cannot call any method"),null):(t.shouldUpdate()&&t.update(),e.output[v])}t.shouldUpdate=()=>{var x,m;const v=t.getMTime();let S=1/0,T=r;for(;T--;){if(!e.output[T]||e.output[T].isDeleted())return!0;const O=e.output[T].getMTime();if(O<v)return!0;O<S&&(S=O)}for(T=e.numberOfInputs;T--;)if((x=e.inputConnection[T])!=null&&x.filter.shouldUpdate()||((m=t.getInputData(T))==null?void 0:m.getMTime())>S)return!0;return!1};function d(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;const S=()=>g(v);return S.filter=t,S}if(e.numberOfInputs){let v=e.numberOfInputs;for(;v--;)e.inputData.push(null),e.inputConnection.push(null);t.setInputData=a,t.setInputConnection=o,t.addInputData=h,t.addInputConnection=l,t.getInputData=s,t.getInputConnection=c}r&&(t.getOutputData=g,t.getOutputPort=d),t.update=()=>{const v=[];if(e.numberOfInputs){let S=0;for(;S<e.numberOfInputs;)v[S]=t.getInputData(S),S++}t.shouldUpdate()&&t.requestData&&t.requestData(v,e.output)},t.getNumberOfInputPorts=()=>e.numberOfInputs,t.getNumberOfOutputPorts=()=>r||e.output.length,t.getInputArrayToProcess=v=>{const S=e.inputArrayToProcess[v],T=e.inputData[v];return S&&T?T[`get${S.fieldAssociation}`]().getArray(S.arrayName):null},t.setInputArrayToProcess=function(v,S,T){let x=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Scalars";for(;e.inputArrayToProcess.length<v;)e.inputArrayToProcess.push(null);e.inputArrayToProcess[v]={arrayName:S,fieldAssociation:T,attributeType:x}}}const E1=Symbol("Event abort");function sT(t,e,n){const r=[],a=t.delete;let s=1;function o(l){for(let h=0;h<r.length;++h){const[g]=r[h];if(g===l){r.splice(h,1);return}}}function c(l){function h(){o(l)}return Object.freeze({unsubscribe:h})}function f(){if(e.deleted){we("instance deleted - cannot call any method");return}const l=r.slice();for(let h=0;h<l.length;++h){const[,g,d]=l[h];if(g){if(d<0)setTimeout(()=>g.apply(t,arguments),1-d);else if(g.apply(t,arguments)===E1)break}}}t[`invoke${Ye(n)}`]=f,t[`on${Ye(n)}`]=function(l){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!l.apply)return console.error(`Invalid callback for event ${n}`),null;if(e.deleted)return we("instance deleted - cannot call any method"),null;const g=s++;return r.push([g,l,h]),r.sort((d,v)=>v[2]-d[2]),c(g)},t.delete=()=>{a(),r.forEach(l=>{let[h]=l;return o(h)})}}function Ne(t,e){const n=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const a={},s={};return t(s,a,r),Object.freeze(s)};return e&&Yt.register(e,n),n}function iT(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return e.filter(o=>!!o).map(o=>o(...a))}}function m1(t){return t&&t.isA&&t.isA("vtkObject")}function ac(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];if(m1(t)){if(r.indexOf(t)>=0)return n;r.push(t);const a=e(t);a!==void 0&&n.push(a);const s=t.get();Object.keys(s).forEach(o=>{const c=s[o];Array.isArray(c)?c.forEach(f=>{ac(f,e,n,r)}):ac(c,e,n,r)})}return n}function oT(t,e,n){var r=this;let a;const s=function(){for(var o=arguments.length,c=new Array(o),f=0;f<o;f++)c[f]=arguments[f];const l=r,h=()=>{a=null,n||t.apply(l,c)},g=n&&!a;clearTimeout(a),a=setTimeout(h,e),g&&t.apply(l,c)};return s.cancel=()=>clearTimeout(a),s}function uT(t,e){let n=!1,r=null;function a(){n=!1,r!==null&&(s(...r),r=null)}function s(){for(var o=arguments.length,c=new Array(o),f=0;f<o;f++)c[f]=arguments[f];if(n){r=c;return}n=!0,t(...c),setTimeout(a,e)}return s}function R1(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};e.keystore=Object.assign(e.keystore||{},n),t.setKey=(r,a)=>{e.keystore[r]=a},t.getKey=r=>e.keystore[r],t.getAllKeys=()=>Object.keys(e.keystore),t.deleteKey=r=>delete e.keystore[r],t.clearKeystore=()=>t.getAllKeys().forEach(r=>delete e.keystore[r])}let jm=1;const fu="__root__";function cT(t,e){R1(t,e);const n=t.delete;e.proxyId=`${jm++}`,e.ui=JSON.parse(JSON.stringify(e.ui||[])),Nt(t,e,["proxyId","proxyGroup","proxyName"]),ct(t,e,["proxyManager"]);const r={},a={};function s(l,h){a[h]||(a[h]=[]);const g=a[h];for(let d=0;d<l.length;d++)g.push(l[d].name),r[l[d].name]=l[d],l[d].children&&l[d].children.length&&s(l[d].children,l[d].name)}s(e.ui,fu),t.updateUI=l=>{e.ui=JSON.parse(JSON.stringify(l||[])),Object.keys(r).forEach(h=>delete r[h]),Object.keys(a).forEach(h=>delete a[h]),s(e.ui,fu),t.modified()};function o(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:fu;return a[l]}t.updateProxyProperty=(l,h)=>{const g=r[l];g?Object.assign(g,h):r[l]={...h}},t.activate=()=>{if(e.proxyManager){const l=`setActive${Ye(t.getProxyGroup().slice(0,-1))}`;e.proxyManager[l]&&e.proxyManager[l](t)}},e.propertyLinkSubscribers={},t.registerPropertyLinkForGC=(l,h)=>{h in e.propertyLinkSubscribers||(e.propertyLinkSubscribers[h]=[]),e.propertyLinkSubscribers[h].push(l)},t.gcPropertyLinks=l=>{const h=e.propertyLinkSubscribers[l]||[];for(;h.length;)h.pop().unbind(t)},e.propertyLinkMap={},t.getPropertyLink=function(l){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.propertyLinkMap[l])return e.propertyLinkMap[l];let g=null;const d=[];let v=0,S=!1;function T(R){let M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(S)return null;const D=[];let V=null;for(v=d.length;v--;){const z=d[v];z.instance===R?V=z:D.push(z)}if(!V)return null;const B=V.instance[`get${Ye(V.propertyName)}`]();if(!Hm(B,g)||M){for(g=B,S=!0;D.length;){const z=D.pop();z.instance.set({[z.propertyName]:g})}S=!1}return e.propertyLinkMap[l].persistent&&(e.propertyLinkMap[l].value=B),B}function x(R,M){const D=[];for(v=d.length;v--;){const V=d[v];V.instance===R&&(V.propertyName===M||M===void 0)&&(V.subscription.unsubscribe(),D.push(v))}for(;D.length;)d.splice(D.pop(),1)}function m(R,M){let D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const V=R.onModified(T),B=d[0];return d.push({instance:R,propertyName:M,subscription:V}),D&&(e.propertyLinkMap[l].persistent&&e.propertyLinkMap[l].value!==void 0?R.set({[M]:e.propertyLinkMap[l].value}):B&&T(B.instance,!0)),{unsubscribe:()=>x(R,M)}}function O(){for(;d.length;)d.pop().subscription.unsubscribe()}const w={bind:m,unbind:x,unsubscribe:O,persistent:h};return e.propertyLinkMap[l]=w,w};function c(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:fu;const h=[],g=e.proxyId,d=o(l)||[];for(let v=0;v<d.length;v++){const S=d[v],T=t[`get${Ye(S)}`],x=T?T():void 0,m={id:g,name:S,value:x},O=c(S);O.length&&(m.children=O),h.push(m)}return h}t.listPropertyNames=()=>c().map(l=>l.name),t.getPropertyByName=l=>c().find(h=>h.name===l),t.getPropertyDomainByName=l=>(r[l]||{}).domain,t.getProxySection=()=>({id:e.proxyId,name:e.proxyGroup,ui:e.ui,properties:c()}),t.delete=()=>{const l=Object.keys(e.propertyLinkMap);let h=l.length;for(;h--;)e.propertyLinkMap[l[h]].unsubscribe();Object.keys(e.propertyLinkSubscribers).forEach(t.gcPropertyLinks),n()},t.getState=()=>null;function f(){if(e.links)for(let l=0;l<e.links.length;l++){const{link:h,property:g,persistent:d,updateOnBind:v,type:S}=e.links[l];if(S==="application"){const T=e.proxyManager.getPropertyLink(h,d);t.registerPropertyLinkForGC(T,"application"),T.bind(t,g,v)}}}S1(f)}function fT(t,e,n){const r=t.delete,a=[],s=Object.keys(n);let o=s.length;for(;o--;){const c=s[o],{modelKey:f,property:l,modified:h=!0}=n[c],g=Ye(l),d=Ye(c);t[`get${d}`]=e[f][`get${g}`],t[`set${d}`]=e[f][`set${g}`],h&&a.push(e[f].onModified(t.modified))}t.delete=()=>{for(;a.length;)a.pop().unsubscribe();r()}}function lT(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};e.this=t;function a(c){const f=Object.keys(c);let l=f.length;for(;l--;){const h=f[l];e[h].set(c[h])}}const s=Object.keys(r);let o=s.length;for(;o--;){const c=s[o];e[c]=r[c];const f=n[c];t[`set${Ye(c)}`]=l=>{if(l!==e[c]){e[c]=l;const h=f[l];a(h),t.modified()}}}s.length&&Nt(t,e,s)}const Gd=10,$d=40,zd=800;function gT(t){let e=0,n=0,r=0,a=0;return"detail"in t&&(n=t.detail),"wheelDelta"in t&&(n=-t.wheelDelta/120),"wheelDeltaY"in t&&(n=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=n,n=0),r=e*Gd,a=n*Gd,"deltaY"in t&&(a=t.deltaY),"deltaX"in t&&(r=t.deltaX),(r||a)&&t.deltaMode&&(t.deltaMode===1?(r*=$d,a*=$d):(r*=zd,a*=zd)),r&&!e&&(e=r<1?-1:1),a&&!n&&(n=a<1?-1:1),{spinX:e,spinY:n||e,pixelX:r,pixelY:a||r}}var L={algo:aT,capitalize:Rc,chain:iT,debounce:oT,enumToString:bm,event:sT,EVENT_ABORT:E1,formatBytesToProperUnit:Zy,formatNumbersWithThousandSeparator:Jy,get:Nt,getArray:Os,getCurrentGlobalMTime:$m,getStateArrayMapFunc:tT,isVtkObject:m1,keystore:R1,measurePromiseExecution:nT,moveToProtected:bi,newInstance:Ne,newTypedArray:Rs,newTypedArrayFrom:x1,normalizeWheel:gT,obj:vt,proxy:cT,proxyPropertyMapping:fT,proxyPropertyState:lT,safeArrays:eT,set:Hi,setArray:C1,setGet:ct,setGetArray:w1,setImmediate:S1,setLoggerFunction:Xy,throttle:uT,traverseInstanceTree:ac,TYPED_ARRAYS:Ot,uncapitalize:Qy,VOID:Ky,vtkDebugMacro:rc,vtkErrorMacro:we,vtkInfoMacro:Yy,vtkLogMacro:Iy,vtkOnceErrorMacro:qy,vtkWarningMacro:mc,objectSetterMap:rT},Pn=Object.freeze({__proto__:null,VOID:Ky,setLoggerFunction:Xy,vtkLogMacro:Iy,vtkInfoMacro:Yy,vtkDebugMacro:rc,vtkErrorMacro:we,vtkWarningMacro:mc,vtkOnceErrorMacro:qy,TYPED_ARRAYS:Ot,newTypedArray:Rs,newTypedArrayFrom:x1,capitalize:Rc,_capitalize:Ye,uncapitalize:Qy,formatBytesToProperUnit:Zy,formatNumbersWithThousandSeparator:Jy,setImmediateVTK:S1,measurePromiseExecution:nT,obj:vt,get:Nt,set:Hi,setGet:ct,getArray:Os,setArray:C1,setGetArray:w1,moveToProtected:bi,algo:aT,EVENT_ABORT:E1,event:sT,newInstance:Ne,chain:iT,isVtkObject:m1,traverseInstanceTree:ac,debounce:oT,throttle:uT,keystore:R1,proxy:cT,proxyPropertyMapping:fT,proxyPropertyState:lT,normalizeWheel:gT,default:L});const{vtkErrorMacro:Km}=L,Pm=["Build","Render"];function Xm(t,e){e.classHierarchy.push("vtkViewNode"),t.build=r=>{},t.render=r=>{},t.traverse=r=>{const a=r.getTraverseOperation(),s=t[a];if(s){s(r);return}t.apply(r,!0);for(let o=0;o<e.children.length;o++)e.children[o].traverse(r);t.apply(r,!1)},t.apply=(r,a)=>{const s=t[r.getOperation()];s&&s(a,r)},t.getViewNodeFor=r=>{if(e.renderable===r)return t;for(let a=0;a<e.children.length;++a){const o=e.children[a].getViewNodeFor(r);if(o)return o}},t.getFirstAncestorOfType=r=>e._parent?e._parent.isA(r)?e._parent:e._parent.getFirstAncestorOfType(r):null,t.getLastAncestorOfType=r=>{if(!e._parent)return null;const a=e._parent.getLastAncestorOfType(r);return a||(e._parent.isA(r)?e._parent:null)},t.addMissingNode=r=>{if(!r)return;const a=e._renderableChildMap.get(r);if(a!==void 0)return a.setVisited(!0),a;const s=t.createViewNode(r);if(s)return s.setParent(t),s.setVisited(!0),e._renderableChildMap.set(r,s),e.children.push(s),s},t.addMissingNodes=r=>{if(!(!r||!r.length))for(let a=0;a<r.length;++a){const s=r[a];t.addMissingNode(s)}},t.addMissingChildren=r=>{if(!(!r||!r.length))for(let a=0;a<r.length;++a){const s=r[a];if(e.children.indexOf(s)===-1){s.setParent(t),e.children.push(s);const c=s.getRenderable();c&&e._renderableChildMap.set(c,s)}s.setVisited(!0)}},t.removeNode=r=>{const a=e.children.findIndex(o=>o===r);if(a<0)return!1;const s=r.getRenderable();return s&&e._renderableChildMap.delete(s),r.delete(),e.children.splice(a,1),!0},t.prepareNodes=()=>{for(let r=0;r<e.children.length;++r)e.children[r].setVisited(!1)},t.setVisited=r=>{e.visited=r},t.removeUnusedNodes=()=>{let r=0;for(let a=0;a<e.children.length;++a){const s=e.children[a];if(s.getVisited())e.children[r++]=s,s.setVisited(!1);else{const c=s.getRenderable();c&&e._renderableChildMap.delete(c),s.delete()}}e.children.length=r},t.createViewNode=r=>{if(!e.myFactory)return Km("Cannot create view nodes without my own factory"),null;const a=e.myFactory.createNode(r);return a&&a.setRenderable(r),a};const n=t.delete;t.delete=()=>{for(let r=0;r<e.children.length;r++)e.children[r].delete();n()}}const Im={renderable:null,myFactory:null,children:[],visited:!1};function pT(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Im,n),L.obj(t,e),L.event(t,e,"event"),e._renderableChildMap=new Map,L.get(t,e,["visited"]),L.setGet(t,e,["_parent","renderable","myFactory"]),L.getArray(t,e,["children"]),L.moveToProtected(t,e,["parent"]),Xm(t,e)}const Ym=L.newInstance(pT,"vtkViewNode");var qe={newInstance:Ym,extend:pT,PASS_TYPES:Pm};function qm(t,e){e.overrides||(e.overrides={}),e.classHierarchy.push("vtkViewNodeFactory"),t.createNode=n=>{if(n.isDeleted())return null;let r=0,a=n.getClassName(r++),s=!1;const o=Object.keys(e.overrides);for(;a&&!s;)o.indexOf(a)!==-1?s=!0:a=n.getClassName(r++);if(!s)return null;const c=e.overrides[a]();return c.setMyFactory(t),c}}const Qm={};function hT(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Qm,n),L.obj(t,e),qm(t,e)}const Zm=L.newInstance(hT,"vtkViewNodeFactory");var dT={newInstance:Zm,extend:hT};const vT=Object.create(null);function cn(t,e){vT[t]=e}function Jm(t,e){e.classHierarchy.push("vtkOpenGLViewNodeFactory")}const eR={};function yT(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,eR,n),e.overrides=vT,dT.extend(t,e,n),Jm(t,e)}const tR=L.newInstance(yT,"vtkOpenGLViewNodeFactory");var nR={newInstance:tR,extend:yT};function rR(t,e){e.classHierarchy.push("vtkOpenGLCamera"),t.buildPass=n=>{n&&(e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.context=e._openGLRenderWindow.getContext())},t.opaquePass=n=>{if(n){const r=e._openGLRenderer.getTiledSizeAndOrigin();e.context.viewport(r.lowerLeftU,r.lowerLeftV,r.usize,r.vsize),e.context.scissor(r.lowerLeftU,r.lowerLeftV,r.usize,r.vsize)}},t.translucentPass=t.opaquePass,t.zBufferPass=t.opaquePass,t.opaqueZBufferPass=t.opaquePass,t.volumePass=t.opaquePass,t.getKeyMatrices=n=>{if(n!==e.lastRenderer||e._openGLRenderWindow.getMTime()>e.keyMatrixTime.getMTime()||t.getMTime()>e.keyMatrixTime.getMTime()||n.getMTime()>e.keyMatrixTime.getMTime()||e.renderable.getMTime()>e.keyMatrixTime.getMTime()){St(e.keyMatrices.wcvc,e.renderable.getViewMatrix()),l1(e.keyMatrices.normalMatrix,e.keyMatrices.wcvc),g1(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix),ze(e.keyMatrices.wcvc,e.keyMatrices.wcvc);const r=e._openGLRenderer.getAspectRatio();St(e.keyMatrices.vcpc,e.renderable.getProjectionMatrix(r,-1,1)),ze(e.keyMatrices.vcpc,e.keyMatrices.vcpc),ut(e.keyMatrices.wcpc,e.keyMatrices.vcpc,e.keyMatrices.wcvc),e.keyMatrixTime.modified(),e.lastRenderer=n}return e.keyMatrices}}const aR={context:null,lastRenderer:null,keyMatrixTime:null,keyMatrices:null};function sR(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,aR,n),qe.extend(t,e,n),e.keyMatrixTime={},vt(e.keyMatrixTime),e.keyMatrices={normalMatrix:new Float64Array(9),vcpc:new Float64Array(16),wcvc:new Float64Array(16),wcpc:new Float64Array(16)},ct(t,e,["context","keyMatrixTime"]),rR(t,e)}const iR=Ne(sR);cn("vtkCamera",iR);const{vtkDebugMacro:oR}=Pn;function uR(t,e){e.classHierarchy.push("vtkOpenGLRenderer"),t.buildPass=n=>{if(n){if(!e.renderable)return;t.updateLights(),t.prepareNodes(),t.addMissingNode(e.renderable.getActiveCamera()),t.addMissingNodes(e.renderable.getViewPropsWithNestedProps()),t.removeUnusedNodes()}},t.updateLights=()=>{let n=0;const r=e.renderable.getLightsByReference();for(let a=0;a<r.length;++a)r[a].getSwitch()>0&&n++;return n||(oR("No lights are on, creating one."),e.renderable.createLight()),n},t.zBufferPass=n=>{if(n){let r=0;const a=e.context;e.renderable.getTransparent()||(e.context.clearColor(1,0,0,1),r|=a.COLOR_BUFFER_BIT),e.renderable.getPreserveDepthBuffer()||(a.clearDepth(1),r|=a.DEPTH_BUFFER_BIT,e.context.depthMask(!0));const s=t.getTiledSizeAndOrigin();a.enable(a.SCISSOR_TEST),a.scissor(s.lowerLeftU,s.lowerLeftV,s.usize,s.vsize),a.viewport(s.lowerLeftU,s.lowerLeftV,s.usize,s.vsize),a.colorMask(!0,!0,!0,!0),r&&a.clear(r),a.enable(a.DEPTH_TEST)}},t.opaqueZBufferPass=n=>t.zBufferPass(n),t.cameraPass=n=>{n&&t.clear()},t.getAspectRatio=()=>{const n=e._parent.getSizeByReference(),r=e.renderable.getViewportByReference();return n[0]*(r[2]-r[0])/((r[3]-r[1])*n[1])},t.getTiledSizeAndOrigin=()=>{const n=e.renderable.getViewportByReference(),r=[0,0,1,1],a=n[0]-r[0],s=n[1]-r[1],o=e._parent.normalizedDisplayToDisplay(a,s),c=Math.round(o[0]),f=Math.round(o[1]),l=n[2]-r[0],h=n[3]-r[1],g=e._parent.normalizedDisplayToDisplay(l,h);let d=Math.round(g[0])-c,v=Math.round(g[1])-f;return d<0&&(d=0),v<0&&(v=0),{usize:d,vsize:v,lowerLeftU:c,lowerLeftV:f}},t.clear=()=>{let n=0;const r=e.context;if(!e.renderable.getTransparent()){const s=e.renderable.getBackgroundByReference();r.clearColor(s[0],s[1],s[2],s[3]),n|=r.COLOR_BUFFER_BIT}e.renderable.getPreserveDepthBuffer()||(r.clearDepth(1),n|=r.DEPTH_BUFFER_BIT,r.depthMask(!0)),r.colorMask(!0,!0,!0,!0);const a=t.getTiledSizeAndOrigin();r.enable(r.SCISSOR_TEST),r.scissor(a.lowerLeftU,a.lowerLeftV,a.usize,a.vsize),r.viewport(a.lowerLeftU,a.lowerLeftV,a.usize,a.vsize),n&&r.clear(n),r.enable(r.DEPTH_TEST)},t.releaseGraphicsResources=()=>{e.selector!==null&&e.selector.releaseGraphicsResources(),e.renderable&&e.renderable.getViewProps().forEach(n=>{n.modified()})},t.setOpenGLRenderWindow=n=>{e._openGLRenderWindow!==n&&(t.releaseGraphicsResources(),e._openGLRenderWindow=n,e.context=null,n&&(e.context=e._openGLRenderWindow.getContext()))}}const cR={context:null,_openGLRenderWindow:null,selector:null};function fR(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,cR,n),qe.extend(t,e,n),Nt(t,e,["shaderCache"]),ct(t,e,["selector"]),bi(t,e,["openGLRenderWindow"]),uR(t,e)}const lR=Ne(fR,"vtkOpenGLRenderer");cn("vtkRenderer",lR);function gR(t,e){e.classHierarchy.push("vtkOpenGLActor"),t.buildPass=n=>{if(n){e._openGLRenderWindow=t.getLastAncestorOfType("vtkOpenGLRenderWindow"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e.context=e._openGLRenderWindow.getContext(),t.prepareNodes(),t.addMissingNodes(e.renderable.getTextures()),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes(),e.ogltextures=null,e.activeTextures=null;for(let r=0;r<e.children.length;r++){const a=e.children[r];a.isA("vtkOpenGLTexture")?(e.ogltextures||(e.ogltextures=[]),e.ogltextures.push(a)):e.oglmapper=a}}},t.traverseZBufferPass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.traverseOpaqueZBufferPass=n=>t.traverseOpaquePass(n),t.traverseOpaquePass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||!e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.traverseTranslucentPass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.activateTextures=()=>{if(e.ogltextures){e.activeTextures=[];for(let n=0;n<e.ogltextures.length;n++){const r=e.ogltextures[n];r.render(),r.getHandle()&&e.activeTextures.push(r)}}},t.queryPass=(n,r)=>{if(n){if(!e.renderable||!e.renderable.getVisibility())return;e.renderable.getIsOpaque()?r.incrementOpaqueActorCount():r.incrementTranslucentActorCount()}},t.zBufferPass=(n,r)=>t.opaquePass(n,r),t.opaqueZBufferPass=(n,r)=>t.opaquePass(n,r),t.opaquePass=(n,r)=>{if(n)e.context.depthMask(!0),t.activateTextures();else if(e.activeTextures)for(let a=0;a<e.activeTextures.length;a++)e.activeTextures[a].deactivate()},t.translucentPass=(n,r)=>{if(n)e.context.depthMask(e._openGLRenderer.getSelector()&&e.renderable.getNestedPickable()),t.activateTextures();else if(e.activeTextures)for(let a=0;a<e.activeTextures.length;a++)e.activeTextures[a].deactivate()},t.getKeyMatrices=()=>(e.renderable.getMTime()>e.keyMatrixTime.getMTime()&&(e.renderable.computeMatrix(),St(e.keyMatrices.mcwc,e.renderable.getMatrix()),ze(e.keyMatrices.mcwc,e.keyMatrices.mcwc),e.renderable.getIsIdentity()?Va(e.keyMatrices.normalMatrix):(l1(e.keyMatrices.normalMatrix,e.keyMatrices.mcwc),g1(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix),wy(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix)),e.keyMatrixTime.modified()),e.keyMatrices)}const pR={context:null,keyMatrixTime:null,keyMatrices:null,activeTextures:null};function hR(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,pR,n),qe.extend(t,e,n),e.keyMatrixTime={},vt(e.keyMatrixTime,{mtime:0}),e.keyMatrices={normalMatrix:Va(new Float64Array(9)),mcwc:Ce(new Float64Array(16))},ct(t,e,["context"]),Nt(t,e,["activeTextures"]),gR(t,e)}const dR=Ne(hR);cn("vtkActor",dR);function vR(t,e){e.classHierarchy.push("vtkOpenGLActor2D"),t.buildPass=n=>{if(n){if(!e.renderable)return;e._openGLRenderWindow=t.getLastAncestorOfType("vtkOpenGLRenderWindow"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e.context=e._openGLRenderWindow.getContext(),t.prepareNodes(),t.addMissingNodes(e.renderable.getTextures()),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes(),e.ogltextures=null,e.activeTextures=null;for(let r=0;r<e.children.length;r++){const a=e.children[r];a.isA("vtkOpenGLTexture")?(e.ogltextures||(e.ogltextures=[]),e.ogltextures.push(a)):e.oglmapper=a}}},t.queryPass=(n,r)=>{if(n){if(!e.renderable||!e.renderable.getVisibility())return;r.incrementOverlayActorCount()}},t.traverseOpaquePass=n=>{!e.oglmapper||!e.renderable||!e.renderable.getNestedVisibility()||!e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.traverseTranslucentPass=n=>{!e.oglmapper||!e.renderable||!e.renderable.getNestedVisibility()||e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.traverseOverlayPass=n=>{!e.oglmapper||!e.renderable||!e.renderable.getNestedVisibility()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.activateTextures=()=>{if(e.ogltextures){e.activeTextures=[];for(let n=0;n<e.ogltextures.length;n++){const r=e.ogltextures[n];r.render(),r.getHandle()&&e.activeTextures.push(r)}}},t.opaquePass=(n,r)=>{if(n)e.context.depthMask(!0),t.activateTextures();else if(e.activeTextures)for(let a=0;a<e.activeTextures.length;a++)e.activeTextures[a].deactivate()},t.translucentPass=(n,r)=>{if(n)e.context.depthMask(!1),t.activateTextures();else if(e.activeTextures)for(let a=0;a<e.activeTextures.length;a++)e.activeTextures[a].deactivate()},t.overlayPass=(n,r)=>{if(n)e.context.depthMask(!0),t.activateTextures();else if(e.activeTextures)for(let a=0;a<e.activeTextures.length;a++)e.activeTextures[a].deactivate()}}const yR={context:null,activeTextures:null};function TR(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,yR,n),qe.extend(t,e,n),ct(t,e,["context"]),Nt(t,e,["activeTextures"]),vR(t,e)}const xR=Ne(TR);cn("vtkActor2D",xR);function Hu(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function SR(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function TT(t){let e,n,r;t.length!==2?(e=Hu,n=(c,f)=>Hu(t(c),f),r=(c,f)=>t(c)-f):(e=t===Hu||t===SR?t:CR,n=t,r=t);function a(c,f,l=0,h=c.length){if(l<h){if(e(f,f)!==0)return h;do{const g=l+h>>>1;n(c[g],f)<0?l=g+1:h=g}while(l<h)}return l}function s(c,f,l=0,h=c.length){if(l<h){if(e(f,f)!==0)return h;do{const g=l+h>>>1;n(c[g],f)<=0?l=g+1:h=g}while(l<h)}return l}function o(c,f,l=0,h=c.length){const g=a(c,f,l,h-1);return g>l&&r(c[g-1],f)>-r(c[g],f)?g-1:g}return{left:a,center:o,right:s}}function CR(){return 0}function wR(t){return t===null?NaN:+t}const ER=TT(Hu),mR=ER.right;TT(wR).center;const RR=Math.sqrt(50),OR=Math.sqrt(10),DR=Math.sqrt(2);function sc(t,e,n){const r=(e-t)/Math.max(0,n),a=Math.floor(Math.log10(r)),s=r/Math.pow(10,a),o=s>=RR?10:s>=OR?5:s>=DR?2:1;let c,f,l;return a<0?(l=Math.pow(10,-a)/o,c=Math.round(t*l),f=Math.round(e*l),c/l<t&&++c,f/l>e&&--f,l=-l):(l=Math.pow(10,a)*o,c=Math.round(t/l),f=Math.round(e/l),c*l<t&&++c,f*l>e&&--f),f<c&&.5<=n&&n<2?sc(t,e,n*2):[c,f,l]}function MR(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[a,s,o]=r?sc(e,t,n):sc(t,e,n);if(!(s>=a))return[];const c=s-a+1,f=new Array(c);if(r)if(o<0)for(let l=0;l<c;++l)f[l]=(s-l)/-o;else for(let l=0;l<c;++l)f[l]=(s-l)*o;else if(o<0)for(let l=0;l<c;++l)f[l]=(a+l)/-o;else for(let l=0;l<c;++l)f[l]=(a+l)*o;return f}function Wg(t,e,n){return e=+e,t=+t,n=+n,sc(t,e,n)[2]}function LR(t,e,n){e=+e,t=+t,n=+n;const r=e<t,a=r?Wg(e,t,n):Wg(t,e,n);return(r?-1:1)*(a<0?1/-a:a)}function _R(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function O1(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function xT(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Ai(){}var Bi=.7,ic=1/Bi,ys="\\s*([+-]?\\d+)\\s*",Fi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Wn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",VR=/^#([0-9a-f]{3,8})$/,kR=new RegExp(`^rgb\\(${ys},${ys},${ys}\\)$`),BR=new RegExp(`^rgb\\(${Wn},${Wn},${Wn}\\)$`),FR=new RegExp(`^rgba\\(${ys},${ys},${ys},${Fi}\\)$`),NR=new RegExp(`^rgba\\(${Wn},${Wn},${Wn},${Fi}\\)$`),UR=new RegExp(`^hsl\\(${Fi},${Wn},${Wn}\\)$`),GR=new RegExp(`^hsla\\(${Fi},${Wn},${Wn},${Fi}\\)$`),Wd={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};O1(Ai,Ni,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Hd,formatHex:Hd,formatHex8:$R,formatHsl:zR,formatRgb:bd,toString:bd});function Hd(){return this.rgb().formatHex()}function $R(){return this.rgb().formatHex8()}function zR(){return ST(this).formatHsl()}function bd(){return this.rgb().formatRgb()}function Ni(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=VR.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Ad(e):n===3?new bt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?lu(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?lu(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=kR.exec(t))?new bt(e[1],e[2],e[3],1):(e=BR.exec(t))?new bt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=FR.exec(t))?lu(e[1],e[2],e[3],e[4]):(e=NR.exec(t))?lu(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=UR.exec(t))?Pd(e[1],e[2]/100,e[3]/100,1):(e=GR.exec(t))?Pd(e[1],e[2]/100,e[3]/100,e[4]):Wd.hasOwnProperty(t)?Ad(Wd[t]):t==="transparent"?new bt(NaN,NaN,NaN,0):null}function Ad(t){return new bt(t>>16&255,t>>8&255,t&255,1)}function lu(t,e,n,r){return r<=0&&(t=e=n=NaN),new bt(t,e,n,r)}function WR(t){return t instanceof Ai||(t=Ni(t)),t?(t=t.rgb(),new bt(t.r,t.g,t.b,t.opacity)):new bt}function Hg(t,e,n,r){return arguments.length===1?WR(t):new bt(t,e,n,r??1)}function bt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}O1(bt,Hg,xT(Ai,{brighter(t){return t=t==null?ic:Math.pow(ic,t),new bt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Bi:Math.pow(Bi,t),new bt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new bt(Oa(this.r),Oa(this.g),Oa(this.b),oc(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:jd,formatHex:jd,formatHex8:HR,formatRgb:Kd,toString:Kd}));function jd(){return`#${ma(this.r)}${ma(this.g)}${ma(this.b)}`}function HR(){return`#${ma(this.r)}${ma(this.g)}${ma(this.b)}${ma((isNaN(this.opacity)?1:this.opacity)*255)}`}function Kd(){const t=oc(this.opacity);return`${t===1?"rgb(":"rgba("}${Oa(this.r)}, ${Oa(this.g)}, ${Oa(this.b)}${t===1?")":`, ${t})`}`}function oc(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Oa(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ma(t){return t=Oa(t),(t<16?"0":"")+t.toString(16)}function Pd(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new mn(t,e,n,r)}function ST(t){if(t instanceof mn)return new mn(t.h,t.s,t.l,t.opacity);if(t instanceof Ai||(t=Ni(t)),!t)return new mn;if(t instanceof mn)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,a=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,c=s-a,f=(s+a)/2;return c?(e===s?o=(n-r)/c+(n<r)*6:n===s?o=(r-e)/c+2:o=(e-n)/c+4,c/=f<.5?s+a:2-s-a,o*=60):c=f>0&&f<1?0:o,new mn(o,c,f,t.opacity)}function bR(t,e,n,r){return arguments.length===1?ST(t):new mn(t,e,n,r??1)}function mn(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}O1(mn,bR,xT(Ai,{brighter(t){return t=t==null?ic:Math.pow(ic,t),new mn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Bi:Math.pow(Bi,t),new mn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,a=2*n-r;return new bt(Jl(t>=240?t-240:t+120,a,r),Jl(t,a,r),Jl(t<120?t+240:t-120,a,r),this.opacity)},clamp(){return new mn(Xd(this.h),gu(this.s),gu(this.l),oc(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=oc(this.opacity);return`${t===1?"hsl(":"hsla("}${Xd(this.h)}, ${gu(this.s)*100}%, ${gu(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Xd(t){return t=(t||0)%360,t<0?t+360:t}function gu(t){return Math.max(0,Math.min(1,t||0))}function Jl(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const D1=t=>()=>t;function AR(t,e){return function(n){return t+n*e}}function jR(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function KR(t){return(t=+t)==1?CT:function(e,n){return n-e?jR(e,n,t):D1(isNaN(e)?n:e)}}function CT(t,e){var n=e-t;return n?AR(t,n):D1(isNaN(t)?e:t)}const Id=function t(e){var n=KR(e);function r(a,s){var o=n((a=Hg(a)).r,(s=Hg(s)).r),c=n(a.g,s.g),f=n(a.b,s.b),l=CT(a.opacity,s.opacity);return function(h){return a.r=o(h),a.g=c(h),a.b=f(h),a.opacity=l(h),a+""}}return r.gamma=t,r}(1);function PR(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),a;return function(s){for(a=0;a<n;++a)r[a]=t[a]*(1-s)+e[a]*s;return r}}function XR(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function IR(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,a=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)a[o]=M1(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(c){for(o=0;o<r;++o)s[o]=a[o](c);return s}}function YR(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function uc(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function qR(t,e){var n={},r={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?n[a]=M1(t[a],e[a]):r[a]=e[a];return function(s){for(a in n)r[a]=n[a](s);return r}}var bg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,eg=new RegExp(bg.source,"g");function QR(t){return function(){return t}}function ZR(t){return function(e){return t(e)+""}}function JR(t,e){var n=bg.lastIndex=eg.lastIndex=0,r,a,s,o=-1,c=[],f=[];for(t=t+"",e=e+"";(r=bg.exec(t))&&(a=eg.exec(e));)(s=a.index)>n&&(s=e.slice(n,s),c[o]?c[o]+=s:c[++o]=s),(r=r[0])===(a=a[0])?c[o]?c[o]+=a:c[++o]=a:(c[++o]=null,f.push({i:o,x:uc(r,a)})),n=eg.lastIndex;return n<e.length&&(s=e.slice(n),c[o]?c[o]+=s:c[++o]=s),c.length<2?f[0]?ZR(f[0].x):QR(e):(e=f.length,function(l){for(var h=0,g;h<e;++h)c[(g=f[h]).i]=g.x(l);return c.join("")})}function M1(t,e){var n=typeof e,r;return e==null||n==="boolean"?D1(e):(n==="number"?uc:n==="string"?(r=Ni(e))?(e=r,Id):JR:e instanceof Ni?Id:e instanceof Date?YR:XR(e)?PR:Array.isArray(e)?IR:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?qR:uc)(t,e)}function eO(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function tO(t){return function(){return t}}function nO(t){return+t}var Yd=[0,1];function gs(t){return t}function Ag(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:tO(isNaN(e)?NaN:.5)}function rO(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function aO(t,e,n){var r=t[0],a=t[1],s=e[0],o=e[1];return a<r?(r=Ag(a,r),s=n(o,s)):(r=Ag(r,a),s=n(s,o)),function(c){return s(r(c))}}function sO(t,e,n){var r=Math.min(t.length,e.length)-1,a=new Array(r),s=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)a[o]=Ag(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(c){var f=mR(t,c,1,r)-1;return s[f](a[f](c))}}function iO(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function oO(){var t=Yd,e=Yd,n=M1,r,a,s,o=gs,c,f,l;function h(){var d=Math.min(t.length,e.length);return o!==gs&&(o=rO(t[0],t[d-1])),c=d>2?sO:aO,f=l=null,g}function g(d){return d==null||isNaN(d=+d)?s:(f||(f=c(t.map(r),e,n)))(r(o(d)))}return g.invert=function(d){return o(a((l||(l=c(e,t.map(r),uc)))(d)))},g.domain=function(d){return arguments.length?(t=Array.from(d,nO),h()):t.slice()},g.range=function(d){return arguments.length?(e=Array.from(d),h()):e.slice()},g.rangeRound=function(d){return e=Array.from(d),n=eO,h()},g.clamp=function(d){return arguments.length?(o=d?!0:gs,h()):o!==gs},g.interpolate=function(d){return arguments.length?(n=d,h()):n},g.unknown=function(d){return arguments.length?(s=d,g):s},function(d,v){return r=d,a=v,h()}}function uO(){return oO()(gs,gs)}function cO(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function cc(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Ts(t){return t=cc(Math.abs(t)),t?t[1]:NaN}function fO(t,e){return function(n,r){for(var a=n.length,s=[],o=0,c=t[0],f=0;a>0&&c>0&&(f+c+1>r&&(c=Math.max(1,r-f)),s.push(n.substring(a-=c,a+c)),!((f+=c+1)>r));)c=t[o=(o+1)%t.length];return s.reverse().join(e)}}function lO(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var gO=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function fc(t){if(!(e=gO.exec(t)))throw new Error("invalid format: "+t);var e;return new L1({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}fc.prototype=L1.prototype;function L1(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}L1.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function pO(t){e:for(var e=t.length,n=1,r=-1,a;n<e;++n)switch(t[n]){case".":r=a=n;break;case"0":r===0&&(r=n),a=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(a+1):t}var wT;function hO(t,e){var n=cc(t,e);if(!n)return t+"";var r=n[0],a=n[1],s=a-(wT=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+cc(t,Math.max(0,e+s-1))[0]}function qd(t,e){var n=cc(t,e);if(!n)return t+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}const Qd={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:cO,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>qd(t*100,e),r:qd,s:hO,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Zd(t){return t}var Jd=Array.prototype.map,ev=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function dO(t){var e=t.grouping===void 0||t.thousands===void 0?Zd:fO(Jd.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?Zd:lO(Jd.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",c=t.minus===void 0?"−":t.minus+"",f=t.nan===void 0?"NaN":t.nan+"";function l(g){g=fc(g);var d=g.fill,v=g.align,S=g.sign,T=g.symbol,x=g.zero,m=g.width,O=g.comma,w=g.precision,R=g.trim,M=g.type;M==="n"?(O=!0,M="g"):Qd[M]||(w===void 0&&(w=12),R=!0,M="g"),(x||d==="0"&&v==="=")&&(x=!0,d="0",v="=");var D=T==="$"?n:T==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",V=T==="$"?r:/[%p]/.test(M)?o:"",B=Qd[M],z=/[defgprs%]/.test(M);w=w===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function k(U){var H=D,P=V,A,ne,ae;if(M==="c")P=B(U)+P,U="";else{U=+U;var se=U<0||1/U<0;if(U=isNaN(U)?f:B(Math.abs(U),w),R&&(U=pO(U)),se&&+U==0&&S!=="+"&&(se=!1),H=(se?S==="("?S:c:S==="-"||S==="("?"":S)+H,P=(M==="s"?ev[8+wT/3]:"")+P+(se&&S==="("?")":""),z){for(A=-1,ne=U.length;++A<ne;)if(ae=U.charCodeAt(A),48>ae||ae>57){P=(ae===46?a+U.slice(A+1):U.slice(A))+P,U=U.slice(0,A);break}}}O&&!x&&(U=e(U,1/0));var Q=H.length+U.length+P.length,j=Q<m?new Array(m-Q+1).join(d):"";switch(O&&x&&(U=e(j+U,j.length?m-P.length:1/0),j=""),v){case"<":U=H+U+P+j;break;case"=":U=H+j+U+P;break;case"^":U=j.slice(0,Q=j.length>>1)+H+U+P+j.slice(Q);break;default:U=j+H+U+P;break}return s(U)}return k.toString=function(){return g+""},k}function h(g,d){var v=l((g=fc(g),g.type="f",g)),S=Math.max(-8,Math.min(8,Math.floor(Ts(d)/3)))*3,T=Math.pow(10,-S),x=ev[8+S/3];return function(m){return v(T*m)+x}}return{format:l,formatPrefix:h}}var pu,ET,mT;vO({thousands:",",grouping:[3],currency:["$",""]});function vO(t){return pu=dO(t),ET=pu.format,mT=pu.formatPrefix,pu}function yO(t){return Math.max(0,-Ts(Math.abs(t)))}function TO(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ts(e)/3)))*3-Ts(Math.abs(t)))}function xO(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ts(e)-Ts(t))+1}function SO(t,e,n,r){var a=LR(t,e,n),s;switch(r=fc(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=TO(a,o))&&(r.precision=s),mT(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=xO(a,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=yO(a))&&(r.precision=s-(r.type==="%")*2);break}}return ET(r)}function CO(t){var e=t.domain;return t.ticks=function(n){var r=e();return MR(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var a=e();return SO(a[0],a[a.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),a=0,s=r.length-1,o=r[a],c=r[s],f,l,h=10;for(c<o&&(l=o,o=c,c=l,l=a,a=s,s=l);h-- >0;){if(l=Wg(o,c,n),l===f)return r[a]=o,r[s]=c,e(r);if(l>0)o=Math.floor(o/l)*l,c=Math.ceil(c/l)*l;else if(l<0)o=Math.ceil(o*l)/l,c=Math.floor(c*l)/l;else break;f=l}return t},t}function _1(){var t=uO();return t.copy=function(){return iO(t,_1())},_R.apply(t,arguments),CO(t)}var bu={exports:{}},wO=bu.exports,tv;function EO(){return tv||(tv=1,function(t){(function(e,n,r){function a(f){var l=this,h=c();l.next=function(){var g=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=g-(l.c=g|0)},l.c=1,l.s0=h(" "),l.s1=h(" "),l.s2=h(" "),l.s0-=h(f),l.s0<0&&(l.s0+=1),l.s1-=h(f),l.s1<0&&(l.s1+=1),l.s2-=h(f),l.s2<0&&(l.s2+=1),h=null}function s(f,l){return l.c=f.c,l.s0=f.s0,l.s1=f.s1,l.s2=f.s2,l}function o(f,l){var h=new a(f),g=l&&l.state,d=h.next;return d.int32=function(){return h.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,g&&(typeof g=="object"&&s(g,h),d.state=function(){return s(h,{})}),d}function c(){var f=4022871197,l=function(h){h=String(h);for(var g=0;g<h.length;g++){f+=h.charCodeAt(g);var d=.02519603282416938*f;f=d>>>0,d-=f,d*=f,f=d>>>0,d-=f,f+=d*4294967296}return(f>>>0)*23283064365386963e-26};return l}n.exports?n.exports=o:this.alea=o})(wO,t)}(bu)),bu.exports}var Au={exports:{}},mO=Au.exports,nv;function RO(){return nv||(nv=1,function(t){(function(e,n,r){function a(c){var f=this,l="";f.x=0,f.y=0,f.z=0,f.w=0,f.next=function(){var g=f.x^f.x<<11;return f.x=f.y,f.y=f.z,f.z=f.w,f.w^=f.w>>>19^g^g>>>8},c===(c|0)?f.x=c:l+=c;for(var h=0;h<l.length+64;h++)f.x^=l.charCodeAt(h)|0,f.next()}function s(c,f){return f.x=c.x,f.y=c.y,f.z=c.z,f.w=c.w,f}function o(c,f){var l=new a(c),h=f&&f.state,g=function(){return(l.next()>>>0)/4294967296};return g.double=function(){do var d=l.next()>>>11,v=(l.next()>>>0)/4294967296,S=(d+v)/(1<<21);while(S===0);return S},g.int32=l.next,g.quick=g,h&&(typeof h=="object"&&s(h,l),g.state=function(){return s(l,{})}),g}n.exports?n.exports=o:this.xor128=o})(mO,t)}(Au)),Au.exports}var ju={exports:{}},OO=ju.exports,rv;function DO(){return rv||(rv=1,function(t){(function(e,n,r){function a(c){var f=this,l="";f.next=function(){var g=f.x^f.x>>>2;return f.x=f.y,f.y=f.z,f.z=f.w,f.w=f.v,(f.d=f.d+362437|0)+(f.v=f.v^f.v<<4^(g^g<<1))|0},f.x=0,f.y=0,f.z=0,f.w=0,f.v=0,c===(c|0)?f.x=c:l+=c;for(var h=0;h<l.length+64;h++)f.x^=l.charCodeAt(h)|0,h==l.length&&(f.d=f.x<<10^f.x>>>4),f.next()}function s(c,f){return f.x=c.x,f.y=c.y,f.z=c.z,f.w=c.w,f.v=c.v,f.d=c.d,f}function o(c,f){var l=new a(c),h=f&&f.state,g=function(){return(l.next()>>>0)/4294967296};return g.double=function(){do var d=l.next()>>>11,v=(l.next()>>>0)/4294967296,S=(d+v)/(1<<21);while(S===0);return S},g.int32=l.next,g.quick=g,h&&(typeof h=="object"&&s(h,l),g.state=function(){return s(l,{})}),g}n.exports?n.exports=o:this.xorwow=o})(OO,t)}(ju)),ju.exports}var Ku={exports:{}},MO=Ku.exports,av;function LO(){return av||(av=1,function(t){(function(e,n,r){function a(c){var f=this;f.next=function(){var h=f.x,g=f.i,d,v;return d=h[g],d^=d>>>7,v=d^d<<24,d=h[g+1&7],v^=d^d>>>10,d=h[g+3&7],v^=d^d>>>3,d=h[g+4&7],v^=d^d<<7,d=h[g+7&7],d=d^d<<13,v^=d^d<<9,h[g]=v,f.i=g+1&7,v};function l(h,g){var d,v=[];if(g===(g|0))v[0]=g;else for(g=""+g,d=0;d<g.length;++d)v[d&7]=v[d&7]<<15^g.charCodeAt(d)+v[d+1&7]<<13;for(;v.length<8;)v.push(0);for(d=0;d<8&&v[d]===0;++d);for(d==8?v[7]=-1:v[d],h.x=v,h.i=0,d=256;d>0;--d)h.next()}l(f,c)}function s(c,f){return f.x=c.x.slice(),f.i=c.i,f}function o(c,f){c==null&&(c=+new Date);var l=new a(c),h=f&&f.state,g=function(){return(l.next()>>>0)/4294967296};return g.double=function(){do var d=l.next()>>>11,v=(l.next()>>>0)/4294967296,S=(d+v)/(1<<21);while(S===0);return S},g.int32=l.next,g.quick=g,h&&(h.x&&s(h,l),g.state=function(){return s(l,{})}),g}n.exports?n.exports=o:this.xorshift7=o})(MO,t)}(Ku)),Ku.exports}var Pu={exports:{}},_O=Pu.exports,sv;function VO(){return sv||(sv=1,function(t){(function(e,n,r){function a(c){var f=this;f.next=function(){var h=f.w,g=f.X,d=f.i,v,S;return f.w=h=h+1640531527|0,S=g[d+34&127],v=g[d=d+1&127],S^=S<<13,v^=v<<17,S^=S>>>15,v^=v>>>12,S=g[d]=S^v,f.i=d,S+(h^h>>>16)|0};function l(h,g){var d,v,S,T,x,m=[],O=128;for(g===(g|0)?(v=g,g=null):(g=g+"\0",v=0,O=Math.max(O,g.length)),S=0,T=-32;T<O;++T)g&&(v^=g.charCodeAt((T+32)%g.length)),T===0&&(x=v),v^=v<<10,v^=v>>>15,v^=v<<4,v^=v>>>13,T>=0&&(x=x+1640531527|0,d=m[T&127]^=v+x,S=d==0?S+1:0);for(S>=128&&(m[(g&&g.length||0)&127]=-1),S=127,T=4*128;T>0;--T)v=m[S+34&127],d=m[S=S+1&127],v^=v<<13,d^=d<<17,v^=v>>>15,d^=d>>>12,m[S]=v^d;h.w=x,h.X=m,h.i=S}l(f,c)}function s(c,f){return f.i=c.i,f.w=c.w,f.X=c.X.slice(),f}function o(c,f){c==null&&(c=+new Date);var l=new a(c),h=f&&f.state,g=function(){return(l.next()>>>0)/4294967296};return g.double=function(){do var d=l.next()>>>11,v=(l.next()>>>0)/4294967296,S=(d+v)/(1<<21);while(S===0);return S},g.int32=l.next,g.quick=g,h&&(h.X&&s(h,l),g.state=function(){return s(l,{})}),g}n.exports?n.exports=o:this.xor4096=o})(_O,t)}(Pu)),Pu.exports}var Xu={exports:{}},kO=Xu.exports,iv;function BO(){return iv||(iv=1,function(t){(function(e,n,r){function a(c){var f=this,l="";f.next=function(){var g=f.b,d=f.c,v=f.d,S=f.a;return g=g<<25^g>>>7^d,d=d-v|0,v=v<<24^v>>>8^S,S=S-g|0,f.b=g=g<<20^g>>>12^d,f.c=d=d-v|0,f.d=v<<16^d>>>16^S,f.a=S-g|0},f.a=0,f.b=0,f.c=-1640531527,f.d=1367130551,c===Math.floor(c)?(f.a=c/4294967296|0,f.b=c|0):l+=c;for(var h=0;h<l.length+20;h++)f.b^=l.charCodeAt(h)|0,f.next()}function s(c,f){return f.a=c.a,f.b=c.b,f.c=c.c,f.d=c.d,f}function o(c,f){var l=new a(c),h=f&&f.state,g=function(){return(l.next()>>>0)/4294967296};return g.double=function(){do var d=l.next()>>>11,v=(l.next()>>>0)/4294967296,S=(d+v)/(1<<21);while(S===0);return S},g.int32=l.next,g.quick=g,h&&(typeof h=="object"&&s(h,l),g.state=function(){return s(l,{})}),g}n.exports?n.exports=o:this.tychei=o})(kO,t)}(Xu)),Xu.exports}var Iu={exports:{}};const FO={},NO=Object.freeze(Object.defineProperty({__proto__:null,default:FO},Symbol.toStringTag,{value:"Module"})),UO=iE(NO);var GO=Iu.exports,ov;function $O(){return ov||(ov=1,function(t){(function(e,n,r){var a=256,s=6,o=52,c="random",f=r.pow(a,s),l=r.pow(2,o),h=l*2,g=a-1,d;function v(R,M,D){var V=[];M=M==!0?{entropy:!0}:M||{};var B=m(x(M.entropy?[R,w(n)]:R??O(),3),V),z=new S(V),k=function(){for(var U=z.g(s),H=f,P=0;U<l;)U=(U+P)*a,H*=a,P=z.g(1);for(;U>=h;)U/=2,H/=2,P>>>=1;return(U+P)/H};return k.int32=function(){return z.g(4)|0},k.quick=function(){return z.g(4)/4294967296},k.double=k,m(w(z.S),n),(M.pass||D||function(U,H,P,A){return A&&(A.S&&T(A,z),U.state=function(){return T(z,{})}),P?(r[c]=U,H):U})(k,B,"global"in M?M.global:this==r,M.state)}function S(R){var M,D=R.length,V=this,B=0,z=V.i=V.j=0,k=V.S=[];for(D||(R=[D++]);B<a;)k[B]=B++;for(B=0;B<a;B++)k[B]=k[z=g&z+R[B%D]+(M=k[B])],k[z]=M;(V.g=function(U){for(var H,P=0,A=V.i,ne=V.j,ae=V.S;U--;)H=ae[A=g&A+1],P=P*a+ae[g&(ae[A]=ae[ne=g&ne+H])+(ae[ne]=H)];return V.i=A,V.j=ne,P})(a)}function T(R,M){return M.i=R.i,M.j=R.j,M.S=R.S.slice(),M}function x(R,M){var D=[],V=typeof R,B;if(M&&V=="object")for(B in R)try{D.push(x(R[B],M-1))}catch{}return D.length?D:V=="string"?R:R+"\0"}function m(R,M){for(var D=R+"",V,B=0;B<D.length;)M[g&B]=g&(V^=M[g&B]*19)+D.charCodeAt(B++);return w(M)}function O(){try{var R;return d&&(R=d.randomBytes)?R=R(a):(R=new Uint8Array(a),(e.crypto||e.msCrypto).getRandomValues(R)),w(R)}catch{var M=e.navigator,D=M&&M.plugins;return[+new Date,e,D,e.screen,w(n)]}}function w(R){return String.fromCharCode.apply(0,R)}if(m(r.random(),n),t.exports){t.exports=v;try{d=UO}catch{}}else r["seed"+c]=v})(typeof self<"u"?self:GO,[],Math)}(Iu)),Iu.exports}var tg,uv;function zO(){if(uv)return tg;uv=1;var t=EO(),e=RO(),n=DO(),r=LO(),a=VO(),s=BO(),o=$O();return o.alea=t,o.xor128=e,o.xorwow=n,o.xorshift7=r,o.xor4096=a,o.tychei=s,tg=o,tg}zO();const WO=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],HO=1e-6,bO=1e-12,{vtkErrorMacro:z5,vtkWarningMacro:cv}=L;function jg(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:3;const e=Array(t);for(let n=0;n<t;++n)e[n]=0;return e}function et(t){return t/180*Math.PI}function Ui(t){return t*180/Math.PI}const{round:hu,floor:AO,ceil:W5,min:H5,max:b5}=Math;function wn(t){let e=1;for(;e<t;)e*=2;return e}function du(t){return t===wn(t)}function Kg(t,e,n){return n[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2],n}function Ir(t,e,n){return n[0]=t[0]-e[0],n[1]=t[1]-e[1],n[2]=t[2]-e[2],n}function fv(t,e,n,r){return r[0]=t[0]+e[0]*n,r[1]=t[1]+e[1]*n,r[2]=t[2]+e[2]*n,r}function Ee(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Gi(t,e,n){const r=t[1]*e[2]-t[2]*e[1],a=t[2]*e[0]-t[0]*e[2],s=t[0]*e[1]-t[1]*e[0];return n[0]=r,n[1]=a,n[2]=s,n}function RT(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;switch(e){case 1:return Math.abs(t);case 2:return Math.sqrt(t[0]*t[0]+t[1]*t[1]);case 3:return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);default:{let n=0;for(let r=0;r<e;r++)n+=t[r]*t[r];return Math.sqrt(n)}}}function xs(t){const e=RT(t);return e!==0&&(t[0]/=e,t[1]/=e,t[2]/=e),e}function Un(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])+(t[2]-e[2])*(t[2]-e[2])}function jO(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function KO(t){const e=jO(t);return e!==0&&(t[0]/=e,t[1]/=e),e}function Yu(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===2?e[0][0]*e[1][1]-e[1][0]*e[0][1]:e.length===4?e[0]*e[3]-e[1]*e[2]:Number.NaN}function PO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:HO;if(t.length!==e.length)return!1;function r(a,s){return Math.abs(a-e[s])<=n}return t.every(r)}const OT=PO;function ng(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!`${t}`.includes("e"))return+`${Math.round(`${t}e+${e}`)}e-${e}`;const n=`${t}`.split("e");let r="";return+n[1]+e>0&&(r="+"),+`${Math.round(`${+n[0]}e${r}${+n[1]+e}`)}e-${e}`}function lv(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return e[0]=ng(t[0],n),e[1]=ng(t[1],n),e[2]=ng(t[2],n),e}function XO(t,e,n){let r,a,s,o,c=0,f,l,h;const g=jg(n);for(r=0;r<n;r++){for(o=0,a=0;a<n;a++)(h=Math.abs(t[r*n+a]))>o&&(o=h);if(o===0)return cv("Unable to factor linear system"),0;g[r]=1/o}for(a=0;a<n;a++){for(r=0;r<a;r++){for(f=t[r*n+a],s=0;s<r;s++)f-=t[r*n+s]*t[s*n+a];t[r*n+a]=f}for(o=0,r=a;r<n;r++){for(f=t[r*n+a],s=0;s<a;s++)f-=t[r*n+s]*t[s*n+a];t[r*n+a]=f,(l=g[r]*Math.abs(f))>=o&&(o=l,c=r)}if(a!==c){for(s=0;s<n;s++)l=t[c*n+s],t[c*n+s]=t[a*n+s],t[a*n+s]=l;g[c]=g[a]}if(e[a]=c,Math.abs(t[a*n+a])<=bO)return cv("Unable to factor linear system"),0;if(a!==n-1)for(l=1/t[a*n+a],r=a+1;r<n;r++)t[r*n+a]*=l}return 1}function IO(t,e,n,r){let a,s,o,c,f;for(o=-1,a=0;a<r;a++){if(c=e[a],f=n[c],n[c]=n[a],o>=0)for(s=o;s<=a-1;s++)f-=t[a*r+s]*n[s];else f!==0&&(o=a);n[a]=f}for(a=r-1;a>=0;a--){for(f=n[a],s=a+1;s<r;s++)f-=t[a*r+s]*n[s];n[a]=f/t[a*r+a]}}function YO(t,e,n){if(n===2){const a=jg(2),s=Yu(t[0],t[1],t[2],t[3]);return s===0?0:(a[0]=(t[3]*e[0]-t[1]*e[1])/s,a[1]=(-(t[2]*e[0])+t[0]*e[1])/s,e[0]=a[0],e[1]=a[1],1)}if(n===1)return t[0]===0?0:(e[0]/=t[0],1);const r=jg(n);return XO(t,r,n)===0?0:(IO(t,r,e,n),1)}function vu(t,e){let n,r;const[a,s,o]=t,c=1/3,f=1/6,l=2/3;let h=a,g=a;s>h?h=s:s<g&&(g=s),o>h?h=o:o<g&&(g=o);const d=h;d>0?r=(h-g)/h:r=0,r>0?(a===h?n=f*(s-o)/(h-g):s===h?n=c+f*(o-a)/(h-g):n=l+f*(a-s)/(h-g),n<0&&(n+=1)):n=0,e[0]=n,e[1]=r,e[2]=d}function fs(t,e){const[n,r,a]=t,s=1/3,o=1/6,c=2/3,f=5/6;let l,h,g;n>o&&n<=s?(h=1,l=(s-n)/o,g=0):n>s&&n<=.5?(h=1,g=(n-s)/o,l=0):n>.5&&n<=c?(g=1,h=(c-n)/o,l=0):n>c&&n<=f?(g=1,l=(n-c)/o,h=0):n>f&&n<=1?(l=1,g=(1-n)/o,h=0):(l=1,h=n/o,g=0),l=r*l+(1-r),h=r*h+(1-r),g=r*g+(1-r),l*=a,h*=a,g*=a,e[0]=l,e[1]=h,e[2]=g}function qO(t,e){const[n,r,a]=t;let s=(n+16)/116,o=r/500+s,c=s-a/200;s**3>.008856?s**=3:s=(s-16/116)/7.787,o**3>.008856?o**=3:o=(o-16/116)/7.787,c**3>.008856?c**=3:c=(c-16/116)/7.787;const f=.9505,l=1,h=1.089;e[0]=f*o,e[1]=l*s,e[2]=h*c}function QO(t,e){const[n,r,a]=t,s=.9505,o=1,c=1.089;let f=n/s,l=r/o,h=a/c;f>.008856?f**=1/3:f=7.787*f+16/116,l>.008856?l**=1/3:l=7.787*l+16/116,h>.008856?h**=1/3:h=7.787*h+16/116,e[0]=116*l-16,e[1]=500*(f-l),e[2]=200*(l-h)}function ZO(t,e){const[n,r,a]=t;let s=n*3.2406+r*-1.5372+a*-.4986,o=n*-.9689+r*1.8758+a*.0415,c=n*.0557+r*-.204+a*1.057;s>.0031308?s=1.055*s**(1/2.4)-.055:s*=12.92,o>.0031308?o=1.055*o**(1/2.4)-.055:o*=12.92,c>.0031308?c=1.055*c**(1/2.4)-.055:c*=12.92;let f=s;f<o&&(f=o),f<c&&(f=c),f>1&&(s/=f,o/=f,c/=f),s<0&&(s=0),o<0&&(o=0),c<0&&(c=0),e[0]=s,e[1]=o,e[2]=c}function JO(t,e){let[n,r,a]=t;n>.04045?n=((n+.055)/1.055)**2.4:n/=12.92,r>.04045?r=((r+.055)/1.055)**2.4:r/=12.92,a>.04045?a=((a+.055)/1.055)**2.4:a/=12.92,e[0]=n*.4124+r*.3576+a*.1805,e[1]=n*.2126+r*.7152+a*.0722,e[2]=n*.0193+r*.1192+a*.9505}function ps(t,e){const n=[0,0,0];JO(t,n),QO(n,e)}function Pg(t,e){const n=[0,0,0];qO(t,n),ZO(n,e)}function V1(t){return t[0]=1,t[1]=-1,t[2]=1,t[3]=-1,t[4]=1,t[5]=-1,t}function rg(t){return!(t[1]-t[0]<0)}function ag(t,e,n){return t<e?e:t>n?n:t}function gv(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[0,0,0];return r[0]=ag(t[0],e[0],n[0]),r[1]=ag(t[1],e[1],n[1]),r[2]=ag(t[2],e[2],n[2]),r}const e3=t=>!Number.isFinite(t),{isFinite:A5,isNaN:t3}=Number,lc=t3;function k1(){return[].concat([Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE])}function n3(t,e){e.classHierarchy.push("vtkImplicitFunction"),t.functionValue=n=>{if(!e.transform)return t.evaluateFunction(n);const r=[];return e.transform.transformPoint(n,r),t.evaluateFunction(r)},t.evaluateFunction=n=>{L.vtkErrorMacro("not implemented")}}const r3={};function DT(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,r3,n),L.obj(t,e),L.setGet(t,e,["transform"]),n3(t,e)}const a3=L.newInstance(DT,"vtkImplicitFunction");var s3={newInstance:a3,extend:DT};const Xg=1e-6,MT="coincide",LT="disjoint";function i3(t,e,n){return t[0]*(n[0]-e[0])+t[1]*(n[1]-e[1])+t[2]*(n[2]-e[2])}function _T(t,e,n){const r=n[0]*(t[0]-e[0])+n[1]*(t[1]-e[1])+n[2]*(t[2]-e[2]);return Math.abs(r)}function VT(t,e,n,r){const a=[];Ir(t,e,a);const s=Ee(n,a);r[0]=t[0]-s*n[0],r[1]=t[1]-s*n[1],r[2]=t[2]-s*n[2]}function kT(t,e,n){const r=Ee(t,e);let a=Ee(e,e);return a===0&&(a=1),n[0]=t[0]-r*e[0]/a,n[1]=t[1]-r*e[1]/a,n[2]=t[2]-r*e[2]/a,n}function BT(t,e,n,r){const a=[];Ir(t,e,a);const s=Ee(n,a),o=Ee(n,n);o!==0?(r[0]=t[0]-s*n[0]/o,r[1]=t[1]-s*n[1]/o,r[2]=t[2]-s*n[2]/o):(r[0]=t[0],r[1]=t[1],r[2]=t[2])}function FT(t,e,n,r){const a={intersection:!1,betweenPoints:!1,t:Number.MAX_VALUE,x:[]},s=[],o=[];Ir(e,t,s),Ir(n,t,o);const c=Ee(r,o),f=Ee(r,s);let l,h;return f<0?l=-f:l=f,c<0?h=-c*Xg:h=c*Xg,l<=h||(a.t=c/f,a.x[0]=t[0]+a.t*s[0],a.x[1]=t[1]+a.t*s[1],a.x[2]=t[2]+a.t*s[2],a.intersection=!0,a.betweenPoints=a.t>=0&&a.t<=1),a}function NT(t,e,n,r){const a={intersection:!1,l0:[],l1:[],error:null},s=[];Gi(e,r,s);const o=s.map(g=>Math.abs(g));if(o[0]+o[1]+o[2]<Xg){const g=[];return Ir(t,n,g),Ee(e,g)===0?a.error=MT:a.error=LT,a}let c;o[0]>o[1]&&o[0]>o[2]?c="x":o[1]>o[2]?c="y":c="z";const f=[],l=-Ee(e,t),h=-Ee(r,n);switch(c){case"x":f[0]=0,f[1]=(h*e[2]-l*r[2])/s[0],f[2]=(l*r[1]-h*e[1])/s[0];break;case"y":f[0]=(l*r[2]-h*e[2])/s[1],f[1]=0,f[2]=(h*e[0]-l*r[0])/s[1];break;case"z":f[0]=(h*e[1]-l*r[1])/s[2],f[1]=(l*r[0]-h*e[0])/s[2],f[2]=0;break}return a.l0=f,Kg(f,s,a.l1),a.intersection=!0,a}const o3={evaluate:i3,distanceToPlane:_T,projectPoint:VT,projectVector:kT,generalizedProjectPoint:BT,intersectWithLine:FT,intersectWithPlane:NT,DISJOINT:LT,COINCIDE:MT};function u3(t,e){e.classHierarchy.push("vtkPlane"),t.distanceToPlane=n=>_T(n,e.origin,e.normal),t.projectPoint=(n,r)=>{VT(n,e.origin,e.normal,r)},t.projectVector=(n,r)=>kT(n,e.normal,r),t.push=n=>{if(n!==0)for(let r=0;r<3;r++)e.origin[r]+=n*e.normal[r]},t.generalizedProjectPoint=(n,r)=>{BT(n,e.origin,e.normal,r)},t.evaluateFunction=(n,r,a)=>Array.isArray(n)?e.normal[0]*(n[0]-e.origin[0])+e.normal[1]*(n[1]-e.origin[1])+e.normal[2]*(n[2]-e.origin[2]):e.normal[0]*(n-e.origin[0])+e.normal[1]*(r-e.origin[1])+e.normal[2]*(a-e.origin[2]),t.evaluateGradient=n=>[e.normal[0],e.normal[1],e.normal[2]],t.intersectWithLine=(n,r)=>FT(n,r,e.origin,e.normal),t.intersectWithPlane=(n,r)=>NT(n,r,e.origin,e.normal)}const c3={normal:[0,0,1],origin:[0,0,0]};function UT(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,c3,n),s3.extend(t,e,n),L.setGetArray(t,e,["normal","origin"],3),u3(t,e)}const f3=L.newInstance(UT,"vtkPlane");var Ss={newInstance:f3,extend:UT,...o3};const Oc=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE];function GT(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function pr(t){return(t==null?void 0:t.length)>=6&&t[0]<=t[1]&&t[2]<=t[3]&&t[4]<=t[5]}function B1(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function F1(t){return B1(t,Oc)}function gc(t,e,n,r){const[a,s,o,c,f,l]=t;return t[0]=a<e?a:e,t[1]=s>e?s:e,t[2]=o<n?o:n,t[3]=c>n?c:n,t[4]=f<r?f:r,t[5]=l>r?l:r,t}function N1(t,e){if(e.length===0)return t;if(Array.isArray(e[0]))for(let n=0;n<e.length;++n)gc(t,...e[n]);else for(let n=0;n<e.length;n+=3)gc(t,...e.slice(n,n+3));return t}function $T(t,e,n,r,a,s,o){const[c,f,l,h,g,d]=t;return o===void 0?(t[0]=Math.min(e[0],c),t[1]=Math.max(e[1],f),t[2]=Math.min(e[2],l),t[3]=Math.max(e[3],h),t[4]=Math.min(e[4],g),t[5]=Math.max(e[5],d)):(t[0]=Math.min(e,c),t[1]=Math.max(n,f),t[2]=Math.min(r,l),t[3]=Math.max(a,h),t[4]=Math.min(s,g),t[5]=Math.max(o,d)),t}function zT(t,e,n,r){const[a,s,o,c,f,l]=t;return t[0]=e,t[1]=e>s?e:s,t[2]=n,t[3]=n>c?n:c,t[4]=r,t[5]=r>l?r:l,a!==e||o!==n||f!==r}function WT(t,e,n,r){const[a,s,o,c,f,l]=t;return t[0]=e<a?e:a,t[1]=e,t[2]=n<o?n:o,t[3]=n,t[4]=r<f?r:f,t[5]=r,s!==e||c!==n||l!==r}function HT(t,e){return t[0]-=e,t[1]+=e,t[2]-=e,t[3]+=e,t[4]-=e,t[5]+=e,t}function U1(t,e,n,r){return pr(t)?(e>=0?(t[0]*=e,t[1]*=e):(t[0]=e*t[1],t[1]=e*t[0]),n>=0?(t[2]*=n,t[3]*=n):(t[2]=n*t[3],t[3]=n*t[2]),r>=0?(t[4]*=r,t[5]*=r):(t[4]=r*t[5],t[5]=r*t[4]),!0):!1}function G1(t){return[.5*(t[0]+t[1]),.5*(t[2]+t[3]),.5*(t[4]+t[5])]}function l3(t,e,n,r){if(!pr(t))return!1;const a=G1(t);return t[0]-=a[0],t[1]-=a[0],t[2]-=a[1],t[3]-=a[1],t[4]-=a[2],t[5]-=a[2],U1(t,e,n,r),t[0]+=a[0],t[1]+=a[0],t[2]+=a[1],t[3]+=a[1],t[4]+=a[2],t[5]+=a[2],!0}function Li(t,e){return t[e*2+1]-t[e*2]}function Dc(t){return[Li(t,0),Li(t,1),Li(t,2)]}function bT(t){return t.slice(0,2)}function AT(t){return t.slice(2,4)}function jT(t){return t.slice(4,6)}function KT(t){const e=Dc(t);return e[0]>e[1]?e[0]>e[2]?e[0]:e[2]:e[1]>e[2]?e[1]:e[2]}function PT(t){if(pr(t)){const e=Dc(t);return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])}return null}function $1(t){return[t[0],t[2],t[4]]}function z1(t){return[t[1],t[3],t[5]]}function yu(t,e){return t<=0&&e>=0||t>=0&&e<=0}function W1(t,e){let n=0;for(let r=0;r<2;r++)for(let a=2;a<4;a++)for(let s=4;s<6;s++)e[n++]=[t[r],t[a],t[s]];return e}function XT(t,e,n){return e[0]=t[0],e[1]=t[2],e[2]=t[4],n[0]=t[1],n[1]=t[3],n[2]=t[5],e}function IT(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];const r=W1(t,[]);for(let a=0;a<r.length;++a)Ve(r[a],r[a],e);return F1(n),N1(n,r)}function YT(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e[0]=.5*(t[1]-t[0]),e[1]=.5*(t[3]-t[2]),e[2]=.5*(t[5]-t[4]),e}function qT(t,e,n,r){const a=[].concat(Oc),s=t.getData();for(let o=0;o<s.length;o+=3){const c=[s[o],s[o+1],s[o+2]],f=Ee(c,e);a[0]=Math.min(f,a[0]),a[1]=Math.max(f,a[1]);const l=Ee(c,n);a[2]=Math.min(l,a[2]),a[3]=Math.max(l,a[3]);const h=Ee(c,r);a[4]=Math.min(h,a[4]),a[5]=Math.max(h,a[5])}return a}function QT(t,e,n,r,a){let s=!0;const o=[];let c=0;const f=[],l=[0,0,0],h=0,g=1,d=2;for(let v=0;v<3;v++)e[v]<t[2*v]?(o[v]=g,l[v]=t[2*v],s=!1):e[v]>t[2*v+1]?(o[v]=h,l[v]=t[2*v+1],s=!1):o[v]=d;if(s)return r[0]=e[0],r[1]=e[1],r[2]=e[2],a[0]=0,1;for(let v=0;v<3;v++)o[v]!==d&&n[v]!==0?f[v]=(l[v]-e[v])/n[v]:f[v]=-1;for(let v=0;v<3;v++)f[c]<f[v]&&(c=v);if(f[c]>1||f[c]<0)return 0;a[0]=f[c];for(let v=0;v<3;v++)if(c!==v){if(r[v]=e[v]+f[c]*n[v],r[v]<t[2*v]||r[v]>t[2*v+1])return 0}else r[v]=l[v];return 1}function ZT(t,e,n){const r=[];let a=0,s=1,o=1;for(let c=4;c<=5;++c){r[2]=t[c];for(let f=2;f<=3;++f){r[1]=t[f];for(let l=0;l<=1;++l)if(r[0]=t[l],a=Ss.evaluate(n,e,r),o&&(s=a>=0?1:-1,o=0),a===0||s>0&&a<0||s<0&&a>0)return 1}}return 0}function JT(t,e){if(!(pr(t)&&pr(e)))return!1;const n=[0,0,0,0,0,0];let r;for(let a=0;a<3;a++)if(r=!1,e[a*2]>=t[a*2]&&e[a*2]<=t[a*2+1]?(r=!0,n[a*2]=e[a*2]):t[a*2]>=e[a*2]&&t[a*2]<=e[a*2+1]&&(r=!0,n[a*2]=t[a*2]),e[a*2+1]>=t[a*2]&&e[a*2+1]<=t[a*2+1]?(r=!0,n[a*2+1]=e[2*a+1]):t[a*2+1]>=e[a*2]&&t[a*2+1]<=e[a*2+1]&&(r=!0,n[a*2+1]=t[a*2+1]),!r)return!1;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],!0}function pc(t,e){if(!(pr(t)&&pr(e)))return!1;for(let n=0;n<3;n++)if(!(e[n*2]>=t[n*2]&&e[n*2]<=t[n*2+1])&&!(t[n*2]>=e[n*2]&&t[n*2]<=e[n*2+1])&&!(e[n*2+1]>=t[n*2]&&e[n*2+1]<=t[n*2+1])&&!(t[n*2+1]>=e[n*2]&&t[n*2+1]<=e[n*2+1]))return!1;return!0}function hc(t,e,n,r){return!(e<t[0]||e>t[1]||n<t[2]||n>t[3]||r<t[4]||r>t[5])}function g3(t,e){return!(!pc(t,e)||!hc(t,...$1(e))||!hc(t,...z1(e)))}function ex(t,e,n){const r=[[0,1,2,3,4,5,6,7],[0,1,4,5,2,3,6,7],[0,2,4,6,1,3,5,7]],a=[0,0,0,0,0,0,0,0];let s=0;for(let g=0;g<2;g++)for(let d=2;d<4;d++)for(let v=4;v<6;v++){const S=[t[g],t[d],t[v]];a[s++]=Ss.evaluate(n,e,S)}let o=2;for(;o--&&!(yu(a[r[o][0]],a[r[o][4]])&&yu(a[r[o][1]],a[r[o][5]])&&yu(a[r[o][2]],a[r[o][6]])&&yu(a[r[o][3]],a[r[o][7]])););if(o<0)return!1;const c=Math.sign(n[o]),f=Math.abs((t[o*2+1]-t[o*2])*n[o]);let l=c>0?1:0;for(let g=0;g<4;g++){if(f===0)continue;const d=Math.abs(a[r[o][g]])/f;c>0&&d<l&&(l=d),c<0&&d>l&&(l=d)}const h=(1-l)*t[o*2]+l*t[o*2+1];return c>0?t[o*2]=h:t[o*2+1]=h,!0}class p3{constructor(e){this.bounds=e,this.bounds||(this.bounds=new Float64Array(Oc))}getBounds(){return this.bounds}equals(e){return GT(this.bounds,e)}isValid(){return pr(this.bounds)}setBounds(e){return B1(this.bounds,e)}reset(){return F1(this.bounds)}addPoint(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return gc(this.bounds,...n)}addPoints(e){return N1(this.bounds,e)}addBounds(e,n,r,a,s,o){return $T(this.bounds,e,n,r,a,s,o)}setMinPoint(e,n,r){return zT(this.bounds,e,n,r)}setMaxPoint(e,n,r){return WT(this.bounds,e,n,r)}inflate(e){return HT(this.bounds,e)}scale(e,n,r){return U1(this.bounds,e,n,r)}getCenter(){return G1(this.bounds)}getLength(e){return Li(this.bounds,e)}getLengths(){return Dc(this.bounds)}getMaxLength(){return KT(this.bounds)}getDiagonalLength(){return PT(this.bounds)}getMinPoint(){return $1(this.bounds)}getMaxPoint(){return z1(this.bounds)}getXRange(){return bT(this.bounds)}getYRange(){return AT(this.bounds)}getZRange(){return jT(this.bounds)}getCorners(e){return W1(this.bounds,e)}computeCornerPoints(e,n){return XT(this.bounds,e,n)}computeLocalBounds(e,n,r){return qT(this.bounds,e,n,r)}transformBounds(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return IT(this.bounds,e,n)}computeScale3(e){return YT(this.bounds,e)}cutWithPlane(e,n){return ex(this.bounds,e,n)}intersectBox(e,n,r,a){return QT(this.bounds,e,n,r,a)}intersectPlane(e,n){return ZT(this.bounds,e,n)}intersect(e){return JT(this.bounds,e)}intersects(e){return pc(this.bounds,e)}containsPoint(e,n,r){return hc(this.bounds,e,n,r)}contains(e){return pc(this.bounds,e)}}function h3(t){const e=t&&t.bounds;return new p3(e)}const d3={equals:GT,isValid:pr,setBounds:B1,reset:F1,addPoint:gc,addPoints:N1,addBounds:$T,setMinPoint:zT,setMaxPoint:WT,inflate:HT,scale:U1,scaleAboutCenter:l3,getCenter:G1,getLength:Li,getLengths:Dc,getMaxLength:KT,getDiagonalLength:PT,getMinPoint:$1,getMaxPoint:z1,getXRange:bT,getYRange:AT,getZRange:jT,getCorners:W1,computeCornerPoints:XT,computeLocalBounds:qT,transformBounds:IT,computeScale3:YT,cutWithPlane:ex,intersectBox:QT,intersectPlane:ZT,intersect:JT,intersects:pc,containsPoint:hc,contains:g3,INIT_BOUNDS:Oc};var $e={newInstance:h3,...d3};const v3={DISPLAY:0,WORLD:1};var tx={CoordinateSystem:v3};const{CoordinateSystem:Ig}=tx;function pv(t){return()=>L.vtkErrorMacro(`vtkProp::${t} - NOT IMPLEMENTED`)}function y3(t,e){e.classHierarchy.push("vtkProp"),t.getMTime=()=>{let n=e.mtime;for(let r=0;r<e.textures.length;++r){const a=e.textures[r].getMTime();a>n&&(n=a)}return n},t.processSelectorPixelBuffers=(n,r)=>{},t.getNestedProps=()=>null,t.getActors=()=>[],t.getActors2D=()=>[],t.getVolumes=()=>[],t.pick=pv("pick"),t.hasKey=pv("hasKey"),t.getNestedVisibility=()=>e.visibility&&(!e._parentProp||e._parentProp.getNestedVisibility()),t.getNestedPickable=()=>e.pickable&&(!e._parentProp||e._parentProp.getNestedPickable()),t.getNestedDragable=()=>e.dragable&&(!e._parentProp||e._parentProp.getNestedDragable()),t.getRedrawMTime=()=>e.mtime,t.setEstimatedRenderTime=n=>{e.estimatedRenderTime=n,e.savedEstimatedRenderTime=n},t.restoreEstimatedRenderTime=()=>{e.estimatedRenderTime=e.savedEstimatedRenderTime},t.addEstimatedRenderTime=n=>{e.estimatedRenderTime+=n},t.setAllocatedRenderTime=n=>{e.allocatedRenderTime=n,e.savedEstimatedRenderTime=e.estimatedRenderTime,e.estimatedRenderTime=0},t.getSupportsSelection=()=>!1,t.getTextures=()=>e.textures,t.hasTexture=n=>e.textures.indexOf(n)!==-1,t.addTexture=n=>{n&&!t.hasTexture(n)&&(e.textures=e.textures.concat(n),t.modified())},t.removeTexture=n=>{const r=e.textures.filter(a=>a!==n);e.textures.length!==r.length&&(e.textures=r,t.modified())},t.removeAllTextures=()=>{e.textures=[],t.modified()},t.setCoordinateSystemToWorld=()=>t.setCoordinateSystem(Ig.WORLD),t.setCoordinateSystemToDisplay=()=>t.setCoordinateSystem(Ig.DISPLAY)}const T3={allocatedRenderTime:10,coordinateSystem:Ig.WORLD,dragable:!0,estimatedRenderTime:0,paths:null,pickable:!0,renderTimeMultiplier:1,savedEstimatedRenderTime:0,textures:[],useBounds:!0,visibility:!0};function nx(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,T3,n),L.obj(t,e),L.get(t,e,["estimatedRenderTime","allocatedRenderTime"]),L.setGet(t,e,["_parentProp","coordinateSystem","dragable","pickable","renderTimeMultiplier","useBounds","visibility"]),L.moveToProtected(t,e,["parentProp"]),y3(t,e)}const x3=L.newInstance(nx,"vtkProp");var ji={newInstance:x3,extend:nx,...tx};const S3=1e-6;function C3(t,e){e.classHierarchy.push("vtkProp3D"),t.addPosition=r=>{e.position=e.position.map((a,s)=>a+r[s]),t.modified()},t.getOrientationWXYZ=()=>{const r=_a();Fg(r,e.rotation);const a=new Float64Array(3),s=xm(a,r);return[Ui(s),a[0],a[1],a[2]]},t.getOrientationQuaternion=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Fg(r,e.rotation)},t.rotateX=r=>{r!==0&&(h1(e.rotation,e.rotation,et(r)),t.modified())},t.rotateY=r=>{r!==0&&(d1(e.rotation,e.rotation,et(r)),t.modified())},t.rotateZ=r=>{r!==0&&(v1(e.rotation,e.rotation,et(r)),t.modified())},t.rotateWXYZ=(r,a,s,o)=>{if(r===0||a===0&&s===0&&o===0)return;const c=et(r),f=_a();T1(f,[a,s,o],c);const l=new Float64Array(16);nc(l,f),ut(e.rotation,e.rotation,l),t.modified()},t.rotateQuaternion=r=>{if(Math.abs(r[3])>=1-S3)return;const a=nc(new Float64Array(16),r);ut(e.rotation,e.rotation,a),t.modified()},t.setOrientation=(r,a,s)=>r===e.orientation[0]&&a===e.orientation[1]&&s===e.orientation[2]?!1:(e.orientation=[r,a,s],Ce(e.rotation),t.rotateZ(s),t.rotateX(r),t.rotateY(a),t.modified(),!0),t.setUserMatrix=r=>OT(e.userMatrix,r)?!1:(St(e.userMatrix,r),t.modified(),!0),t.getMatrix=()=>(t.computeMatrix(),e.matrix),t.computeMatrix=()=>{if(t.getMTime()>e.matrixMTime.getMTime()){Ce(e.matrix),e.userMatrix&&ut(e.matrix,e.matrix,e.userMatrix),tt(e.matrix,e.matrix,e.origin),tt(e.matrix,e.matrix,e.position),ut(e.matrix,e.matrix,e.rotation),La(e.matrix,e.matrix,e.scale),tt(e.matrix,e.matrix,[-e.origin[0],-e.origin[1],-e.origin[2]]),ze(e.matrix,e.matrix),e.isIdentity=!0;for(let r=0;r<4;++r)for(let a=0;a<4;++a)(r===a?1:0)!==e.matrix[r+a*4]&&(e.isIdentity=!1);e.matrixMTime.modified()}},t.getCenter=()=>$e.getCenter(e.bounds),t.getLength=()=>$e.getLength(e.bounds),t.getXRange=()=>$e.getXRange(e.bounds),t.getYRange=()=>$e.getYRange(e.bounds),t.getZRange=()=>$e.getZRange(e.bounds),t.getUserMatrix=()=>e.userMatrix;function n(){t.computeMatrix()}t.onModified(n)}const w3={origin:[0,0,0],position:[0,0,0],orientation:[0,0,0],rotation:null,scale:[1,1,1],bounds:[1,-1,1,-1,1,-1],userMatrix:null,userMatrixMTime:null,cachedProp3D:null,isIdentity:!0,matrixMTime:null};function rx(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,w3,n),ji.extend(t,e,n),e.matrixMTime={},L.obj(e.matrixMTime),L.get(t,e,["bounds","isIdentity"]),L.getArray(t,e,["orientation"]),L.setGetArray(t,e,["origin","position","scale"],3),e.matrix=Ce(new Float64Array(16)),e.rotation=Ce(new Float64Array(16)),e.userMatrix=Ce(new Float64Array(16)),e.transform=null,C3(t,e)}const E3=L.newInstance(rx,"vtkProp3D");var m3={newInstance:E3,extend:rx};const ax={FLAT:0,GOURAUD:1,PHONG:2},on={POINTS:0,WIREFRAME:1,SURFACE:2},R3=ax;var sx={Shading:ax,Representation:on,Interpolation:R3};const{Representation:Oi,Interpolation:Di}=sx;function hv(t){return()=>L.vtkErrorMacro(`vtkProperty::${t} - NOT IMPLEMENTED`)}function O3(t,e){e.classHierarchy.push("vtkProperty"),t.setColor=(n,r,a)=>{Array.isArray(n)?(e.color[0]!==n[0]||e.color[1]!==n[1]||e.color[2]!==n[2])&&(e.color[0]=n[0],e.color[1]=n[1],e.color[2]=n[2],t.modified()):(e.color[0]!==n||e.color[1]!==r||e.color[2]!==a)&&(e.color[0]=n,e.color[1]=r,e.color[2]=a,t.modified()),t.setDiffuseColor(e.color),t.setAmbientColor(e.color),t.setSpecularColor(e.color)},t.computeCompositeColor=hv("ComputeCompositeColor"),t.getColor=()=>{let n=0;e.ambient+e.diffuse+e.specular>0&&(n=1/(e.ambient+e.diffuse+e.specular));for(let r=0;r<3;r++)e.color[r]=n*(e.ambient*e.ambientColor[r]+e.diffuse*e.diffuseColor[r]+e.specular*e.specularColor[r]);return[].concat(e.color)},t.setSpecularPower=n=>{const r=1/Math.max(1,n);(e.roughness!==r||e.specularPower!==n)&&(e.specularPower=n,e.roughness=r,t.modified())},t.addShaderVariable=hv("AddShaderVariable"),t.setInterpolationToFlat=()=>t.setInterpolation(Di.FLAT),t.setInterpolationToGouraud=()=>t.setInterpolation(Di.GOURAUD),t.setInterpolationToPhong=()=>t.setInterpolation(Di.PHONG),t.getInterpolationAsString=()=>L.enumToString(Di,e.interpolation),t.setRepresentationToWireframe=()=>t.setRepresentation(Oi.WIREFRAME),t.setRepresentationToSurface=()=>t.setRepresentation(Oi.SURFACE),t.setRepresentationToPoints=()=>t.setRepresentation(Oi.POINTS),t.getRepresentationAsString=()=>L.enumToString(Oi,e.representation)}const D3={color:[1,1,1],ambientColor:[1,1,1],diffuseColor:[1,1,1],specularColor:[1,1,1],edgeColor:[0,0,0],ambient:0,diffuse:1,metallic:0,roughness:.6,normalStrength:1,emission:1,baseIOR:1.45,specular:0,specularPower:1,opacity:1,interpolation:Di.GOURAUD,representation:Oi.SURFACE,edgeVisibility:!1,backfaceCulling:!1,frontfaceCulling:!1,pointSize:1,lineWidth:1,lighting:!0,shading:!1,materialName:null};function ix(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,D3,n),L.obj(t,e),L.setGet(t,e,["lighting","interpolation","ambient","diffuse","metallic","roughness","normalStrength","emission","baseIOR","specular","specularPower","opacity","edgeVisibility","lineWidth","pointSize","backfaceCulling","frontfaceCulling","representation","diffuseTexture","metallicTexture","roughnessTexture","normalTexture","ambientOcclusionTexture","emissionTexture"]),L.setGetArray(t,e,["ambientColor","specularColor","diffuseColor","edgeColor"],3),O3(t,e)}const M3=L.newInstance(ix,"vtkProperty");var Ds={newInstance:M3,extend:ix,...sx};const{vtkDebugMacro:L3}=L;function _3(t,e){e.classHierarchy.push("vtkActor");const n={...t};t.getActors=()=>[t],t.getIsOpaque=()=>{if(e.forceOpaque)return!0;if(e.forceTranslucent)return!1;e.property||t.getProperty();let r=e.property.getOpacity()>=1;return r=r&&(!e.texture||!e.texture.isTranslucent()),r=r&&(!e.mapper||e.mapper.getIsOpaque()),r},t.hasTranslucentPolygonalGeometry=()=>e.mapper===null?!1:(e.property===null&&t.setProperty(t.makeProperty()),!t.getIsOpaque()),t.makeProperty=Ds.newInstance,t.getProperty=()=>(e.property===null&&(e.property=t.makeProperty()),e.property),t.getBounds=()=>{if(e.mapper===null)return e.bounds;const r=e.mapper.getBounds();if(!r||r.length!==6)return r;if(r[0]>r[1])return e.mapperBounds=r.concat(),e.bounds=[1,-1,1,-1,1,-1],e.boundsMTime.modified(),r;if(!e.mapperBounds||r[0]!==e.mapperBounds[0]||r[1]!==e.mapperBounds[1]||r[2]!==e.mapperBounds[2]||r[3]!==e.mapperBounds[3]||r[4]!==e.mapperBounds[4]||r[5]!==e.mapperBounds[5]||t.getMTime()>e.boundsMTime.getMTime()){L3("Recomputing bounds..."),e.mapperBounds=r.concat();const a=[];$e.getCorners(r,a),t.computeMatrix();const s=new Float64Array(16);ze(s,e.matrix),a.forEach(o=>Ve(o,o,s)),e.bounds[0]=e.bounds[2]=e.bounds[4]=Number.MAX_VALUE,e.bounds[1]=e.bounds[3]=e.bounds[5]=-Number.MAX_VALUE,e.bounds=e.bounds.map((o,c)=>c%2===0?a.reduce((f,l)=>f>l[c/2]?l[c/2]:f,o):a.reduce((f,l)=>f<l[(c-1)/2]?l[(c-1)/2]:f,o)),e.boundsMTime.modified()}return e.bounds},t.getMTime=()=>{let r=n.getMTime();if(e.property!==null){const a=e.property.getMTime();r=a>r?a:r}if(e.backfaceProperty!==null){const a=e.backfaceProperty.getMTime();r=a>r?a:r}return r},t.getRedrawMTime=()=>{let r=e.mtime;if(e.mapper!==null){let a=e.mapper.getMTime();r=a>r?a:r,e.mapper.getInput()!==null&&(e.mapper.getInputAlgorithm().update(),a=e.mapper.getInput().getMTime(),r=a>r?a:r)}return r},t.getSupportsSelection=()=>e.mapper?e.mapper.getSupportsSelection():!1,t.processSelectorPixelBuffers=(r,a)=>{e.mapper&&e.mapper.processSelectorPixelBuffers&&e.mapper.processSelectorPixelBuffers(r,a)}}const V3={mapper:null,property:null,backfaceProperty:null,forceOpaque:!1,forceTranslucent:!1,bounds:[1,-1,1,-1,1,-1]};function ox(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,V3,n),m3.extend(t,e,n),e.boundsMTime={},L.obj(e.boundsMTime),L.set(t,e,["property"]),L.setGet(t,e,["backfaceProperty","forceOpaque","forceTranslucent","mapper"]),_3(t,e)}const k3=L.newInstance(ox,"vtkActor");var bn={newInstance:k3,extend:ox};const Ki={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},rt={VOID:"",CHAR:"Int8Array",SIGNED_CHAR:"Int8Array",UNSIGNED_CHAR:"Uint8Array",UNSIGNED_CHAR_CLAMPED:"Uint8ClampedArray",SHORT:"Int16Array",UNSIGNED_SHORT:"Uint16Array",INT:"Int32Array",UNSIGNED_INT:"Uint32Array",FLOAT:"Float32Array",DOUBLE:"Float64Array"},B3=rt.FLOAT;var ux={DefaultDataType:B3,DataTypeByteSize:Ki,VtkDataTypes:rt};const{vtkErrorMacro:F3}=Pn,{DefaultDataType:N3}=ux,U3=1e-6;function Yg(t,e,n){const r=t.length;let a=Number.MAX_VALUE,s=-Number.MAX_VALUE,o,c;for(c=e;c<r;c+=n)if(!Number.isNaN(t[c])){a=t[c],s=a;break}for(;c<r;c+=n)o=t[c],o<a?a=o:o>s&&(s=o);return{min:a,max:s}}function G3(){let t=Number.MAX_VALUE,e=-Number.MAX_VALUE,n=0,r=0;return{add(a){t>a&&(t=a),e<a&&(e=a),n++,r+=a},get(){return{min:t,max:e,count:n,sum:r,mean:r/n}},getRange(){return{min:t,max:e}}}}function cx(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;if(e<0&&n>1){const a=t.length/n,s=new Float64Array(a);for(let o=0,c=0;o<a;++o){for(let f=c+n;c<f;++c)s[o]+=t[c]*t[c];s[o]**=.5}return Yg(s,0,1)}return Yg(t,e<0?0:e,n)}function dv(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const n=t||[];for(;n.length<=e;)n.push(null);return n}function H1(t){return Object.prototype.toString.call(t).slice(8,-1)}function $3(t){const e=t.getNumberOfComponents();let n=0;const r=new Array(e);for(let a=0;a<t.getNumberOfTuples();++a){t.getTuple(a,r);const s=RT(r,e);s>n&&(n=s)}return n}const z3={computeRange:cx,createRangeHelper:G3,fastComputeRange:Yg,getDataType:H1,getMaxNorm:$3};function W3(t,e){e.classHierarchy.push("vtkDataArray");function n(r){if(r<0)return!1;const a=t.getNumberOfComponents(),s=e.values.length/(a>0?a:1);if(r===s)return!0;if(r>s){const o=e.values;return e.values=Rs(e.dataType,(r+s)*a),e.values.set(o),!0}return e.size>r*a&&(e.size=r*a,t.dataChange()),!0}t.dataChange=()=>{e.ranges=null,t.modified()},t.resize=r=>{n(r);const a=r*t.getNumberOfComponents();return e.size!==a?(e.size=a,t.dataChange(),!0):!1},t.initialize=()=>{t.resize(0)},t.getElementComponentSize=()=>e.values.BYTES_PER_ELEMENT,t.getComponent=function(r){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.values[r*e.numberOfComponents+a]},t.setComponent=(r,a,s)=>{s!==e.values[r*e.numberOfComponents+a]&&(e.values[r*e.numberOfComponents+a]=s,t.dataChange())},t.getValue=r=>{const a=r/e.numberOfComponents,s=r%e.numberOfComponents;return t.getComponent(a,s)},t.setValue=(r,a)=>{const s=r/e.numberOfComponents,o=r%e.numberOfComponents;t.setComponent(s,o,a)},t.getData=()=>e.size===e.values.length?e.values:e.values.subarray(0,e.size),t.getRange=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1,a=r;a<0&&(a=e.numberOfComponents===1?0:e.numberOfComponents);let s=null;return e.ranges||(e.ranges=dv(e.ranges,e.numberOfComponents)),s=e.ranges[a],s?(e.rangeTuple[0]=s.min,e.rangeTuple[1]=s.max,e.rangeTuple):(s=cx(t.getData(),r,e.numberOfComponents),e.ranges[a]=s,e.rangeTuple[0]=s.min,e.rangeTuple[1]=s.max,e.rangeTuple)},t.setRange=(r,a)=>{e.ranges||(e.ranges=dv(e.ranges,e.numberOfComponents));const s={min:r.min,max:r.max};return e.ranges[a]=s,e.rangeTuple[0]=s.min,e.rangeTuple[1]=s.max,e.rangeTuple},t.setTuple=(r,a)=>{const s=r*e.numberOfComponents;for(let o=0;o<e.numberOfComponents;o++)e.values[s+o]=a[o]},t.setTuples=(r,a)=>{let s=r*e.numberOfComponents;const o=Math.min(a.length,e.size-s);for(let c=0;c<o;)e.values[s++]=a[c++]},t.insertTuple=(r,a)=>(e.size<=r*e.numberOfComponents&&(e.size=(r+1)*e.numberOfComponents,n(r+1)),t.setTuple(r,a),r),t.insertTuples=(r,a)=>{const s=r+a.length/e.numberOfComponents;return e.size<s*e.numberOfComponents&&(e.size=s*e.numberOfComponents,n(s)),t.setTuples(r,a),s},t.insertNextTuple=r=>{const a=e.size/e.numberOfComponents;return t.insertTuple(a,r)},t.insertNextTuples=r=>{const a=e.size/e.numberOfComponents;return t.insertTuples(a,r)},t.findTuple=function(r){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:U3;for(let s=0;s<e.size;s+=e.numberOfComponents)if(Math.abs(r[0]-e.values[s])<=a){let o=!0;for(let c=1;c<e.numberOfComponents;++c)if(Math.abs(r[c]-e.values[s+c])>a){o=!1;break}if(o)return s/e.numberOfComponents}return-1},t.getTuple=function(r){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const s=e.numberOfComponents||1,o=r*s;switch(s){case 4:a[3]=e.values[o+3];case 3:a[2]=e.values[o+2];case 2:a[1]=e.values[o+1];case 1:a[0]=e.values[o];break;default:for(let c=s-1;c>=0;--c)a[c]=e.values[o+c]}return a},t.getTuples=(r,a)=>{const s=(r??0)*e.numberOfComponents,o=(a??t.getNumberOfTuples())*e.numberOfComponents,c=t.getData().subarray(s,o);return c.length>0?c:null},t.getTupleLocation=function(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:1)*e.numberOfComponents},t.getNumberOfComponents=()=>e.numberOfComponents,t.getNumberOfValues=()=>e.size,t.getNumberOfTuples=()=>e.size/e.numberOfComponents,t.getDataType=()=>e.dataType,t.newClone=()=>lx({empty:!0,name:e.name,dataType:e.dataType,numberOfComponents:e.numberOfComponents}),t.getName=()=>(e.name||(t.modified(),e.name=`vtkDataArray${t.getMTime()}`),e.name),t.setData=(r,a)=>{e.values=r,e.size=r.length,e.dataType=H1(r),a&&(e.numberOfComponents=a),e.size%e.numberOfComponents!==0&&(e.numberOfComponents=1),t.dataChange()},t.getState=()=>{if(e.deleted)return null;const r={...e,vtkClass:t.getClassName()};r.values=Array.from(r.values),delete r.buffer,Object.keys(r).forEach(s=>{r[s]||delete r[s]});const a={};return Object.keys(r).sort().forEach(s=>{a[s]=r[s]}),a.mtime&&delete a.mtime,a},t.deepCopy=r=>{const a=t.getDataType(),s=e.values;t.shallowCopy(r),(s==null?void 0:s.length)>=r.getNumberOfValues()&&a===r.getDataType()?(s.set(r.getData()),e.values=s,t.dataChange()):t.setData(r.getData().slice())},t.interpolateTuple=(r,a,s,o,c,f)=>{const l=e.numberOfComponents||1;(l!==a.getNumberOfComponents()||l!==o.getNumberOfComponents())&&F3("numberOfComponents must match");const h=a.getTuple(s),g=o.getTuple(c),d=[];switch(d.length=l,l){case 4:d[3]=h[3]+(g[3]-h[3])*f;case 3:d[2]=h[2]+(g[2]-h[2])*f;case 2:d[1]=h[1]+(g[1]-h[1])*f;case 1:d[0]=h[0]+(g[0]-h[0])*f;break;default:for(let v=0;v<l;v++)d[v]=h[v]+(g[v]-h[v])*f}return t.insertTuple(r,d)}}const H3={name:"",numberOfComponents:1,dataType:N3,rangeTuple:[0,0]};function fx(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Object.assign(e,H3,n),Array.isArray(n.values)&&n.dataType===void 0&&console.warn("vtkDataArray.newInstance: no dataType provided, converting to Float32Array"),!e.empty&&!e.values&&!e.size)throw new TypeError("Cannot create vtkDataArray object without: size > 0, values");if(e.values?Array.isArray(e.values)&&(e.values=x1(e.dataType,e.values)):e.values=Rs(e.dataType,e.size),e.values&&(e.size=e.size??e.values.length,e.dataType=H1(e.values)),vt(t,e),Hi(t,e,["name","numberOfComponents"]),e.size%e.numberOfComponents!==0)throw new RangeError("model.size is not a multiple of model.numberOfComponents");W3(t,e)}const lx=Ne(fx,"vtkDataArray");var Oe={newInstance:lx,extend:fx,...z3,...ux};function b3(t,e){e.classHierarchy.push("vtkAbstractMapper"),t.update=()=>{t.getInputData()},t.addClippingPlane=n=>n.isA("vtkPlane")?e.clippingPlanes.includes(n)?!1:(e.clippingPlanes.push(n),t.modified(),!0):!1,t.getNumberOfClippingPlanes=()=>e.clippingPlanes.length,t.removeAllClippingPlanes=()=>e.clippingPlanes.length===0?!1:(e.clippingPlanes.length=0,t.modified(),!0),t.removeClippingPlane=n=>{const r=e.clippingPlanes.indexOf(n);return r===-1?!1:(e.clippingPlanes.splice(r,1),t.modified(),!0)},t.getClippingPlanes=()=>e.clippingPlanes,t.setClippingPlanes=n=>{if(n)if(!Array.isArray(n))t.addClippingPlane(n);else{const r=n.length;for(let a=0;a<r&&a<6;a++)t.addClippingPlane(n[a])}},t.getClippingPlaneInDataCoords=(n,r,a)=>{const s=e.clippingPlanes,o=n;if(s){const c=s.length;if(r>=0&&r<c){const f=s[r],l=f.getNormal(),h=f.getOrigin(),g=l[0],d=l[1],v=l[2],S=-(g*h[0]+d*h[1]+v*h[2]);a[0]=g*o[0]+d*o[4]+v*o[8]+S*o[12],a[1]=g*o[1]+d*o[5]+v*o[9]+S*o[13],a[2]=g*o[2]+d*o[6]+v*o[10]+S*o[14],a[3]=g*o[3]+d*o[7]+v*o[11]+S*o[15];return}}L.vtkErrorMacro(`Clipping plane index ${r} is out of range.`)}}const A3={clippingPlanes:[]};function j3(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,A3,n),L.obj(t,e),L.algo(t,e,1,0),e.clippingPlanes||(e.clippingPlanes=[]),b3(t,e)}var gx={extend:j3};function K3(t,e){t.getBounds=()=>(L.vtkErrorMacro("vtkAbstractMapper3D.getBounds - NOT IMPLEMENTED"),k1()),t.getCenter=()=>{var r;const n=t.getBounds();return e.center=$e.isValid(n)?$e.getCenter(n):null,(r=e.center)==null?void 0:r.slice()},t.getLength=()=>{const n=t.getBounds();return $e.getDiagonalLength(n)}}const P3=t=>({bounds:[...$e.INIT_BOUNDS],center:[0,0,0],viewSpecificProperties:{},...t});function X3(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,P3(n)),gx.extend(t,e,n),L.setGet(t,e,["viewSpecificProperties"]),K3(t,e)}var I3={extend:X3};const{vtkErrorMacro:vv,vtkWarningMacro:Y3}=L;function q3(t,e){e.classHierarchy.push("vtkFieldData");const n=t.getState;e.arrays&&(e.arrays=e.arrays.map(r=>({data:Yt(r.data)}))),t.initialize=()=>{t.initializeFields(),t.copyAllOn(),t.clearFieldFlags()},t.initializeFields=()=>{e.arrays=[],e.copyFieldFlags={},t.modified()},t.copyStructure=r=>{t.initializeFields(),e.copyFieldFlags=r.getCopyFieldFlags().map(a=>a),e.arrays=r.arrays().map(a=>({array:a}))},t.getNumberOfArrays=()=>e.arrays.length,t.getNumberOfActiveArrays=()=>e.arrays.length,t.addArray=r=>{const a=r.getName(),{array:s,index:o}=t.getArrayWithIndex(a);return s!=null?(e.arrays[o]={data:r},o):(e.arrays=[].concat(e.arrays,{data:r}),e.arrays.length-1)},t.removeAllArrays=()=>{e.arrays=[]},t.removeArray=r=>{const a=e.arrays.findIndex(s=>s.data.getName()===r);return t.removeArrayByIndex(a)},t.removeArrayByIndex=r=>r!==-1&&r<e.arrays.length?(e.arrays.splice(r,1),!0):!1,t.getArrays=()=>e.arrays.map(r=>r.data),t.getArray=r=>typeof r=="number"?t.getArrayByIndex(r):t.getArrayByName(r),t.getArrayByName=r=>e.arrays.reduce((a,s,o)=>s.data.getName()===r?s.data:a,null),t.getArrayWithIndex=r=>{const a=e.arrays.findIndex(s=>s.data.getName()===r);return{array:a!==-1?e.arrays[a].data:null,index:a}},t.getArrayByIndex=r=>r>=0&&r<e.arrays.length?e.arrays[r].data:null,t.hasArray=r=>t.getArrayWithIndex(r).index>=0,t.getArrayName=r=>{const a=e.arrays[r];return a?a.data.getName():""},t.getCopyFieldFlags=()=>e.copyFieldFlags,t.getFlag=r=>e.copyFieldFlags[r],t.passData=function(r){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;r.getArrays().forEach(o=>{const c=t.getFlag(o.getName());if(c!==!1&&!(e.doCopyAllOff&&c!==!0)&&o){let f=t.getArrayByName(o.getName());if(f)if(o.getNumberOfComponents()===f.getNumberOfComponents())if(a>-1&&a<o.getNumberOfTuples()){const l=s>-1?s:a;f.insertTuple(l,o.getTuple(a))}else f.insertTuples(0,o.getTuples());else vv("Unhandled case in passData");else if(a<0||a>o.getNumberOfTuples())t.addArray(o),r.getAttributes(o).forEach(l=>{t.setAttribute(o,l)});else{const l=o.getNumberOfComponents();let h=o.getNumberOfValues();const g=s>-1?s:a;h<=g*l&&(h=(g+1)*l),f=Oe.newInstance({name:o.getName(),dataType:o.getDataType(),numberOfComponents:l,values:L.newTypedArray(o.getDataType(),h),size:0}),f.insertTuple(g,o.getTuple(a)),t.addArray(f),r.getAttributes(o).forEach(d=>{t.setAttribute(f,d)})}}})},t.interpolateData=function(r){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.5;r.getArrays().forEach(f=>{const l=t.getFlag(f.getName());if(l!==!1&&!(e.doCopyAllOff&&l!==!0)&&f){let h=t.getArrayByName(f.getName());if(h)if(f.getNumberOfComponents()===h.getNumberOfComponents())if(a>-1&&a<f.getNumberOfTuples()){const g=o>-1?o:a;h.interpolateTuple(g,f,a,f,s,c),Y3("Unexpected case in interpolateData")}else h.insertTuples(f.getTuples());else vv("Unhandled case in interpolateData");else if(a<0||s<0||a>f.getNumberOfTuples())t.addArray(f),r.getAttributes(f).forEach(g=>{t.setAttribute(f,g)});else{const g=f.getNumberOfComponents();let d=f.getNumberOfValues();const v=o>-1?o:a;d<=v*g&&(d=(v+1)*g),h=Oe.newInstance({name:f.getName(),dataType:f.getDataType(),numberOfComponents:g,values:L.newTypedArray(f.getDataType(),d),size:0}),h.interpolateTuple(v,f,a,f,s,c),t.addArray(h),r.getAttributes(f).forEach(S=>{t.setAttribute(h,S)})}}})},t.copyFieldOn=r=>{e.copyFieldFlags[r]=!0},t.copyFieldOff=r=>{e.copyFieldFlags[r]=!1},t.copyAllOn=()=>{(!e.doCopyAllOn||e.doCopyAllOff)&&(e.doCopyAllOn=!0,e.doCopyAllOff=!1,t.modified())},t.copyAllOff=()=>{(e.doCopyAllOn||!e.doCopyAllOff)&&(e.doCopyAllOn=!1,e.doCopyAllOff=!0,t.modified())},t.clearFieldFlags=()=>{e.copyFieldFlags={}},t.deepCopy=r=>{e.arrays=r.getArrays().map(a=>{const s=a.newClone();return s.deepCopy(a),{data:s}})},t.copyFlags=r=>r.getCopyFieldFlags().map(a=>a),t.reset=()=>e.arrays.forEach(r=>r.data.reset()),t.getMTime=()=>e.arrays.reduce((r,a)=>a.data.getMTime()>r?a.data.getMTime():r,e.mtime),t.getNumberOfComponents=()=>e.arrays.reduce((r,a)=>r+a.data.getNumberOfComponents(),0),t.getNumberOfTuples=()=>e.arrays.length>0?e.arrays[0].getNumberOfTuples():0,t.getState=()=>{const r=n();return r&&(r.arrays=e.arrays.map(a=>({data:a.data.getState()}))),r}}const Q3={arrays:[],copyFieldFlags:[],doCopyAllOn:!0,doCopyAllOff:!1};function px(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Q3,n),L.obj(t,e),q3(t,e)}const Z3=L.newInstance(px,"vtkFieldData");var J3={newInstance:Z3,extend:px};const eD={SCALARS:0,VECTORS:1,NORMALS:2,TCOORDS:3,TENSORS:4,GLOBALIDS:5,PEDIGREEIDS:6,EDGEFLAG:7,NUM_ATTRIBUTES:8},tD={MAX:0,EXACT:1,NOLIMIT:2},nD={DUPLICATECELL:1,HIGHCONNECTIVITYCELL:2,LOWCONNECTIVITYCELL:4,REFINEDCELL:8,EXTERIORCELL:16,HIDDENCELL:32},rD={DUPLICATEPOINT:1,HIDDENPOINT:2},aD={COPYTUPLE:0,INTERPOLATE:1,PASSDATA:2,ALLCOPY:3},sD="vtkGhostType",dc={DEFAULT:0,SINGLE:1,DOUBLE:2};var hx={AttributeCopyOperations:aD,AttributeLimitTypes:tD,AttributeTypes:eD,CellGhostTypes:nD,DesiredOutputPrecision:dc,PointGhostTypes:rD,ghostArrayName:sD};const{AttributeTypes:Nr,AttributeCopyOperations:ga}=hx,{vtkWarningMacro:Tu}=L;function iD(t,e){const n=["Scalars","Vectors","Normals","TCoords","Tensors","GlobalIds","PedigreeIds"];function r(o){let c=n.find(f=>Nr[f.toUpperCase()]===o||typeof o!="number"&&f.toLowerCase()===o.toLowerCase());return typeof c>"u"&&(c=null),c}e.classHierarchy.push("vtkDataSetAttributes");const a={...t};t.checkNumberOfComponents=o=>!0,t.setAttribute=(o,c)=>{const f=r(c);if(o&&f.toUpperCase()==="PEDIGREEIDS"&&!o.isA("vtkDataArray"))return Tu(`Cannot set attribute ${f}. The attribute must be a vtkDataArray.`),-1;if(o&&!t.checkNumberOfComponents(o,f))return Tu(`Cannot set attribute ${f}. Incorrect number of components.`),-1;let l=e[`active${f}`];if(l>=0&&l<e.arrays.length){if(e.arrays[l]===o)return l;t.removeArrayByIndex(l)}return o?(l=t.addArray(o),e[`active${f}`]=l):e[`active${f}`]=-1,t.modified(),e[`active${f}`]},t.getAttributes=o=>n.filter(c=>t[`get${c}`]()===o),t.setActiveAttributeByName=(o,c)=>t.setActiveAttributeByIndex(t.getArrayWithIndex(o).index,c),t.setActiveAttributeByIndex=(o,c)=>{const f=r(c);if(o>=0&&o<e.arrays.length){if(f.toUpperCase()!=="PEDIGREEIDS"){const l=t.getArrayByIndex(o);if(!l.isA("vtkDataArray"))return Tu(`Cannot set attribute ${f}. Only vtkDataArray subclasses can be set as active attributes.`),-1;if(!t.checkNumberOfComponents(l,f))return Tu(`Cannot set attribute ${f}. Incorrect number of components.`),-1}return e[`active${f}`]=o,t.modified(),o}return o===-1&&(e[`active${f}`]=o,t.modified()),-1},t.getActiveAttribute=o=>{const c=r(o);return t[`get${c}`]()},t.removeAllArrays=()=>{n.forEach(o=>{e[`active${o}`]=-1}),a.removeAllArrays()},t.removeArrayByIndex=o=>(o!==-1&&n.forEach(c=>{o===e[`active${c}`]?e[`active${c}`]=-1:o<e[`active${c}`]&&(e[`active${c}`]-=1)}),a.removeArrayByIndex(o)),n.forEach(o=>{const c=`active${o}`;t[`get${o}`]=()=>t.getArrayByIndex(e[c]),t[`set${o}`]=f=>t.setAttribute(f,o),t[`setActive${o}`]=f=>t.setActiveAttributeByIndex(t.getArrayWithIndex(f).index,o),t[`copy${o}Off`]=()=>{const f=o.toUpperCase();e.copyAttributeFlags[ga.PASSDATA][Nr[f]]=!1},t[`copy${o}On`]=()=>{const f=o.toUpperCase();e.copyAttributeFlags[ga.PASSDATA][Nr[f]]=!0}}),t.initializeAttributeCopyFlags=()=>{e.copyAttributeFlags=[],Object.keys(ga).filter(o=>o!=="ALLCOPY").forEach(o=>{e.copyAttributeFlags[ga[o]]=Object.keys(Nr).filter(c=>c!=="NUM_ATTRIBUTES").reduce((c,f)=>(c[Nr[f]]=!0,c),[])}),e.copyAttributeFlags[ga.COPYTUPLE][Nr.GLOBALIDS]=!1,e.copyAttributeFlags[ga.INTERPOLATE][Nr.GLOBALIDS]=!1,e.copyAttributeFlags[ga.COPYTUPLE][Nr.PEDIGREEIDS]=!1},t.initialize=L.chain(t.initialize,t.initializeAttributeCopyFlags),e.dataArrays&&Object.keys(e.dataArrays).length&&Object.keys(e.dataArrays).forEach(o=>{!e.dataArrays[o].ref&&e.dataArrays[o].type==="vtkDataArray"&&t.addArray(Oe.newInstance(e.dataArrays[o]))});const s=t.shallowCopy;t.shallowCopy=(o,c)=>{s(o,c),e.arrays=o.getArrays().map(f=>{const l=f.newClone();return l.shallowCopy(f,c),{data:l}})},t.initializeAttributeCopyFlags()}const oD={activeScalars:-1,activeVectors:-1,activeTensors:-1,activeNormals:-1,activeTCoords:-1,activeGlobalIds:-1,activePedigreeIds:-1};function dx(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,oD,n),J3.extend(t,e,n),L.setGet(t,e,["activeScalars","activeNormals","activeTCoords","activeVectors","activeTensors","activeGlobalIds","activePedigreeIds"]),e.arrays||(e.arrays={}),iD(t,e)}const uD=L.newInstance(dx,"vtkDataSetAttributes");var yv={newInstance:uD,extend:dx,...hx};const cD={UNIFORM:0,DATA_OBJECT_FIELD:0,COORDINATE:1,POINT_DATA:1,POINT:2,POINT_FIELD_DATA:2,CELL:3,CELL_FIELD_DATA:3,VERTEX:4,VERTEX_FIELD_DATA:4,EDGE:5,EDGE_FIELD_DATA:5,ROW:6,ROW_DATA:6},fD={FIELD_ASSOCIATION_POINTS:0,FIELD_ASSOCIATION_CELLS:1,FIELD_ASSOCIATION_NONE:2,FIELD_ASSOCIATION_POINTS_THEN_CELLS:3,FIELD_ASSOCIATION_VERTICES:4,FIELD_ASSOCIATION_EDGES:5,FIELD_ASSOCIATION_ROWS:6,NUMBER_OF_ASSOCIATIONS:7};var lD={FieldDataTypes:cD,FieldAssociations:fD};const qg=["pointData","cellData","fieldData"];function gD(t,e){e.classHierarchy.push("vtkDataSet"),qg.forEach(r=>{e[r]?e[r]=Yt(e[r]):e[r]=yv.newInstance()});const n=t.shallowCopy;t.shallowCopy=function(r){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;n(r,a),qg.forEach(s=>{e[s]=yv.newInstance(),e[s].shallowCopy(r.getReferenceByName(s))})}}const pD={};function vx(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,pD,n),L.obj(t,e),L.setGet(t,e,qg),gD(t,e)}const hD=L.newInstance(vx,"vtkDataSet");var ka={newInstance:hD,extend:vx,...lD};const xn={UNCHANGED:0,SINGLE_POINT:1,X_LINE:2,Y_LINE:3,Z_LINE:4,XY_PLANE:5,YZ_PLANE:6,XZ_PLANE:7,XYZ_GRID:8,EMPTY:9};var yx={StructuredType:xn};const{StructuredType:rr}=yx;function dD(t){let e=0;for(let n=0;n<3;++n)t[n*2]<t[n*2+1]&&e++;return t[0]>t[1]||t[2]>t[3]||t[4]>t[5]?rr.EMPTY:e===3?rr.XYZ_GRID:e===2?t[0]===t[1]?rr.YZ_PLANE:t[2]===t[3]?rr.XZ_PLANE:rr.XY_PLANE:e===1?t[0]<t[1]?rr.X_LINE:t[2]<t[3]?rr.Y_LINE:rr.Z_LINE:rr.SINGLE_POINT}var vD={getDataDescriptionFromExtent:dD,...yx};const{vtkErrorMacro:pa}=L;function yD(t,e){e.classHierarchy.push("vtkImageData"),t.setExtent=function(){if(e.deleted)return pa("instance deleted - cannot call any method"),!1;for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];const s=r.length===1?r[0]:r;if(s.length!==6)return!1;const o=e.extent.some((c,f)=>c!==s[f]);return o&&(e.extent=s.slice(),e.dataDescription=vD.getDataDescriptionFromExtent(e.extent),t.modified()),o},t.setDimensions=function(){let n,r,a;if(e.deleted){pa("instance deleted - cannot call any method");return}if(arguments.length===1){const s=arguments.length<=0?void 0:arguments[0];n=s[0],r=s[1],a=s[2]}else if(arguments.length===3)n=arguments.length<=0?void 0:arguments[0],r=arguments.length<=1?void 0:arguments[1],a=arguments.length<=2?void 0:arguments[2];else{pa("Bad dimension specification");return}t.setExtent(0,n-1,0,r-1,0,a-1)},t.getDimensions=()=>[e.extent[1]-e.extent[0]+1,e.extent[3]-e.extent[2]+1,e.extent[5]-e.extent[4]+1],t.getNumberOfCells=()=>{const n=t.getDimensions();let r=1;for(let a=0;a<3;a++){if(n[a]===0)return 0;n[a]>1&&(r*=n[a]-1)}return r},t.getNumberOfPoints=()=>{const n=t.getDimensions();return n[0]*n[1]*n[2]},t.getPoint=n=>{const r=t.getDimensions();if(r[0]===0||r[1]===0||r[2]===0)return pa("Requesting a point from an empty image."),null;const a=new Float64Array(3);switch(e.dataDescription){case xn.EMPTY:return null;case xn.SINGLE_POINT:break;case xn.X_LINE:a[0]=n;break;case xn.Y_LINE:a[1]=n;break;case xn.Z_LINE:a[2]=n;break;case xn.XY_PLANE:a[0]=n%r[0],a[1]=n/r[0];break;case xn.YZ_PLANE:a[1]=n%r[1],a[2]=n/r[1];break;case xn.XZ_PLANE:a[0]=n%r[0],a[2]=n/r[0];break;case xn.XYZ_GRID:a[0]=n%r[0],a[1]=n/r[0]%r[1],a[2]=n/(r[0]*r[1]);break;default:pa("Invalid dataDescription");break}const s=[0,0,0];return t.indexToWorld(a,s),s},t.getBounds=()=>t.extentToBounds(t.getSpatialExtent()),t.extentToBounds=n=>$e.transformBounds(n,e.indexToWorld),t.getSpatialExtent=()=>$e.inflate([...e.extent],.5),t.computeTransforms=()=>{Ry(e.indexToWorld,e.origin),e.indexToWorld[0]=e.direction[0],e.indexToWorld[1]=e.direction[1],e.indexToWorld[2]=e.direction[2],e.indexToWorld[4]=e.direction[3],e.indexToWorld[5]=e.direction[4],e.indexToWorld[6]=e.direction[5],e.indexToWorld[8]=e.direction[6],e.indexToWorld[9]=e.direction[7],e.indexToWorld[10]=e.direction[8],La(e.indexToWorld,e.indexToWorld,e.spacing),Ft(e.worldToIndex,e.indexToWorld)},t.indexToWorld=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Ve(r,n,e.indexToWorld),r},t.indexToWorldVec3=t.indexToWorld,t.worldToIndex=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Ve(r,n,e.worldToIndex),r},t.worldToIndexVec3=t.worldToIndex,t.indexToWorldBounds=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return $e.transformBounds(n,e.indexToWorld,r)},t.worldToIndexBounds=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return $e.transformBounds(n,e.worldToIndex,r)},t.onModified(t.computeTransforms),t.computeTransforms(),t.getCenter=()=>$e.getCenter(t.getBounds()),t.computeHistogram=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const a=[0,0,0,0,0,0];t.worldToIndexBounds(n,a);const s=[0,0,0],o=[0,0,0];$e.computeCornerPoints(a,s,o),lv(s,s),lv(o,o);const c=t.getDimensions();gv(s,[0,0,0],[c[0]-1,c[1]-1,c[2]-1],s),gv(o,[0,0,0],[c[0]-1,c[1]-1,c[2]-1],o);const f=c[0],l=c[0]*c[1],h=t.getPointData().getScalars().getData();let g=-1/0,d=1/0,v=0,S=0,T=0;for(let w=s[2];w<=o[2];w++)for(let R=s[1];R<=o[1];R++){let M=s[0]+R*f+w*l;for(let D=s[0];D<=o[0];D++){if(!r||r([D,R,w],a)){const V=h[M];V>g&&(g=V),V<d&&(d=V),v+=V*V,S+=V,T+=1}++M}}const x=T>0?S/T:0,m=T?Math.abs(v/T-x*x):0,O=Math.sqrt(m);return{minimum:d,maximum:g,average:x,variance:m,sigma:O,count:T}},t.computeIncrements=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const a=[];let s=r;for(let o=0;o<3;++o)a[o]=s,s*=n[o*2+1]-n[o*2]+1;return a},t.computeOffsetIndex=n=>{let[r,a,s]=n;const o=t.getExtent(),c=t.getPointData().getScalars().getNumberOfComponents(),f=t.computeIncrements(o,c);return Math.floor((Math.round(r)-o[0])*f[0]+(Math.round(a)-o[2])*f[1]+(Math.round(s)-o[4])*f[2])},t.getOffsetIndexFromWorld=n=>{const r=t.getExtent(),a=t.worldToIndex(n);for(let s=0;s<3;++s)if(a[s]<r[s*2]||a[s]>r[s*2+1])return pa(`GetScalarPointer: Pixel ${a} is not in memory. Current extent = ${r}`),NaN;return t.computeOffsetIndex(a)},t.getScalarValueFromWorld=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const a=t.getPointData().getScalars().getNumberOfComponents();if(r<0||r>=a)return pa(`GetScalarPointer: Scalar Component ${r} is not within bounds. Current Scalar numberOfComponents: ${a}`),NaN;const s=t.getOffsetIndexFromWorld(n);return Number.isNaN(s)?s:t.getPointData().getScalars().getComponent(s,r)}}const TD={direction:null,indexToWorld:null,worldToIndex:null,spacing:[1,1,1],origin:[0,0,0],extent:[0,-1,0,-1,0,-1],dataDescription:xn.EMPTY};function Tx(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,TD,n),ka.extend(t,e,n),e.direction?Array.isArray(e.direction)&&(e.direction=new Float64Array(e.direction.slice(0,9))):e.direction=Va(new Float64Array(9)),e.indexToWorld=new Float64Array(16),e.worldToIndex=new Float64Array(16),L.get(t,e,["indexToWorld","worldToIndex"]),L.setGetArray(t,e,["origin","spacing"],3),L.setGetArray(t,e,["direction"],9),L.getArray(t,e,["extent"],6),yD(t,e)}const xD=L.newInstance(Tx,"vtkImageData");var SD={newInstance:xD,extend:Tx};const CD={MAGNITUDE:0,COMPONENT:1,RGBCOLORS:2},Qg={LUMINANCE:1,LUMINANCE_ALPHA:2,RGB:3,RGBA:4};var b1={VectorMode:CD,ScalarMappingTarget:Qg};const wD={DEFAULT:0,MAP_SCALARS:1,DIRECT_SCALARS:2},ED={DEFAULT:0,USE_POINT_DATA:1,USE_CELL_DATA:2,USE_POINT_FIELD_DATA:3,USE_CELL_FIELD_DATA:4,USE_FIELD_DATA:5},mD={BY_ID:0,BY_NAME:1};var Mc={ColorMode:wD,GetArray:mD,ScalarMode:ED};const{ScalarMappingTarget:Tv,VectorMode:Fn}=b1,{VtkDataTypes:Ur}=Oe,{ColorMode:xu}=Mc,{vtkErrorMacro:xv}=L;function RD(t){return t}function Sv(t){return Math.floor(t*255+.5)}function OD(t,e){e.classHierarchy.push("vtkScalarsToColors"),t.setVectorModeToMagnitude=()=>t.setVectorMode(Fn.MAGNITUDE),t.setVectorModeToComponent=()=>t.setVectorMode(Fn.COMPONENT),t.setVectorModeToRGBColors=()=>t.setVectorMode(Fn.RGBCOLORS),t.build=()=>{},t.isOpaque=()=>!0,t.setAnnotations=(n,r)=>{if(!(n&&!r||!n&&r)){if(n&&r&&n.length!==r.length){xv("Values and annotations do not have the same number of tuples so ignoring");return}if(e.annotationArray=[],r&&n){const a=r.length;for(let s=0;s<a;s++)e.annotationArray.push({value:n[s],annotation:String(r[s])})}t.updateAnnotatedValueMap(),t.modified()}},t.setAnnotation=(n,r)=>{let a=t.checkForAnnotatedValue(n),s=!1;return a>=0?e.annotationArray[a].annotation!==r&&(e.annotationArray[a].annotation=r,s=!0):(e.annotationArray.push({value:n,annotation:r}),a=e.annotationArray.length-1,s=!0),s&&(t.updateAnnotatedValueMap(),t.modified()),a},t.getNumberOfAnnotatedValues=()=>e.annotationArray.length,t.getAnnotatedValue=n=>n<0||n>=e.annotationArray.length?null:e.annotationArray[n].value,t.getAnnotation=n=>e.annotationArray[n]===void 0?null:e.annotationArray[n].annotation,t.getAnnotatedValueIndex=n=>e.annotationArray.length?t.checkForAnnotatedValue(n):-1,t.removeAnnotation=n=>{const r=t.checkForAnnotatedValue(n),a=r>=0;return a&&(e.annotationArray.splice(r,1),t.updateAnnotatedValueMap(),t.modified()),a},t.resetAnnotations=()=>{e.annotationArray=[],e.annotatedValueMap=[],t.modified()},t.getAnnotationColor=(n,r)=>{if(e.indexedLookup){const a=t.getAnnotatedValueIndex(n);t.getIndexedColor(a,r)}else t.getColor(parseFloat(n),r),r[3]=1},t.checkForAnnotatedValue=n=>t.getAnnotatedValueIndexInternal(n),t.getAnnotatedValueIndexInternal=n=>{if(e.annotatedValueMap[n]!==void 0){const r=e.annotationArray.length;return e.annotatedValueMap[n]%r}return-1},t.getIndexedColor=(n,r)=>{r[0]=0,r[1]=0,r[2]=0,r[3]=0},t.updateAnnotatedValueMap=()=>{e.annotatedValueMap=[];const n=e.annotationArray.length;for(let r=0;r<n;r++)e.annotatedValueMap[e.annotationArray[r].value]=r},t.mapScalars=(n,r,a)=>{const s=n.getNumberOfComponents();let o=null;if(r===xu.DEFAULT&&(n.getDataType()===Ur.UNSIGNED_CHAR||n.getDataType()===Ur.UNSIGNED_CHAR_CLAMPED)||r===xu.DIRECT_SCALARS&&n)o=t.convertToRGBA(n,s,n.getNumberOfTuples());else{const c={type:"vtkDataArray",name:"temp",numberOfComponents:4,dataType:Ur.UNSIGNED_CHAR},f=L.newTypedArray(c.dataType,4*n.getNumberOfTuples());c.values=f,c.size=f.length,o=Oe.newInstance(c);let l=a;l<0&&s>1?t.mapVectorsThroughTable(n,o,Tv.RGBA,-1,-1):(l<0&&(l=0),l>=s&&(l=s-1),t.mapScalarsThroughTable(n,o,Tv.RGBA,l))}return o},t.mapVectorsToMagnitude=(n,r,a)=>{const s=n.getNumberOfTuples(),o=n.getNumberOfComponents(),c=r.getData(),f=n.getData();for(let l=0;l<s;l++){let h=0;for(let g=0;g<a;g++)h+=f[l*o+g]*f[l*o+g];c[l]=Math.sqrt(h)}},t.mapVectorsThroughTable=(n,r,a,s,o)=>{let c=t.getVectorMode(),f=o,l=s;const h=n.getNumberOfComponents();c===Fn.COMPONENT?(l===-1&&(l=t.getVectorComponent()),l<0&&(l=0),l>=h&&(l=h-1)):(f===-1&&(f=t.getVectorSize()),f<=0?(l=0,f=h):(l<0&&(l=0),l>=h&&(l=h-1),l+f>h&&(f=h-l)),c===Fn.MAGNITUDE&&(h===1||f===1)&&(c=Fn.COMPONENT));let g=0;switch(l>0&&(g=l),c){case Fn.COMPONENT:{t.mapScalarsThroughTable(n,r,a,g);break}case Fn.RGBCOLORS:break;case Fn.MAGNITUDE:default:{const d=Oe.newInstance({numberOfComponents:1,values:new Float32Array(n.getNumberOfTuples())});t.mapVectorsToMagnitude(n,d,f),t.mapScalarsThroughTable(d,r,a,0);break}}},t.luminanceToRGBA=(n,r,a,s)=>{const o=s(a),c=r.getData(),f=n.getData(),l=c.length,h=0,g=1;let d=0;for(let v=h;v<l;v+=g){const S=s(c[v]);f[d*4]=S,f[d*4+1]=S,f[d*4+2]=S,f[d*4+3]=o,d++}},t.luminanceAlphaToRGBA=(n,r,a,s)=>{const o=r.getData(),c=n.getData(),f=o.length,l=0,h=2;let g=0;for(let d=l;d<f;d+=h){const v=s(o[d]);c[g]=v,c[g+1]=v,c[g+2]=v,c[g+3]=s(o[d+1])*a,g+=4}},t.rGBToRGBA=(n,r,a,s)=>{const o=Sv(a),c=r.getData(),f=n.getData(),l=c.length,h=0,g=3;let d=0;for(let v=h;v<l;v+=g)f[d*4]=s(c[v]),f[d*4+1]=s(c[v+1]),f[d*4+2]=s(c[v+2]),f[d*4+3]=o,d++},t.rGBAToRGBA=(n,r,a,s)=>{const o=r.getData(),c=n.getData(),f=o.length,l=0,h=4;let g=0;for(let d=l;d<f;d+=h)c[g*4]=s(o[d]),c[g*4+1]=s(o[d+1]),c[g*4+2]=s(o[d+2]),c[g*4+3]=s(o[d+3])*a,g++},t.convertToRGBA=(n,r,a)=>{let{alpha:s}=e;if(r===4&&s>=1&&n.getDataType()===Ur.UNSIGNED_CHAR)return n;const o=Oe.newInstance({numberOfComponents:4,empty:!0,size:4*a,dataType:Ur.UNSIGNED_CHAR});if(a<=0)return o;s=s>0?s:0,s=s<1?s:1;let c=RD;switch((n.getDataType()===Ur.FLOAT||n.getDataType()===Ur.DOUBLE)&&(c=Sv),r){case 1:t.luminanceToRGBA(o,n,s,c);break;case 2:t.luminanceAlphaToRGBA(o,n,c);break;case 3:t.rGBToRGBA(o,n,s,c);break;case 4:t.rGBAToRGBA(o,n,s,c);break;default:return xv("Cannot convert colors"),null}return o},t.usingLogScale=()=>!1,t.getNumberOfAvailableColors=()=>256*256*256,t.setRange=(n,r)=>t.setMappingRange(n,r),t.getRange=()=>t.getMappingRange(),t.areScalarsOpaque=(n,r,a)=>{if(!n)return t.isOpaque();const s=n.getNumberOfComponents();return r===xu.DEFAULT&&n.getDataType()===Ur.UNSIGNED_CHAR||r===xu.DIRECT_SCALARS?s===3||s===1?e.alpha>=1:n.getRange(s-1)[0]===255:!0}}const DD={alpha:1,vectorComponent:0,vectorSize:-1,vectorMode:Fn.COMPONENT,mappingRange:null,annotationArray:null,annotatedValueMap:null,indexedLookup:!1};function xx(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,DD,n),L.obj(t,e),e.mappingRange=[0,255],e.annotationArray=[],e.annotatedValueMap=[],L.setGet(t,e,["vectorSize","vectorComponent","vectorMode","alpha","indexedLookup"]),L.setArray(t,e,["mappingRange"],2),L.getArray(t,e,["mappingRange"]),OD(t,e)}const MD=L.newInstance(xx,"vtkScalarsToColors");var Lc={newInstance:MD,extend:xx,...b1};const{vtkErrorMacro:Cv}=L,wv=0,Ev=1,sg=2;function LD(t,e){e.classHierarchy.push("vtkLookupTable"),t.isOpaque=()=>{if(e.opaqueFlagBuildTime.getMTime()<t.getMTime()){let n=!0;e.nanColor[3]<1&&(n=0),e.useBelowRangeColor&&e.belowRangeColor[3]<1&&(n=0),e.useAboveRangeColor&&e.aboveRangeColor[3]<1&&(n=0);for(let r=3;r<e.table.length&&n;r+=4)e.table[r]<255&&(n=!1);e.opaqueFlag=n,e.opaqueFlagBuildTime.modified()}return e.opaqueFlag},t.usingLogScale=()=>!1,t.getNumberOfAvailableColors=()=>e.table.length/4-3,t.linearIndexLookup=(n,r)=>{let a=0;const s=Number(n);return s<r.range[0]?a=r.maxIndex+wv+1.5:s>r.range[1]?a=r.maxIndex+Ev+1.5:(a=(s+r.shift)*r.scale,a=a<r.maxIndex?a:r.maxIndex),Math.floor(a)},t.linearLookup=(n,r,a)=>{let s=0;lc(n)?s=Math.floor(a.maxIndex+1.5+sg):s=t.linearIndexLookup(n,a);const o=4*s;return r.slice(o,o+4)},t.indexedLookupFunction=(n,r,a)=>{let s=t.getAnnotatedValueIndexInternal(n);s===-1&&(s=e.numberOfColors+sg);const o=4*s;return[r[o],r[o+1],r[o+2],r[o+3]]},t.lookupShiftAndScale=(n,r)=>{r.shift=-n[0],r.scale=Number.MAX_VALUE,n[1]>n[0]&&(r.scale=(r.maxIndex+1)/(n[1]-n[0]))},t.mapScalarsThroughTable=(n,r,a,s)=>{let o=t.linearLookup;e.indexedLookup&&(o=t.indexedLookupFunction);const c=t.getMappingRange(),f={maxIndex:t.getNumberOfColors()-1,range:c,shift:0,scale:0};t.lookupShiftAndScale(c,f);const l=t.getAlpha(),h=n.getNumberOfTuples(),g=n.getNumberOfComponents(),d=r.getData(),v=n.getData();if(l>=1){if(a===Qg.RGBA)for(let S=0;S<h;S++){const T=o(v[S*g+s],e.table,f);d[S*4]=T[0],d[S*4+1]=T[1],d[S*4+2]=T[2],d[S*4+3]=T[3]}}else if(a===Qg.RGBA)for(let S=0;S<h;S++){const T=o(v[S*g+s],e.table,f);d[S*4]=T[0],d[S*4+1]=T[1],d[S*4+2]=T[2],d[S*4+3]=Math.floor(T[3]*l+.5)}},t.forceBuild=()=>{let n=0,r=0,a=0,s=0;const o=e.numberOfColors-1;o&&(n=(e.hueRange[1]-e.hueRange[0])/o,r=(e.saturationRange[1]-e.saturationRange[0])/o,a=(e.valueRange[1]-e.valueRange[0])/o,s=(e.alphaRange[1]-e.alphaRange[0])/o),e.table.length=4*o+16;const c=[],f=[];for(let l=0;l<=o;l++)c[0]=e.hueRange[0]+l*n,c[1]=e.saturationRange[0]+l*r,c[2]=e.valueRange[0]+l*a,fs(c,f),f[3]=e.alphaRange[0]+l*s,e.table[l*4]=f[0]*255+.5,e.table[l*4+1]=f[1]*255+.5,e.table[l*4+2]=f[2]*255+.5,e.table[l*4+3]=f[3]*255+.5;t.buildSpecialColors(),e.buildTime.modified()},t.setTable=n=>{if(Array.isArray(n)){const a=n[0].length;e.numberOfColors=n.length;const s=4-a;let o=0;for(let c=0;c<e.numberOfColors;c++)e.table[c*4]=255,e.table[c*4+1]=255,e.table[c*4+2]=255,e.table[c*4+3]=255;for(let c=0;c<n.length;c++){const f=n[c];for(let l=0;l<a;l++)e.table[o++]=f[l];o+=s}return t.buildSpecialColors(),e.insertTime.modified(),t.modified(),!0}if(n.getNumberOfComponents()!==4)return Cv("Expected 4 components for RGBA colors"),!1;if(n.getDataType()!==rt.UNSIGNED_CHAR)return Cv("Expected unsigned char values for RGBA colors"),!1;e.numberOfColors=n.getNumberOfTuples();const r=n.getData();e.table.length=r.length;for(let a=0;a<r.length;a++)e.table[a]=r[a];return t.buildSpecialColors(),e.insertTime.modified(),t.modified(),!0},t.buildSpecialColors=()=>{const{numberOfColors:n}=e,r=e.table;let a=(n+wv)*4;e.useBelowRangeColor||n===0?(r[a]=e.belowRangeColor[0]*255+.5,r[a+1]=e.belowRangeColor[1]*255+.5,r[a+2]=e.belowRangeColor[2]*255+.5,r[a+3]=e.belowRangeColor[3]*255+.5):(r[a]=r[0],r[a+1]=r[1],r[a+2]=r[2],r[a+3]=r[3]),a=(n+Ev)*4,e.useAboveRangeColor||n===0?(r[a]=e.aboveRangeColor[0]*255+.5,r[a+1]=e.aboveRangeColor[1]*255+.5,r[a+2]=e.aboveRangeColor[2]*255+.5,r[a+3]=e.aboveRangeColor[3]*255+.5):(r[a]=r[4*(n-1)+0],r[a+1]=r[4*(n-1)+1],r[a+2]=r[4*(n-1)+2],r[a+3]=r[4*(n-1)+3]),a=(n+sg)*4,r[a]=e.nanColor[0]*255+.5,r[a+1]=e.nanColor[1]*255+.5,r[a+2]=e.nanColor[2]*255+.5,r[a+3]=e.nanColor[3]*255+.5},t.build=()=>{(e.table.length<1||t.getMTime()>e.buildTime.getMTime()&&e.insertTime.getMTime()<=e.buildTime.getMTime())&&t.forceBuild()},e.table.length>0&&(t.buildSpecialColors(),e.insertTime.modified())}const _D={numberOfColors:256,hueRange:[0,.66667],saturationRange:[1,1],valueRange:[1,1],alphaRange:[1,1],nanColor:[.5,0,0,1],belowRangeColor:[0,0,0,1],aboveRangeColor:[1,1,1,1],useAboveRangeColor:!1,useBelowRangeColor:!1,alpha:1};function Sx(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,_D,n),Lc.extend(t,e,n),e.table||(e.table=[]),e.buildTime={},L.obj(e.buildTime),e.opaqueFlagBuildTime={},L.obj(e.opaqueFlagBuildTime,{mtime:0}),e.insertTime={},L.obj(e.insertTime,{mtime:0}),L.get(t,e,["buildTime"]),L.setGet(t,e,["numberOfColors","useAboveRangeColor","useBelowRangeColor"]),L.setArray(t,e,["alphaRange","hueRange","saturationRange","valueRange"],2),L.setArray(t,e,["nanColor","belowRangeColor","aboveRangeColor"],4),L.getArray(t,e,["hueRange","saturationRange","valueRange","alphaRange","nanColor","belowRangeColor","aboveRangeColor"]),LD(t,e)}const VD=L.newInstance(Sx,"vtkLookupTable");var vc={newInstance:VD,extend:Sx};const Qr={Off:0,PolygonOffset:1};let Zg=Qr.PolygonOffset,yc=Qr.Off;const kD=["VTK_RESOLVE_OFF","VTK_RESOLVE_POLYGON_OFFSET"];function BD(){return Zg}function FD(t){const e=Zg===t;return Zg=t,e}function ND(){return yc}function _c(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;const e=yc===t;return yc=t,e}function UD(){return _c(Qr.Off)}function GD(){return _c(Qr.Off)}function $D(){return _c(Qr.PolygonOffset)}function zD(){return kD[yc]}var Jg={Resolve:Qr,getResolveCoincidentTopologyAsString:zD,getResolveCoincidentTopologyPolygonOffsetFaces:BD,getResolveCoincidentTopology:ND,setResolveCoincidentTopology:_c,setResolveCoincidentTopologyPolygonOffsetFaces:FD,setResolveCoincidentTopologyToDefault:UD,setResolveCoincidentTopologyToOff:GD,setResolveCoincidentTopologyToPolygonOffset:$D};function Cx(t,e,n){n.forEach(r=>{t[`get${r.method}`]=()=>e[r.key],t[`set${r.method}`]=L.objectSetterMap.object(t,e,{name:r.key,params:["factor","offset"]})})}const A1=["Polygon","Line","Point"],WD={Polygon:{factor:2,offset:0},Line:{factor:1,offset:-1},Point:{factor:0,offset:-2}},HD=()=>{},wa={modified:HD};Cx(wa,WD,A1.map(t=>({key:t,method:`ResolveCoincidentTopology${t}OffsetParameters`})));function bD(t,e){e.resolveCoincidentTopology===void 0&&(e.resolveCoincidentTopology=!1),L.setGet(t,e,["resolveCoincidentTopology"]),e.topologyOffset={Polygon:{factor:0,offset:0},Line:{factor:0,offset:0},Point:{factor:0,offset:0}},Object.keys(Jg).forEach(n=>{t[n]=Jg[n]}),Object.keys(wa).filter(n=>n!=="modified").forEach(n=>{t[n]=wa[n]}),Cx(t,e.topologyOffset,A1.map(n=>({key:n,method:`RelativeCoincidentTopology${n}OffsetParameters`}))),t.getCoincidentTopologyPolygonOffsetParameters=()=>{const n=wa.getResolveCoincidentTopologyPolygonOffsetParameters(),r=t.getRelativeCoincidentTopologyPolygonOffsetParameters();return{factor:n.factor+r.factor,offset:n.offset+r.offset}},t.getCoincidentTopologyLineOffsetParameters=()=>{const n=wa.getResolveCoincidentTopologyLineOffsetParameters(),r=t.getRelativeCoincidentTopologyLineOffsetParameters();return{factor:n.factor+r.factor,offset:n.offset+r.offset}},t.getCoincidentTopologyPointOffsetParameter=()=>{const n=wa.getResolveCoincidentTopologyPointOffsetParameters(),r=t.getRelativeCoincidentTopologyPointOffsetParameters();return{factor:n.factor+r.factor,offset:n.offset+r.offset}}}var wx={implementCoincidentTopologyMethods:bD,staticOffsetAPI:wa,otherStaticMethods:Jg,CATEGORIES:A1,Resolve:Qr};const Bt={MIN_KNOWN_PASS:0,ACTOR_PASS:0,COMPOSITE_INDEX_PASS:1,ID_LOW24:2,ID_HIGH24:3,MAX_KNOWN_PASS:3};var Ex={PassTypes:Bt};const{FieldAssociations:mv}=ka,{staticOffsetAPI:AD,otherStaticMethods:jD}=wx,{ColorMode:Su,ScalarMode:ha,GetArray:ig}=Mc,{VectorMode:KD}=b1,{VtkDataTypes:PD}=Oe;function xi(t){return()=>L.vtkErrorMacro(`vtkMapper::${t} - NOT IMPLEMENTED`)}function XD(t,e){const n=t[1]%2===0?1:-1;if(t[0]+=n,t[0]>=e[0]||t[0]<0){const r=t[2]%2===0?1:-1;t[0]-=n,t[1]+=r,(t[1]>=e[1]||t[1]<0)&&(t[1]-=r,t[2]++)}}function ID(t,e){return t[0]+e[0]*(t[1]+e[1]*t[2])}function Rv(t,e,n){const r=Math.floor(e),a=r%(2*n[0]);let s,o;a<n[0]?(t[0]=a,s=1,o=t[0]===n[0]-1):(t[0]=2*n[0]-1-a,s=-1,o=t[0]===0);const c=Math.floor(r/n[0]),f=c%(2*n[1]);let l,h;f<n[1]?(t[1]=f,l=1,h=t[1]===n[1]-1):(t[1]=2*n[1]-1-f,l=-1,h=t[1]===0),t[2]=Math.floor(c/n[1]);const g=e-r;o?h?t[2]+=g:t[1]+=l*g:t[0]+=s*g,t[0]=(t[0]+.5)/n[0],t[1]=(t[1]+.5)/n[1],t[2]=(t[2]+.5)/n[2]}const Ov=new WeakMap;function YD(t,e,n,r,a,s,o){var H;const c=new Array(arguments.length);for(let P=0;P<arguments.length;++P){const A=arguments[P];c[P]=((H=A.getMTime)==null?void 0:H.call(A))??A}const f=c.join("/"),l=Ov.get(t);if(l&&l.stringHash===f)return l.textureCoordinates;const h=(n[1]-n[0])/(r-1),[g,d]=[n[0]-h,n[1]+h],v=g-.5*h,S=1/(d-g+h),T=g,x=(r+1)/(d-g),m=t.getData(),O=t.getNumberOfTuples(),w=t.getNumberOfComponents(),R=e<0||e>=w,M=a[2]<=1?2:3,D=Oe.newInstance({numberOfComponents:M,values:new Float32Array(O*M)}),V=D.getData(),B=[0,0,0];Rv(B,r+2,a);let z=0,k=0;const U=[.5,.5,.5];for(let P=0;P<O;++P){let A;if(R){let ne=0;for(let ae=0;ae<w;++ae){const se=m[z+ae];ne+=se*se}A=Math.sqrt(ne)}else A=m[z+e];if(z+=w,s&&(A=vc.applyLogScale(A,n,n)),lc(A))U[0]=B[0],U[1]=B[1],U[2]=B[2];else if(o){let ne=(A-T)*x;ne<1?ne=0:ne>r&&(ne=r+1),Rv(U,ne,a)}else{U[1]=.49;const ne=(A-v)*S;ne>1e3?U[0]=1e3:ne<-1e3?U[0]=-1e3:U[0]=ne}for(let ne=0;ne<M;++ne)V[k++]=U[ne]}return Ov.set(t,{stringHash:f,textureCoordinates:D}),D}function qD(t,e){e.classHierarchy.push("vtkMapper"),t.getBounds=()=>{const n=t.getInputData();return n?(e.static||t.update(),e.bounds=n.getBounds()):e.bounds=k1(),e.bounds},t.setForceCompileOnly=n=>{e.forceCompileOnly=n},t.setSelectionWebGLIdsToVTKIds=n=>{e.selectionWebGLIdsToVTKIds=n},t.createDefaultLookupTable=()=>{e.lookupTable=vc.newInstance()},t.getColorModeAsString=()=>L.enumToString(Su,e.colorMode),t.setColorModeToDefault=()=>t.setColorMode(0),t.setColorModeToMapScalars=()=>t.setColorMode(1),t.setColorModeToDirectScalars=()=>t.setColorMode(2),t.getScalarModeAsString=()=>L.enumToString(ha,e.scalarMode),t.setScalarModeToDefault=()=>t.setScalarMode(0),t.setScalarModeToUsePointData=()=>t.setScalarMode(1),t.setScalarModeToUseCellData=()=>t.setScalarMode(2),t.setScalarModeToUsePointFieldData=()=>t.setScalarMode(3),t.setScalarModeToUseCellFieldData=()=>t.setScalarMode(4),t.setScalarModeToUseFieldData=()=>t.setScalarMode(5),t.getAbstractScalars=(n,r,a,s,o)=>{if(!n||!e.scalarVisibility)return{scalars:null,cellFlag:!1};let c=null,f=!1;if(r===ha.DEFAULT)c=n.getPointData().getScalars(),c||(c=n.getCellData().getScalars(),f=!0);else if(r===ha.USE_POINT_DATA)c=n.getPointData().getScalars();else if(r===ha.USE_CELL_DATA)c=n.getCellData().getScalars(),f=!0;else if(r===ha.USE_POINT_FIELD_DATA){const l=n.getPointData();a===ig.BY_ID?c=l.getArrayByIndex(s):c=l.getArrayByName(o)}else if(r===ha.USE_CELL_FIELD_DATA){const l=n.getCellData();f=!0,a===ig.BY_ID?c=l.getArrayByIndex(s):c=l.getArrayByName(o)}else if(r===ha.USE_FIELD_DATA){const l=n.getFieldData();a===ig.BY_ID?c=l.getArrayByIndex(s):c=l.getArrayByName(o)}return{scalars:c,cellFlag:f}},t.mapScalars=(n,r)=>{const{scalars:a,cellFlag:s}=t.getAbstractScalars(n,e.scalarMode,e.arrayAccessMode,e.arrayId,e.colorByArrayName);if(e.areScalarsMappedFromCells=s,!a){e.colorCoordinates=null,e.colorTextureMap=null,e.colorMapColors=null;return}const o=`${t.getMTime()}${a.getMTime()}${r}`;if(e.colorBuildString!==o){if(e.useLookupTableScalarRange||t.getLookupTable().setRange(e.scalarRange[0],e.scalarRange[1]),t.canUseTextureMapForColoring(a,s))e.mapScalarsToTexture(a,s,r);else{e.colorCoordinates=null,e.colorTextureMap=null;const c=t.getLookupTable();c&&(c.build(),e.colorMapColors=c.mapScalars(a,e.colorMode,e.fieldDataTupleId))}e.colorBuildString=`${t.getMTime()}${a.getMTime()}${r}`}},e.mapScalarsToTexture=(n,r,a)=>{const s=e.lookupTable.getRange(),o=e.lookupTable.usingLogScale();o&&vc.getLogRange(s,s);const c=e.lookupTable.getAlpha();if(e.colorMapColors=null,e.colorTextureMap==null||t.getMTime()>e.colorTextureMap.getMTime()||e.lookupTable.getMTime()>e.colorTextureMap.getMTime()||e.lookupTable.getAlpha()!==a){e.lookupTable.setAlpha(a),e.colorTextureMap=null,e.lookupTable.build();const l=e.lookupTable.getNumberOfAvailableColors(),h=2048,g=h**3-3,v=4096-2,S=2,T=r?g:v;e.numberOfColorsInRange=Math.min(Math.max(l,S),T);const x=e.numberOfColorsInRange+3,m=e.numberOfColorsInRange+2,O=r?[Math.min(Math.ceil(x/h**0),h),Math.min(Math.ceil(x/h**1),h),Math.min(Math.ceil(x/h**2),h)]:[m,2,1],w=O[0]*O[1]*O[2],R=new Float64Array(w);R.fill(NaN);const M=e.numberOfColorsInRange,D=M+2,V=[0,0,0],B=s[0],z=s[1]-s[0];for(let H=0;H<D;++H){const P=ID(V,O),A=B+z*(H-1)/(M-1);R[P]=o?10**A:A,XD(V,O)}const k=Oe.newInstance({numberOfComponents:1,values:R}),U=e.lookupTable.mapScalars(k,e.colorMode,0);e.colorTextureMap=SD.newInstance(),e.colorTextureMap.setDimensions(O),e.colorTextureMap.getPointData().setScalars(U),e.lookupTable.setAlpha(c)}const f=e.lookupTable.getVectorMode()===KD.MAGNITUDE&&n.getNumberOfComponents()>1?-1:e.lookupTable.getVectorComponent();e.colorCoordinates=YD(n,f,s,e.numberOfColorsInRange,e.colorTextureMap.getDimensions(),o,r)},t.getIsOpaque=()=>{const n=t.getInputData(),a=t.getAbstractScalars(n,e.scalarMode,e.arrayAccessMode,e.arrayId,e.colorByArrayName).scalars;if(!e.scalarVisibility||a==null)return!0;const s=t.getLookupTable();return s?(s.build(),s.areScalarsOpaque(a,e.colorMode,-1)):!0},t.canUseTextureMapForColoring=(n,r)=>r&&e.colorMode!==Su.DIRECT_SCALARS?!0:!(!e.interpolateScalarsBeforeMapping||e.lookupTable&&e.lookupTable.getIndexedLookup()||!n||e.colorMode===Su.DEFAULT&&n.getDataType()===PD.UNSIGNED_CHAR||e.colorMode===Su.DIRECT_SCALARS),t.clearColorArrays=()=>{e.colorMapColors=null,e.colorCoordinates=null,e.colorTextureMap=null},t.getLookupTable=()=>(e.lookupTable||t.createDefaultLookupTable(),e.lookupTable),t.getMTime=()=>{let n=e.mtime;if(e.lookupTable!==null){const r=e.lookupTable.getMTime();n=r>n?r:n}return n},t.getPrimitiveCount=()=>{const n=t.getInputData();return{points:n.getPoints().getNumberOfValues()/3,verts:n.getVerts().getNumberOfValues()-n.getVerts().getNumberOfCells(),lines:n.getLines().getNumberOfValues()-2*n.getLines().getNumberOfCells(),triangles:n.getPolys().getNumberOfValues()-3*n.getPolys().getNumberOfCells()}},t.acquireInvertibleLookupTable=xi("AcquireInvertibleLookupTable"),t.valueToColor=xi("ValueToColor"),t.colorToValue=xi("ColorToValue"),t.useInvertibleColorFor=xi("UseInvertibleColorFor"),t.clearInvertibleColor=xi("ClearInvertibleColor"),t.processSelectorPixelBuffers=(n,r)=>{if(!n||!e.selectionWebGLIdsToVTKIds||!e.populateSelectionSettings)return;const a=n.getRawPixelBuffer(Bt.ID_LOW24),s=n.getRawPixelBuffer(Bt.ID_HIGH24),o=n.getCurrentPass(),c=n.getFieldAssociation();let f=null;c===mv.FIELD_ASSOCIATION_POINTS?f=e.selectionWebGLIdsToVTKIds.points:c===mv.FIELD_ASSOCIATION_CELLS&&(f=e.selectionWebGLIdsToVTKIds.cells),f&&r.forEach(l=>{if(o===Bt.ID_LOW24){let h=0;s&&(h+=s[l],h*=256),h+=a[l+2],h*=256,h+=a[l+1],h*=256,h+=a[l];const g=f[h],d=n.getPixelBuffer(Bt.ID_LOW24);d[l]=g&255,d[l+1]=(g&65280)>>8,d[l+2]=(g&16711680)>>16}else if(o===Bt.ID_HIGH24&&s){let h=0;h+=s[l],h*=256,h+=a[l+2],h*=256,h+=a[l+1],h*=256,h+=a[l];const g=f[h],d=n.getPixelBuffer(Bt.ID_HIGH24);d[l]=(g&4278190080)>>24}})}}const QD={colorMapColors:null,areScalarsMappedFromCells:!1,static:!1,lookupTable:null,scalarVisibility:!0,scalarRange:[0,1],useLookupTableScalarRange:!1,colorMode:0,scalarMode:0,arrayAccessMode:1,renderTime:0,colorByArrayName:null,fieldDataTupleId:-1,populateSelectionSettings:!0,selectionWebGLIdsToVTKIds:null,interpolateScalarsBeforeMapping:!1,colorCoordinates:null,colorTextureMap:null,numberOfColorsInRange:0,forceCompileOnly:0,useInvertibleColors:!1,invertibleScalars:null,customShaderAttributes:[]};function mx(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,QD,n),I3.extend(t,e,n),L.get(t,e,["areScalarsMappedFromCells","colorCoordinates","colorMapColors","colorTextureMap","numberOfColorsInRange","selectionWebGLIdsToVTKIds"]),L.setGet(t,e,["colorByArrayName","arrayAccessMode","colorMode","fieldDataTupleId","interpolateScalarsBeforeMapping","lookupTable","populateSelectionSettings","renderTime","scalarMode","scalarVisibility","static","useLookupTableScalarRange","customShaderAttributes"]),L.setGetArray(t,e,["scalarRange"],2),wx.implementCoincidentTopologyMethods(t,e),qD(t,e)}const ZD=L.newInstance(mx,"vtkMapper");var An={newInstance:ZD,extend:mx,...AD,...jD,...Mc};function Rx(t){let e=0;return t.filter((n,r)=>r===e?(e+=n+1,!0):!1)}function Ox(t){let e=0;for(let n=0;n<t.length;)n+=t[n]+1,e++;return e}const JD={extractCellSizes:Rx,getNumberOfCells:Ox};function eM(t,e){e.classHierarchy.push("vtkCellArray");const n={...t};t.getNumberOfCells=r=>(e.numberOfCells!==void 0&&!r||(e.cellSizes?e.numberOfCells=e.cellSizes.length:e.numberOfCells=Ox(t.getData())),e.numberOfCells),t.getCellSizes=r=>(e.cellSizes!==void 0&&!r||(e.cellSizes=Rx(t.getData())),e.cellSizes),t.resize=r=>{const a=t.getNumberOfTuples();n.resize(r);const s=t.getNumberOfTuples();s<a&&(s===0?(e.numberOfCells=0,e.cellSizes=[]):(e.numberOfCells=void 0,e.cellSizes=void 0))},t.setData=r=>{n.setData(r,1),e.numberOfCells=void 0,e.cellSizes=void 0},t.getCell=r=>{let a=r;const s=e.values[a++];return e.values.subarray(a,a+s)},t.insertNextCell=r=>{const a=t.getNumberOfCells();return t.insertNextTuples([r.length,...r]),++e.numberOfCells,e.cellSizes!=null&&e.cellSizes.push(r.length),a}}function tM(t){return{empty:!0,numberOfComponents:1,dataType:rt.UNSIGNED_INT,...t}}function Dx(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Oe.extend(t,e,tM(n)),eM(t,e)}const nM=L.newInstance(Dx,"vtkCellArray");var Dv={newInstance:nM,extend:Dx,...JD};const{vtkErrorMacro:rM}=L,aM=[1,-1,1,-1,1,-1];function sM(t,e){e.classHierarchy.push("vtkPoints"),t.getNumberOfPoints=t.getNumberOfTuples,t.setNumberOfPoints=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;t.getNumberOfPoints()!==n&&(e.size=n*r,e.values=L.newTypedArray(e.dataType,e.size),t.setNumberOfComponents(r),t.modified())},t.setPoint=function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];t.setTuple(n,a)},t.getPoint=t.getTuple,t.findPoint=t.findTuple,t.insertNextPoint=(n,r,a)=>t.insertNextTuple([n,r,a]),t.getBounds=()=>{if(t.getNumberOfComponents()===3){const a=t.getRange(0);e.bounds[0]=a[0],e.bounds[1]=a[1];const s=t.getRange(1);e.bounds[2]=s[0],e.bounds[3]=s[1];const o=t.getRange(2);return e.bounds[4]=o[0],e.bounds[5]=o[1],e.bounds}if(t.getNumberOfComponents()!==2)return rM(`getBounds called on an array with components of
        ${t.getNumberOfComponents()}`),aM;const n=t.getRange(0);e.bounds[0]=n[0],e.bounds[1]=n[1];const r=t.getRange(1);return e.bounds[2]=r[0],e.bounds[3]=r[1],e.bounds[4]=0,e.bounds[5]=0,e.bounds},t.computeBounds=t.getBounds,t.setNumberOfComponents(e.numberOfComponents<2?3:e.numberOfComponents)}const iM={empty:!0,numberOfComponents:3,dataType:rt.FLOAT,bounds:[1,-1,1,-1,1,-1]};function Mx(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,iM,n),Oe.extend(t,e,n),sM(t,e)}const oM=L.newInstance(Mx,"vtkPoints");var $i={newInstance:oM,extend:Mx};function uM(t,e){e.classHierarchy.push("vtkCell"),t.initialize=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(r){e.pointsIds=r;let a=e.points.getData();a.length!==3*e.pointsIds.length&&(a=L.newTypedArray(n.getDataType(),3*e.pointsIds.length));const s=n.getData();e.pointsIds.forEach((o,c)=>{let f=3*o,l=3*c;a[l]=s[f],a[++l]=s[++f],a[++l]=s[++f]}),e.points.setData(a)}else{e.points=n,e.pointsIds=new Array(n.getNumberOfPoints());for(let a=n.getNumberOfPoints()-1;a>=0;--a)e.pointsIds[a]=a}},t.getBounds=()=>{const n=e.points.getNumberOfPoints(),r=[];if(n){e.points.getPoint(0,r),e.bounds[0]=r[0],e.bounds[1]=r[0],e.bounds[2]=r[1],e.bounds[3]=r[1],e.bounds[4]=r[2],e.bounds[5]=r[2];for(let a=1;a<n;a++)e.points.getPoint(a,r),e.bounds[0]=r[0]<e.bounds[0]?r[0]:e.bounds[0],e.bounds[1]=r[0]>e.bounds[1]?r[0]:e.bounds[1],e.bounds[2]=r[1]<e.bounds[2]?r[1]:e.bounds[2],e.bounds[3]=r[1]>e.bounds[3]?r[1]:e.bounds[3],e.bounds[4]=r[2]<e.bounds[4]?r[2]:e.bounds[4],e.bounds[5]=r[2]>e.bounds[5]?r[2]:e.bounds[5]}else V1(e.bounds);return e.bounds},t.getLength2=()=>{t.getBounds();let n=0,r=0;for(let a=0;a<3;a++)r=e.bounds[2*a+1]-e.bounds[2*a],n+=r*r;return n},t.getParametricDistance=n=>{let r,a=0;for(let s=0;s<3;s++)n[s]<0?r=-n[s]:n[s]>1?r=n[s]-1:r=0,r>a&&(a=r);return a},t.getNumberOfPoints=()=>e.points.getNumberOfPoints(),t.deepCopy=n=>{n.initialize(e.points,e.pointsIds)},t.getCellDimension=()=>{},t.intersectWithLine=(n,r,a,s,o,c,f)=>{},t.evaluatePosition=(n,r,a,s,o,c)=>{L.vtkErrorMacro("vtkCell.evaluatePosition is not implemented.")}}const cM={bounds:[-1,-1,-1,-1,-1,-1],pointsIds:[]};function Lx(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,cM,n),L.obj(t,e),e.points||(e.points=$i.newInstance()),L.get(t,e,["points","pointsIds"]),uM(t,e)}const fM=L.newInstance(Lx,"vtkCell");var Tc={newInstance:fM,extend:Lx};function lM(t,e){let n=e;for(e>=t.array.length&&(n+=t.array.length);n>t.array.length;)t.array.push({ncells:0,cells:null});t.array.length=n}function gM(t,e){e.classHierarchy.push("vtkCellLinks"),t.buildLinks=n=>{const r=n.getPoints().getNumberOfPoints(),a=n.getNumberOfCells(),s=new Uint32Array(r);if(n.isA("vtkPolyData")){for(let o=0;o<a;++o){const{cellPointIds:c}=n.getCellPoints(o);c.forEach(f=>{t.incrementLinkCount(f)})}t.allocateLinks(r),e.maxId=r-1;for(let o=0;o<a;++o){const{cellPointIds:c}=n.getCellPoints(o);c.forEach(f=>{t.insertCellReference(f,s[f]++,o)})}}else{for(let o=0;o<a;o++)Tc.newInstance().getPointsIds().forEach(f=>{t.incrementLinkCount(f)});t.allocateLinks(r),e.maxId=r-1;for(let o=0;o<a;++o)Tc.newInstance().getPointsIds().forEach(f=>{t.insertCellReference(f,s[f]++,o)})}},t.allocate=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;e.array=Array(n).fill().map(()=>({ncells:0,cells:null})),e.extend=r,e.maxId=-1},t.initialize=()=>{e.array=null},t.getLink=n=>e.array[n],t.getNcells=n=>e.array[n].ncells,t.getCells=n=>e.array[n].cells,t.insertNextPoint=n=>{e.array.push({ncells:n,cells:Array(n)}),++e.maxId},t.insertNextCellReference=(n,r)=>{e.array[n].cells[e.array[n].ncells++]=r},t.deletePoint=n=>{e.array[n].ncells=0,e.array[n].cells=null},t.removeCellReference=(n,r)=>{e.array[r].cells=e.array[r].cells.filter(a=>a!==n),e.array[r].ncells=e.array[r].cells.length},t.addCellReference=(n,r)=>{e.array[r].cells[e.array[r].ncells++]=n},t.resizeCellList=(n,r)=>{e.array[n].cells.length=r},t.squeeze=()=>{lM(e,e.maxId+1)},t.reset=()=>{e.maxId=-1},t.deepCopy=n=>{e.array=[...n.array],e.extend=n.extend,e.maxId=n.maxId},t.incrementLinkCount=n=>{++e.array[n].ncells},t.allocateLinks=n=>{for(let r=0;r<n;++r)e.array[r].cells=new Array(e.array[r].ncells)},t.insertCellReference=(n,r,a)=>{e.array[n].cells[r]=a}}const pM={array:null,maxId:0,extend:0};function _x(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,pM,n),L.obj(t,e),gM(t,e)}const hM=L.newInstance(_x,"vtkCellLinks");var dM={newInstance:hM,extend:_x};const Ge={VTK_EMPTY_CELL:0,VTK_VERTEX:1,VTK_POLY_VERTEX:2,VTK_LINE:3,VTK_POLY_LINE:4,VTK_TRIANGLE:5,VTK_TRIANGLE_STRIP:6,VTK_POLYGON:7,VTK_PIXEL:8,VTK_QUAD:9,VTK_TETRA:10,VTK_VOXEL:11,VTK_HEXAHEDRON:12,VTK_WEDGE:13,VTK_PYRAMID:14,VTK_PENTAGONAL_PRISM:15,VTK_HEXAGONAL_PRISM:16,VTK_QUADRATIC_EDGE:21,VTK_QUADRATIC_TRIANGLE:22,VTK_QUADRATIC_QUAD:23,VTK_QUADRATIC_POLYGON:36,VTK_QUADRATIC_TETRA:24,VTK_QUADRATIC_HEXAHEDRON:25,VTK_QUADRATIC_WEDGE:26,VTK_QUADRATIC_PYRAMID:27,VTK_BIQUADRATIC_QUAD:28,VTK_TRIQUADRATIC_HEXAHEDRON:29,VTK_QUADRATIC_LINEAR_QUAD:30,VTK_QUADRATIC_LINEAR_WEDGE:31,VTK_BIQUADRATIC_QUADRATIC_WEDGE:32,VTK_BIQUADRATIC_QUADRATIC_HEXAHEDRON:33,VTK_BIQUADRATIC_TRIANGLE:34,VTK_CUBIC_LINE:35,VTK_CONVEX_POINT_SET:41,VTK_POLYHEDRON:42,VTK_PARAMETRIC_CURVE:51,VTK_PARAMETRIC_SURFACE:52,VTK_PARAMETRIC_TRI_SURFACE:53,VTK_PARAMETRIC_QUAD_SURFACE:54,VTK_PARAMETRIC_TETRA_REGION:55,VTK_PARAMETRIC_HEX_REGION:56,VTK_HIGHER_ORDER_EDGE:60,VTK_HIGHER_ORDER_TRIANGLE:61,VTK_HIGHER_ORDER_QUAD:62,VTK_HIGHER_ORDER_POLYGON:63,VTK_HIGHER_ORDER_TETRAHEDRON:64,VTK_HIGHER_ORDER_WEDGE:65,VTK_HIGHER_ORDER_PYRAMID:66,VTK_HIGHER_ORDER_HEXAHEDRON:67,VTK_LAGRANGE_CURVE:68,VTK_LAGRANGE_TRIANGLE:69,VTK_LAGRANGE_QUADRILATERAL:70,VTK_LAGRANGE_TETRAHEDRON:71,VTK_LAGRANGE_HEXAHEDRON:72,VTK_LAGRANGE_WEDGE:73,VTK_LAGRANGE_PYRAMID:74,VTK_NUMBER_OF_CELL_TYPES:75},e1=["vtkEmptyCell","vtkVertex","vtkPolyVertex","vtkLine","vtkPolyLine","vtkTriangle","vtkTriangleStrip","vtkPolygon","vtkPixel","vtkQuad","vtkTetra","vtkVoxel","vtkHexahedron","vtkWedge","vtkPyramid","vtkPentagonalPrism","vtkHexagonalPrism","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkQuadraticEdge","vtkQuadraticTriangle","vtkQuadraticQuad","vtkQuadraticTetra","vtkQuadraticHexahedron","vtkQuadraticWedge","vtkQuadraticPyramid","vtkBiQuadraticQuad","vtkTriQuadraticHexahedron","vtkQuadraticLinearQuad","vtkQuadraticLinearWedge","vtkBiQuadraticQuadraticWedge","vtkBiQuadraticQuadraticHexahedron","vtkBiQuadraticTriangle","vtkCubicLine","vtkQuadraticPolygon","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkConvexPointSet","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkParametricCurve","vtkParametricSurface","vtkParametricTriSurface","vtkParametricQuadSurface","vtkParametricTetraRegion","vtkParametricHexRegion","UnknownClass","UnknownClass","UnknownClass","vtkHigherOrderEdge","vtkHigherOrderTriangle","vtkHigherOrderQuad","vtkHigherOrderPolygon","vtkHigherOrderTetrahedron","vtkHigherOrderWedge","vtkHigherOrderPyramid","vtkHigherOrderHexahedron"];function vM(t){return t<e1.length?e1[t]:"UnknownClass"}function yM(t){return e1.findIndex(t)}function TM(t){return t<Ge.VTK_QUADRATIC_EDGE||t===Ge.VTK_CONVEX_POINT_SET||t===Ge.VTK_POLYHEDRON}function xM(t){return t===Ge.VTK_TRIANGLE_STRIP||t===Ge.VTK_POLY_LINE||t===Ge.VTK_POLY_VERTEX}const SM={getClassNameFromTypeId:vM,getTypeIdFromClassName:yM,isLinear:TM,hasSubCells:xM};function CM(t,e){e.classHierarchy.push("vtkCellTypes"),t.allocate=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:512,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;e.size=n>0?n:1,e.extend=r>0?r:1,e.maxId=-1,e.typeArray=new Uint8Array(n),e.locationArray=new Uint32Array(n)},t.insertCell=(n,r,a)=>{e.typeArray[n]=r,e.locationArray[n]=a,n>e.maxId&&(e.maxId=n)},t.insertNextCell=(n,r)=>(t.insertCell(++e.maxId,n,r),e.maxId),t.setCellTypes=(n,r,a)=>{e.size=n,e.typeArray=r,e.locationArray=a,e.maxId=n-1},t.getCellLocation=n=>e.locationArray[n],t.deleteCell=n=>{e.typeArray[n]=Ge.VTK_EMPTY_CELL},t.getNumberOfTypes=()=>e.maxId+1,t.isType=n=>{const r=t.getNumberOfTypes();for(let a=0;a<r;++a)if(n===t.getCellType(a))return!0;return!1},t.insertNextType=n=>t.insertNextCell(n,-1),t.getCellType=n=>e.typeArray[n],t.reset=()=>{e.maxId=-1},t.deepCopy=n=>{t.allocate(n.getSize(),n.getExtend()),e.typeArray.set(n.getTypeArray()),e.locationArray.set(n.getLocationArray()),e.maxId=n.getMaxId()}}const wM={size:0,maxId:-1,extend:1e3};function Vx(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,wM,n),L.obj(t,e),L.get(t,e,["size","maxId","extend"]),L.getArray(t,e,["typeArray","locationArray"]),CM(t,e)}const EM=L.newInstance(Vx,"vtkCellTypes");var mM={newInstance:EM,extend:Vx,...SM};const RM={NO_INTERSECTION:0,YES_INTERSECTION:1,ON_LINE:2};var kx={IntersectionState:RM};const{IntersectionState:qu}=kx;function hs(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;const a={t:Number.MIN_VALUE,distance:0},s=[];let o;s[0]=n[0]-e[0],s[1]=n[1]-e[1],s[2]=n[2]-e[2];const c=s[0]*(t[0]-e[0])+s[1]*(t[1]-e[1])+s[2]*(t[2]-e[2]),f=Ee(s,s);let l=1e-5*c;return f!==0&&(a.t=c/f),l<0&&(l=-l),-l<f&&f<l||f<=0||a.t<0?o=e:a.t>1?o=n:(o=s,s[0]=e[0]+a.t*s[0],s[1]=e[1]+a.t*s[1],s[2]=e[2]+a.t*s[2]),r&&(r[0]=o[0],r[1]=o[1],r[2]=o[2]),a.distance=Un(o,t),a}function Bx(t,e,n,r,a,s){const o=[],c=[],f=[];a[0]=0,s[0]=0,Ir(e,t,o),Ir(r,n,c),Ir(n,t,f);const l=[Ee(o,o),-Ee(o,c),-Ee(o,c),Ee(c,c)],h=[];if(h[0]=Ee(o,f),h[1]=-Ee(c,f),YO(l,h,2)===0){let g=Number.MAX_VALUE;const d=[t,e,n,r],v=[n,n,t,t],S=[r,r,e,e];s[0],s[0],a[0],a[0],a[0],a[0],s[0],s[0];let T;for(let x=0;x<4;x++)T=hs(d[x],v[x],S[x]),T.distance<g&&(g=T.distance);return qu.ON_LINE}return a[0]=h[0],s[0]=h[1],a[0]>=0&&a[0]<=1&&s[0]>=0&&s[0]<=1?qu.YES_INTERSECTION:qu.NO_INTERSECTION}const OM={distanceToLine:hs,intersection:Bx};function DM(t,e){e.classHierarchy.push("vtkLine");function n(r){return r>=0&&r<=1}t.getCellDimension=()=>1,t.intersectWithLine=(r,a,s,o,c)=>{const f={intersect:0,t:Number.MAX_VALUE,subId:0,betweenPoints:null};c[1]=0,c[2]=0;const l=[],h=[],g=[];e.points.getPoint(0,h),e.points.getPoint(1,g);const d=[],v=[],S=Bx(r,a,h,g,d,v);if(f.t=d[0],f.betweenPoints=n(f.t),c[0]=v[0],S===qu.YES_INTERSECTION){for(let T=0;T<3;T++)o[T]=h[T]+c[0]*(g[T]-h[T]),l[T]=r[T]+f.t*(a[T]-r[T]);if(Un(o,l)<=s*s)return f.intersect=1,f}else{let T;if(f.t<0)return T=hs(r,h,g,o),T.distance<=s*s&&(f.t=0,f.intersect=1,f.betweenPoints=!0),f;if(f.t>1)return T=hs(a,h,g,o),T.distance<=s*s&&(f.t=1,f.intersect=1,f.betweenPoints=!0),f;if(c[0]<0)return c[0]=0,T=hs(h,r,a,o),f.t=T.t,T.distance<=s*s&&(f.intersect=1),f;if(c[0]>1)return c[0]=1,T=hs(g,r,a,o),f.t=T.t,T.distance<=s*s&&(f.intersect=1),f}return f},t.evaluateLocation=(r,a,s)=>{const o=[],c=[];e.points.getPoint(0,o),e.points.getPoint(1,c);for(let f=0;f<3;f++)a[f]=o[f]+r[0]*(c[f]-o[f]);s[0]=1-r[0],s[1]=r[0]},t.evaluateOrientation=(r,a,s)=>e.orientations?(Wu(a,e.orientations[0],e.orientations[1],r[0]),s[0]=1-r[0],s[1]=r[0],!0):!1}const MM={orientations:null};function Fx(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,MM,n),Tc.extend(t,e,n),L.setGet(t,e,["orientations"]),DM(t,e)}const LM=L.newInstance(Fx,"vtkLine");var an={newInstance:LM,extend:Fx,...OM,...kx};function _M(t,e){e.classHierarchy.push("vtkPointSet"),e.points?e.points=Yt(e.points):e.points=$i.newInstance(),t.getNumberOfPoints=()=>e.points.getNumberOfPoints(),t.getBounds=()=>e.points.getBounds(),t.computeBounds=()=>{t.getBounds()};const n=t.shallowCopy;t.shallowCopy=function(r){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;n(r,a),e.points=$i.newInstance(),e.points.shallowCopy(r.getPoints())}}const VM={};function Nx(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,VM,n),ka.extend(t,e,n),L.setGet(t,e,["points"]),_M(t,e)}const kM=L.newInstance(Nx,"vtkPointSet");var BM={newInstance:kM,extend:Nx};function j1(t,e,n,r){const a=n[0]-e[0],s=n[1]-e[1],o=n[2]-e[2],c=t[0]-e[0],f=t[1]-e[1],l=t[2]-e[2];r[0]=s*l-o*f,r[1]=o*c-a*l,r[2]=a*f-s*c}function xc(t,e,n,r){j1(t,e,n,r);const a=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);a!==0&&(r[0]/=a,r[1]/=a,r[2]/=a)}function FM(t,e,n,r,a,s){let o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:1e-6,c=!1;const f=[],l=[],h=[],g=[],d=[];xc(t,e,n,g),xc(r,a,s,d);const v=-Ee(g,t),S=-Ee(d,r),T=[Ee(d,t)+S,Ee(d,e)+S,Ee(d,n)+S];if(T[0]*T[1]>o&&T[0]*T[2]>o)return{intersect:!1,coplanar:c,pt1:f,pt2:l,surfaceId:h};const x=[Ee(g,r)+v,Ee(g,a)+v,Ee(g,s)+v];if(x[0]*x[1]>o&&x[0]*x[2]>o)return{intersect:!1,coplanar:c,pt1:f,pt2:l,surfaceId:h};if(Math.abs(g[0]-d[0])<1e-9&&Math.abs(g[1]-d[1])<1e-9&&Math.abs(g[2]-d[2])<1e-9&&Math.abs(v-S)<1e-9)return c=!0,{intersect:!1,coplanar:c,pt1:f,pt2:l,surfaceId:h};const m=[t,e,n],O=[r,a,s],w=Ee(g,d),R=(v-S*w)/(w*w-1),M=(S-v*w)/(w*w-1),D=[R*g[0]+M*d[0],R*g[1]+M*d[1],R*g[2]+M*d[2]],V=Gi(g,d,[]);xs(V);let B=0,z=0;const k=[],U=[];let H=50,P=50;for(let ae=0;ae<3;ae++){const se=ae,Q=(ae+1)%3,j=Ss.intersectWithLine(m[se],m[Q],r,d);j.intersection&&j.t>0-o&&j.t<1+o&&(j.t<1+o&&j.t>1-o&&(H=B),k[B++]=Ee(j.x,V)-Ee(D,V));const G=Ss.intersectWithLine(O[se],O[Q],t,g);G.intersection&&G.t>0-o&&G.t<1+o&&(G.t<1+o&&G.t>1-o&&(P=z),U[z++]=Ee(G.x,V)-Ee(D,V))}if(B>2){B--;const ae=k[2];k[2]=k[H],k[H]=ae}if(z>2){z--;const ae=U[2];U[2]=U[P],U[P]=ae}if(B!==2||z!==2)return{intersect:!1,coplanar:c,pt1:f,pt2:l,surfaceId:h};if(Number.isNaN(k[0])||Number.isNaN(k[1])||Number.isNaN(U[0])||Number.isNaN(U[1]))return{intersect:!1,coplanar:c,pt1:f,pt2:l,surfaceId:h};if(k[0]>k[1]){const ae=k[1];k[1]=k[0],k[0]=ae}if(U[0]>U[1]){const ae=U[1];U[1]=U[0],U[0]=ae}let A,ne;return k[1]<U[0]||U[1]<k[0]?{intersect:!1,coplanar:c,pt1:f,pt2:l,surfaceId:h}:(k[0]<U[0]?k[1]<U[1]?(h[0]=2,h[1]=1,A=U[0],ne=k[1]):(h[0]=2,h[1]=2,A=U[0],ne=U[1]):k[1]<U[1]?(h[0]=1,h[1]=1,A=k[0],ne=k[1]):(h[0]=1,h[1]=2,A=k[0],ne=U[1]),fv(D,V,A,f),fv(D,V,ne,l),{intersect:!0,coplanar:c,pt1:f,pt2:l,surfaceId:h})}const NM={computeNormalDirection:j1,computeNormal:xc,intersectWithTriangle:FM};function UM(t,e){e.classHierarchy.push("vtkTriangle"),t.getCellDimension=()=>2,t.intersectWithLine=(n,r,a,s,o)=>{const c={subId:0,t:Number.MAX_VALUE,intersect:0,betweenPoints:!1};o[2]=0;const f=[],l=a*a,h=[],g=[],d=[];e.points.getPoint(0,h),e.points.getPoint(1,g),e.points.getPoint(2,d);const v=[],S=[];if(xc(h,g,d,v),v[0]!==0||v[1]!==0||v[2]!==0){const w=Ss.intersectWithLine(n,r,h,v);if(c.betweenPoints=w.betweenPoints,c.t=w.t,s[0]=w.x[0],s[1]=w.x[1],s[2]=w.x[2],!w.intersection)return o[0]=0,o[1]=0,c.intersect=0,c;const R=t.evaluatePosition(s,f,o,S);if(R.evaluation>=0)return R.dist2<=l?(c.intersect=1,c):(c.intersect=R.evaluation,c)}const T=Un(h,g),x=Un(g,d),m=Un(d,h);e.line||(e.line=an.newInstance()),T>x&&T>m?(e.line.getPoints().setPoint(0,h),e.line.getPoints().setPoint(1,g)):x>m&&x>T?(e.line.getPoints().setPoint(0,g),e.line.getPoints().setPoint(1,d)):(e.line.getPoints().setPoint(0,d),e.line.getPoints().setPoint(1,h));const O=e.line.intersectWithLine(n,r,a,s,o);if(c.betweenPoints=O.betweenPoints,c.t=O.t,O.intersect){const w=[],R=[],M=[];for(let D=0;D<3;D++)w[D]=h[D]-d[D],R[D]=g[D]-d[D],M[D]=s[D]-d[D];return o[0]=Ee(M,w)/m,o[1]=Ee(M,R)/x,c.intersect=1,c}return o[0]=0,o[1]=0,c.intersect=0,c},t.evaluatePosition=(n,r,a,s)=>{const o={subId:0,dist2:0,evaluation:-1};let c,f;const l=[],h=[],g=[],d=[];let v;const S=[],T=[],x=[];let m=0,O=0;const w=[];let R,M,D,V=[];const B=[],z=[],k=[];o.subId=0,a[2]=0,e.points.getPoint(1,l),e.points.getPoint(2,h),e.points.getPoint(0,g),j1(l,h,g,d),Ss.generalizedProjectPoint(n,l,d,k);let U=0;for(c=0;c<3;c++)d[c]<0?v=-d[c]:v=d[c],v>U&&(U=v,O=c);for(f=0,c=0;c<3;c++)c!==O&&(w[f++]=c);for(c=0;c<2;c++)S[c]=k[w[c]]-g[w[c]],T[c]=l[w[c]]-g[w[c]],x[c]=h[w[c]]-g[w[c]];if(m=Yu(T,x),m===0)return a[0]=0,a[1]=0,o.evaluation=-1,o;if(a[0]=Yu(S,x)/m,a[1]=Yu(T,S)/m,s[0]=1-(a[0]+a[1]),s[1]=a[0],s[2]=a[1],s[0]>=0&&s[0]<=1&&s[1]>=0&&s[1]<=1&&s[2]>=0&&s[2]<=1)r&&(o.dist2=Un(k,n),r[0]=k[0],r[1]=k[1],r[2]=k[2]),o.evaluation=1;else{let H;if(r){if(s[1]<0&&s[2]<0)for(R=Un(n,g),M=an.distanceToLine(n,l,g,H,B),D=an.distanceToLine(n,g,h,H,z),R<M?(o.dist2=R,V=g):(o.dist2=M,V=B),D<o.dist2&&(o.dist2=D,V=z),c=0;c<3;c++)r[c]=V[c];else if(s[2]<0&&s[0]<0)for(R=Un(n,l),M=an.distanceToLine(n,l,g,H,B),D=an.distanceToLine(n,l,h,H,z),R<M?(o.dist2=R,V=l):(o.dist2=M,V=B),D<o.dist2&&(o.dist2=D,V=z),c=0;c<3;c++)r[c]=V[c];else if(s[1]<0&&s[0]<0)for(R=Un(n,h),M=an.distanceToLine(n,h,g,H,B),D=an.distanceToLine(n,l,h,H,z),R<M?(o.dist2=R,V=h):(o.dist2=M,V=B),D<o.dist2&&(o.dist2=D,V=z),c=0;c<3;c++)r[c]=V[c];else if(s[0]<0){const P=an.distanceToLine(n,l,h,r);o.dist2=P.distance}else if(s[1]<0){const P=an.distanceToLine(n,h,g,r);o.dist2=P.distance}else if(s[2]<0){const P=an.distanceToLine(n,l,g,r);o.dist2=P.distance}}o.evaluation=0}return o},t.evaluateLocation=(n,r,a)=>{const s=[],o=[],c=[];e.points.getPoint(0,s),e.points.getPoint(1,o),e.points.getPoint(2,c);const f=1-n[0]-n[1];for(let l=0;l<3;l++)r[l]=s[l]*f+o[l]*n[0]+c[l]*n[1];a[0]=f,a[1]=n[0],a[2]=n[1]},t.getParametricDistance=n=>{let r,a=0;const s=[];s[0]=n[0],s[1]=n[1],s[2]=1-n[0]-n[1];for(let o=0;o<3;o++)s[o]<0?r=-s[o]:s[o]>1?r=s[o]-1:r=0,r>a&&(a=r);return a}}const GM={};function Ux(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,GM,n),Tc.extend(t,e,n),UM(t,e)}const $M=L.newInstance(Ux,"vtkTriangle");var zM={newInstance:$M,extend:Ux,...NM};const og=["verts","lines","polys","strips"],{vtkWarningMacro:Mv}=L,WM={[Ge.VTK_LINE]:an,[Ge.VTK_POLY_LINE]:an,[Ge.VTK_TRIANGLE]:zM};function HM(t,e){e.classHierarchy.push("vtkPolyData");function n(a){return a.replace(/(?:^\w|[A-Z]|\b\w)/g,s=>s.toUpperCase()).replace(/\s+/g,"")}og.forEach(a=>{t[`getNumberOf${n(a)}`]=()=>e[a].getNumberOfCells(),e[a]?e[a]=Yt(e[a]):e[a]=Dv.newInstance()}),t.getNumberOfCells=()=>og.reduce((a,s)=>a+e[s].getNumberOfCells(),0);const r=t.shallowCopy;t.shallowCopy=function(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;r(a,s),og.forEach(o=>{e[o]=Dv.newInstance(),e[o].shallowCopy(a.getReferenceByName(o))})},t.buildCells=()=>{const a=t.getNumberOfVerts(),s=t.getNumberOfLines(),o=t.getNumberOfPolys(),c=t.getNumberOfStrips(),f=a+s+o+c,l=new Uint8Array(f);let h=l;const g=new Uint32Array(f);let d=g;if(a){let v=0;e.verts.getCellSizes().forEach((S,T)=>{d[T]=v,h[T]=S>1?Ge.VTK_POLY_VERTEX:Ge.VTK_VERTEX,v+=S+1}),d=d.subarray(a),h=h.subarray(a)}if(s){let v=0;e.lines.getCellSizes().forEach((S,T)=>{d[T]=v,h[T]=S>2?Ge.VTK_POLY_LINE:Ge.VTK_LINE,S===1&&Mv("Building VTK_LINE ",T," with only one point, but VTK_LINE needs at least two points. Check the input."),v+=S+1}),d=d.subarray(s),h=h.subarray(s)}if(o){let v=0;e.polys.getCellSizes().forEach((S,T)=>{switch(d[T]=v,S){case 3:h[T]=Ge.VTK_TRIANGLE;break;case 4:h[T]=Ge.VTK_QUAD;break;default:h[T]=Ge.VTK_POLYGON;break}S<3&&Mv("Building VTK_TRIANGLE ",T," with less than three points, but VTK_TRIANGLE needs at least three points. Check the input."),v+=S+1}),d+=d.subarray(o),h+=h.subarray(o)}if(c){let v=0;h.fill(Ge.VTK_TRIANGLE_STRIP,0,c),e.strips.getCellSizes().forEach((S,T)=>{d[T]=v,v+=S+1})}e.cells=mM.newInstance(),e.cells.setCellTypes(f,l,g)},t.buildLinks=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;e.cells===void 0&&t.buildCells(),e.links=dM.newInstance(),a>0?e.links.allocate(a):e.links.allocate(t.getPoints().getNumberOfPoints()),e.links.buildLinks(t)},t.getCellType=a=>e.cells.getCellType(a),t.getCellPoints=a=>{const s=t.getCellType(a);let o=null;switch(s){case Ge.VTK_VERTEX:case Ge.VTK_POLY_VERTEX:o=e.verts;break;case Ge.VTK_LINE:case Ge.VTK_POLY_LINE:o=e.lines;break;case Ge.VTK_TRIANGLE:case Ge.VTK_QUAD:case Ge.VTK_POLYGON:o=e.polys;break;case Ge.VTK_TRIANGLE_STRIP:o=e.strips;break;default:return o=null,{type:0,cellPointIds:null}}const c=e.cells.getCellLocation(a),f=o.getCell(c);return{cellType:s,cellPointIds:f}},t.getPointCells=a=>e.links.getCells(a),t.getCellEdgeNeighbors=(a,s,o)=>{const c=e.links.getLink(s),f=e.links.getLink(o);return c.cells.filter(l=>l!==a&&f.cells.indexOf(l)!==-1)},t.getCell=function(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const o=t.getCellPoints(a),c=s||WM[o.cellType].newInstance();return c.initialize(t.getPoints(),o.cellPointIds),c}}const bM={};function Gx(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,bM,n),BM.extend(t,e,n),L.get(t,e,["cells","links"]),L.setGet(t,e,["verts","lines","polys","strips"]),HM(t,e)}const AM=L.newInstance(Gx,"vtkPolyData");var jn={newInstance:AM,extend:Gx};function jM(t,e){e.classHierarchy.push("vtkTexture"),t.imageLoaded=()=>{e.image.removeEventListener("load",t.imageLoaded),e.imageLoaded=!0,t.modified()},t.setJsImageData=n=>{e.jsImageData!==n&&(n!==null&&(t.setInputData(null),t.setInputConnection(null),e.image=null,e.canvas=null),e.jsImageData=n,e.imageLoaded=!0,t.modified())},t.setCanvas=n=>{e.canvas!==n&&(n!==null&&(t.setInputData(null),t.setInputConnection(null),e.image=null,e.jsImageData=null),e.canvas=n,t.modified())},t.setImage=n=>{e.image!==n&&(n!==null&&(t.setInputData(null),t.setInputConnection(null),e.canvas=null,e.jsImageData=null),e.image=n,e.imageLoaded=!1,n.complete?t.imageLoaded():n.addEventListener("load",t.imageLoaded),t.modified())},t.getDimensionality=()=>{let n=0,r=0,a=1;if(t.getInputData()){const o=t.getInputData();n=o.getDimensions()[0],r=o.getDimensions()[1],a=o.getDimensions()[2]}return e.jsImageData&&(n=e.jsImageData.width,r=e.jsImageData.height),e.canvas&&(n=e.canvas.width,r=e.canvas.height),e.image&&(n=e.image.width,r=e.image.height),(n>1)+(r>1)+(a>1)},t.getInputAsJsImageData=()=>{if(!e.imageLoaded||t.getInputData())return null;if(e.jsImageData)return e.jsImageData();if(e.canvas)return e.canvas.getContext("2d").getImageData(0,0,e.canvas.width,e.canvas.height);if(e.image){const n=document.createElement("canvas");n.width=e.image.width,n.height=e.image.height;const r=n.getContext("2d");return r.translate(0,n.height),r.scale(1,-1),r.drawImage(e.image,0,0,e.image.width,e.image.height),r.getImageData(0,0,n.width,n.height)}return null}}const KM=(t,e,n,r)=>{const a=[1,2,1],s=4,o=a,c=s,f=t.length/(e*n);let l=e,h=n,g=t;const d=[g];for(let v=0;v<r;v++){const S=[...g];l/=2,h/=2,g=new Uint8ClampedArray(l*h*f);const T=f*l;let x=0;for(let O=0;O<g.length;O+=f){O%T===0&&(x+=2*f*l);for(let w=0;w<f;w++){let R=S[x+w];R+=S[x+f+w],R+=S[x-2*T+w],R+=S[x-2*T+f+w],R/=4,g[O+w]=R}x+=2*f}let m=[...g];for(let O=0;O<g.length;O+=f)for(let w=0;w<f;w++){let R=-(o.length-1)/2,M=c,D=0;for(let V=0;V<o.length;V++){let B=O+w+R*f;const z=B%T-(O+w)%T;z>f&&(B+=T),z<-f&&(B-=T),m[B]?D+=m[B]*o[V]:M-=o[V],R+=1}g[O+w]=D/M}m=[...g];for(let O=0;O<g.length;O+=f)for(let w=0;w<f;w++){let R=-(o.length-1)/2,M=c,D=0;for(let V=0;V<o.length;V++){const B=O+w+R*T;m[B]?D+=m[B]*o[V]:M-=o[V],R+=1}g[O+w]=D/M}d.push(g)}return d},PM={image:null,canvas:null,jsImageData:null,imageLoaded:!1,repeat:!1,interpolate:!1,edgeClamp:!1,mipLevel:0,resizable:!1};function $x(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,PM,n),L.obj(t,e),L.algo(t,e,6,0),L.get(t,e,["canvas","image","jsImageData","imageLoaded","resizable"]),L.setGet(t,e,["repeat","edgeClamp","interpolate","mipLevel"]),jM(t,e)}const XM=L.newInstance($x,"vtkTexture"),IM={generateMipmaps:KM};var Vc={newInstance:XM,extend:$x,...IM};const YM=[[-1,0,0],[1,0,0],[0,-1,0],[0,1,0],[0,0,-1],[0,0,1]],Lv=[[8,7,11,3],[9,1,10,5],[4,9,0,8],[2,11,6,10],[0,3,2,1],[4,5,6,7]],Cu=[[0,1],[1,3],[2,3],[0,2],[4,5],[5,7],[6,7],[4,6],[0,4],[1,5],[3,7],[2,6]],_v=[0,1,0,1,0,1,0,1,2,2,2,2],je=[[1,2],[1,2],[0,2],[0,2],[0,1],[0,1]],de=new Float64Array(3),wu=new Float64Array(3),ke=new Float64Array(3),Ea=new Float64Array(3),da=new Float64Array(3),Eu=new Float64Array(3),ug=new Float64Array(16);function cg(t,e){t.strokeStyle=e.strokeColor,t.lineWidth=e.strokeSize,t.fillStyle=e.fontColor,t.font=`${e.fontStyle} ${e.fontSize}px ${e.fontFamily}`}function zx(t){const e=[],n=[];for(let r=0;r<3;r++){const a=_1().domain([t[r*2],t[r*2+1]]);e[r]=a.ticks(5);const s=a.tickFormat(5);n[r]=e[r].map(s)}return{ticks:e,tickStrings:n}}function qM(t,e){e.classHierarchy.push("vtkCubeAxesActorHelper"),t.setRenderable=n=>{e.renderable!==n&&(e.renderable=n,e.tmActor.addTexture(e.renderable.getTmTexture()),e.tmActor.setProperty(n.getProperty()),e.tmActor.setParentProp(n),t.modified())},t.createPolyDataForOneLabel=(n,r,a,s,o,c,f)=>{const l=e.renderable.get_tmAtlas().get(n);if(!l)return;const h=e.renderable.getTextPolyData().getPoints().getData(),g=e.lastSize;de[0]=h[r*3],de[1]=h[r*3+1],de[2]=h[r*3+2],Ve(ke,de,a),ke[0]+=.1,Ve(wu,ke,s),Pr(da,wu,de),ke[0]-=.1,ke[1]+=.1,Ve(wu,ke,s),Pr(Eu,wu,de);for(let S=0;S<3;S++)da[S]/=.5*.1*g[0],Eu[S]/=.5*.1*g[1];let d=f.ptIdx,v=f.cellIdx;de[0]=h[r*3],de[1]=h[r*3+1],de[2]=h[r*3+2],o[0]<-.5?Hr(ke,da,o[0]*c-l.width):o[0]>.5?Hr(ke,da,o[0]*c):Hr(ke,da,o[0]*c-l.width/2),Ri(de,de,ke),Hr(ke,Eu,o[1]*c-l.height/2),Ri(de,de,ke),f.points[d*3]=de[0],f.points[d*3+1]=de[1],f.points[d*3+2]=de[2],f.tcoords[d*2]=l.tcoords[0],f.tcoords[d*2+1]=l.tcoords[1],d++,Hr(ke,da,l.width),Ri(de,de,ke),f.points[d*3]=de[0],f.points[d*3+1]=de[1],f.points[d*3+2]=de[2],f.tcoords[d*2]=l.tcoords[2],f.tcoords[d*2+1]=l.tcoords[3],d++,Hr(ke,Eu,l.height),Ri(de,de,ke),f.points[d*3]=de[0],f.points[d*3+1]=de[1],f.points[d*3+2]=de[2],f.tcoords[d*2]=l.tcoords[4],f.tcoords[d*2+1]=l.tcoords[5],d++,Hr(ke,da,l.width),Pr(de,de,ke),f.points[d*3]=de[0],f.points[d*3+1]=de[1],f.points[d*3+2]=de[2],f.tcoords[d*2]=l.tcoords[6],f.tcoords[d*2+1]=l.tcoords[7],d++,f.polys[v*4]=3,f.polys[v*4+1]=d-4,f.polys[v*4+2]=d-3,f.polys[v*4+3]=d-2,v++,f.polys[v*4]=3,f.polys[v*4+1]=d-4,f.polys[v*4+2]=d-2,f.polys[v*4+3]=d-1,f.ptIdx+=4,f.cellIdx+=2},t.updateTexturePolyData=()=>{const n=e.camera.getCompositeProjectionMatrix(e.lastAspectRatio,-1,1);ze(n,n);const r=e.renderable.getTextValues().length,a=r*4,s=r*2,o=new Float64Array(a*3),c=new Uint16Array(s*4),f=new Float32Array(a*2);Ft(ug,n);const l={ptIdx:0,cellIdx:0,polys:c,points:o,tcoords:f};let h=0,g=0,d=0;const v=e.renderable.getTextPolyData().getPoints().getData(),S=e.renderable.getTextValues();for(;h<v.length/3;){de[0]=v[h*3],de[1]=v[h*3+1],de[2]=v[h*3+2],Ve(ke,de,n),de[0]=v[h*3+3],de[1]=v[h*3+4],de[2]=v[h*3+5],Ve(Ea,de,n),Pr(ke,ke,Ea);const x=[ke[0],ke[1]];KO(x),t.createPolyDataForOneLabel(S[g],h,n,ug,x,e.renderable.getAxisTitlePixelOffset(),l),h+=2,g++;for(let m=0;m<e.renderable.getTickCounts()[d];m++)t.createPolyDataForOneLabel(S[g],h,n,ug,x,e.renderable.getTickLabelPixelOffset(),l),h++,g++;d++}const T=Oe.newInstance({numberOfComponents:2,values:f,name:"TextureCoordinates"});e.tmPolyData.getPointData().setTCoords(T),e.tmPolyData.getPoints().setData(o,3),e.tmPolyData.getPoints().modified(),e.tmPolyData.getPolys().setData(c,1),e.tmPolyData.getPolys().modified(),e.tmPolyData.modified()},t.updateAPISpecificData=(n,r,a)=>{(e.lastSize[0]!==n[0]||e.lastSize[1]!==n[1])&&(e.lastSize[0]=n[0],e.lastSize[1]=n[1],e.lastAspectRatio=n[0]/n[1],e.forceUpdate=!0),e.camera=r,t.updateTexturePolyData()}}const QM=L.newInstance(function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{renderable:null};Object.assign(e,{},n),L.obj(t,e),e.tmPolyData=jn.newInstance(),e.tmMapper=An.newInstance(),e.tmMapper.setInputData(e.tmPolyData),e.tmActor=bn.newInstance({parentProp:t}),e.tmActor.setMapper(e.tmMapper),L.setGet(t,e,["renderable"]),L.get(t,e,["lastSize","lastAspectRatio","axisTextStyle","tickTextStyle","tmActor","ticks"]),e.forceUpdate=!1,e.lastRedrawTime={},L.obj(e.lastRedrawTime,{mtime:0}),e.lastRebuildTime={},L.obj(e.lastRebuildTime,{mtime:0}),e.lastSize=[-1,-1],e.lastTickBounds=[],qM(t,e)},"vtkCubeAxesActorHelper");function ZM(t,e){e.classHierarchy.push("vtkCubeAxesActor"),t.setCamera=r=>{e.camera!==r&&(e.cameraModifiedSub&&(e.cameraModifiedSub.unsubscribe(),e.cameraModifiedSub=null),e.camera=r,r&&(e.cameraModifiedSub=r.onModified(t.update)),t.update(),t.modified())},t.computeFacesToDraw=()=>{const r=e.camera.getViewMatrix();ze(r,r);let a=!1;const s=$e.getDiagonalLength(e.dataBounds),o=Math.sin(e.faceVisibilityAngle*Math.PI/180);for(let c=0;c<6;c++){let f=!1;const l=Math.floor(c/2),h=(l+1)%3,g=(l+2)%3;e.dataBounds[h*2]!==e.dataBounds[h*2+1]&&e.dataBounds[g*2]!==e.dataBounds[g*2+1]&&(de[l]=e.dataBounds[c]-.1*s*YM[c][l],de[h]=.5*(e.dataBounds[h*2]+e.dataBounds[h*2+1]),de[g]=.5*(e.dataBounds[g*2]+e.dataBounds[g*2+1]),Ve(ke,de,r),de[l]=e.dataBounds[c],Ve(Ea,de,r),Pr(ke,Ea,ke),Xr(ke,ke),f=ke[2]>o,e.camera.getParallelProjection()||(Xr(Ea,Ea),f=y1(Ea,ke)>o)),f!==e.lastFacesToDraw[c]&&(e.lastFacesToDraw[c]=f,a=!0)}return a},t.updatePolyData=(r,a,s)=>{let o=0,c=0;o+=8;let f=0;for(let v=0;v<12;v++)a[v]>0&&f++;if(c+=f,e.gridLines)for(let v=0;v<6;v++)r[v]&&(o+=s[je[v][0]].length*2+s[je[v][1]].length*2,c+=s[je[v][0]].length+s[je[v][1]].length);const l=new Float64Array(o*3),h=new Uint32Array(c*3);let g=0,d=0;for(let v=0;v<2;v++)for(let S=0;S<2;S++)for(let T=0;T<2;T++)l[g*3]=e.dataBounds[T],l[g*3+1]=e.dataBounds[2+S],l[g*3+2]=e.dataBounds[4+v],g++;for(let v=0;v<12;v++)a[v]>0&&(h[d*3]=2,h[d*3+1]=Cu[v][0],h[d*3+2]=Cu[v][1],d++);if(e.gridLines){for(let v=0;v<6;v++)if(r[v]){const S=Math.floor(v/2);let T=s[je[v][0]];for(let x=0;x<T.length;x++)l[g*3+S]=e.dataBounds[v],l[g*3+je[v][0]]=T[x],l[g*3+je[v][1]]=e.dataBounds[je[v][1]*2],g++,l[g*3+S]=e.dataBounds[v],l[g*3+je[v][0]]=T[x],l[g*3+je[v][1]]=e.dataBounds[je[v][1]*2+1],g++,h[d*3]=2,h[d*3+1]=g-2,h[d*3+2]=g-1,d++;T=s[je[v][1]];for(let x=0;x<T.length;x++)l[g*3+S]=e.dataBounds[v],l[g*3+je[v][1]]=T[x],l[g*3+je[v][0]]=e.dataBounds[je[v][0]*2],g++,l[g*3+S]=e.dataBounds[v],l[g*3+je[v][1]]=T[x],l[g*3+je[v][0]]=e.dataBounds[je[v][0]*2+1],g++,h[d*3]=2,h[d*3+1]=g-2,h[d*3+2]=g-1,d++}}e.polyData.getPoints().setData(l,3),e.polyData.getPoints().modified(),e.polyData.getLines().setData(h,1),e.polyData.getLines().modified(),e.polyData.modified()},t.updateTextData=(r,a,s,o)=>{let c=0;for(let v=0;v<12;v++)a[v]===1&&(c+=2,c+=s[_v[v]].length);const f=e.polyData.getPoints().getData(),l=new Float64Array(c*3);let h=0,g=0,d=0;for(let v=0;v<6;v++)if(r[v])for(let S=0;S<4;S++){const T=Lv[v][S];if(a[T]===1){const x=_v[T],m=Cu[T][0]*3,O=Cu[T][1]*3;l[h*3]=.5*(f[m]+f[O]),l[h*3+1]=.5*(f[m+1]+f[O+1]),l[h*3+2]=.5*(f[m+2]+f[O+2]),h++;const w=Math.floor(v/2);l[h*3+w]=e.dataBounds[v],l[h*3+je[v][0]]=.5*(e.dataBounds[je[v][0]*2]+e.dataBounds[je[v][0]*2+1]),l[h*3+je[v][1]]=.5*(e.dataBounds[je[v][1]*2]+e.dataBounds[je[v][1]*2+1]),h++,e.textValues[g]=e.axisLabels[x],g++;const R=(x+1)%3,M=(x+2)%3,D=s[x],V=o[x];e.tickCounts[d]=D.length;for(let B=0;B<D.length;B++)l[h*3+x]=D[B],l[h*3+R]=f[m+R],l[h*3+M]=f[m+M],h++,e.textValues[g]=V[B],g++;d++}}e.textPolyData.getPoints().setData(l,3),e.textPolyData.modified()},t.update=()=>{if(!e.camera)return;const r=t.computeFacesToDraw(),a=e.lastFacesToDraw;let s=!1;for(let o=0;o<6;o++)e.dataBounds[o]!==e.lastTickBounds[o]&&(s=!0,e.lastTickBounds[o]=e.dataBounds[o]);if(r||s||e.forceUpdate){const o=new Array(12).fill(0);for(let f=0;f<6;f++)if(a[f])for(let l=0;l<4;l++)o[Lv[f][l]]++;const c=e.generateTicks(e.dataBounds);t.updatePolyData(a,o,c.ticks),t.updateTextData(a,o,c.ticks,c.tickStrings),(s||e.forceUpdate)&&t.updateTextureAtlas(c.tickStrings)}e.forceUpdate=!1},t.updateTextureAtlas=r=>{e.tmContext.textBaseline="bottom",e.tmContext.textAlign="left",e._tmAtlas.clear();let a=0,s=1;for(let o=0;o<3;o++){if(!e._tmAtlas.has(e.axisLabels[o])){cg(e.tmContext,e.axisTextStyle);const c=e.tmContext.measureText(e.axisLabels[o]),f={height:c.actualBoundingBoxAscent+2,startingHeight:s,width:c.width+2,textStyle:e.axisTextStyle};e._tmAtlas.set(e.axisLabels[o],f),s+=f.height,a<f.width&&(a=f.width)}cg(e.tmContext,e.tickTextStyle);for(let c=0;c<r[o].length;c++)if(!e._tmAtlas.has(r[o][c])){const f=e.tmContext.measureText(r[o][c]),l={height:f.actualBoundingBoxAscent+2,startingHeight:s,width:f.width+2,textStyle:e.tickTextStyle};e._tmAtlas.set(r[o][c],l),s+=l.height,a<l.width&&(a=l.width)}}a=wn(a),s=wn(s),e._tmAtlas.forEach(o=>{o.tcoords=[0,(s-o.startingHeight-o.height)/s,o.width/a,(s-o.startingHeight-o.height)/s,o.width/a,(s-o.startingHeight)/s,0,(s-o.startingHeight)/s]}),e.tmCanvas.width=a,e.tmCanvas.height=s,e.tmContext.textBaseline="bottom",e.tmContext.textAlign="left",e.tmContext.clearRect(0,0,a,s),e._tmAtlas.forEach((o,c)=>{cg(e.tmContext,o.textStyle),e.tmContext.fillText(c,1,o.startingHeight+o.height-1)}),e.tmTexture.setCanvas(e.tmCanvas),e.tmTexture.modified()},t.onModified(()=>{e.forceUpdate=!0,t.update()}),t.setTickTextStyle=r=>{e.tickTextStyle={...e.tickTextStyle,...r},t.modified()},t.setAxisTextStyle=r=>{e.axisTextStyle={...e.axisTextStyle,...r},t.modified()},t.get_tmAtlas=()=>e._tmAtlas,t.getBounds=()=>(t.update(),$e.setBounds(e.bounds,e.gridActor.getBounds()),$e.scaleAboutCenter(e.bounds,e.boundsScaleFactor,e.boundsScaleFactor,e.boundsScaleFactor),e.bounds);const n=L.chain(t.setProperty,e.gridActor.setProperty);t.setProperty=r=>n(r)[0]}function JM(t,e,n){return{boundsScaleFactor:1.3,camera:null,dataBounds:[...$e.INIT_BOUNDS],faceVisibilityAngle:8,gridLines:!0,axisLabels:null,axisTitlePixelOffset:35,tickLabelPixelOffset:12,generateTicks:zx,...n,axisTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:18,fontFamily:"serif",...n==null?void 0:n.axisTextStyle},tickTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:14,fontFamily:"serif",...n==null?void 0:n.tickTextStyle}}}function Wx(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};bn.extend(t,e,JM(t,e,n)),e.lastFacesToDraw=[!1,!1,!1,!1,!1,!1],e.axisLabels=["X-Axis","Y-Axis","Z-Axis"],e.tickCounts=[],e.textValues=[],e.lastTickBounds=[],e.tmCanvas=document.createElement("canvas"),e.tmContext=e.tmCanvas.getContext("2d"),e._tmAtlas=new Map,e.tmTexture=Vc.newInstance({resizable:!0}),e.tmTexture.setInterpolate(!1),t.getProperty().setDiffuse(0),t.getProperty().setAmbient(1),e.gridMapper=An.newInstance(),e.polyData=jn.newInstance(),e.gridMapper.setInputData(e.polyData),e.gridActor=bn.newInstance(),e.gridActor.setMapper(e.gridMapper),e.gridActor.setProperty(t.getProperty()),e.gridActor.setParentProp(t),e.textPolyData=jn.newInstance(),L.setGet(t,e,["axisTitlePixelOffset","boundsScaleFactor","faceVisibilityAngle","gridLines","tickLabelPixelOffset","generateTicks"]),L.setGetArray(t,e,["dataBounds"],6),L.setGetArray(t,e,["axisLabels"],3),L.get(t,e,["axisTextStyle","tickTextStyle","camera","tmTexture","textValues","textPolyData","tickCounts","gridActor"]),ZM(t,e)}const eL=L.newInstance(Wx,"vtkCubeAxesActor");var K1={newInstance:eL,extend:Wx,newCubeAxesActorHelper:QM,defaultGenerateTicks:zx};function tL(t,e){e.classHierarchy.push("vtkOpenGLCubeAxesActor"),t.buildPass=n=>{n&&(e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.CubeAxesActorHelper.getRenderable()||e.CubeAxesActorHelper.setRenderable(e.renderable),t.prepareNodes(),t.addMissingNode(e.CubeAxesActorHelper.getTmActor()),t.addMissingNode(e.renderable.getGridActor()),t.removeUnusedNodes())},t.opaquePass=(n,r)=>{if(n){const a=e._openGLRenderer?e._openGLRenderer.getRenderable().getActiveCamera():null,s=e._openGLRenderer.getTiledSizeAndOrigin();e.CubeAxesActorHelper.updateAPISpecificData([s.usize,s.vsize],a,e._openGLRenderWindow.getRenderable())}}}const nL={};function rL(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,nL,n),qe.extend(t,e,n),e.CubeAxesActorHelper=K1.newCubeAxesActorHelper(),tL(t,e)}const aL=Ne(rL,"vtkOpenGLCubeAxesActor");cn("vtkCubeAxesActor",aL);const _i={ARRAY_BUFFER:0,ELEMENT_ARRAY_BUFFER:1,TEXTURE_BUFFER:2};var Hx={ObjectType:_i};const{ObjectType:Qu}=Hx,sL={};function iL(t,e){e.classHierarchy.push("vtkOpenGLBufferObject");function n(c){switch(c){case Qu.ELEMENT_ARRAY_BUFFER:return e.context.ELEMENT_ARRAY_BUFFER;case Qu.TEXTURE_BUFFER:if("TEXTURE_BUFFER"in e.context)return e.context.TEXTURE_BUFFER;case Qu.ARRAY_BUFFER:default:return e.context.ARRAY_BUFFER}}let r=null,a=null,s=!0,o="";t.getType=()=>r,t.setType=c=>{r=c},t.getHandle=()=>a,t.isReady=()=>s===!1,t.generateBuffer=c=>{const f=n(c);return a===null&&(a=e.context.createBuffer(),r=c),n(r)===f},t.upload=(c,f)=>t.generateBuffer(f)?(e.context.bindBuffer(n(r),a),e.context.bufferData(n(r),c,e.context.STATIC_DRAW),e.allocatedGPUMemoryInBytes=c.length*c.BYTES_PER_ELEMENT,s=!1,!0):(o="Trying to upload array buffer to incompatible buffer.",!1),t.bind=()=>a?(e.context.bindBuffer(n(r),a),!0):!1,t.release=()=>a?(e.context.bindBuffer(n(r),null),!0):!1,t.releaseGraphicsResources=()=>{a!==null&&(e.context.bindBuffer(n(r),null),e.context.deleteBuffer(a),a=null,e.allocatedGPUMemoryInBytes=0)},t.setOpenGLRenderWindow=c=>{e._openGLRenderWindow!==c&&(t.releaseGraphicsResources(),e._openGLRenderWindow=c,e.context=null,c&&(e.context=e._openGLRenderWindow.getContext()))},t.getError=()=>o}const oL={objectType:Qu.ARRAY_BUFFER,context:null,allocatedGPUMemoryInBytes:0};function bx(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,oL,n),L.obj(t,e),L.get(t,e,["_openGLRenderWindow","allocatedGPUMemoryInBytes"]),L.moveToProtected(t,e,["openGLRenderWindow"]),iL(t,e)}const uL=L.newInstance(bx);var Ax={newInstance:uL,extend:bx,...sL,...Hx};const{vtkErrorMacro:Vv}=L;function cL(t,e){const n=new Float64Array(3);dm(n,e);const r=new Float64Array(16);return _y(r,_a(),t,n),r}function fL(t,e){return t===null||e===null?!1:!(dd(t,[0,0,0])&&dd(e,[1,1,1]))}function lL(t,e){e.classHierarchy.push("vtkOpenGLCellArrayBufferObject"),t.setType(_i.ARRAY_BUFFER),t.createVBO=function(n,r,a,s){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(!n.getData()||!n.getData().length)return e.elementCount=0,0;e.blockSize=3,e.vertexOffset=0,e.normalOffset=0,e.tCoordOffset=0,e.tCoordComponents=0,e.colorComponents=0,e.colorOffset=0,e.customData=[];const c=s.points.getData();let f=null,l=null,h=null;const g=s.colors?s.colors.getNumberOfComponents():0,d=s.tcoords?s.tcoords.getNumberOfComponents():0;s.normals&&(e.normalOffset=4*e.blockSize,e.blockSize+=3,f=s.normals.getData()),s.customAttributes&&s.customAttributes.forEach(j=>{j&&(e.customData.push({data:j.getData(),offset:4*e.blockSize,components:j.getNumberOfComponents(),name:j.getName()}),e.blockSize+=j.getNumberOfComponents())}),s.tcoords&&(e.tCoordOffset=4*e.blockSize,e.tCoordComponents=d,e.blockSize+=d,l=s.tcoords.getData()),s.colors?(e.colorComponents=s.colors.getNumberOfComponents(),e.colorOffset=0,h=s.colors.getData(),e.colorBO||(e.colorBO=Ax.newInstance()),e.colorBO.setOpenGLRenderWindow(e._openGLRenderWindow)):e.colorBO=null,e.stride=4*e.blockSize;let v=0,S=0,T=0,x=0,m=0,O=0,w;const R={anythingToPoints(j,G,N,b){for(let q=0;q<j;++q)w(G[N+q],b)},linesToWireframe(j,G,N,b){for(let q=0;q<j-1;++q)w(G[N+q],b),w(G[N+q+1],b)},polysToWireframe(j,G,N,b){if(j>2)for(let q=0;q<j;++q)w(G[N+q],b),w(G[N+(q+1)%j],b)},stripsToWireframe(j,G,N,b){if(j>2){for(let q=0;q<j-1;++q)w(G[N+q],b),w(G[N+q+1],b);for(let q=0;q<j-2;q++)w(G[N+q],b),w(G[N+q+2],b)}},polysToSurface(j,G,N,b){for(let q=0;q<j-2;q++)w(G[N+0],b),w(G[N+q+1],b),w(G[N+q+2],b)},stripsToSurface(j,G,N,b){for(let q=0;q<j-2;q++)w(G[N+q],b),w(G[N+q+1+q%2],b),w(G[N+q+1+(q+1)%2],b)}},M={anythingToPoints(j,G){return j},linesToWireframe(j,G){return j>1?(j-1)*2:0},polysToWireframe(j,G){return j>2?j*2:0},stripsToWireframe(j,G){return j>2?j*4-6:0},polysToSurface(j,G){return j>2?(j-2)*3:0},stripsToSurface(j,G,N){return j>2?(j-2)*3:0}};let D=null,V=null;a===on.POINTS||r==="verts"?(D=R.anythingToPoints,V=M.anythingToPoints):a===on.WIREFRAME||r==="lines"?(D=R[`${r}ToWireframe`],V=M[`${r}ToWireframe`]):(D=R[`${r}ToSurface`],V=M[`${r}ToSurface`]);const B=n.getData(),z=B.length;let k=0;for(let j=0;j<z;)k+=V(B[j],B),j+=B[j]+1;let U=null;const H=new Float32Array(k*e.blockSize);h&&(U=new Uint8Array(k*4));let P=0,A=0,ne=0,ae=0;for(let j=0;j<3;++j){const G=s.points.getRange(j),N=G[1]-G[0];ne+=N*N;const b=.5*(G[1]+G[0]);ae+=b*b}if(ne>0&&(Math.abs(ae)/ne>1e6||Math.abs(Math.log10(ne))>3||ne===0&&ae>1e6)){const j=new Float64Array(3),G=new Float64Array(3);for(let N=0;N<3;++N){const b=s.points.getRange(N),q=b[1]-b[0];j[N]=.5*(b[1]+b[0]),G[N]=q>0?1/q:1}t.setCoordShiftAndScale(j,G)}else e.coordShiftAndScaleEnabled===!0&&t.setCoordShiftAndScale(null,null);if(o)if(!o.points&&!o.cells)o.points=new Int32Array(k),o.cells=new Int32Array(k);else{const j=new Int32Array(k+o.points.length);j.set(o.points),o.points=j;const G=new Int32Array(k+o.cells.length);G.set(o.cells),o.cells=G}let Q=s.vertexOffset;w=function(G,N){if(o&&(o.points[Q]=G,o.cells[Q]=O+s.cellOffset),++Q,v=G*3,e.coordShiftAndScaleEnabled?(H[P++]=(c[v++]-e.coordShift[0])*e.coordScale[0],H[P++]=(c[v++]-e.coordShift[1])*e.coordScale[1],H[P++]=(c[v++]-e.coordShift[2])*e.coordScale[2]):(H[P++]=c[v++],H[P++]=c[v++],H[P++]=c[v++]),f!==null&&(s.haveCellNormals?S=(O+s.cellOffset)*3:S=G*3,H[P++]=f[S++],H[P++]=f[S++],H[P++]=f[S++]),e.customData.forEach(b=>{m=G*b.components;for(let q=0;q<b.components;++q)H[P++]=b.data[m++]}),l!==null){s.useTCoordsPerCell?T=N*d:T=G*d;for(let b=0;b<d;++b)H[P++]=l[T++]}h!==null&&(s.haveCellScalars?x=(O+s.cellOffset)*g:x=G*g,U[A++]=h[x++],U[A++]=h[x++],U[A++]=h[x++],U[A++]=g===4?h[x++]:255)};for(let j=0;j<z;j+=B[j]+1,O++)D(B[j],B,j+1,O+s.cellOffset);return e.elementCount=k,t.upload(H,_i.ARRAY_BUFFER),e.colorBO&&(e.colorBOStride=4,e.colorBO.upload(U,_i.ARRAY_BUFFER)),O},t.setCoordShiftAndScale=(n,r)=>{if(n!==null&&(n.constructor!==Float64Array||n.length!==3)){Vv("Wrong type for coordShift, expected vec3 or null");return}if(r!==null&&(r.constructor!==Float64Array||r.length!==3)){Vv("Wrong type for coordScale, expected vec3 or null");return}(e.coordShift===null||n===null||!vd(n,e.coordShift))&&(e.coordShift=n),(e.coordScale===null||r===null||!vd(r,e.coordScale))&&(e.coordScale=r),e.coordShiftAndScaleEnabled=fL(e.coordShift,e.coordScale),e.coordShiftAndScaleEnabled?e.inverseShiftAndScaleMatrix=cL(e.coordShift,e.coordScale):e.inverseShiftAndScaleMatrix=null}}const gL={elementCount:0,stride:0,colorBOStride:0,vertexOffset:0,normalOffset:0,tCoordOffset:0,tCoordComponents:0,colorOffset:0,colorComponents:0,tcoordBO:null,customData:[],coordShift:null,coordScale:null,coordShiftAndScaleEnabled:!1,inverseShiftAndScaleMatrix:null};function jx(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,gL,n),Ax.extend(t,e,n),L.setGet(t,e,["colorBO","elementCount","stride","colorBOStride","vertexOffset","normalOffset","tCoordOffset","tCoordComponents","colorOffset","colorComponents","customData"]),L.get(t,e,["coordShift","coordScale","coordShiftAndScaleEnabled","inverseShiftAndScaleMatrix"]),lL(t,e)}const pL=L.newInstance(jx);var hL={newInstance:pL,extend:jx};const{vtkErrorMacro:dL}=L;function vL(t,e){e.classHierarchy.push("vtkShader"),t.compile=()=>{let n=e.context.VERTEX_SHADER;if(!e.source||!e.source.length||e.shaderType==="Unknown")return!1;switch(e.handle!==0&&(e.context.deleteShader(e.handle),e.handle=0),e.shaderType){case"Fragment":n=e.context.FRAGMENT_SHADER;break;case"Vertex":default:n=e.context.VERTEX_SHADER;break}if(e.handle=e.context.createShader(n),e.context.shaderSource(e.handle,e.source),e.context.compileShader(e.handle),!e.context.getShaderParameter(e.handle,e.context.COMPILE_STATUS)){const a=e.context.getShaderInfoLog(e.handle);return dL(`Error compiling shader '${e.source}': ${a}`),e.context.deleteShader(e.handle),e.handle=0,!1}return!0},t.cleanup=()=>{e.shaderType==="Unknown"||e.handle===0||(e.context.deleteShader(e.handle),e.handle=0,e.dirty=!0)}}const yL={shaderType:"Unknown",source:"",error:"",handle:0,dirty:!1,context:null};function Kx(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,yL,n),L.obj(t,e),L.setGet(t,e,["shaderType","source","error","handle","context"]),vL(t,e)}const TL=L.newInstance(Kx,"vtkShader");var fg={newInstance:TL,extend:Kx};const{vtkErrorMacro:kn}=L;function xL(t,e,n,r){const a=typeof n=="string"?n:n.join(`
`),s=r===!1?e:new RegExp(e,"g"),o=t.replace(s,a);return{replace:o!==a,result:o}}function SL(t,e){e.classHierarchy.push("vtkShaderProgram"),t.compileShader=()=>e.vertexShader.compile()?e.fragmentShader.compile()?!t.attachShader(e.vertexShader)||!t.attachShader(e.fragmentShader)?(kn(e.error),0):t.link()?(t.setCompiled(!0),1):(kn(`Links failed: ${e.error}`),0):(kn(e.fragmentShader.getSource().split(`
`).map((n,r)=>`${r}: ${n}`).join(`
`)),kn(e.fragmentShader.getError()),0):(kn(e.vertexShader.getSource().split(`
`).map((n,r)=>`${r}: ${n}`).join(`
`)),kn(e.vertexShader.getError()),0),t.cleanup=()=>{e.shaderType==="Unknown"||e.handle===0||(t.release(),e.vertexShaderHandle!==0&&(e.context.detachShader(e.handle,e.vertexShaderHandle),e.vertexShaderHandle=0),e.fragmentShaderHandle!==0&&(e.context.detachShader(e.handle,e.fragmentShaderHandle),e.fragmentShaderHandle=0),e.context.deleteProgram(e.handle),e.handle=0,t.setCompiled(!1))},t.bind=()=>!e.linked&&!t.link()?!1:(e.context.useProgram(e.handle),t.setBound(!0),!0),t.isBound=()=>!!e.bound,t.release=()=>{e.context.useProgram(null),t.setBound(!1)},t.setContext=n=>{e.vertexShader.setContext(n),e.fragmentShader.setContext(n),e.geometryShader.setContext(n)},t.link=()=>{if(e.linked)return!0;if(e.handle===0)return e.error="Program has not been initialized, and/or does not have shaders.",!1;if(e.uniformLocs={},e.context.linkProgram(e.handle),!e.context.getProgramParameter(e.handle,e.context.LINK_STATUS)){const r=e.context.getProgramInfoLog(e.handle);return kn(`Error linking shader ${r}`),e.handle=0,!1}return t.setLinked(!0),e.attributeLocs={},!0},t.setUniformMatrix=(n,r)=>{const a=t.findUniform(n);if(a===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;const s=new Float32Array(r);return e.context.uniformMatrix4fv(a,!1,s),!0},t.setUniformMatrix3x3=(n,r)=>{const a=t.findUniform(n);if(a===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;const s=new Float32Array(r);return e.context.uniformMatrix3fv(a,!1,s),!0},t.setUniformf=(n,r)=>{const a=t.findUniform(n);return a===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform1f(a,r),!0)},t.setUniformfv=(n,r)=>{const a=t.findUniform(n);return a===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform1fv(a,r),!0)},t.setUniformi=(n,r)=>{const a=t.findUniform(n);return a===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform1i(a,r),!0)},t.setUniformiv=(n,r)=>{const a=t.findUniform(n);return a===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform1iv(a,r),!0)},t.setUniform2f=(n,r,a)=>{const s=t.findUniform(n);if(s===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;if(a===void 0)throw new RangeError("Invalid number of values for array");return e.context.uniform2f(s,r,a),!0},t.setUniform2fv=(n,r)=>{const a=t.findUniform(n);return a===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform2fv(a,r),!0)},t.setUniform2i=(n,r,a)=>{const s=t.findUniform(n);if(s===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;if(a===void 0)throw new RangeError("Invalid number of values for array");return e.context.uniform2i(s,r,a),!0},t.setUniform2iv=(n,r)=>{const a=t.findUniform(n);return a===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform2iv(a,r),!0)},t.setUniform3f=(n,r,a,s)=>{const o=t.findUniform(n);if(o===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;if(s===void 0)throw new RangeError("Invalid number of values for array");return e.context.uniform3f(o,r,a,s),!0},t.setUniform3fArray=(n,r)=>{const a=t.findUniform(n);if(a===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;if(!Array.isArray(r)||r.length!==3)throw new RangeError("Invalid number of values for array");return e.context.uniform3f(a,r[0],r[1],r[2]),!0},t.setUniform3fv=(n,r)=>{const a=t.findUniform(n);return a===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform3fv(a,r),!0)},t.setUniform3i=function(n){const r=t.findUniform(n);if(r===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;for(var a=arguments.length,s=new Array(a>1?a-1:0),o=1;o<a;o++)s[o-1]=arguments[o];let c=s;if(c.length===1&&Array.isArray(c[0])&&(c=c[0]),c.length!==3)throw new RangeError("Invalid number of values for array");return e.context.uniform3i(r,c[0],c[1],c[2]),!0},t.setUniform3iv=(n,r)=>{const a=t.findUniform(n);return a===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform3iv(a,r),!0)},t.setUniform4f=function(n){const r=t.findUniform(n);if(r===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;for(var a=arguments.length,s=new Array(a>1?a-1:0),o=1;o<a;o++)s[o-1]=arguments[o];let c=s;if(c.length===1&&Array.isArray(c[0])&&(c=c[0]),c.length!==4)throw new RangeError("Invalid number of values for array");return e.context.uniform4f(r,c[0],c[1],c[2],c[3]),!0},t.setUniform4fv=(n,r)=>{const a=t.findUniform(n);return a===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform4fv(a,r),!0)},t.setUniform4i=function(n){const r=t.findUniform(n);if(r===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;for(var a=arguments.length,s=new Array(a>1?a-1:0),o=1;o<a;o++)s[o-1]=arguments[o];let c=s;if(c.length===1&&Array.isArray(c[0])&&(c=c[0]),c.length!==4)throw new RangeError("Invalid number of values for array");return e.context.uniform4i(r,c[0],c[1],c[2],c[3]),!0},t.setUniform4iv=(n,r)=>{const a=t.findUniform(n);return a===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform4iv(a,r),!0)},t.findUniform=n=>{if(!n||!e.linked)return-1;let r=e.uniformLocs[n];return r!==void 0?r:(r=e.context.getUniformLocation(e.handle,n),r===null?(e.error=`Uniform ${n} not found in current shader program.`,e.uniformLocs[n]=-1,-1):(e.uniformLocs[n]=r,r))},t.isUniformUsed=n=>{if(!n)return!1;let r=e.uniformLocs[n];return r!==void 0?r!==null:e.linked?(r=e.context.getUniformLocation(e.handle,n),e.uniformLocs[n]=r,r!==null):(kn("attempt to find uniform when the shader program is not linked"),!1)},t.isAttributeUsed=n=>{if(!n)return!1;if(n in e.attributeLocs)return!0;if(!e.linked)return kn("attempt to find uniform when the shader program is not linked"),!1;const r=e.context.getAttribLocation(e.handle,n);return r===-1?!1:(e.attributeLocs[n]=r,!0)},t.attachShader=n=>{if(n.getHandle()===0)return e.error="Shader object was not initialized, cannot attach it.",!1;if(n.getShaderType()==="Unknown")return e.error="Shader object is of type Unknown and cannot be used.",!1;if(e.handle===0){const r=e.context.createProgram();if(r===0)return e.error="Could not create shader program.",!1;e.handle=r,e.linked=!1}return n.getShaderType()==="Vertex"&&(e.vertexShaderHandle!==0&&e.context.detachShader(e.handle,e.vertexShaderHandle),e.vertexShaderHandle=n.getHandle()),n.getShaderType()==="Fragment"&&(e.fragmentShaderHandle!==0&&e.context.detachShader(e.handle,e.fragmentShaderHandle),e.fragmentShaderHandle=n.getHandle()),e.context.attachShader(e.handle,n.getHandle()),t.setLinked(!1),!0},t.detachShader=n=>{if(n.getHandle()===0)return e.error="shader object was not initialized, cannot attach it.",!1;if(n.getShaderType()==="Unknown")return e.error="Shader object is of type Unknown and cannot be used.",!1;switch(e.handle===0&&(e.error="This shader program has not been initialized yet."),n.getShaderType()){case"Vertex":return e.vertexShaderHandle!==n.getHandle()?(e.error="The supplied shader was not attached to this program.",!1):(e.context.detachShader(e.handle,n.getHandle()),e.vertexShaderHandle=0,e.linked=!1,!0);case"Fragment":return e.fragmentShaderHandle!==n.getHandle()?(e.error="The supplied shader was not attached to this program.",!1):(e.context.detachShader(e.handle,n.getHandle()),e.fragmentShaderHandle=0,e.linked=!1,!0);default:return!1}},t.setContext=n=>{e.context=n,e.vertexShader.setContext(n),e.fragmentShader.setContext(n),e.geometryShader.setContext(n)},t.setLastCameraMTime=n=>{e.lastCameraMTime=n}}const CL={vertexShaderHandle:0,fragmentShaderHandle:0,geometryShaderHandle:0,vertexShader:null,fragmentShader:null,geometryShader:null,linked:!1,bound:!1,compiled:!1,error:"",handle:0,numberOfOutputs:0,attributesLocs:null,uniformLocs:null,md5Hash:0,context:null,lastCameraMTime:null};function Px(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,CL,n),e.attributesLocs={},e.uniformLocs={},e.vertexShader=fg.newInstance(),e.vertexShader.setShaderType("Vertex"),e.fragmentShader=fg.newInstance(),e.fragmentShader.setShaderType("Fragment"),e.geometryShader=fg.newInstance(),e.geometryShader.setShaderType("Geometry"),L.obj(t,e),L.get(t,e,["lastCameraMTime"]),L.setGet(t,e,["error","handle","compiled","bound","md5Hash","vertexShader","fragmentShader","geometryShader","linked"]),SL(t,e)}const wL=L.newInstance(Px,"vtkShaderProgram");var Z={newInstance:wL,extend:Px,substitute:xL};function EL(t,e){e.classHierarchy.push("vtkOpenGLVertexArrayObject"),t.exposedMethod=()=>{},t.initialize=()=>{e.instancingExtension=null,e._openGLRenderWindow.getWebgl2()||(e.instancingExtension=e.context.getExtension("ANGLE_instanced_arrays")),!e.forceEmulation&&e._openGLRenderWindow&&e._openGLRenderWindow.getWebgl2()?(e.extension=null,e.supported=!0,e.handleVAO=e.context.createVertexArray()):(e.extension=e.context.getExtension("OES_vertex_array_object"),!e.forceEmulation&&e.extension?(e.supported=!0,e.handleVAO=e.extension.createVertexArrayOES()):e.supported=!1)},t.isReady=()=>e.handleVAO!==0||e.supported===!1,t.bind=()=>{if(t.isReady()||t.initialize(),t.isReady()&&e.supported)e.extension?e.extension.bindVertexArrayOES(e.handleVAO):e.context.bindVertexArray(e.handleVAO);else if(t.isReady()){const n=e.context;for(let r=0;r<e.buffers.length;++r){const a=e.buffers[r];e.context.bindBuffer(n.ARRAY_BUFFER,a.buffer);for(let s=0;s<a.attributes.length;++s){const o=a.attributes[s],c=o.isMatrix?o.size:1;for(let f=0;f<c;++f)n.enableVertexAttribArray(o.index+f),n.vertexAttribPointer(o.index+f,o.size,o.type,o.normalize,o.stride,o.offset+o.stride*f/o.size),o.divisor>0&&(e.instancingExtension?e.instancingExtension.vertexAttribDivisorANGLE(o.index+f,1):n.vertexAttribDivisor(o.index+f,1))}}}},t.release=()=>{if(t.isReady()&&e.supported)e.extension?e.extension.bindVertexArrayOES(null):e.context.bindVertexArray(null);else if(t.isReady()){const n=e.context;for(let r=0;r<e.buffers.length;++r){const a=e.buffers[r];e.context.bindBuffer(n.ARRAY_BUFFER,a.buffer);for(let s=0;s<a.attributes.length;++s){const o=a.attributes[s],c=o.isMatrix?o.size:1;for(let f=0;f<c;++f)n.enableVertexAttribArray(o.index+f),n.vertexAttribPointer(o.index+f,o.size,o.type,o.normalize,o.stride,o.offset+o.stride*f/o.size),o.divisor>0&&(e.instancingExtension?e.instancingExtension.vertexAttribDivisorANGLE(o.index+f,0):n.vertexAttribDivisor(o.index+f,0)),n.disableVertexAttribArray(o.index+f)}}}},t.shaderProgramChanged=()=>{t.release(),e.handleVAO&&(e.extension?e.extension.deleteVertexArrayOES(e.handleVAO):e.context.deleteVertexArray(e.handleVAO)),e.handleVAO=0,e.handleProgram=0},t.releaseGraphicsResources=()=>{t.shaderProgramChanged(),e.handleVAO&&(e.extension?e.extension.deleteVertexArrayOES(e.handleVAO):e.context.deleteVertexArray(e.handleVAO)),e.handleVAO=0,e.supported=!0,e.handleProgram=0},t.addAttributeArray=(n,r,a,s,o,c,f,l)=>t.addAttributeArrayWithDivisor(n,r,a,s,o,c,f,l,0,!1),t.addAttributeArrayWithDivisor=(n,r,a,s,o,c,f,l,h,g)=>{if(!n||!n.isBound()||r.getHandle()===0||r.getType()!==_i.ARRAY_BUFFER||(e.handleProgram===0&&(e.handleProgram=n.getHandle()),t.isReady()||t.initialize(),!t.isReady()||e.handleProgram!==n.getHandle()))return!1;const d=e.context,v={};if(v.name=a,v.index=d.getAttribLocation(e.handleProgram,a),v.offset=s,v.stride=o,v.type=c,v.size=f,v.normalize=l,v.isMatrix=g,v.divisor=h,v.Index===-1)return!1;if(r.bind(),d.enableVertexAttribArray(v.index),d.vertexAttribPointer(v.index,v.size,v.type,v.normalize,v.stride,v.offset),h>0&&(e.instancingExtension?e.instancingExtension.vertexAttribDivisorANGLE(v.index,1):d.vertexAttribDivisor(v.index,1)),v.buffer=r.getHandle(),!e.supported){let S=!1;for(let T=0;T<e.buffers.length;++T){const x=e.buffers[T];if(x.buffer===v.buffer){S=!0;let m=!1;for(let O=0;O<x.attributes.length;++O)x.attributes[O].name===a&&(m=!0,x.attributes[O]=v);m||x.attributes.push(v)}}S||e.buffers.push({buffer:v.buffer,attributes:[v]})}return!0},t.addAttributeMatrixWithDivisor=(n,r,a,s,o,c,f,l,h)=>{const g=t.addAttributeArrayWithDivisor(n,r,a,s,o,c,f,l,h,!0);if(!g)return g;const d=e.context,v=d.getAttribLocation(e.handleProgram,a);for(let S=1;S<f;S++)d.enableVertexAttribArray(v+S),d.vertexAttribPointer(v+S,f,c,l,o,s+o*S/f),h>0&&(e.instancingExtension?e.instancingExtension.vertexAttribDivisorANGLE(v+S,1):d.vertexAttribDivisor(v+S,1));return!0},t.removeAttributeArray=n=>{if(!t.isReady()||e.handleProgram===0)return!1;if(!e.supported)for(let r=0;r<e.buffers.length;++r){const a=e.buffers[r];for(let s=0;s<a.attributes.length;++s)if(a.attributes[s].name===n)return a.attributes.splice(s,1),a.attributes.length||e.buffers.splice(r,1),!0}return!0},t.setOpenGLRenderWindow=n=>{e._openGLRenderWindow!==n&&(t.releaseGraphicsResources(),e._openGLRenderWindow=n,e.context=null,n&&(e.context=e._openGLRenderWindow.getContext()))}}const mL={forceEmulation:!1,handleVAO:0,handleProgram:0,supported:!0,buffers:null,context:null};function Xx(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,mL,n),e.buffers=[],L.obj(t,e),L.get(t,e,["supported"]),L.setGet(t,e,["forceEmulation"]),EL(t,e)}const RL=L.newInstance(Xx,"vtkOpenGLVertexArrayObject");var Ix={newInstance:RL,extend:Xx};const br={Start:0,Points:0,Lines:1,Tris:2,TriStrips:3,TrisEdges:4,TriStripsEdges:5,End:6};function OL(t,e){e.classHierarchy.push("vtkOpenGLHelper"),t.setOpenGLRenderWindow=n=>{e.context=n.getContext(),e.program.setContext(e.context),e.VAO.setOpenGLRenderWindow(n),e.CABO.setOpenGLRenderWindow(n)},t.releaseGraphicsResources=n=>{e.VAO.releaseGraphicsResources(),e.CABO.releaseGraphicsResources(),e.CABO.setElementCount(0)},t.drawArrays=(n,r,a,s)=>{if(e.CABO.getElementCount()){const o=t.getOpenGLMode(a),c=t.haveWideLines(n,r),f=e.context,l=f.getParameter(f.DEPTH_WRITEMASK);e.pointPicking&&f.depthMask(!1),o===f.LINES&&c?(t.updateShaders(n,r,s),f.drawArraysInstanced(o,0,e.CABO.getElementCount(),2*Math.ceil(r.getProperty().getLineWidth()))):(f.lineWidth(r.getProperty().getLineWidth()),t.updateShaders(n,r,s),f.drawArrays(o,0,e.CABO.getElementCount()),f.lineWidth(1));const g=(o===f.POINTS?1:0)||(o===f.LINES?2:3);return e.pointPicking&&f.depthMask(l),e.CABO.getElementCount()/g}return 0},t.getOpenGLMode=n=>{if(e.pointPicking)return e.context.POINTS;const r=e.primitiveType;return n===on.POINTS||r===br.Points?e.context.POINTS:n===on.WIREFRAME||r===br.Lines||r===br.TrisEdges||r===br.TriStripsEdges?e.context.LINES:e.context.TRIANGLES},t.haveWideLines=(n,r)=>r.getProperty().getLineWidth()>1?!(e.CABO.getOpenGLRenderWindow()&&e.CABO.getOpenGLRenderWindow().getHardwareMaximumLineWidth()>=r.getProperty().getLineWidth()):!1,t.getNeedToRebuildShaders=(n,r,a)=>!!(a.getNeedToRebuildShaders(t,n,r)||t.getProgram()===0||t.getShaderSourceTime().getMTime()<a.getMTime()||t.getShaderSourceTime().getMTime()<r.getMTime()),t.updateShaders=(n,r,a)=>{if(t.getNeedToRebuildShaders(n,r,a)){const s={Vertex:null,Fragment:null,Geometry:null};a.buildShaders(s,n,r);const o=e.CABO.getOpenGLRenderWindow().getShaderCache().readyShaderProgramArray(s.Vertex,s.Fragment,s.Geometry);o!==t.getProgram()&&(t.setProgram(o),t.getVAO().releaseGraphicsResources()),t.getShaderSourceTime().modified()}else e.CABO.getOpenGLRenderWindow().getShaderCache().readyShaderProgram(t.getProgram());t.getVAO().bind(),a.setMapperShaderParameters(t,n,r),a.setPropertyShaderParameters(t,n,r),a.setCameraShaderParameters(t,n,r),a.setLightingShaderParameters(t,n,r),a.invokeShaderCallbacks(t,n,r)},t.setMapperShaderParameters=(n,r,a)=>{if(t.haveWideLines(n,r)){t.getProgram().setUniform2f("viewportSize",a.usize,a.vsize);const s=parseFloat(r.getProperty().getLineWidth()),o=s/2;t.getProgram().setUniformf("lineWidthStepSize",s/Math.ceil(s)),t.getProgram().setUniformf("halfLineWidth",o)}e.primitiveType===br.Points||r.getProperty().getRepresentation()===on.POINTS?t.getProgram().setUniformf("pointSize",r.getProperty().getPointSize()):e.pointPicking&&t.getProgram().setUniformf("pointSize",t.getPointPickingPrimitiveSize())},t.replaceShaderPositionVC=(n,r,a)=>{let s=n.Vertex;s=Z.substitute(s,"//VTK::PositionVC::Dec",["//VTK::PositionVC::Dec","uniform float pointSize;"]).result,s=Z.substitute(s,"//VTK::PositionVC::Impl",["//VTK::PositionVC::Impl","  gl_PointSize = pointSize;"],!1).result,t.getOpenGLMode(a.getProperty().getRepresentation())===e.context.LINES&&t.haveWideLines(r,a)&&(s=Z.substitute(s,"//VTK::PositionVC::Dec",["//VTK::PositionVC::Dec","uniform vec2 viewportSize;","uniform float lineWidthStepSize;","uniform float halfLineWidth;"]).result,s=Z.substitute(s,"//VTK::PositionVC::Impl",["//VTK::PositionVC::Impl"," if (halfLineWidth > 0.0)","   {","   float offset = float(gl_InstanceID / 2) * lineWidthStepSize - halfLineWidth;","   vec4 tmpPos = gl_Position;","   vec3 tmpPos2 = tmpPos.xyz / tmpPos.w;","   tmpPos2.x = tmpPos2.x + 2.0 * mod(float(gl_InstanceID), 2.0) * offset / viewportSize[0];","   tmpPos2.y = tmpPos2.y + 2.0 * mod(float(gl_InstanceID + 1), 2.0) * offset / viewportSize[1];","   gl_Position = vec4(tmpPos2.xyz * tmpPos.w, tmpPos.w);","   }"]).result),n.Vertex=s},t.getPointPickingPrimitiveSize=()=>e.primitiveType===br.Points?2:e.primitiveType===br.Lines?4:6,t.getAllocatedGPUMemoryInBytes=()=>t.getCABO().getAllocatedGPUMemoryInBytes()}const DL={context:null,program:null,shaderSourceTime:null,VAO:null,attributeUpdateTime:null,CABO:null,primitiveType:0,pointPicking:!1};function Yx(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,DL,n),L.obj(t,e),e.shaderSourceTime={},L.obj(e.shaderSourceTime),e.attributeUpdateTime={},L.obj(e.attributeUpdateTime),L.setGet(t,e,["program","shaderSourceTime","VAO","attributeUpdateTime","CABO","primitiveType","pointPicking"]),e.program=Z.newInstance(),e.VAO=Ix.newInstance(),e.CABO=hL.newInstance(),OL(t,e)}const ML=L.newInstance(Yx);var Ms={newInstance:ML,extend:Yx,primTypes:br};const LL={CLAMP_TO_EDGE:0,REPEAT:1,MIRRORED_REPEAT:2},t1={NEAREST:0,LINEAR:1,NEAREST_MIPMAP_NEAREST:2,NEAREST_MIPMAP_LINEAR:3,LINEAR_MIPMAP_NEAREST:4,LINEAR_MIPMAP_LINEAR:5};var qx={Wrap:LL,Filter:t1};const Qx=new Float32Array(1),_L=new Int32Array(Qx.buffer);function VL(t){Qx[0]=t;const e=_L[0];let n=e>>16&32768,r=e>>12&2047;const a=e>>23&255;return a<103?n:a>142?(n|=31744,n|=(a===255?0:1)&&e&8388607,n):a<113?(r|=2048,n|=(r>>114-a)+(r>>113-a&1),n):(n|=a-112<<10|r>>1,n+=r&1,n)}function kL(t){const e=(t&32768)>>15,n=(t&31744)>>10,r=t&1023;return n===0?(e?-1:1)*2**-14*(r/2**10):n===31?r?NaN:(e?-1:1)*(1/0):(e?-1:1)*2**(n-15)*(1+r/2**10)}var Rn={fromHalf:kL,toHalf:VL};function BL(){try{const r=new Int16Array([0,32767]),a=[1,1],s=document.createElement("canvas");s.width=4,s.height=4;const o=s.getContext("webgl2");if(!o)return!1;const c=o.getExtension("EXT_texture_norm16");if(!c)return!1;const f=`#version 300 es
    void main() {
      gl_PointSize = ${4 .toFixed(1)};
      gl_Position = vec4(0, 0, 0, 1);
    }
  `,l=`#version 300 es
    precision highp float;
    precision highp int;
    precision highp sampler2D;

    uniform sampler2D u_image;

    out vec4 color;

    void main() {
        vec4 intColor = texture(u_image, gl_PointCoord.xy);
        color = vec4(vec3(intColor.rrr), 1);
    }
    `,h=o.createShader(o.VERTEX_SHADER);if(o.shaderSource(h,f),o.compileShader(h),!o.getShaderParameter(h,o.COMPILE_STATUS))return!1;const g=o.createShader(o.FRAGMENT_SHADER);if(o.shaderSource(g,l),o.compileShader(g),!o.getShaderParameter(g,o.COMPILE_STATUS))return!1;const d=o.createProgram();if(o.attachShader(d,h),o.attachShader(d,g),o.linkProgram(d),!o.getProgramParameter(d,o.LINK_STATUS))return!1;const v=o.createTexture();o.bindTexture(o.TEXTURE_2D,v),o.texImage2D(o.TEXTURE_2D,0,c.R16_SNORM_EXT,2,1,0,o.RED,o.SHORT,r),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.useProgram(d),o.drawArrays(o.POINTS,0,1);const S=new Uint8Array(4);o.readPixels(a[0],a[1],1,1,o.RGBA,o.UNSIGNED_BYTE,S);const[T,x,m]=S,O=o.getExtension("WEBGL_lose_context");return O&&O.loseContext(),T===x&&x===m&&T!==0}catch{return!1}}let lg;function FL(){return lg===void 0&&(lg=BL()),lg}const{Wrap:ur,Filter:it}=qx,{VtkDataTypes:me}=Oe,{vtkDebugMacro:gg,vtkErrorMacro:ss,vtkWarningMacro:kv}=Pn,{toHalf:NL}=Rn;function UL(t,e){e.classHierarchy.push("vtkOpenGLTexture"),t.render=function(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(l?e._openGLRenderWindow=l:(e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow")),e.context=e._openGLRenderWindow.getContext(),e.renderable.getInterpolate()?(e.generateMipmap?t.setMinificationFilter(it.LINEAR_MIPMAP_LINEAR):t.setMinificationFilter(it.LINEAR),t.setMagnificationFilter(it.LINEAR)):(t.setMinificationFilter(it.NEAREST),t.setMagnificationFilter(it.NEAREST)),e.renderable.getRepeat()&&(t.setWrapR(ur.REPEAT),t.setWrapS(ur.REPEAT),t.setWrapT(ur.REPEAT)),e.renderable.getInputData()&&e.renderable.setImage(null),!e.handle||e.renderable.getMTime()>e.textureBuildTime.getMTime()){if(e.renderable.getImage()!==null&&(e.renderable.getInterpolate()&&(e.generateMipmap=!0,t.setMinificationFilter(it.LINEAR_MIPMAP_LINEAR)),e.renderable.getImage()&&e.renderable.getImageLoaded()&&(t.create2DFromImage(e.renderable.getImage()),t.activate(),t.sendParameters(),e.textureBuildTime.modified())),e.renderable.getCanvas()!==null){e.renderable.getInterpolate()&&(e.generateMipmap=!0,t.setMinificationFilter(it.LINEAR_MIPMAP_LINEAR));const g=e.renderable.getCanvas();t.create2DFromRaw(g.width,g.height,4,me.UNSIGNED_CHAR,g,!0),t.activate(),t.sendParameters(),e.textureBuildTime.modified()}if(e.renderable.getJsImageData()!==null){const g=e.renderable.getJsImageData();e.renderable.getInterpolate()&&(e.generateMipmap=!0,t.setMinificationFilter(it.LINEAR_MIPMAP_LINEAR)),t.create2DFromRaw(g.width,g.height,4,me.UNSIGNED_CHAR,g.data,!0),t.activate(),t.sendParameters(),e.textureBuildTime.modified()}const h=e.renderable.getInputData(0);if(h&&h.getPointData().getScalars()){const g=h.getExtent(),d=h.getPointData().getScalars(),v=[];for(let S=0;S<e.renderable.getNumberOfInputPorts();++S){const T=e.renderable.getInputData(S),x=T?T.getPointData().getScalars().getData():null;x&&v.push(x)}e.renderable.getInterpolate()&&d.getNumberOfComponents()===4&&(e.generateMipmap=!0,t.setMinificationFilter(it.LINEAR_MIPMAP_LINEAR)),v.length%6===0?t.createCubeFromRaw(g[1]-g[0]+1,g[3]-g[2]+1,d.getNumberOfComponents(),d.getDataType(),v):t.create2DFromRaw(g[1]-g[0]+1,g[3]-g[2]+1,d.getNumberOfComponents(),d.getDataType(),d.getData()),t.activate(),t.sendParameters(),e.textureBuildTime.modified()}}e.handle&&t.activate()};const n=()=>{if(!((e.minificationFilter===it.LINEAR||e.magnificationFilter===it.LINEAR)&&!FL()))return e.oglNorm16Ext};t.destroyTexture=()=>{t.deactivate(),e.context&&e.handle&&e.context.deleteTexture(e.handle),e.handle=0,e.numberOfDimensions=0,e.target=0,e.components=0,e.width=0,e.height=0,e.depth=0,t.resetFormatAndType()},t.createTexture=()=>{e.handle||(e.handle=e.context.createTexture(),e.target&&(e.context.bindTexture(e.target,e.handle),e.context.texParameteri(e.target,e.context.TEXTURE_MIN_FILTER,t.getOpenGLFilterMode(e.minificationFilter)),e.context.texParameteri(e.target,e.context.TEXTURE_MAG_FILTER,t.getOpenGLFilterMode(e.magnificationFilter)),e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_S,t.getOpenGLWrapMode(e.wrapS)),e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_T,t.getOpenGLWrapMode(e.wrapT)),e._openGLRenderWindow.getWebgl2()&&e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_R,t.getOpenGLWrapMode(e.wrapR)),e.context.bindTexture(e.target,null)))},t.getTextureUnit=()=>e._openGLRenderWindow?e._openGLRenderWindow.getTextureUnitForTexture(t):-1,t.activate=()=>{e._openGLRenderWindow.activateTexture(t),t.bind()},t.deactivate=()=>{e._openGLRenderWindow&&e._openGLRenderWindow.deactivateTexture(t)},t.releaseGraphicsResources=l=>{l&&e.handle&&(l.activateTexture(t),l.deactivateTexture(t),e.context.deleteTexture(e.handle),e.handle=0,e.numberOfDimensions=0,e.target=0,e.internalFormat=0,e.format=0,e.openGLDataType=0,e.components=0,e.width=0,e.height=0,e.depth=0,e.allocatedGPUMemoryInBytes=0),e.shaderProgram&&(e.shaderProgram.releaseGraphicsResources(l),e.shaderProgram=null)},t.bind=()=>{e.context.bindTexture(e.target,e.handle),e.autoParameters&&t.getMTime()>e.sendParametersTime.getMTime()&&t.sendParameters()},t.isBound=()=>{let l=!1;if(e.context&&e.handle){let h=0;switch(e.target){case e.context.TEXTURE_2D:h=e.context.TEXTURE_BINDING_2D;break;default:kv("impossible case");break}l=e.context.getIntegerv(h)===e.handle}return l},t.sendParameters=()=>{e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_S,t.getOpenGLWrapMode(e.wrapS)),e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_T,t.getOpenGLWrapMode(e.wrapT)),e._openGLRenderWindow.getWebgl2()&&e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_R,t.getOpenGLWrapMode(e.wrapR)),e.context.texParameteri(e.target,e.context.TEXTURE_MIN_FILTER,t.getOpenGLFilterMode(e.minificationFilter)),e.context.texParameteri(e.target,e.context.TEXTURE_MAG_FILTER,t.getOpenGLFilterMode(e.magnificationFilter)),e._openGLRenderWindow.getWebgl2()&&(e.context.texParameteri(e.target,e.context.TEXTURE_BASE_LEVEL,e.baseLevel),e.context.texParameteri(e.target,e.context.TEXTURE_MAX_LEVEL,e.maxLevel)),e.sendParametersTime.modified()},t.getInternalFormat=(l,h)=>(e._forceInternalFormat||(e.internalFormat=t.getDefaultInternalFormat(l,h)),e.internalFormat||gg(`Unable to find suitable internal format for T=${l} NC= ${h}`),[e.context.R32F,e.context.RG32F,e.context.RGB32F,e.context.RGBA32F].includes(e.internalFormat)&&!e.context.getExtension("OES_texture_float_linear")&&kv("Failed to load OES_texture_float_linear. Texture filtering is not available for *32F internal formats."),e.internalFormat),t.getDefaultInternalFormat=(l,h)=>{let g=0;return g=e._openGLRenderWindow.getDefaultTextureInternalFormat(l,h,n(),t.useHalfFloat()),g||(g||(gg("Unsupported internal texture type!"),gg(`Unable to find suitable internal format for T=${l} NC= ${h}`)),g)},t.useHalfFloat=()=>e.enableUseHalfFloat&&e.canUseHalfFloat,t.setInternalFormat=l=>{e._forceInternalFormat=!0,l!==e.internalFormat&&(e.internalFormat=l,t.modified())},t.getFormat=(l,h)=>(e.format=t.getDefaultFormat(l,h),e.format),t.getDefaultFormat=(l,h)=>{if(e._openGLRenderWindow.getWebgl2())switch(h){case 1:return e.context.RED;case 2:return e.context.RG;case 3:return e.context.RGB;case 4:return e.context.RGBA;default:return e.context.RGB}else switch(h){case 1:return e.context.LUMINANCE;case 2:return e.context.LUMINANCE_ALPHA;case 3:return e.context.RGB;case 4:return e.context.RGBA;default:return e.context.RGB}},t.resetFormatAndType=()=>{e.format=0,e.internalFormat=0,e._forceInternalFormat=!1,e.openGLDataType=0},t.getDefaultDataType=l=>{const h=t.useHalfFloat();if(e._openGLRenderWindow.getWebgl2())switch(l){case me.UNSIGNED_CHAR:return e.context.UNSIGNED_BYTE;case(n()&&!h&&me.SHORT):return e.context.SHORT;case(n()&&!h&&me.UNSIGNED_SHORT):return e.context.UNSIGNED_SHORT;case(h&&me.SHORT):return e.context.HALF_FLOAT;case(h&&me.UNSIGNED_SHORT):return e.context.HALF_FLOAT;case me.FLOAT:case me.VOID:default:return e.context.FLOAT}switch(l){case me.UNSIGNED_CHAR:return e.context.UNSIGNED_BYTE;case me.FLOAT:case me.VOID:default:if(e.context.getExtension("OES_texture_float")&&e.context.getExtension("OES_texture_float_linear"))return e.context.FLOAT;{const g=e.context.getExtension("OES_texture_half_float");if(g&&e.context.getExtension("OES_texture_half_float_linear"))return g.HALF_FLOAT_OES}return e.context.UNSIGNED_BYTE}},t.getOpenGLDataType=function(l){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return(!e.openGLDataType||h)&&(e.openGLDataType=t.getDefaultDataType(l)),e.openGLDataType},t.getShiftAndScale=()=>{let l=0,h=1;switch(e.openGLDataType){case e.context.BYTE:h=127.5,l=h-128;break;case e.context.UNSIGNED_BYTE:h=255,l=0;break;case e.context.SHORT:h=32767.5,l=h-32768;break;case e.context.UNSIGNED_SHORT:h=65536,l=0;break;case e.context.INT:h=21474836475e-1,l=h-2147483648;break;case e.context.UNSIGNED_INT:h=4294967295,l=0;break;case e.context.FLOAT:}return{shift:l,scale:h}},t.getOpenGLFilterMode=l=>{switch(l){case it.NEAREST:return e.context.NEAREST;case it.LINEAR:return e.context.LINEAR;case it.NEAREST_MIPMAP_NEAREST:return e.context.NEAREST_MIPMAP_NEAREST;case it.NEAREST_MIPMAP_LINEAR:return e.context.NEAREST_MIPMAP_LINEAR;case it.LINEAR_MIPMAP_NEAREST:return e.context.LINEAR_MIPMAP_NEAREST;case it.LINEAR_MIPMAP_LINEAR:return e.context.LINEAR_MIPMAP_LINEAR;default:return e.context.NEAREST}},t.getOpenGLWrapMode=l=>{switch(l){case ur.CLAMP_TO_EDGE:return e.context.CLAMP_TO_EDGE;case ur.REPEAT:return e.context.REPEAT;case ur.MIRRORED_REPEAT:return e.context.MIRRORED_REPEAT;default:return e.context.CLAMP_TO_EDGE}},t.updateArrayDataTypeForGL=function(l,h){let g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const d=[];let v=e.width*e.height*e.components;if(g&&(v*=e.depth),l!==me.FLOAT&&e.openGLDataType===e.context.FLOAT)for(let T=0;T<h.length;T++)if(h[T]){const x=h[T].length>v?h[T].subarray(0,v):h[T];d.push(new Float32Array(x))}else d.push(null);if(l!==me.UNSIGNED_CHAR&&e.openGLDataType===e.context.UNSIGNED_BYTE)for(let T=0;T<h.length;T++)if(h[T]){const x=h[T].length>v?h[T].subarray(0,v):h[T];d.push(new Uint8Array(x))}else d.push(null);let S=!1;if(e._openGLRenderWindow.getWebgl2())S=e.openGLDataType===e.context.HALF_FLOAT;else{const T=e.context.getExtension("OES_texture_half_float");S=T&&e.openGLDataType===T.HALF_FLOAT_OES}if(S)for(let T=0;T<h.length;T++)if(h[T]){const x=new Uint16Array(v),m=h[T];for(let O=0;O<v;O++)x[O]=NL(m[O]);d.push(x)}else d.push(null);if(d.length===0)for(let T=0;T<h.length;T++)d.push(h[T]);return d};function r(l){if(e._openGLRenderWindow.getWebgl2())return l;const h=[],g=e.width,d=e.height,v=e.components;if(l&&(!du(g)||!du(d))){const S=e.context.getExtension("OES_texture_half_float"),T=wn(g),x=wn(d),m=T*x*e.components;for(let O=0;O<l.length;O++)if(l[O]!==null){let w=null;const R=d/x,M=g/T;let D=!1;e.openGLDataType===e.context.FLOAT?w=new Float32Array(m):S&&e.openGLDataType===S.HALF_FLOAT_OES?(w=new Uint16Array(m),D=!0):w=new Uint8Array(m);for(let V=0;V<x;V++){const B=V*T*v,z=V*R;let k=Math.floor(z),U=Math.ceil(z);U>=d&&(U=d-1);const H=z-k,P=1-H;k=k*g*v,U=U*g*v;for(let A=0;A<T;A++){const ne=A*v,ae=A*M;let se=Math.floor(ae),Q=Math.ceil(ae);Q>=g&&(Q=g-1);const j=ae-se;se*=v,Q*=v;for(let G=0;G<v;G++)D?w[B+ne+G]=Rn.toHalf(Rn.fromHalf(l[O][k+se+G])*P*(1-j)+Rn.fromHalf(l[O][k+Q+G])*P*j+Rn.fromHalf(l[O][U+se+G])*H*(1-j)+Rn.fromHalf(l[O][U+Q+G])*H*j):w[B+ne+G]=l[O][k+se+G]*P*(1-j)+l[O][k+Q+G]*P*j+l[O][U+se+G]*H*(1-j)+l[O][U+Q+G]*H*j}}h.push(w),e.width=T,e.height=x}else h.push(null)}if(h.length===0)for(let S=0;S<l.length;S++)h.push(l[S]);return h}function a(l){var h;return e._openGLRenderWindow?e.resizable||(h=e.renderable)!=null&&h.getResizable()?!1:e._openGLRenderWindow.getWebgl2()?!(e._openGLRenderWindow.getGLInformations().RENDERER.value.match(/WebKit/gi)&&navigator.platform.match(/Mac/gi)&&n()&&(l===me.UNSIGNED_SHORT||l===me.SHORT)):!1:!1}t.create2DFromRaw=function(l,h,g,d,v){let S=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1;if(t.getOpenGLDataType(d,!0),t.getInternalFormat(d,g),t.getFormat(d,g),!e.internalFormat||!e.format||!e.openGLDataType)return ss("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_2D,e.components=g,e.width=l,e.height=h,e.depth=1,e.numberOfDimensions=2,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind();const T=[v],x=t.updateArrayDataTypeForGL(d,T),m=r(x);return e.context.pixelStorei(e.context.UNPACK_FLIP_Y_WEBGL,S),e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),a(d)?(e.context.texStorage2D(e.target,1,e.internalFormat,e.width,e.height),m[0]!=null&&e.context.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.openGLDataType,m[0])):e.context.texImage2D(e.target,0,e.internalFormat,e.width,e.height,0,e.format,e.openGLDataType,m[0]),e.generateMipmap&&e.context.generateMipmap(e.target),S&&e.context.pixelStorei(e.context.UNPACK_FLIP_Y_WEBGL,!1),e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*g*e._openGLRenderWindow.getDefaultTextureByteSize(d,n(),t.useHalfFloat()),t.deactivate(),!0},t.createCubeFromRaw=(l,h,g,d,v)=>{if(t.getOpenGLDataType(d),t.getInternalFormat(d,g),t.getFormat(d,g),!e.internalFormat||!e.format||!e.openGLDataType)return ss("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_CUBE_MAP,e.components=g,e.width=l,e.height=h,e.depth=1,e.numberOfDimensions=2,e._openGLRenderWindow.activateTexture(t),e.maxLevel=v.length/6-1,t.createTexture(),t.bind();const S=t.updateArrayDataTypeForGL(d,v),T=r(S),x=[];let m=e.width,O=e.height;for(let w=0;w<T.length;w++){w%6===0&&w!==0&&(m/=2,O/=2),x[w]=Rs(d,O*m*e.components);for(let R=0;R<O;++R){const M=R*m*e.components,D=(O-R-1)*m*e.components;x[w].set(T[w].slice(D,D+m*e.components),M)}}e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),a(d)&&e.context.texStorage2D(e.target,6,e.internalFormat,e.width,e.height);for(let w=0;w<6;w++){let R=0,M=e.width,D=e.height;for(;M>=1&&D>=1;){let V=null;R<=e.maxLevel&&(V=x[6*R+w]),a(d)?V!=null&&e.context.texSubImage2D(e.context.TEXTURE_CUBE_MAP_POSITIVE_X+w,R,0,0,M,D,e.format,e.openGLDataType,V):e.context.texImage2D(e.context.TEXTURE_CUBE_MAP_POSITIVE_X+w,R,e.internalFormat,M,D,0,e.format,e.openGLDataType,V),R++,M/=2,D/=2}}return e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*g*e._openGLRenderWindow.getDefaultTextureByteSize(d,n(),t.useHalfFloat()),t.deactivate(),!0},t.createDepthFromRaw=(l,h,g,d)=>(t.getOpenGLDataType(g),e.format=e.context.DEPTH_COMPONENT,e._openGLRenderWindow.getWebgl2()?g===me.FLOAT?e.internalFormat=e.context.DEPTH_COMPONENT32F:e.internalFormat=e.context.DEPTH_COMPONENT16:e.internalFormat=e.context.DEPTH_COMPONENT,!e.internalFormat||!e.format||!e.openGLDataType?(ss("Failed to determine texture parameters."),!1):(e.target=e.context.TEXTURE_2D,e.components=1,e.width=l,e.height=h,e.depth=1,e.numberOfDimensions=2,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind(),e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),a(g)?(e.context.texStorage2D(e.target,1,e.internalFormat,e.width,e.height),d!=null&&e.context.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.openGLDataType,d)):e.context.texImage2D(e.target,0,e.internalFormat,e.width,e.height,0,e.format,e.openGLDataType,d),e.generateMipmap&&e.context.generateMipmap(e.target),e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*e.components*e._openGLRenderWindow.getDefaultTextureByteSize(g,n(),t.useHalfFloat()),t.deactivate(),!0)),t.create2DFromImage=l=>{if(t.getOpenGLDataType(me.UNSIGNED_CHAR),t.getInternalFormat(me.UNSIGNED_CHAR,4),t.getFormat(me.UNSIGNED_CHAR,4),!e.internalFormat||!e.format||!e.openGLDataType)return ss("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_2D,e.components=4,e.depth=1,e.numberOfDimensions=2,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind(),e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1);const h=!e._openGLRenderWindow.getWebgl2()&&(!du(l.width)||!du(l.height)),g=document.createElement("canvas");g.width=h?wn(l.width):l.width,g.height=h?wn(l.height):l.height,e.width=g.width,e.height=g.height;const d=g.getContext("2d");d.translate(0,g.height),d.scale(1,-1),d.drawImage(l,0,0,l.width,l.height,0,0,g.width,g.height);const v=g;return a(me.UNSIGNED_CHAR)?(e.context.texStorage2D(e.target,1,e.internalFormat,e.width,e.height),v!=null&&e.context.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.openGLDataType,v)):e.context.texImage2D(e.target,0,e.internalFormat,e.width,e.height,0,e.format,e.openGLDataType,v),e.generateMipmap&&e.context.generateMipmap(e.target),e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*e.components*e._openGLRenderWindow.getDefaultTextureByteSize(me.UNSIGNED_CHAR,n(),t.useHalfFloat()),t.deactivate(),!0};function s(l,h,g){const d=new Array(g),v=new Array(g);for(let S=0;S<g;++S)d[S]=l[S],v[S]=h[S]-l[S]||1;return{scale:v,offset:d}}function o(l,h){for(let g=0;g<l.length;g++){const d=l[g],v=h[g]+d;if(d<-2048||d>2048||v<-2048||v>2048)return!1}return!0}function c(l,h,g,d){t.getOpenGLDataType(l);const v=o(h,g)||d;let S=!1;if(e._openGLRenderWindow.getWebgl2())S=e.openGLDataType===e.context.FLOAT&&e.context.getExtension("OES_texture_float_linear")===null&&v||e.openGLDataType===e.context.HALF_FLOAT;else{const T=e.context.getExtension("OES_texture_half_float");S=T&&e.openGLDataType===T.HALF_FLOAT_OES}e.canUseHalfFloat=S&&v}function f(l,h){const g=l.getNumberOfComponents(),d=l.getDataType(),v=l.getData(),S=new Array(g),T=new Array(g);for(let m=0;m<g;++m){const[O,w]=l.getRange(m);S[m]=O,T[m]=w}const x=s(S,T,g);return c(d,x.offset,x.scale,h),t.useHalfFloat()||t.getOpenGLDataType(d,!0),{numComps:g,dataType:d,data:v,scaleOffsets:x}}t.create2DFilterableFromRaw=function(l,h,g,d,v){let S=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1;return t.create2DFilterableFromDataArray(l,h,Oe.newInstance({numberOfComponents:g,dataType:d,values:v}),S)},t.create2DFilterableFromDataArray=function(l,h,g){let d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const{numComps:v,dataType:S,data:T}=f(g,d);t.create2DFromRaw(l,h,v,S,T)},t.updateVolumeInfoForGL=(l,h)=>{var v,S;let g=!1;const d=t.useHalfFloat();(!((v=e.volumeInfo)!=null&&v.scale)||!((S=e.volumeInfo)!=null&&S.offset))&&(e.volumeInfo={scale:new Array(h),offset:new Array(h)});for(let T=0;T<h;++T)e.volumeInfo.scale[T]=1,e.volumeInfo.offset[T]=0;if(n()&&!d&&l===me.SHORT){for(let T=0;T<h;++T)e.volumeInfo.scale[T]=32767;g=!0}if(n()&&!d&&l===me.UNSIGNED_SHORT){for(let T=0;T<h;++T)e.volumeInfo.scale[T]=65535;g=!0}if(l===me.UNSIGNED_CHAR){for(let T=0;T<h;++T)e.volumeInfo.scale[T]=255;g=!0}return(l===me.FLOAT||d&&(l===me.SHORT||l===me.UNSIGNED_SHORT))&&(g=!0),g},t.create3DFromRaw=(l,h,g,d,v,S)=>{let T=v,x=S;if(!t.updateVolumeInfoForGL(T,d)&&x){const M=l*h*g,D=structuredClone(e.volumeInfo),V=new Float32Array(M*d);e.volumeInfo.offset=D.offset,e.volumeInfo.scale=D.scale;let B=0;const z=D.scale.map(k=>1/k);for(let k=0;k<M;k++)for(let U=0;U<d;U++)V[B]=(x[B]-D.offset[U])*z[U],B++;T=me.FLOAT,x=V}if(t.getOpenGLDataType(T),t.getInternalFormat(T,d),t.getFormat(T,d),!e.internalFormat||!e.format||!e.openGLDataType)return ss("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_3D,e.components=d,e.width=l,e.height=h,e.depth=g,e.numberOfDimensions=3,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind();const m=[x],w=t.updateArrayDataTypeForGL(T,m,!0),R=r(w);return e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),a(T)?(e.context.texStorage3D(e.target,1,e.internalFormat,e.width,e.height,e.depth),R[0]!=null&&e.context.texSubImage3D(e.target,0,0,0,0,e.width,e.height,e.depth,e.format,e.openGLDataType,R[0])):e.context.texImage3D(e.target,0,e.internalFormat,e.width,e.height,e.depth,0,e.format,e.openGLDataType,R[0]),e.generateMipmap&&e.context.generateMipmap(e.target),e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*e.components*e._openGLRenderWindow.getDefaultTextureByteSize(T,n(),t.useHalfFloat()),t.deactivate(),!0},t.create3DFilterableFromRaw=function(l,h,g,d,v,S){let T=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!1;return t.create3DFilterableFromDataArray(l,h,g,Oe.newInstance({numberOfComponents:d,dataType:v,values:S}),T)},t.create3DFilterableFromDataArray=function(l,h,g,d){let v=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;const{numComps:S,dataType:T,data:x,scaleOffsets:m}=f(d,v),O=[],w=[];for(let G=0;G<S;++G)O[G]=0,w[G]=1;if(e.volumeInfo={scale:w,offset:O,dataComputedScale:m.scale,dataComputedOffset:m.offset,width:l,height:h,depth:g},e._openGLRenderWindow.getWebgl2())return t.create3DFromRaw(l,h,g,S,T,x);const R=l*h*g,M=structuredClone(m);let D=(G,N,b,q,le)=>{G[N]=b},V=me.UNSIGNED_CHAR;if(T===me.UNSIGNED_CHAR)for(let G=0;G<S;++G)M.offset[G]=0,M.scale[G]=255;else e.context.getExtension("OES_texture_float")&&e.context.getExtension("OES_texture_float_linear")?(V=me.FLOAT,D=(G,N,b,q,le)=>{G[N]=(b-q)/le}):(V=me.UNSIGNED_CHAR,D=(G,N,b,q,le)=>{G[N]=255*(b-q)/le});if(t.getOpenGLDataType(V),t.getInternalFormat(V,S),t.getFormat(V,S),!e.internalFormat||!e.format||!e.openGLDataType)return ss("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_2D,e.components=S,e.depth=1,e.numberOfDimensions=2;let B=e.context.getParameter(e.context.MAX_TEXTURE_SIZE);B>4096&&(V===me.FLOAT||S>=3)&&(B=4096);let z=1,k=1;R>B*B&&(z=Math.ceil(Math.sqrt(R/(B*B))),k=z);let U=Math.sqrt(R)/z;U=wn(U);const H=Math.floor(U*z/l),P=Math.ceil(g/H),A=wn(h*P/k);e.width=U,e.height=A,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind(),e.volumeInfo.xreps=H,e.volumeInfo.yreps=P,e.volumeInfo.xstride=z,e.volumeInfo.ystride=k,e.volumeInfo.offset=M.offset,e.volumeInfo.scale=M.scale;let ne;const ae=U*A*S;V===me.FLOAT?ne=new Float32Array(ae):ne=new Uint8Array(ae);let se=0;const Q=Math.floor(l/z),j=Math.floor(h/k);for(let G=0;G<P;G++){const N=Math.min(H,g-G*H),b=S*(e.width-N*Math.floor(l/z));for(let q=0;q<j;q++){for(let le=0;le<N;le++){const xe=S*((G*H+le)*l*h+k*q*l);for(let Te=0;Te<Q;Te++)for(let ye=0;ye<S;ye++)D(ne,se,x[xe+z*Te*S+ye],M.offset[ye],M.scale[ye]),se++}se+=b}}return e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),a(V)?(e.context.texStorage2D(e.target,1,e.internalFormat,e.width,e.height),ne!=null&&e.context.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.openGLDataType,ne)):e.context.texImage2D(e.target,0,e.internalFormat,e.width,e.height,0,e.format,e.openGLDataType,ne),t.deactivate(),!0},t.setOpenGLRenderWindow=l=>{e._openGLRenderWindow!==l&&(t.releaseGraphicsResources(),e._openGLRenderWindow=l,e.context=null,l&&(e.context=e._openGLRenderWindow.getContext()))},t.getMaximumTextureSize=l=>l&&l.isCurrent()?l.getIntegerv(l.MAX_TEXTURE_SIZE):-1,t.enableUseHalfFloat=l=>{e.enableUseHalfFloat=l}}const GL={_openGLRenderWindow:null,_forceInternalFormat:!1,context:null,handle:0,sendParametersTime:null,textureBuildTime:null,numberOfDimensions:0,target:0,format:0,openGLDataType:0,components:0,width:0,height:0,depth:0,autoParameters:!0,wrapS:ur.CLAMP_TO_EDGE,wrapT:ur.CLAMP_TO_EDGE,wrapR:ur.CLAMP_TO_EDGE,minificationFilter:it.NEAREST,magnificationFilter:it.NEAREST,minLOD:-1e3,maxLOD:1e3,baseLevel:0,maxLevel:1e3,generateMipmap:!1,oglNorm16Ext:null,allocatedGPUMemoryInBytes:0,enableUseHalfFloat:!0,canUseHalfFloat:!1};function Zx(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,GL,n),qe.extend(t,e,n),e.sendParametersTime={},vt(e.sendParametersTime,{mtime:0}),e.textureBuildTime={},vt(e.textureBuildTime,{mtime:0}),Hi(t,e,["format","openGLDataType"]),ct(t,e,["keyMatrixTime","minificationFilter","magnificationFilter","wrapS","wrapT","wrapR","generateMipmap","oglNorm16Ext"]),Nt(t,e,["width","height","volumeInfo","components","handle","target","allocatedGPUMemoryInBytes"]),bi(t,e,["openGLRenderWindow"]),UL(t,e)}const Jx=Ne(Zx,"vtkOpenGLTexture");var Da={newInstance:Jx,extend:Zx,...qx};cn("vtkTexture",Jx);var $L=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkPolyDataVS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/

attribute vec4 vertexMC;

// frag position in VC
//VTK::PositionVC::Dec

// optional normal declaration
//VTK::Normal::Dec

// extra lighting parameters
//VTK::Light::Dec

// Texture coordinates
//VTK::TCoord::Dec

// material property values
//VTK::Color::Dec

// clipping plane vars
//VTK::Clip::Dec

// camera and actor matrix values
//VTK::Camera::Dec

// Apple Bug
//VTK::PrimID::Dec

// picking support
//VTK::Picking::Dec

void main()
{
  //VTK::Color::Impl

  //VTK::Normal::Impl

  //VTK::TCoord::Impl

  //VTK::Clip::Impl

  //VTK::PrimID::Impl

  //VTK::PositionVC::Impl

  //VTK::Light::Impl

  //VTK::Picking::Impl
}
`,zL=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkPolyDataFS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/
// Template for the polydata mappers fragment shader

uniform int PrimitiveIDOffset;

// VC position of this fragment
//VTK::PositionVC::Dec

// optional color passed in from the vertex shader, vertexColor
//VTK::Color::Dec

// optional surface normal declaration
//VTK::Normal::Dec

// extra lighting parameters
//VTK::Light::Dec

// define vtkImageLabelOutlineOn
//VTK::ImageLabelOutlineOn

// Texture coordinates
//VTK::TCoord::Dec

// picking support
//VTK::Picking::Dec

// Depth Peeling Support
//VTK::DepthPeeling::Dec

// clipping plane vars
//VTK::Clip::Dec

// label outline 
//VTK::LabelOutline::Dec

// the output of this shader
//VTK::Output::Dec

// Apple Bug
//VTK::PrimID::Dec

// handle coincident offsets
//VTK::Coincident::Dec

//VTK::ZBuffer::Dec

//VTK::LabelOutlineHelperFunction

void main()
{
  // VC position of this fragment. This should not branch/return/discard.
  //VTK::PositionVC::Impl

  // Place any calls that require uniform flow (e.g. dFdx) here.
  //VTK::UniformFlow::Impl

  // Set gl_FragDepth here (gl_FragCoord.z by default)
  //VTK::Depth::Impl

  // Early depth peeling abort:
  //VTK::DepthPeeling::PreColor

  // Apple Bug
  //VTK::PrimID::Impl

  //VTK::Clip::Impl

  //VTK::Color::Impl

  // Generate the normal if we are not passed in one
  //VTK::Normal::Impl

  //VTK::TCoord::Impl

  //VTK::Light::Impl

  if (gl_FragData[0].a <= 0.0)
    {
    discard;
    }

  //VTK::DepthPeeling::Impl

  //VTK::Picking::Impl

  // handle coincident offsets
  //VTK::Coincident::Impl

  //VTK::ZBuffer::Impl

  //VTK::RenderPassFragmentShader::Impl
}
`;function WL(t,e){t.replaceShaderCoincidentOffset=(n,r,a)=>{const s=t.getCoincidentParameters(r,a);if(s&&(s.factor!==0||s.offset!==0)){let o=n.Fragment;o=Z.substitute(o,"//VTK::Coincident::Dec",["uniform float cfactor;","uniform float coffset;"]).result,e.context.getExtension("EXT_frag_depth")&&(s.factor!==0?(o=Z.substitute(o,"//VTK::UniformFlow::Impl",["float cscale = length(vec2(dFdx(gl_FragCoord.z),dFdy(gl_FragCoord.z)));","//VTK::UniformFlow::Impl"],!1).result,o=Z.substitute(o,"//VTK::Depth::Impl","gl_FragDepthEXT = gl_FragCoord.z + cfactor*cscale + 0.000016*coffset;").result):o=Z.substitute(o,"//VTK::Depth::Impl","gl_FragDepthEXT = gl_FragCoord.z + 0.000016*coffset;").result),e._openGLRenderWindow.getWebgl2()&&(s.factor!==0?(o=Z.substitute(o,"//VTK::UniformFlow::Impl",["float cscale = length(vec2(dFdx(gl_FragCoord.z),dFdy(gl_FragCoord.z)));","//VTK::UniformFlow::Impl"],!1).result,o=Z.substitute(o,"//VTK::Depth::Impl","gl_FragDepth = gl_FragCoord.z + cfactor*cscale + 0.000016*coffset;").result):o=Z.substitute(o,"//VTK::Depth::Impl","gl_FragDepth = gl_FragCoord.z + 0.000016*coffset;").result),n.Fragment=o}}}function HL(t,e){t.applyShaderReplacements=(n,r,a)=>{let s=null;if(r&&(s=r.ShaderReplacements),s)for(let o=0;o<s.length;o++){const c=s[o];if(a&&c.replaceFirst||!a&&!c.replaceFirst){const f=c.shaderType,l=n[f],h=Z.substitute(l,c.originalValue,c.replacementValue,c.replaceAll);n[f]=h.result}}},t.buildShaders=(n,r,a)=>{t.getReplacedShaderTemplate(n,r,a),e.lastRenderPassShaderReplacement=e.currentRenderPass?e.currentRenderPass.getShaderReplacement():null,e.lastRenderPassShaderReplacement&&e.lastRenderPassShaderReplacement(n);const s=e.renderable.getViewSpecificProperties().OpenGL;t.applyShaderReplacements(n,s,!0),t.replaceShaderValues(n,r,a),t.applyShaderReplacements(n,s)},t.getReplacedShaderTemplate=(n,r,a)=>{const s=e.renderable.getViewSpecificProperties().OpenGL;t.getShaderTemplate(n,r,a);let o=n.Vertex;if(s){const l=s.VertexShaderCode;l!==void 0&&l!==""&&(o=l)}n.Vertex=o;let c=n.Fragment;if(s){const l=s.FragmentShaderCode;l!==void 0&&l!==""&&(c=l)}n.Fragment=c;let f=n.Geometry;if(s){const l=s.GeometryShaderCode;l!==void 0&&(f=l)}n.Geometry=f}}var Sc={implementReplaceShaderCoincidentOffset:WL,implementBuildShadersWithReplacements:HL};const{FieldAssociations:pg}=ka,{primTypes:ot}=Ms,{Representation:is,Shading:Bv}=Ds,{ScalarMode:mu}=An,{Filter:Fv,Wrap:Nv}=Da,{vtkErrorMacro:va}=Pn,bL={type:"StartEvent"},AL={type:"EndEvent"},{CoordinateSystem:jL}=ji;function KL(t){const e=t.getSelector();return e?e.getCurrentPass():Bt.MIN_KNOWN_PASS-1}function PL(t,e){e.classHierarchy.push("vtkOpenGLPolyDataMapper"),t.buildPass=r=>{r&&(e.currentRenderPass=null,e.openGLActor=t.getFirstAncestorOfType("vtkOpenGLActor"),e._openGLRenderer=e.openGLActor.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow"),e.openGLCamera=e._openGLRenderer.getViewNodeFor(e._openGLRenderer.getRenderable().getActiveCamera()))},t.translucentPass=(r,a)=>{r&&(e.currentRenderPass=a,t.render())},t.zBufferPass=r=>{r&&(e.haveSeenDepthRequest=!0,e.renderDepth=!0,t.render(),e.renderDepth=!1)},t.opaqueZBufferPass=r=>t.zBufferPass(r),t.opaquePass=r=>{r&&t.render()},t.render=()=>{const r=e._openGLRenderWindow.getContext();if(e.context!==r){e.context=r;for(let o=ot.Start;o<ot.End;o++)e.primitives[o].setOpenGLRenderWindow(e._openGLRenderWindow)}const a=e.openGLActor.getRenderable(),s=e._openGLRenderer.getRenderable();t.renderPiece(s,a)},t.getShaderTemplate=(r,a,s)=>{r.Vertex=$L,r.Fragment=zL,r.Geometry=""},t.replaceShaderColor=(r,a,s)=>{let o=r.Vertex,c=r.Geometry,f=r.Fragment;const l=e.lastBoundBO.getReferenceByName("lastLightComplexity");let h=["uniform float ambient;","uniform float diffuse;","uniform float specular;","uniform float opacityUniform; // the fragment opacity","uniform vec3 ambientColorUniform;","uniform vec3 diffuseColorUniform;"];l&&(h=h.concat(["uniform vec3 specularColorUniform;","uniform float specularPowerUniform;"]));let g=["vec3 ambientColor;","  vec3 diffuseColor;","  float opacity;"];l&&(g=g.concat(["  vec3 specularColor;","  float specularPower;"])),g=g.concat(["  ambientColor = ambientColorUniform;","  diffuseColor = diffuseColorUniform;","  opacity = opacityUniform;"]),l&&(g=g.concat(["  specularColor = specularColorUniform;","  specularPower = specularPowerUniform;"])),e.lastBoundBO.getCABO().getColorComponents()!==0&&!e.drawingEdges&&(h=h.concat(["varying vec4 vertexColorVSOutput;"]),o=Z.substitute(o,"//VTK::Color::Dec",["attribute vec4 scalarColor;","varying vec4 vertexColorVSOutput;"]).result,o=Z.substitute(o,"//VTK::Color::Impl",["vertexColorVSOutput =  scalarColor;"]).result,c=Z.substitute(c,"//VTK::Color::Dec",["in vec4 vertexColorVSOutput[];","out vec4 vertexColorGSOutput;"]).result,c=Z.substitute(c,"//VTK::Color::Impl",["vertexColorGSOutput = vertexColorVSOutput[i];"]).result),e.lastBoundBO.getCABO().getColorComponents()!==0&&!e.drawingEdges?f=Z.substitute(f,"//VTK::Color::Impl",g.concat(["  diffuseColor = vertexColorVSOutput.rgb;","  ambientColor = vertexColorVSOutput.rgb;","  opacity = opacity*vertexColorVSOutput.a;"])).result:(e.renderable.getAreScalarsMappedFromCells()||e.renderable.getInterpolateScalarsBeforeMapping())&&e.renderable.getColorCoordinates()&&!e.drawingEdges?f=Z.substitute(f,"//VTK::Color::Impl",g.concat(["  vec4 texColor = texture2D(texture1, tcoordVCVSOutput.st);","  diffuseColor = texColor.rgb;","  ambientColor = texColor.rgb;","  opacity = opacity*texColor.a;"])).result:(s.getBackfaceProperty()&&!e.drawingEdges&&(h=h.concat(["uniform float opacityUniformBF; // the fragment opacity","uniform float ambientIntensityBF; // the material ambient","uniform float diffuseIntensityBF; // the material diffuse","uniform vec3 ambientColorUniformBF; // ambient material color","uniform vec3 diffuseColorUniformBF; // diffuse material color"]),l?(h=h.concat(["uniform float specularIntensityBF; // the material specular intensity","uniform vec3 specularColorUniformBF; // intensity weighted color","uniform float specularPowerUniformBF;"]),g=g.concat(["if (gl_FrontFacing == false) {","  ambientColor = ambientIntensityBF * ambientColorUniformBF;","  diffuseColor = diffuseIntensityBF * diffuseColorUniformBF;","  specularColor = specularIntensityBF * specularColorUniformBF;","  specularPower = specularPowerUniformBF;","  opacity = opacityUniformBF; }"])):g=g.concat(["if (gl_FrontFacing == false) {","  ambientColor = ambientIntensityBF * ambientColorUniformBF;","  diffuseColor = diffuseIntensityBF * diffuseColorUniformBF;","  opacity = opacityUniformBF; }"])),e.haveCellScalars&&!e.drawingEdges&&(h=h.concat(["uniform samplerBuffer texture1;"])),f=Z.substitute(f,"//VTK::Color::Impl",g).result),f=Z.substitute(f,"//VTK::Color::Dec",h).result,r.Vertex=o,r.Geometry=c,r.Fragment=f},t.replaceShaderLight=(r,a,s)=>{let o=r.Fragment;const c="",f=e.lastBoundBO.getReferenceByName("lastLightComplexity"),l=e.lastBoundBO.getReferenceByName("lastLightCount");let h=[];switch(f){case 0:o=Z.substitute(o,"//VTK::Light::Impl",["  gl_FragData[0] = vec4(ambientColor * ambient + diffuseColor * diffuse, opacity);","  //VTK::Light::Impl"],!1).result;break;case 1:o=Z.substitute(o,"//VTK::Light::Impl",["  float df = max(0.0, normalVCVSOutput.z);","  float sf = pow(df, specularPower);","  vec3 diffuseL = df * diffuseColor;","  vec3 specularL = sf * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"],!1).result;break;case 2:for(let g=0;g<l;++g)h=h.concat([`uniform vec3 lightColor${g};`,`uniform vec3 lightDirectionVC${g}; // normalized`,`uniform vec3 lightHalfAngleVC${g}; // normalized`]);o=Z.substitute(o,"//VTK::Light::Dec",h).result,h=["vec3 diffuseL = vec3(0,0,0);","  vec3 specularL = vec3(0,0,0);","  float df;"];for(let g=0;g<l;++g)h=h.concat([`  df = max(0.0, dot(normalVCVSOutput, -lightDirectionVC${g}));`,`  diffuseL += ((df${c}) * lightColor${g});`,`  if (dot(normalVCVSOutput, lightDirectionVC${g}) < 0.0)`,"    {",`    float sf = sign(df)*pow(max(1e-5,
                                              dot(reflect(lightDirectionVC${g},normalVCVSOutput),
                                                  normalize(-vertexVC.xyz))),
                                         specularPower);`,`    specularL += (sf${c} * lightColor${g});`,"    }"]);h=h.concat(["  diffuseL = diffuseL * diffuseColor;","  specularL = specularL * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"]),o=Z.substitute(o,"//VTK::Light::Impl",h,!1).result;break;case 3:for(let g=0;g<l;++g)h=h.concat([`uniform vec3 lightColor${g};`,`uniform vec3 lightDirectionVC${g}; // normalized`,`uniform vec3 lightHalfAngleVC${g}; // normalized`,`uniform vec3 lightPositionVC${g};`,`uniform vec3 lightAttenuation${g};`,`uniform float lightConeAngle${g};`,`uniform float lightExponent${g};`,`uniform int lightPositional${g};`]);o=Z.substitute(o,"//VTK::Light::Dec",h).result,h=["vec3 diffuseL = vec3(0,0,0);","  vec3 specularL = vec3(0,0,0);","  vec3 vertLightDirectionVC;","  float attenuation;","  float df;"];for(let g=0;g<l;++g)h=h.concat(["  attenuation = 1.0;",`  if (lightPositional${g} == 0)`,"    {",`      vertLightDirectionVC = lightDirectionVC${g};`,"    }","  else","    {",`    vertLightDirectionVC = vertexVC.xyz - lightPositionVC${g};`,"    float distanceVC = length(vertLightDirectionVC);","    vertLightDirectionVC = normalize(vertLightDirectionVC);","    attenuation = 1.0 /",`      (lightAttenuation${g}.x`,`       + lightAttenuation${g}.y * distanceVC`,`       + lightAttenuation${g}.z * distanceVC * distanceVC);`,"    // per OpenGL standard cone angle is 90 or less for a spot light",`    if (lightConeAngle${g} <= 90.0)`,"      {",`      float coneDot = dot(vertLightDirectionVC, lightDirectionVC${g});`,"      // if inside the cone",`      if (coneDot >= cos(radians(lightConeAngle${g})))`,"        {",`        attenuation = attenuation * pow(coneDot, lightExponent${g});`,"        }","      else","        {","        attenuation = 0.0;","        }","      }","    }","    df = max(0.0, attenuation*dot(normalVCVSOutput, -vertLightDirectionVC));",`    diffuseL += ((df${c}) * lightColor${g});`,"    if (dot(normalVCVSOutput, vertLightDirectionVC) < 0.0)","      {",`      float sf = sign(df)*attenuation*pow(max(1e-5,
                                                           dot(reflect(lightDirectionVC${g},
                                                                       normalVCVSOutput),
                                                               normalize(-vertexVC.xyz))),
                                                       specularPower);`,`    specularL += ((sf${c}) * lightColor${g});`,"    }"]);h=h.concat(["  diffuseL = diffuseL * diffuseColor;","  specularL = specularL * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"]),o=Z.substitute(o,"//VTK::Light::Impl",h,!1).result;break;default:va("bad light complexity")}r.Fragment=o},t.replaceShaderNormal=(r,a,s)=>{if(e.lastBoundBO.getReferenceByName("lastLightComplexity")>0){let c=r.Vertex,f=r.Geometry,l=r.Fragment;e.lastBoundBO.getCABO().getNormalOffset()?(c=Z.substitute(c,"//VTK::Normal::Dec",["attribute vec3 normalMC;","uniform mat3 normalMatrix;","varying vec3 normalVCVSOutput;"]).result,c=Z.substitute(c,"//VTK::Normal::Impl",["normalVCVSOutput = normalMatrix * normalMC;"]).result,f=Z.substitute(f,"//VTK::Normal::Dec",["in vec3 normalVCVSOutput[];","out vec3 normalVCGSOutput;"]).result,f=Z.substitute(f,"//VTK::Normal::Impl",["normalVCGSOutput = normalVCVSOutput[i];"]).result,l=Z.substitute(l,"//VTK::Normal::Dec",["varying vec3 normalVCVSOutput;"]).result,l=Z.substitute(l,"//VTK::Normal::Impl",["vec3 normalVCVSOutput = normalize(normalVCVSOutput);","  if (gl_FrontFacing == false) { normalVCVSOutput = -normalVCVSOutput; }"]).result):e.haveCellNormals?(l=Z.substitute(l,"//VTK::Normal::Dec",["uniform mat3 normalMatrix;","uniform samplerBuffer textureN;"]).result,l=Z.substitute(l,"//VTK::Normal::Impl",["vec3 normalVCVSOutput = normalize(normalMatrix *","    texelFetchBuffer(textureN, gl_PrimitiveID + PrimitiveIDOffset).xyz);","  if (gl_FrontFacing == false) { normalVCVSOutput = -normalVCVSOutput; }"]).result):e.lastBoundBO.getOpenGLMode(s.getProperty().getRepresentation())===e.context.LINES?(l=Z.substitute(l,"//VTK::UniformFlow::Impl",["  vec3 fdx = dFdx(vertexVC.xyz);","  vec3 fdy = dFdy(vertexVC.xyz);","  //VTK::UniformFlow::Impl"]).result,l=Z.substitute(l,"//VTK::Normal::Impl",["vec3 normalVCVSOutput;","  if (abs(fdx.x) > 0.0)","    { fdx = normalize(fdx); normalVCVSOutput = normalize(cross(vec3(fdx.y, -fdx.x, 0.0), fdx)); }","  else { fdy = normalize(fdy); normalVCVSOutput = normalize(cross(vec3(fdy.y, -fdy.x, 0.0), fdy));}"]).result):(l=Z.substitute(l,"//VTK::Normal::Dec",["uniform int cameraParallel;"]).result,l=Z.substitute(l,"//VTK::UniformFlow::Impl",["  vec3 fdx = dFdx(vertexVC.xyz);","  vec3 fdy = dFdy(vertexVC.xyz);","  //VTK::UniformFlow::Impl"]).result,l=Z.substitute(l,"//VTK::Normal::Impl",["  fdx = normalize(fdx);","  fdy = normalize(fdy);","  vec3 normalVCVSOutput = normalize(cross(fdx,fdy));","  if (cameraParallel == 1 && normalVCVSOutput.z < 0.0) { normalVCVSOutput = -1.0*normalVCVSOutput; }","  if (cameraParallel == 0 && dot(normalVCVSOutput,vertexVC.xyz) > 0.0) { normalVCVSOutput = -1.0*normalVCVSOutput; }"]).result),r.Vertex=c,r.Geometry=f,r.Fragment=l}},t.replaceShaderPositionVC=(r,a,s)=>{e.lastBoundBO.replaceShaderPositionVC(r,a,s);let o=r.Vertex,c=r.Geometry,f=r.Fragment;e.lastBoundBO.getReferenceByName("lastLightComplexity")>0?(o=Z.substitute(o,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,o=Z.substitute(o,"//VTK::PositionVC::Impl",["vertexVCVSOutput = MCVCMatrix * vertexMC;","  gl_Position = MCPCMatrix * vertexMC;"]).result,o=Z.substitute(o,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;","uniform mat4 MCVCMatrix;"]).result,c=Z.substitute(c,"//VTK::PositionVC::Dec",["in vec4 vertexVCVSOutput[];","out vec4 vertexVCGSOutput;"]).result,c=Z.substitute(c,"//VTK::PositionVC::Impl",["vertexVCGSOutput = vertexVCVSOutput[i];"]).result,f=Z.substitute(f,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,f=Z.substitute(f,"//VTK::PositionVC::Impl",["vec4 vertexVC = vertexVCVSOutput;"]).result):(o=Z.substitute(o,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;"]).result,o=Z.substitute(o,"//VTK::PositionVC::Impl",["  gl_Position = MCPCMatrix * vertexMC;"]).result),r.Vertex=o,r.Geometry=c,r.Fragment=f},t.replaceShaderTCoord=(r,a,s)=>{if(e.lastBoundBO.getCABO().getTCoordOffset()){let o=r.Vertex,c=r.Geometry,f=r.Fragment;if(e.drawingEdges)return;o=Z.substitute(o,"//VTK::TCoord::Impl","tcoordVCVSOutput = tcoordMC;").result;const l=e.openGLActor.getActiveTextures();let h=2,g=2;if(l&&l.length>0&&(h=l[0].getComponents(),l[0].getTarget()===e.context.TEXTURE_CUBE_MAP&&(g=3)),e.renderable.getColorTextureMap()&&(h=e.renderable.getColorTextureMap().getPointData().getScalars().getNumberOfComponents(),g=2),g===2){if(o=Z.substitute(o,"//VTK::TCoord::Dec","attribute vec2 tcoordMC; varying vec2 tcoordVCVSOutput;").result,c=Z.substitute(c,"//VTK::TCoord::Dec",["in vec2 tcoordVCVSOutput[];","out vec2 tcoordVCGSOutput;"]).result,c=Z.substitute(c,"//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];").result,f=Z.substitute(f,"//VTK::TCoord::Dec",["varying vec2 tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,l&&l.length>=1)switch(h){case 1:f=Z.substitute(f,"//VTK::TCoord::Impl",["  vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;"]).result;break;case 2:f=Z.substitute(f,"//VTK::TCoord::Impl",["  vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;","  opacity = opacity * tcolor.g;"]).result;break;default:f=Z.substitute(f,"//VTK::TCoord::Impl",["  vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.rgb;","  diffuseColor = diffuseColor*tcolor.rgb;","  opacity = opacity * tcolor.a;"]).result}}else switch(o=Z.substitute(o,"//VTK::TCoord::Dec","attribute vec3 tcoordMC; varying vec3 tcoordVCVSOutput;").result,c=Z.substitute(c,"//VTK::TCoord::Dec",["in vec3 tcoordVCVSOutput[];","out vec3 tcoordVCGSOutput;"]).result,c=Z.substitute(c,"//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];").result,f=Z.substitute(f,"//VTK::TCoord::Dec",["varying vec3 tcoordVCVSOutput;","uniform samplerCube texture1;"]).result,h){case 1:f=Z.substitute(f,"//VTK::TCoord::Impl",["  vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;"]).result;break;case 2:f=Z.substitute(f,"//VTK::TCoord::Impl",["  vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;","  opacity = opacity * tcolor.g;"]).result;break;default:f=Z.substitute(f,"//VTK::TCoord::Impl",["  vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.rgb;","  diffuseColor = diffuseColor*tcolor.rgb;","  opacity = opacity * tcolor.a;"]).result}r.Vertex=o,r.Geometry=c,r.Fragment=f}},t.replaceShaderClip=(r,a,s)=>{let o=r.Vertex,c=r.Fragment;if(e.renderable.getNumberOfClippingPlanes()){const f=e.renderable.getNumberOfClippingPlanes();o=Z.substitute(o,"//VTK::Clip::Dec",["uniform int numClipPlanes;",`uniform vec4 clipPlanes[${f}];`,`varying float clipDistancesVSOutput[${f}];`]).result,o=Z.substitute(o,"//VTK::Clip::Impl",[`for (int planeNum = 0; planeNum < ${f}; planeNum++)`,"    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    clipDistancesVSOutput[planeNum] = dot(clipPlanes[planeNum], vertexMC);","    }"]).result,c=Z.substitute(c,"//VTK::Clip::Dec",["uniform int numClipPlanes;",`varying float clipDistancesVSOutput[${f}];`]).result,c=Z.substitute(c,"//VTK::Clip::Impl",[`for (int planeNum = 0; planeNum < ${f}; planeNum++)`,"    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    if (clipDistancesVSOutput[planeNum] < 0.0) discard;","    }"]).result}r.Vertex=o,r.Fragment=c},t.getCoincidentParameters=(r,a)=>{let s={factor:0,offset:0};const o=a.getProperty();if(e.renderable.getResolveCoincidentTopology()==Qr.PolygonOffset||o.getEdgeVisibility()&&o.getRepresentation()===is.SURFACE){const f=e.lastBoundBO.getPrimitiveType();f===ot.Points||o.getRepresentation()===is.POINTS?s=e.renderable.getCoincidentTopologyPointOffsetParameter():f===ot.Lines||o.getRepresentation()===is.WIREFRAME?s=e.renderable.getCoincidentTopologyLineOffsetParameters():(f===ot.Tris||f===ot.TriStrips)&&(s=e.renderable.getCoincidentTopologyPolygonOffsetParameters()),(f===ot.TrisEdges||f===ot.TriStripsEdges)&&(s=e.renderable.getCoincidentTopologyPolygonOffsetParameters(),s.factor/=2,s.offset/=2)}const c=e._openGLRenderer.getSelector();return c&&c.getFieldAssociation()===pg.FIELD_ASSOCIATION_POINTS&&(s.offset-=2),s},t.replaceShaderPicking=(r,a,s)=>{let o=r.Fragment,c=r.Vertex;if(o=Z.substitute(o,"//VTK::Picking::Dec",["uniform int picking;","//VTK::Picking::Dec"]).result,!!e._openGLRenderer.getSelector()){switch((e.lastSelectionState===Bt.ID_LOW24||e.lastSelectionState===Bt.ID_HIGH24)&&(c=Z.substitute(c,"//VTK::Picking::Dec",[`flat out int vertexIDVSOutput;
`,`uniform int VertexIDOffset;
`]).result,c=Z.substitute(c,"//VTK::Picking::Impl",`  vertexIDVSOutput = gl_VertexID + VertexIDOffset;
`).result,o=Z.substitute(o,"//VTK::Picking::Dec",`flat in int vertexIDVSOutput;
`).result,o=Z.substitute(o,"//VTK::Picking::Impl",["  int idx = vertexIDVSOutput;","//VTK::Picking::Impl"]).result),e.lastSelectionState){case Bt.ID_LOW24:o=Z.substitute(o,"//VTK::Picking::Impl","  gl_FragData[0] = vec4(float(idx%256)/255.0, float((idx/256)%256)/255.0, float((idx/65536)%256)/255.0, 1.0);").result;break;case Bt.ID_HIGH24:o=Z.substitute(o,"//VTK::Picking::Impl","  gl_FragData[0] = vec4(float((idx/16777216)%256)/255.0, 0.0, 0.0, 1.0);").result;break;default:o=Z.substitute(o,"//VTK::Picking::Dec","uniform vec3 mapperIndex;").result,o=Z.substitute(o,"//VTK::Picking::Impl","  gl_FragData[0] = picking != 0 ? vec4(mapperIndex,1.0) : gl_FragData[0];").result}r.Fragment=o,r.Vertex=c}},t.replaceShaderValues=(r,a,s)=>{if(t.replaceShaderColor(r,a,s),t.replaceShaderNormal(r,a,s),t.replaceShaderLight(r,a,s),t.replaceShaderTCoord(r,a,s),t.replaceShaderPicking(r,a,s),t.replaceShaderClip(r,a,s),t.replaceShaderCoincidentOffset(r,a,s),t.replaceShaderPositionVC(r,a,s),e.haveSeenDepthRequest){let o=r.Fragment;o=Z.substitute(o,"//VTK::ZBuffer::Dec","uniform int depthRequest;").result,o=Z.substitute(o,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float iz = floor(gl_FragCoord.z*65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result,r.Fragment=o}},t.getNeedToRebuildShaders=(r,a,s)=>{let o=0,c=0;const f=r.getPrimitiveType(),l=e.currentInput;let h=!1;const g=l.getPointData().getNormals(),d=l.getCellData().getNormals(),v=s.getProperty().getInterpolation()===Bv.FLAT,S=s.getProperty().getRepresentation(),T=r.getOpenGLMode(S,f);if((T===e.context.TRIANGLES||d&&!g||!v&&g||!v&&T===e.context.LINES)&&(h=!0),s.getProperty().getLighting()&&h){o=0;const w=a.getLightsByReference();for(let R=0;R<w.length;++R){const M=w[R];M.getSwitch()>0&&(c++,o===0&&(o=1)),o===1&&(c>1||M.getIntensity()!==1||!M.lightTypeIsHeadLight())&&(o=2),o<3&&M.getPositional()&&(o=3)}}let x=!1;const m=e.lastBoundBO.getReferenceByName("lastLightComplexity"),O=e.lastBoundBO.getReferenceByName("lastLightCount");return(m!==o||O!==c)&&(e.lastBoundBO.set({lastLightComplexity:o},!0),e.lastBoundBO.set({lastLightCount:c},!0),x=!0),(!e.currentRenderPass&&e.lastRenderPassShaderReplacement||e.currentRenderPass&&e.currentRenderPass.getShaderReplacement()!==e.lastRenderPassShaderReplacement)&&(x=!0),e.lastHaveSeenDepthRequest!==e.haveSeenDepthRequest||r.getShaderSourceTime().getMTime()<e.renderable.getMTime()||r.getShaderSourceTime().getMTime()<e.currentInput.getMTime()||r.getShaderSourceTime().getMTime()<e.selectionStateChanged.getMTime()||x?(e.lastHaveSeenDepthRequest=e.haveSeenDepthRequest,!0):!1},t.invokeShaderCallbacks=(r,a,s)=>{const o=e.renderable.getViewSpecificProperties().ShadersCallbacks;o&&o.forEach(c=>{c.callback(c.userData,r,a,s)})},t.setMapperShaderParameters=(r,a,s)=>{if(r.getProgram().isUniformUsed("PrimitiveIDOffset")&&r.getProgram().setUniformi("PrimitiveIDOffset",e.primitiveIDOffset),r.getProgram().isUniformUsed("VertexIDOffset")&&r.getProgram().setUniformi("VertexIDOffset",e.vertexIDOffset),r.getCABO().getElementCount()&&(e.VBOBuildTime.getMTime()>r.getAttributeUpdateTime().getMTime()||r.getShaderSourceTime().getMTime()>r.getAttributeUpdateTime().getMTime())){const f=e.lastBoundBO.getReferenceByName("lastLightComplexity");r.getProgram().isAttributeUsed("vertexMC")&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"vertexMC",r.getCABO().getVertexOffset(),r.getCABO().getStride(),e.context.FLOAT,3,!1)||va("Error setting vertexMC in shader VAO.")),r.getProgram().isAttributeUsed("normalMC")&&r.getCABO().getNormalOffset()&&f>0?r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"normalMC",r.getCABO().getNormalOffset(),r.getCABO().getStride(),e.context.FLOAT,3,!1)||va("Error setting normalMC in shader VAO."):r.getVAO().removeAttributeArray("normalMC"),e.renderable.getCustomShaderAttributes().forEach((l,h)=>{r.getProgram().isAttributeUsed(`${l}MC`)&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),`${l}MC`,r.getCABO().getCustomData()[h].offset,r.getCABO().getStride(),e.context.FLOAT,r.getCABO().getCustomData()[h].components,!1)||va(`Error setting ${l}MC in shader VAO.`))}),r.getProgram().isAttributeUsed("tcoordMC")&&r.getCABO().getTCoordOffset()?r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"tcoordMC",r.getCABO().getTCoordOffset(),r.getCABO().getStride(),e.context.FLOAT,r.getCABO().getTCoordComponents(),!1)||va("Error setting tcoordMC in shader VAO."):r.getVAO().removeAttributeArray("tcoordMC"),r.getProgram().isAttributeUsed("scalarColor")&&r.getCABO().getColorComponents()?r.getVAO().addAttributeArray(r.getProgram(),r.getCABO().getColorBO(),"scalarColor",r.getCABO().getColorOffset(),r.getCABO().getColorBOStride(),e.context.UNSIGNED_BYTE,4,!0)||va("Error setting scalarColor in shader VAO."):r.getVAO().removeAttributeArray("scalarColor"),r.getAttributeUpdateTime().modified()}if(e.renderable.getNumberOfClippingPlanes()){const f=e.renderable.getNumberOfClippingPlanes(),l=[],g=r.getCABO().getCoordShiftAndScaleEnabled()?r.getCABO().getInverseShiftAndScaleMatrix():null,d=g?St(e.tmpMat4,s.getMatrix()):s.getMatrix();g&&(ze(d,d),ut(d,d,g),ze(d,d));for(let v=0;v<f;v++){const S=[];e.renderable.getClippingPlaneInDataCoords(d,v,S);for(let T=0;T<4;T++)l.push(S[T])}r.getProgram().setUniformi("numClipPlanes",f),r.getProgram().setUniform4fv("clipPlanes",l)}e.internalColorTexture&&r.getProgram().isUniformUsed("texture1")&&r.getProgram().setUniformi("texture1",e.internalColorTexture.getTextureUnit());const o=e.openGLActor.getActiveTextures();if(o)for(let f=0;f<o.length;++f){const h=o[f].getTextureUnit(),g=`texture${h+1}`;r.getProgram().isUniformUsed(g)&&r.getProgram().setUniformi(g,h)}if(e.haveSeenDepthRequest&&r.getProgram().setUniformi("depthRequest",e.renderDepth?1:0),r.getProgram().isUniformUsed("coffset")){const f=t.getCoincidentParameters(a,s);r.getProgram().setUniformf("coffset",f.offset),r.getProgram().isUniformUsed("cfactor")&&r.getProgram().setUniformf("cfactor",f.factor)}r.setMapperShaderParameters(a,s,e._openGLRenderer.getTiledSizeAndOrigin());const c=e._openGLRenderer.getSelector();r.getProgram().setUniform3fArray("mapperIndex",c?c.getPropColorValue():[0,0,0]),r.getProgram().setUniformi("picking",c?c.getCurrentPass()+1:0)},t.setLightingShaderParameters=(r,a,s)=>{const o=e.lastBoundBO.getReferenceByName("lastLightComplexity");if(o<2)return;const c=r.getProgram();let f=0;const l=a.getLightsByReference();for(let d=0;d<l.length;++d){const v=l[d];if(v.getSwitch()>0){const T=v.getColorByReference(),x=v.getIntensity();e.lightColor[0]=T[0]*x,e.lightColor[1]=T[1]*x,e.lightColor[2]=T[2]*x;const m=v.getDirection(),O=a.getActiveCamera().getViewMatrix(),w=[...m];v.lightTypeIsSceneLight()&&(w[0]=O[0]*m[0]+O[1]*m[1]+O[2]*m[2],w[1]=O[4]*m[0]+O[5]*m[1]+O[6]*m[2],w[2]=O[8]*m[0]+O[9]*m[1]+O[10]*m[2],xs(w)),e.lightDirection[0]=w[0],e.lightDirection[1]=w[1],e.lightDirection[2]=w[2],xs(e.lightDirection),c.setUniform3fArray(`lightColor${f}`,e.lightColor),c.setUniform3fArray(`lightDirectionVC${f}`,e.lightDirection),f++}}if(o<3)return;const g=a.getActiveCamera().getViewMatrix();ze(g,g),f=0;for(let d=0;d<l.length;++d){const v=l[d];if(v.getSwitch()>0){const T=v.getTransformedPosition(),x=new Float64Array(3);Ve(x,T,g),c.setUniform3fArray(`lightAttenuation${f}`,v.getAttenuationValuesByReference()),c.setUniformi(`lightPositional${f}`,v.getPositional()),c.setUniformf(`lightExponent${f}`,v.getExponent()),c.setUniformf(`lightConeAngle${f}`,v.getConeAngle()),c.setUniform3fArray(`lightPositionVC${f}`,[x[0],x[1],x[2]]),f++}}};function n(r,a,s){return a.identity(s),r.reduce((o,c,f)=>f===0?c?a.copy(o,c):a.identity(o):c?a.multiply(o,o,c):o,s)}t.setCameraShaderParameters=(r,a,s)=>{const o=r.getProgram(),c=e.openGLCamera.getKeyMatrices(a),f=a.getActiveCamera(),l=e.openGLCamera.getKeyMatrixTime().getMTime(),h=o.getLastCameraMTime(),d=r.getCABO().getCoordShiftAndScaleEnabled()?r.getCABO().getInverseShiftAndScaleMatrix():null,v=s.getIsIdentity(),S=v?{mcwc:null,normalMatrix:null}:e.openGLActor.getKeyMatrices();if(s.getCoordinateSystem()===jL.DISPLAY){const T=e._openGLRenderer.getTiledSizeAndOrigin();Ce(e.tmpMat4),e.tmpMat4[0]=2/T.usize,e.tmpMat4[12]=-1,e.tmpMat4[5]=2/T.vsize,e.tmpMat4[13]=-1,ut(e.tmpMat4,e.tmpMat4,d),o.setUniformMatrix("MCPCMatrix",e.tmpMat4)}else o.setUniformMatrix("MCPCMatrix",n([c.wcpc,S.mcwc,d],Ug,e.tmpMat4));o.isUniformUsed("MCVCMatrix")&&o.setUniformMatrix("MCVCMatrix",n([c.wcvc,S.mcwc,d],Ug,e.tmpMat4)),o.isUniformUsed("normalMatrix")&&o.setUniformMatrix3x3("normalMatrix",n([c.normalMatrix,S.normalMatrix],AE,e.tmpMat3)),h!==l&&(o.isUniformUsed("cameraParallel")&&o.setUniformi("cameraParallel",f.getParallelProjection()),o.setLastCameraMTime(l)),v||o.setLastCameraMTime(0)},t.setPropertyShaderParameters=(r,a,s)=>{const o=r.getProgram();let c=s.getProperty(),f=c.getOpacity(),l=e.drawingEdges?c.getEdgeColorByReference():c.getAmbientColorByReference(),h=e.drawingEdges?c.getEdgeColorByReference():c.getDiffuseColorByReference(),g=e.drawingEdges?1:c.getAmbient(),d=e.drawingEdges?0:c.getDiffuse(),v=e.drawingEdges?0:c.getSpecular();const S=c.getSpecularPower();o.setUniformf("opacityUniform",f),o.setUniform3fArray("ambientColorUniform",l),o.setUniform3fArray("diffuseColorUniform",h),o.setUniformf("ambient",g),o.setUniformf("diffuse",d);const T=e.lastBoundBO.getReferenceByName("lastLightComplexity");if(T<1)return;let x=c.getSpecularColorByReference();if(o.setUniform3fArray("specularColorUniform",x),o.setUniformf("specularPowerUniform",S),o.setUniformf("specular",v),o.isUniformUsed("ambientIntensityBF")){if(c=s.getBackfaceProperty(),f=c.getOpacity(),l=c.getAmbientColor(),g=c.getAmbient(),h=c.getDiffuseColor(),d=c.getDiffuse(),x=c.getSpecularColor(),v=c.getSpecular(),o.setUniformf("ambientIntensityBF",g),o.setUniformf("diffuseIntensityBF",d),o.setUniformf("opacityUniformBF",f),o.setUniform3fArray("ambientColorUniformBF",l),o.setUniform3fArray("diffuseColorUniformBF",h),T<1)return;o.setUniformf("specularIntensityBF",v),o.setUniform3fArray("specularColorUniformBF",x),o.setUniformf("specularPowerUniformBF",S)}},t.updateMaximumPointCellIds=(r,a)=>{var c,f,l,h;const s=e._openGLRenderer.getSelector();if(!s)return;if((f=(c=e.selectionWebGLIdsToVTKIds)==null?void 0:c.points)!=null&&f.length){const g=e.selectionWebGLIdsToVTKIds.points.length;s.setMaximumPointId(g-1)}if((h=(l=e.selectionWebGLIdsToVTKIds)==null?void 0:l.cells)!=null&&h.length){const g=e.selectionWebGLIdsToVTKIds.cells.length;s.setMaximumCellId(g-1)}s.getFieldAssociation()===pg.FIELD_ASSOCIATION_POINTS&&(e.pointPicking=!0)},t.renderPieceStart=(r,a)=>{e.primitiveIDOffset=0,e.vertexIDOffset=0;const s=KL(e._openGLRenderer);if(e.lastSelectionState!==s&&(e.selectionStateChanged.modified(),e.lastSelectionState=s),e._openGLRenderer.getSelector())switch(s){default:e._openGLRenderer.getSelector().renderProp(a)}t.updateBufferObjects(r,a),e.renderable.getColorTextureMap()&&e.internalColorTexture.activate(),e.lastBoundBO=null},t.renderPieceDraw=(r,a)=>{const s=a.getProperty().getRepresentation(),o=a.getProperty().getEdgeVisibility()&&s===is.SURFACE,c=e._openGLRenderer.getSelector(),f=c&&c.getFieldAssociation()===pg.FIELD_ASSOCIATION_POINTS&&(e.lastSelectionState===Bt.ID_LOW24||e.lastSelectionState===Bt.ID_HIGH24);for(let l=ot.Start;l<ot.End;l++)e.primitives[l].setPointPicking(f),e.primitives[l].getCABO().getElementCount()&&(e.drawingEdges=o&&(l===ot.TrisEdges||l===ot.TriStripsEdges),(!e.drawingEdges||!(e.renderDepth||e.lastSelectionState>=0))&&(e.lastBoundBO=e.primitives[l],e.primitiveIDOffset+=e.primitives[l].drawArrays(r,a,s,t),e.vertexIDOffset+=e.primitives[l].getCABO().getElementCount()))},t.renderPieceFinish=(r,a)=>{e.LastBoundBO&&e.LastBoundBO.getVAO().release(),e.renderable.getColorTextureMap()&&e.internalColorTexture.deactivate()},t.renderPiece=(r,a)=>{if(t.invokeEvent(bL),e.renderable.getStatic()||e.renderable.update(),e.currentInput=e.renderable.getInputData(),t.invokeEvent(AL),!e.currentInput){va("No input!");return}if(!e.currentInput.getPoints||!e.currentInput.getPoints().getNumberOfValues())return;const s=e.context,o=a.getProperty().getBackfaceCulling(),c=a.getProperty().getFrontfaceCulling();!o&&!c?e._openGLRenderWindow.disableCullFace():c?(e._openGLRenderWindow.enableCullFace(),s.cullFace(s.FRONT)):(e._openGLRenderWindow.enableCullFace(),s.cullFace(s.BACK)),t.renderPieceStart(r,a),t.renderPieceDraw(r,a),t.renderPieceFinish(r,a)},t.computeBounds=(r,a)=>{if(!t.getInput()){V1(e.bounds);return}e.bounds=t.getInput().getBounds()},t.updateBufferObjects=(r,a)=>{t.getNeedToRebuildBufferObjects(r,a)&&t.buildBufferObjects(r,a),t.updateMaximumPointCellIds()},t.getNeedToRebuildBufferObjects=(r,a)=>{const s=e.VBOBuildTime.getMTime();return s<t.getMTime()||s<e.renderable.getMTime()||s<a.getMTime()||s<e.currentInput.getMTime()},t.buildBufferObjects=(r,a)=>{const s=e.currentInput;if(s===null)return;e.renderable.mapScalars(s,1);const o=e.renderable.getColorMapColors();e.haveCellScalars=!1;const c=e.renderable.getScalarMode();e.renderable.getScalarVisibility()&&(c===mu.USE_CELL_DATA||c===mu.USE_CELL_FIELD_DATA||c===mu.USE_FIELD_DATA||!s.getPointData().getScalars())&&c!==mu.USE_POINT_FIELD_DATA&&o&&(e.haveCellScalars=!0);let f=a.getProperty().getInterpolation()!==Bv.FLAT?s.getPointData().getNormals():null;f===null&&s.getCellData().getNormals()&&(e.haveCellNormals=!0,f=s.getCellData().getNormals());const l=a.getProperty().getRepresentation();let h=s.getPointData().getTCoords();e.openGLActor.getActiveTextures()||(h=null);let g=!1;if(e.renderable.getColorCoordinates()){h=e.renderable.getColorCoordinates(),g=e.renderable.getAreScalarsMappedFromCells(),e.internalColorTexture||(e.internalColorTexture=Da.newInstance({resizable:!0}));const v=e.internalColorTexture;v.setMinificationFilter(Fv.NEAREST),v.setMagnificationFilter(Fv.NEAREST),v.setWrapS(Nv.CLAMP_TO_EDGE),v.setWrapT(Nv.CLAMP_TO_EDGE),v.setOpenGLRenderWindow(e._openGLRenderWindow);const S=e.renderable.getColorTextureMap(),T=S.getExtent(),x=S.getPointData().getScalars();v.create2DFromRaw(T[1]-T[0]+1,T[3]-T[2]+1,x.getNumberOfComponents(),x.getDataType(),x.getData()),v.activate(),v.sendParameters(),v.deactivate()}const d=`${s.getMTime()}A${l}B${s.getMTime()}C${f?f.getMTime():1}D${o?o.getMTime():1}E${a.getProperty().getEdgeVisibility()}F${h?h.getMTime():1}`;if(e.VBOBuildString!==d){const S={points:s.getPoints(),normals:f,tcoords:h,colors:o,cellOffset:0,vertexOffset:0,useTCoordsPerCell:g,haveCellScalars:e.haveCellScalars,haveCellNormals:e.haveCellNormals,customAttributes:e.renderable.getCustomShaderAttributes().map(m=>s.getPointData().getArrayByName(m))};e.renderable.getPopulateSelectionSettings()&&(e.selectionWebGLIdsToVTKIds={points:null,cells:null});const T=[{inRep:"verts",cells:s.getVerts()},{inRep:"lines",cells:s.getLines()},{inRep:"polys",cells:s.getPolys()},{inRep:"strips",cells:s.getStrips()},{inRep:"polys",cells:s.getPolys()},{inRep:"strips",cells:s.getStrips()}],x=a.getProperty().getEdgeVisibility()&&l===is.SURFACE;for(let m=ot.Start;m<ot.End;m++)m!==ot.TrisEdges&&m!==ot.TriStripsEdges?(S.cellOffset+=e.primitives[m].getCABO().createVBO(T[m].cells,T[m].inRep,l,S,e.selectionWebGLIdsToVTKIds),S.vertexOffset+=e.primitives[m].getCABO().getElementCount()):x?e.primitives[m].getCABO().createVBO(T[m].cells,T[m].inRep,is.WIREFRAME,{...S,tcoords:null,colors:null,haveCellScalars:!1,haveCellNormals:!1}):e.primitives[m].releaseGraphicsResources();e.renderable.getPopulateSelectionSettings()&&e.renderable.setSelectionWebGLIdsToVTKIds(e.selectionWebGLIdsToVTKIds),e.VBOBuildString=d}e.VBOBuildTime.modified()},t.getAllocatedGPUMemoryInBytes=()=>{let r=0;return e.primitives.forEach(a=>{r+=a.getAllocatedGPUMemoryInBytes()}),r}}const XL={context:null,VBOBuildTime:0,VBOBuildString:null,primitives:null,primTypes:null,shaderRebuildString:null,tmpMat4:null,ambientColor:[],diffuseColor:[],specularColor:[],lightColor:[],lightDirection:[],lastHaveSeenDepthRequest:!1,haveSeenDepthRequest:!1,lastSelectionState:Bt.MIN_KNOWN_PASS-1,selectionStateChanged:null,selectionWebGLIdsToVTKIds:null,pointPicking:!1};function IL(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,XL,n),qe.extend(t,e,n),Sc.implementReplaceShaderCoincidentOffset(t,e,n),Sc.implementBuildShadersWithReplacements(t,e,n),e.primitives=[],e.primTypes=ot,e.tmpMat3=Va(new Float64Array(9)),e.tmpMat4=Ce(new Float64Array(16));for(let r=ot.Start;r<ot.End;r++)e.primitives[r]=Ms.newInstance(),e.primitives[r].setPrimitiveType(r),e.primitives[r].set({lastLightComplexity:0,lastLightCount:0,lastSelectionPass:!1},!0);ct(t,e,["context"]),e.VBOBuildTime={},vt(e.VBOBuildTime,{mtime:0}),e.selectionStateChanged={},vt(e.selectionStateChanged,{mtime:0}),PL(t,e)}const YL=Ne(IL,"vtkOpenGLPolyDataMapper");cn("vtkMapper",YL);const{ColorMode:qL,ScalarMode:ya,GetArray:hg}=Mc;function QL(t,e){e.classHierarchy.push("vtkMapper2D"),t.createDefaultLookupTable=()=>{e.lookupTable=vc.newInstance()},t.getColorModeAsString=()=>L.enumToString(qL,e.colorMode),t.setColorModeToDefault=()=>t.setColorMode(0),t.setColorModeToMapScalars=()=>t.setColorMode(1),t.setColorModeToDirectScalars=()=>t.setColorMode(2),t.getScalarModeAsString=()=>L.enumToString(ya,e.scalarMode),t.setScalarModeToDefault=()=>t.setScalarMode(0),t.setScalarModeToUsePointData=()=>t.setScalarMode(1),t.setScalarModeToUseCellData=()=>t.setScalarMode(2),t.setScalarModeToUsePointFieldData=()=>t.setScalarMode(3),t.setScalarModeToUseCellFieldData=()=>t.setScalarMode(4),t.setScalarModeToUseFieldData=()=>t.setScalarMode(5),t.getAbstractScalars=(n,r,a,s,o)=>{if(!n||!e.scalarVisibility)return{scalars:null,cellFLag:!1};let c=null,f=!1;if(r===ya.DEFAULT)c=n.getPointData().getScalars(),c||(c=n.getCellData().getScalars(),f=!0);else if(r===ya.USE_POINT_DATA)c=n.getPointData().getScalars();else if(r===ya.USE_CELL_DATA)c=n.getCellData().getScalars(),f=!0;else if(r===ya.USE_POINT_FIELD_DATA){const l=n.getPointData();a===hg.BY_ID?c=l.getArrayByIndex(s):c=l.getArrayByName(o)}else if(r===ya.USE_CELL_FIELD_DATA){const l=n.getCellData();f=!0,a===hg.BY_ID?c=l.getArrayByIndex(s):c=l.getArrayByName(o)}else if(r===ya.USE_FIELD_DATA){const l=n.getFieldData();a===hg.BY_ID?c=l.getArrayByIndex(s):c=l.getArrayByName(o)}return{scalars:c,cellFlag:f}},t.getLookupTable=()=>(e.lookupTable||t.createDefaultLookupTable(),e.lookupTable),t.getMTime=()=>{let n=e.mtime;if(e.lookupTable!==null){const r=e.lookupTable.getMTime();n=r>n?r:n}return n},t.mapScalars=(n,r)=>{const a=t.getAbstractScalars(n,e.scalarMode,e.arrayAccessMode,e.arrayId,e.colorByArrayName).scalars;if(!a){e.colorMapColors=null;return}const s=`${t.getMTime()}${a.getMTime()}${r}`;if(e.colorBuildString===s)return;e.useLookupTableScalarRange||t.getLookupTable().setRange(e.scalarRange[0],e.scalarRange[1]);const o=t.getLookupTable();o&&(o.build(),e.colorMapColors=o.mapScalars(a,e.colorMode,e.fieldDataTupleId)),e.colorBuildString=`${t.getMTime()}${a.getMTime()}${r}`},t.getPrimitiveCount=()=>{const n=t.getInputData();return{points:n.getPoints().getNumberOfValues()/3,verts:n.getVerts().getNumberOfValues()-n.getVerts().getNumberOfCells(),lines:n.getLines().getNumberOfValues()-2*n.getLines().getNumberOfCells(),triangles:n.getPolys().getNumberOfValues()-3*n.getPolys().getNumberOfCells()}}}const ZL={static:!1,lookupTable:null,scalarVisibility:!1,scalarRange:[0,1],useLookupTableScalarRange:!1,colorMode:0,scalarMode:0,arrayAccessMode:1,renderTime:0,colorByArrayName:null,transformCoordinate:null,viewSpecificProperties:null,customShaderAttributes:[]};function e2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,ZL,n),gx.extend(t,e,n),L.get(t,e,["colorMapColors"]),L.setGet(t,e,["arrayAccessMode","colorByArrayName","colorMode","lookupTable","renderTime","scalarMode","scalarVisibility","static","transformCoordinate","useLookupTableScalarRange","viewSpecificProperties","customShaderAttributes"]),L.setGetArray(t,e,["scalarRange"],2),e.viewSpecificProperties||(e.viewSpecificProperties={}),QL(t,e)}const JL=L.newInstance(e2,"vtkMapper2D");var e_={newInstance:JL,extend:e2},t_=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkPolyData2DFS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/

uniform int PrimitiveIDOffset;

// Texture coordinates
//VTK::TCoord::Dec

// Scalar coloring
//VTK::Color::Dec

// Depth Peeling
//VTK::DepthPeeling::Dec

// picking support
//VTK::Picking::Dec

// the output of this shader
//VTK::Output::Dec

// Apple Bug
//VTK::PrimID::Dec

void main()
{
  // Apple Bug
  //VTK::PrimID::Impl

  //VTK::Color::Impl
  //VTK::TCoord::Impl

  //VTK::DepthPeeling::Impl
  //VTK::Picking::Impl

  if (gl_FragData[0].a <= 0.0)
    {
    discard;
    }
}
`,n_=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkPolyData2DVS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/

// all variables that represent positions or directions have a suffix
// indicating the coordinate system they are in. The possible values are
// MC - Model Coordinates
// WC - WC world coordinates
// VC - View Coordinates
// DC - Display Coordinates

in vec4 vertexWC;

// frag position in VC
//VTK::PositionVC::Dec

// material property values
//VTK::Color::Dec

// Texture coordinates
//VTK::TCoord::Dec

// Apple Bug
//VTK::PrimID::Dec

uniform mat4 WCVCMatrix;  // World to view matrix

void main()
{
  // Apple Bug
  //VTK::PrimID::Impl

  gl_Position = WCVCMatrix*vertexWC;

  //VTK::TCoord::Impl

  //VTK::Color::Impl

  //VTK::PositionVC::Impl
}
`;const t2={BACKGROUND:0,FOREGROUND:1};var n2={DisplayLocation:t2};const{primTypes:Sn}=Ms,{ScalarMode:Ru}=e_,{vtkErrorMacro:Ou}=Pn,r_={type:"StartEvent"},a_={type:"EndEvent"};function s_(t,e){e.classHierarchy.push("vtkOpenGLPolyDataMapper2D"),t.buildPass=r=>{r&&(e.openGLActor2D=t.getFirstAncestorOfType("vtkOpenGLActor2D"),e._openGLRenderer=e.openGLActor2D.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow"),e.openGLCamera=e._openGLRenderer.getViewNodeFor(e._openGLRenderer.getRenderable().getActiveCamera()))},t.overlayPass=r=>{r&&t.render()},t.getShaderTemplate=(r,a,s)=>{r.Vertex=n_,r.Fragment=t_,r.Geometry=""},t.render=()=>{const r=e._openGLRenderWindow.getContext();if(e.context!==r){e.context=r;for(let o=Sn.Start;o<Sn.End;o++)e.primitives[o].setOpenGLRenderWindow(e._openGLRenderWindow)}const a=e.openGLActor2D.getRenderable(),s=e._openGLRenderer.getRenderable();t.renderPiece(s,a)},t.renderPiece=(r,a)=>{if(t.invokeEvent(r_),e.renderable.getStatic()||e.renderable.update(),e.currentInput=e.renderable.getInputData(),t.invokeEvent(a_),!e.currentInput){Ou("No input!");return}!e.currentInput.getPoints||!e.currentInput.getPoints().getNumberOfValues()||(t.renderPieceStart(r,a),t.renderPieceDraw(r,a),t.renderPieceFinish(r,a))},t.renderPieceStart=(r,a)=>{if(e.primitiveIDOffset=0,e._openGLRenderer.getSelector())switch(e._openGLRenderer.getSelector().getCurrentPass()){default:e._openGLRenderer.getSelector().renderProp(a)}t.updateBufferObjects(r,a),e.lastBoundBO=null},t.getNeedToRebuildShaders=(r,a,s)=>r.getShaderSourceTime().getMTime()<e.renderable.getMTime()||r.getShaderSourceTime().getMTime()<e.currentInput.getMTime(),t.updateBufferObjects=(r,a)=>{t.getNeedToRebuildBufferObjects(r,a)&&t.buildBufferObjects(r,a)},t.getNeedToRebuildBufferObjects=(r,a)=>{const s=e.VBOBuildTime.getMTime();return!!(s<t.getMTime()||s<e._openGLRenderWindow.getMTime()||s<e.renderable.getMTime()||s<a.getMTime()||s<e.currentInput.getMTime()||e.renderable.getTransformCoordinate()&&s<r.getMTime())},t.buildBufferObjects=(r,a)=>{const s=e.currentInput;if(s===null)return;e.renderable.mapScalars(s,a.getProperty().getOpacity());const o=e.renderable.getColorMapColors();e.haveCellScalars=!1;const c=e.renderable.getScalarMode();e.renderable.getScalarVisibility()&&(c===Ru.USE_CELL_DATA||c===Ru.USE_CELL_FIELD_DATA||c===Ru.USE_FIELD_DATA||!s.getPointData().getScalars())&&c!==Ru.USE_POINT_FIELD_DATA&&o&&(e.haveCellScalars=!0);const f=a.getProperty().getRepresentation();let l=s.getPointData().getTCoords();e.openGLActor2D.getActiveTextures()||(l=null);const h=e.renderable.getTransformCoordinate(),d=r.getRenderWindow().getViews()[0].getViewportSize(r),v=`${s.getMTime()}A${f}B${s.getMTime()}C${o?o.getMTime():1}D${l?l.getMTime():1}E${h?r.getMTime():1}F${d}`;if(e.VBOBuildString!==v){let S=s.getPoints();if(h){const x=$i.newInstance(),m=S.getNumberOfPoints();x.setNumberOfPoints(m);const O=[];for(let w=0;w<m;++w){S.getPoint(w,O),h.setValue(O);const R=h.getComputedDoubleViewportValue(r);x.setPoint(w,R[0],R[1],0)}S=x}const T={points:S,tcoords:l,colors:o,cellOffset:0,haveCellScalars:e.haveCellSCalars,customAttributes:e.renderable.getCustomShaderAttributes().map(x=>s.getPointData().getArrayByName(x))};T.cellOffset+=e.primitives[Sn.Points].getCABO().createVBO(s.getVerts(),"verts",f,T),T.cellOffset+=e.primitives[Sn.Lines].getCABO().createVBO(s.getLines(),"lines",f,T),T.cellOffset+=e.primitives[Sn.Tris].getCABO().createVBO(s.getPolys(),"polys",f,T),T.cellOffset+=e.primitives[Sn.TriStrips].getCABO().createVBO(s.getStrips(),"strips",f,T),e.VBOBuildTime.modified(),e.VBOBuildString=v}},t.renderPieceDraw=(r,a)=>{const s=a.getProperty().getRepresentation();e.context.depthMask(!0);for(let c=Sn.Start;c<Sn.End;c++)e.primitives[c].getCABO().getElementCount()&&(e.lastBoundBO=e.primitives[c],e.primitiveIDOffset+=e.primitives[c].drawArrays(r,a,s,t))},t.renderPieceFinish=(r,a)=>{e.lastBoundBO&&e.lastBoundBO.getVAO().release()},t.replaceShaderValues=(r,a,s)=>{t.replaceShaderColor(r,a,s),t.replaceShaderTCoord(r,a,s),t.replaceShaderPicking(r,a,s),t.replaceShaderPositionVC(r,a,s)},t.replaceShaderColor=(r,a,s)=>{let o=r.Vertex,c=r.Geometry,f=r.Fragment;e.haveCellScalars&&(f=Z.substitute(f,"//VTK::Color::Dec",["uniform samplerBuffer texture1;"]).result,f=Z.substitute(f,"//VTK::Color::Impl",["gl_FragData[0] = texelFetchBuffer(texture1, gl_PrimitiveID + PrimitiveIDOffset);"]).result),e.lastBoundBO.getCABO().getColorComponents()!==0?(o=Z.substitute(o,"//VTK::Color::Dec",["in vec4 diffuseColor;","out vec4 fcolorVSOutput;"]).result,o=Z.substitute(o,"//VTK::Color::Impl",["fcolorVSOutput = diffuseColor;"]).result,c=Z.substitute(c,"//VTK::Color::Dec",[`in vec4 fcolorVSOutput[];
`,"out vec4 fcolorGSOutput;"]).result,c=Z.substitute(c,"//VTK::Color::Impl",["fcolorGSOutput = fcolorVSOutput[i];"]).result,f=Z.substitute(f,"//VTK::Color::Dec",["in vec4 fcolorVSOutput;"]).result,f=Z.substitute(f,"//VTK::Color::Impl",["gl_FragData[0] = fcolorVSOutput;"]).result):(f=Z.substitute(f,"//VTK::Color::Dec",["uniform vec4 diffuseColor;"]).result,f=Z.substitute(f,"//VTK::Color::Impl",["gl_FragData[0] = diffuseColor;"]).result),r.Vertex=o,r.Geometry=c,r.Fragment=f},t.replaceShaderTCoord=(r,a,s)=>{if(e.lastBoundBO.getCABO().getTCoordOffset()){let o=r.Vertex,c=r.Geometry,f=r.Fragment;const l=e.lastBoundBO.getCABO().getTCoordComponents();l===1?(o=Z.substitute(o,"//VTK::TCoord::Dec",["in float tcoordMC;","out float tcoordVCVSOutput;"]).result,o=Z.substitute(o,"//VTK::TCoord::Impl",["tcoordVCVSOutput = tcoordMC;"]).result,c=Z.substitute(c,"//VTK::TCoord::Dec",[`in float tcoordVCVSOutput[];
`,"out float tcoordVCGSOutput;"]).result,c=Z.substitute(c,["//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];"]).result,f=Z.substitute(f,"//VTK::TCoord::Dec",["in float tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,f=Z.substitute(f,"//VTK::TCoord::Impl",["gl_FragData[0] = gl_FragData[0]*texture2D(texture1, vec2(tcoordVCVSOutput,0));"]).result):l===2&&(o=Z.substitute(o,"//VTK::TCoord::Dec",["in vec2 tcoordMC;","out vec2 tcoordVCVSOutput;"]).result,o=Z.substitute(o,"//VTK::TCoord::Impl",["tcoordVCVSOutput = tcoordMC;"]).result,c=Z.substitute(c,"//VTK::TCoord::Dec",[`in vec2 tcoordVCVSOutput[];
`,"out vec2 tcoordVCGSOutput;"]).result,c=Z.substitute(c,"//VTK::TCoord::Impl",["tcoordVCGSOutput = tcoordVCVSOutput[i];"]).result,f=Z.substitute(f,"//VTK::TCoord::Dec",["in vec2 tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,f=Z.substitute(f,"//VTK::TCoord::Impl",["gl_FragData[0] = gl_FragData[0]*texture2D(texture1, tcoordVCVSOutput.st);"]).result),e.haveCellScalars&&(c=Z.substitute(c,"//VTK::PrimID::Impl",["gl_PrimitiveID = gl_PrimitiveIDIn;"]).result),r.Vertex=o,r.Geometry=c,r.Fragment=f}},t.replaceShaderPicking=(r,a,s)=>{let o=r.Fragment;o=Z.substitute(o,"//VTK::Picking::Dec",["uniform vec3 mapperIndex;","uniform int picking;"]).result,o=Z.substitute(o,"//VTK::Picking::Impl","  gl_FragData[0] = picking != 0 ? vec4(mapperIndex,1.0) : gl_FragData[0];").result,r.Fragment=o},t.replaceShaderPositionVC=(r,a,s)=>{e.lastBoundBO.replaceShaderPositionVC(r,a,s)},t.invokeShaderCallbacks=(r,a,s)=>{const o=e.renderable.getViewSpecificProperties().ShadersCallbacks;o&&o.forEach(c=>{c.callback(c.userData,r,a,s)})},t.setMapperShaderParameters=(r,a,s)=>{if(r.getProgram().isUniformUsed("PrimitiveIDOffset")&&r.getProgram().setUniformi("PrimitiveIDOffset",e.primitiveIDOffset),r.getProgram().isAttributeUsed("vertexWC")&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"vertexWC",r.getCABO().getVertexOffset(),r.getCABO().getStride(),e.context.FLOAT,3,!1)||Ou("Error setting vertexWC in shader VAO.")),r.getCABO().getElementCount()&&(e.VBOBuildTime.getMTime()>r.getAttributeUpdateTime().getMTime()||r.getShaderSourceTime().getMTime()>r.getAttributeUpdateTime().getMTime())){e.renderable.getCustomShaderAttributes().forEach((f,l)=>{r.getProgram().isAttributeUsed(`${f}MC`)&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),`${f}MC`,r.getCABO().getCustomData()[l].offset,r.getCABO().getStride(),e.context.FLOAT,r.getCABO().getCustomData()[l].components,!1)||Ou(`Error setting ${f}MC in shader VAO.`))}),r.getProgram().isAttributeUsed("tcoordMC")&&r.getCABO().getTCoordOffset()?r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"tcoordMC",r.getCABO().getTCoordOffset(),r.getCABO().getStride(),e.context.FLOAT,r.getCABO().getTCoordComponents(),!1)||Ou("Error setting tcoordMC in shader VAO."):r.getVAO().removeAttributeArray("tcoordMC"),e.internalColorTexture&&r.getProgram().isUniformUsed("texture1")&&r.getProgram().setUniformi("texture1",e.internalColorTexture.getTextureUnit());const o=e.openGLActor2D.getActiveTextures();if(o)for(let f=0;f<o.length;++f){const h=o[f].getTextureUnit(),g=`texture${h+1}`;r.getProgram().isUniformUsed(g)&&r.getProgram().setUniformi(g,h)}r.setMapperShaderParameters(a,s,e._openGLRenderer.getTiledSizeAndOrigin());const c=e._openGLRenderer.getSelector();r.getProgram().setUniform3fArray("mapperIndex",c?c.getPropColorValue():[0,0,0]),r.getProgram().setUniformi("picking",c?c.getCurrentPass()+1:0)}},t.setPropertyShaderParameters=(r,a,s)=>{const o=e.renderable.getColorMapColors();if(!o||o.getNumberOfComponents()===0){const c=r.getProgram(),f=s.getProperty(),l=f.getOpacity(),h=f.getColor(),g=[h[0],h[1],h[2],l];c.setUniform4f("diffuseColor",g)}},t.setLightingShaderParameters=(r,a,s)=>{};function n(r,a,s){return a.identity(s),r.reduce((o,c,f)=>f===0?c?a.copy(o,c):a.identity(o):c?a.multiply(o,o,c):o,s)}t.setCameraShaderParameters=(r,a,s)=>{const o=r.getProgram(),f=r.getCABO().getCoordShiftAndScaleEnabled()?r.getCABO().getInverseShiftAndScaleMatrix():null,h=a.getRenderWindow().getViews()[0].getViewportSize(a),g=a.getViewport(),d=s.getActualPositionCoordinate().getComputedDoubleViewportValue(a),v=[0,0,1,1],S=[0,0,1,1];if(S[0]=g[0]>=v[0]?g[0]:v[0],S[1]=g[1]>=v[1]?g[1]:v[1],S[2]=g[2]<=v[2]?g[2]:v[2],S[3]=g[3]<=v[3]?g[3]:v[3],S[0]>=S[2]||S[1]>=S[3])return;h[0]=hu(h[0]*(S[2]-S[0])/(g[2]-g[0])),h[1]=hu(h[1]*(S[3]-S[1])/(g[3]-g[1]));const T=e._openGLRenderer.getParent().getSize(),x=hu(d[0]-(S[0]-g[0])*T[0]),m=hu(d[1]-(S[1]-g[1])*T[1]),O=-x;let w=-x+h[0];const R=-m;let M=-m+h[1];O===w&&(w=O+1),R===M&&(M=R+1);const D=Ce(new Float64Array(16));D[0]=2/(w-O),D[1*4+1]=2/(M-R),D[0*4+3]=-1*(w+O)/(w-O),D[1*4+3]=-1*(M+R)/(M-R),D[2*4+2]=0,D[2*4+3]=s.getProperty().getDisplayLocation()===t2.FOREGROUND?-1:1,D[3*4+3]=1,ze(D,D),o.setUniformMatrix("WCVCMatrix",n([D,f],Ug,e.tmpMat4))},t.getAllocatedGPUMemoryInBytes=()=>{let r=0;return e.primitives.forEach(a=>{r+=a.getAllocatedGPUMemoryInBytes()}),r}}const i_={context:null,VBOBuildTime:0,VBOBuildString:null,primitives:null,primTypes:null,shaderRebuildString:null};function o_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,i_,n),qe.extend(t,e,n),Sc.implementReplaceShaderCoincidentOffset(t,e,n),Sc.implementBuildShadersWithReplacements(t,e,n),e.primitives=[],e.primTypes=Sn,e.tmpMat4=Ce(new Float64Array(16));for(let r=Sn.Start;r<Sn.End;r++)e.primitives[r]=Ms.newInstance(),e.primitives[r].setPrimitiveType(r),e.primitives[r].set({lastLightComplexity:0,lastLightCount:0,lastSelectionPass:!1},!0);ct(t,e,["context"]),e.VBOBuildTime={},vt(e.VBOBuildTime,{mtime:0}),s_(t,e)}const u_=Ne(o_,"vtkOpenGLPolyDataMapper2D");cn("vtkMapper2D",u_);const{VectorMode:c_}=Lc;function dg(t,e){t.strokeStyle=e.strokeColor,t.lineWidth=e.strokeSize,t.fillStyle=e.fontColor,t.font=`${e.fontStyle} ${e.fontSize}px ${e.fontFamily}`}function r2(t,e){return n=>{const r=n.getLastSize(),a=(r[0]/700)**.8,s=(r[1]/700)**.8,o=Math.min(a,s),c=n.getAxisTextStyle(),f=n.getTickTextStyle();Object.assign(c,e.axisTextStyle),Object.assign(f,e.tickTextStyle),c.fontSize=Math.max(24*o,12),n.getLastAspectRatio()>1?f.fontSize=Math.max(20*o,10):f.fontSize=Math.max(16*o,10);const l=n.updateTextureAtlas();n.setTopTitle(!1);const h=n.getBoxSizeByReference();if(n.getLastAspectRatio()>1)n.setTickLabelPixelOffset(.3*f.fontSize),l.titleWidth<=l.tickWidth+n.getTickLabelPixelOffset()+.8*f.fontSize?(n.setTopTitle(!0),n.setAxisTitlePixelOffset(.2*f.fontSize),h[0]=2*(l.tickWidth+n.getTickLabelPixelOffset()+.8*f.fontSize)/r[0],n.setBoxPosition([.98-h[0],-.92])):(n.setAxisTitlePixelOffset(.2*f.fontSize),h[0]=2*(l.titleHeight+n.getAxisTitlePixelOffset()+l.tickWidth+n.getTickLabelPixelOffset()+.8*f.fontSize)/r[0],n.setBoxPosition([.99-h[0],-.92])),h[1]=Math.max(1.2,Math.min(1.84/s,1.84));else{n.setAxisTitlePixelOffset(1.2*f.fontSize),n.setTickLabelPixelOffset(.1*f.fontSize);const g=2*(.8*f.fontSize+l.titleHeight+n.getAxisTitlePixelOffset())/r[1],d=2*l.tickWidth/r[0];h[0]=Math.min(1.9,Math.max(1.4,1.4*d*(n.getTicks().length+3))),h[1]=g,n.setBoxPosition([-.5*h[0],-.97])}n.recomputeBarSegments(l)}}function a2(t,e){return n=>{const r=n.getLastTickBounds(),a=_1().domain([r[0],r[1]]),s=a.ticks(5),o=a.tickFormat(5);n.setTicks(s),n.setTickStrings(s.map(o))}}function f_(t,e){e.classHierarchy.push("vtkScalarBarActorHelper"),t.setRenderable=a=>{e.renderable!==a&&(e.renderable=a,e.barActor.setProperty(a.getProperty()),e.barActor.setParentProp(a),e.barActor.setCoordinateSystemToDisplay(),e.tmActor.setProperty(a.getProperty()),e.tmActor.setParentProp(a),e.tmActor.setCoordinateSystemToDisplay(),e.generateTicks=a.generateTicks,e.axisTextStyle={...a.getAxisTextStyle()},e.tickTextStyle={...a.getTickTextStyle()},t.modified())},t.updateAPISpecificData=(a,s,o)=>{(e.lastSize[0]!==a[0]||e.lastSize[1]!==a[1])&&(e.lastSize[0]=a[0],e.lastSize[1]=a[1],e.lastAspectRatio=a[0]/a[1],e.forceUpdate=!0);const c=e.renderable.getScalarsToColors();if(!(!c||!e.renderable.getVisibility())&&(e.barMapper.setLookupTable(c),e.camera=s,e.renderWindow=o,e.forceUpdate||Math.max(c.getMTime(),t.getMTime(),e.renderable.getMTime())>e.lastRebuildTime.getMTime())){const f=c.getMappingRange();if(e.lastTickBounds=[...f],e.renderable.getGenerateTicks()(t),e.renderable.getAutomated())e.renderable.getAutoLayout()(t);else{e.axisTextStyle={...e.renderable.getAxisTextStyle()},e.tickTextStyle={...e.renderable.getTickTextStyle()},e.barPosition=[...e.renderable.getBarPosition()],e.barSize=[...e.renderable.getBarSize()],e.boxPosition=[...e.renderable.getBoxPosition()],e.boxSize=[...e.renderable.getBoxSize()],e.axisTitlePixelOffset=e.renderable.getAxisTitlePixelOffset(),e.tickLabelPixelOffset=e.renderable.getTickLabelPixelOffset();const l=t.updateTextureAtlas();t.recomputeBarSegments(l)}t.updatePolyDataForLabels(),t.updatePolyDataForBarSegments(),e.lastRebuildTime.modified(),e.forceUpdate=!1}},t.updateTextureAtlas=()=>{e.tmContext.textBaseline="bottom",e.tmContext.textAlign="left";const a={},s=new Map;let o=0,c=1;dg(e.tmContext,e.axisTextStyle);let f=e.tmContext.measureText(e.renderable.getAxisLabel()),l={height:f.actualBoundingBoxAscent+2,startingHeight:c,width:f.width+2,textStyle:e.axisTextStyle};s.set(e.renderable.getAxisLabel(),l),c+=l.height,o=l.width,a.titleWidth=l.width,a.titleHeight=l.height,a.tickWidth=0,a.tickHeight=0,dg(e.tmContext,e.tickTextStyle);const h=[...t.getTickStrings(),"NaN","Below","Above"];for(let g=0;g<h.length;g++)s.has(h[g])||(f=e.tmContext.measureText(h[g]),l={height:f.actualBoundingBoxAscent+2,startingHeight:c,width:f.width+2,textStyle:e.tickTextStyle},s.set(h[g],l),c+=l.height,o<l.width&&(o=l.width),a.tickWidth<l.width&&(a.tickWidth=l.width),a.tickHeight<l.height&&(a.tickHeight=l.height));return o=wn(o),c=wn(c),s.forEach(g=>{g.tcoords=[0,(c-g.startingHeight-g.height)/c,g.width/o,(c-g.startingHeight-g.height)/c,g.width/o,(c-g.startingHeight)/c,0,(c-g.startingHeight)/c]}),e.tmCanvas.width=o,e.tmCanvas.height=c,e.tmContext.textBaseline="bottom",e.tmContext.textAlign="left",e.tmContext.clearRect(0,0,o,c),s.forEach((g,d)=>{dg(e.tmContext,g.textStyle),e.tmContext.fillText(d,1,g.startingHeight+g.height-1)}),e.tmTexture.setCanvas(e.tmCanvas),e.tmTexture.modified(),e._tmAtlas=s,a},t.computeBarSize=a=>{e.vertical=e.boxSize[1]>e.boxSize[0];const s=2*a.tickHeight/e.lastSize[1],o=[1,1];if(e.vertical){const c=2*(a.tickWidth+e.tickLabelPixelOffset)/e.lastSize[0];if(e.topTitle){const f=2*(a.titleHeight+e.axisTitlePixelOffset)/e.lastSize[1];e.barSize[0]=e.boxSize[0]-c,e.barSize[1]=e.boxSize[1]-f}else{const f=2*(a.titleHeight+e.axisTitlePixelOffset)/e.lastSize[0];e.barSize[0]=e.boxSize[0]-f-c,e.barSize[1]=e.boxSize[1]}e.barPosition[0]=e.boxPosition[0]+c,e.barPosition[1]=e.boxPosition[1],o[1]=s}else{const c=(2*a.tickWidth-8)/e.lastSize[0],f=2*(a.titleHeight+e.axisTitlePixelOffset)/e.lastSize[1];e.barSize[0]=e.boxSize[0],e.barPosition[0]=e.boxPosition[0],e.barSize[1]=e.boxSize[1]-f,e.barPosition[1]=e.boxPosition[1],o[0]=c}return o},t.recomputeBarSegments=a=>{var d,v,S,T;const s=t.computeBarSize(a);e.barSegments=[];const o=[0,0],c=e.vertical?1:0,f=e.vertical?.01:.02;function l(x,m){e.barSegments.push({corners:[[...o],[o[0]+s[0],o[1]],[o[0]+s[0],o[1]+s[1]],[o[0],o[1]+s[1]]],scalars:m,title:x}),o[c]+=s[c]+f}e.renderable.getDrawNanAnnotation()&&e.renderable.getScalarsToColors().getNanColor()&&l("NaN",[NaN,NaN,NaN,NaN]),e.renderable.getDrawBelowRangeSwatch()&&((v=(d=e.renderable.getScalarsToColors()).getUseBelowRangeColor)!=null&&v.call(d))&&l("Below",[-.1,-.1,-.1,-.1]);const h=(T=(S=e.renderable.getScalarsToColors()).getUseAboveRangeColor)==null?void 0:T.call(S);o[c]+=f;const g=s[c];s[c]=h?1-2*f-s[c]-o[c]:1-f-o[c],l("ticks",e.vertical?[0,0,.995,.995]:[0,.995,.995,0]),e.renderable.getDrawAboveRangeSwatch()&&h&&(s[c]=g,o[c]+=f,l("Above",[1.1,1.1,1.1,1.1]))};const n=new Float64Array(3);t.createPolyDataForOneLabel=(a,s,o,c,f,l)=>{const h=e._tmAtlas.get(a);if(!h)return;let g=l.ptIdx,d=l.cellIdx;n[0]=(.5*s[0]+.5)*e.lastSize[0],n[1]=(.5*s[1]+.5)*e.lastSize[1],n[2]=s[2],n[0]+=f[0],n[1]+=f[1];const v=[],S=c==="vertical"?[1,0]:[0,1];c==="vertical"?(v[0]=h.width,v[1]=-h.height,o[0]==="middle"?n[1]-=h.width/2:o[0]==="right"&&(n[1]-=h.width),o[1]==="middle"?n[0]+=h.height/2:o[1]==="top"&&(n[0]+=h.height)):(v[0]=h.width,v[1]=h.height,o[0]==="middle"?n[0]-=h.width/2:o[0]==="right"&&(n[0]-=h.width),o[1]==="middle"?n[1]-=h.height/2:o[1]==="top"&&(n[1]-=h.height)),l.points[g*3]=n[0],l.points[g*3+1]=n[1],l.points[g*3+2]=n[2],l.tcoords[g*2]=h.tcoords[0],l.tcoords[g*2+1]=h.tcoords[1],g++,n[S[0]]+=v[0],l.points[g*3]=n[0],l.points[g*3+1]=n[1],l.points[g*3+2]=n[2],l.tcoords[g*2]=h.tcoords[2],l.tcoords[g*2+1]=h.tcoords[3],g++,n[S[1]]+=v[1],l.points[g*3]=n[0],l.points[g*3+1]=n[1],l.points[g*3+2]=n[2],l.tcoords[g*2]=h.tcoords[4],l.tcoords[g*2+1]=h.tcoords[5],g++,n[S[0]]-=v[0],l.points[g*3]=n[0],l.points[g*3+1]=n[1],l.points[g*3+2]=n[2],l.tcoords[g*2]=h.tcoords[6],l.tcoords[g*2+1]=h.tcoords[7],g++,l.polys[d*4]=3,l.polys[d*4+1]=g-4,l.polys[d*4+2]=g-3,l.polys[d*4+3]=g-2,d++,l.polys[d*4]=3,l.polys[d*4+1]=g-4,l.polys[d*4+2]=g-2,l.polys[d*4+3]=g-1,l.ptIdx+=4,l.cellIdx+=2};const r=new Float64Array(3);t.updatePolyDataForLabels=()=>{const a=t.getTickStrings().length+e.barSegments.length,s=a*4,o=a*2,c=new Float64Array(s*3),f=new Uint16Array(o*4),l=new Float32Array(s*2),h={ptIdx:0,cellIdx:0,polys:f,points:c,tcoords:l},g=e.vertical?0:1,d=e.vertical?1:0;r[2]=-.99;const v=e.vertical?["right","middle"]:["middle","bottom"];let S=[0,1];const T=[0,0];e.vertical?(T[0]=-e.tickLabelPixelOffset,e.topTitle?(r[0]=e.boxPosition[0]+.5*e.boxSize[0],r[1]=e.barPosition[1]+e.barSize[1],t.createPolyDataForOneLabel(e.renderable.getAxisLabel(),r,["middle","bottom"],"horizontal",[0,e.axisTitlePixelOffset],h)):(r[0]=e.barPosition[0]+e.barSize[0],r[1]=e.barPosition[1]+.5*e.barSize[1],t.createPolyDataForOneLabel(e.renderable.getAxisLabel(),r,["middle","top"],"vertical",[e.axisTitlePixelOffset,0],h)),S=[-1,0]):(T[1]=e.tickLabelPixelOffset,r[0]=e.barPosition[0]+.5*e.barSize[0],r[1]=e.barPosition[1]+e.barSize[1],t.createPolyDataForOneLabel(e.renderable.getAxisLabel(),r,["middle","bottom"],"horizontal",[0,e.axisTitlePixelOffset],h)),r[g]=e.barPosition[g]+(.5*S[g]+.5)*e.barSize[g],r[d]=e.barPosition[d]+e.barSize[d]*.5;let x=null;for(let D=0;D<e.barSegments.length;D++){const V=e.barSegments[D];V.title==="ticks"?x=V:(r[d]=e.barPosition[d]+.5*e.barSize[d]*(V.corners[2][d]+V.corners[0][d]),t.createPolyDataForOneLabel(V.title,r,v,"horizontal",T,h))}const m=e.barPosition[d]+e.barSize[d]*x.corners[0][d],O=e.barSize[d]*(x.corners[2][d]-x.corners[0][d]),w=t.getTicks(),R=t.getTickStrings();for(let D=0;D<w.length;D++){const V=(w[D]-e.lastTickBounds[0])/(e.lastTickBounds[1]-e.lastTickBounds[0]);r[d]=m+O*V,t.createPolyDataForOneLabel(R[D],r,v,"horizontal",T,h)}const M=Oe.newInstance({numberOfComponents:2,values:l,name:"TextureCoordinates"});e.tmPolyData.getPointData().setTCoords(M),e.tmPolyData.getPoints().setData(c,3),e.tmPolyData.getPoints().modified(),e.tmPolyData.getPolys().setData(f,1),e.tmPolyData.getPolys().modified(),e.tmPolyData.modified()},t.updatePolyDataForBarSegments=()=>{var T,x;const a=e.renderable.getScalarsToColors();let s=0;e.renderable.getDrawNanAnnotation()&&a.getNanColor()&&(s+=1),e.renderable.getDrawBelowRangeSwatch()&&((T=a.getUseBelowRangeColor)!=null&&T.call(a))&&(s+=1),e.renderable.getDrawAboveRangeSwatch()&&((x=a.getUseAboveRangeColor)!=null&&x.call(a))&&(s+=1);const o=4*(1+s),c=o;let f=1;a.getVectorMode()===c_.COMPONENT&&(f=a.getVectorComponent()+1);const l=new Float64Array(o*3),h=new Uint16Array(c*5),g=new Float32Array(o*f);let d=0,v=0;for(let m=0;m<e.barSegments.length;m++){const O=e.barSegments[m];for(let w=0;w<4;w++){r[0]=e.barPosition[0]+O.corners[w][0]*e.barSize[0],r[1]=e.barPosition[1]+O.corners[w][1]*e.barSize[1],l[d*3]=(.5*r[0]+.5)*e.lastSize[0],l[d*3+1]=(.5*r[1]+.5)*e.lastSize[1],l[d*3+2]=r[2];for(let R=0;R<f;R++)g[d*f+R]=e.lastTickBounds[0]+O.scalars[w]*(e.lastTickBounds[1]-e.lastTickBounds[0]);d++}h[v*5]=4,h[v*5+1]=d-4,h[v*5+2]=d-3,h[v*5+3]=d-2,h[v*5+4]=d-1,v++}const S=Oe.newInstance({numberOfComponents:f,values:g,name:"Scalars"});e.polyData.getPointData().setScalars(S),e.polyData.getPoints().setData(l,3),e.polyData.getPoints().modified(),e.polyData.getPolys().setData(h,1),e.polyData.getPolys().modified(),e.polyData.modified()}}const l_=L.newInstance(function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{renderable:null};Object.assign(e,{},n),L.obj(t,e),L.setGet(t,e,["axisTitlePixelOffset","tickLabelPixelOffset","renderable","topTitle","ticks","tickStrings"]),L.get(t,e,["lastSize","lastAspectRatio","lastTickBounds","axisTextStyle","tickTextStyle","barActor","tmActor"]),L.getArray(t,e,["boxPosition","boxSize"]),L.setArray(t,e,["boxPosition","boxSize"],2),e.forceUpdate=!1,e.lastRebuildTime={},L.obj(e.lastRebuildTime,{mtime:0}),e.lastSize=[-1,-1],e.tmCanvas=document.createElement("canvas"),e.tmContext=e.tmCanvas.getContext("2d"),e._tmAtlas=new Map,e.barMapper=An.newInstance(),e.barMapper.setInterpolateScalarsBeforeMapping(!0),e.barMapper.setUseLookupTableScalarRange(!0),e.polyData=jn.newInstance(),e.barMapper.setInputData(e.polyData),e.barActor=bn.newInstance(),e.barActor.setMapper(e.barMapper),e.tmPolyData=jn.newInstance(),e.tmMapper=An.newInstance(),e.tmMapper.setInputData(e.tmPolyData),e.tmTexture=Vc.newInstance({resizable:!0}),e.tmTexture.setInterpolate(!1),e.tmActor=bn.newInstance({parentProp:t}),e.tmActor.setMapper(e.tmMapper),e.tmActor.addTexture(e.tmTexture),e.barPosition=[0,0],e.barSize=[0,0],e.boxPosition=[.88,-.92],e.boxSize=[.1,1.1],e.lastTickBounds=[],f_(t,e)},"vtkScalarBarActorHelper");function g_(t,e){e.classHierarchy.push("vtkScalarBarActor"),t.setTickTextStyle=n=>{e.tickTextStyle={...e.tickTextStyle,...n},t.modified()},t.setAxisTextStyle=n=>{e.axisTextStyle={...e.axisTextStyle,...n},t.modified()},t.resetAutoLayoutToDefault=()=>{t.setAutoLayout(r2(t,e))},t.resetGenerateTicksToDefault=()=>{t.setGenerateTicks(a2())}}function p_(t){return{automated:!0,autoLayout:null,axisLabel:"Scalar Value",barPosition:[0,0],barSize:[0,0],boxPosition:[.88,-.92],boxSize:[.1,1.1],scalarToColors:null,axisTitlePixelOffset:36,axisTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:18,fontFamily:"serif"},tickLabelPixelOffset:14,tickTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:14,fontFamily:"serif"},generateTicks:null,drawNanAnnotation:!0,drawBelowRangeSwatch:!0,drawAboveRangeSwatch:!0,...t}}function s2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,p_(n)),e.autoLayout||(e.autoLayout=r2(t,e)),e.generateTicks||(e.generateTicks=a2()),bn.extend(t,e,n),t.getProperty().setDiffuse(0),t.getProperty().setAmbient(1),L.setGet(t,e,["automated","autoLayout","axisTitlePixelOffset","axisLabel","scalarsToColors","tickLabelPixelOffset","generateTicks","drawNanAnnotation","drawBelowRangeSwatch","drawAboveRangeSwatch"]),L.get(t,e,["axisTextStyle","tickTextStyle"]),L.getArray(t,e,["barPosition","barSize","boxPosition","boxSize"]),L.setArray(t,e,["barPosition","barSize","boxPosition","boxSize"],2),g_(t,e)}const h_=L.newInstance(s2,"vtkScalarBarActor");var P1={newInstance:h_,extend:s2,newScalarBarActorHelper:l_};function d_(t,e){e.classHierarchy.push("vtkOpenGLScalarBarActor"),t.buildPass=n=>{n&&(e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.scalarBarActorHelper.getRenderable()||e.scalarBarActorHelper.setRenderable(e.renderable),t.prepareNodes(),t.addMissingNode(e.scalarBarActorHelper.getBarActor()),t.addMissingNode(e.scalarBarActorHelper.getTmActor()),t.removeUnusedNodes())},t.opaquePass=(n,r)=>{if(n){const a=e._openGLRenderer?e._openGLRenderer.getRenderable().getActiveCamera():null,s=e._openGLRenderer.getTiledSizeAndOrigin();e.scalarBarActorHelper.updateAPISpecificData([s.usize,s.vsize],a,e._openGLRenderWindow.getRenderable())}}}const v_={};function y_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,v_,n),qe.extend(t,e,n),e.scalarBarActorHelper=P1.newScalarBarActorHelper(),d_(t,e)}const T_=Ne(y_,"vtkOpenGLScalarBarActor");cn("vtkScalarBarActor",T_);const{vtkErrorMacro:Uv}=Pn;function x_(t,e){e.classHierarchy.push("vtkOpenGLSkybox"),t.buildPass=n=>{if(n){e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.context=e._openGLRenderWindow.getContext(),e.tris.setOpenGLRenderWindow(e._openGLRenderWindow),e.openGLTexture.setOpenGLRenderWindow(e._openGLRenderWindow);const r=e._openGLRenderer.getRenderable();e.openGLCamera=e._openGLRenderer.getViewNodeFor(r.getActiveCamera())}},t.queryPass=(n,r)=>{if(n){if(!e.renderable||!e.renderable.getVisibility())return;r.incrementOpaqueActorCount()}},t.opaquePass=(n,r)=>{if(n&&!e._openGLRenderer.getSelector()){t.updateBufferObjects(),e.context.depthMask(!0),e._openGLRenderWindow.getShaderCache().readyShaderProgram(e.tris.getProgram()),e.openGLTexture.render(e._openGLRenderWindow);const a=e.openGLTexture.getTextureUnit();e.tris.getProgram().setUniformi("sbtexture",a);const s=e._openGLRenderer.getRenderable(),o=e.openGLCamera.getKeyMatrices(s),c=new Float64Array(16);if(Ft(c,o.wcpc),e.tris.getProgram().setUniformMatrix("IMCPCMatrix",c),e.lastFormat==="box"){const f=s.getActiveCamera().getPosition();e.tris.getProgram().setUniform3f("camPos",f[0],f[1],f[2])}e.tris.getVAO().bind(),e.context.drawArrays(e.context.TRIANGLES,0,e.tris.getCABO().getElementCount()),e.tris.getVAO().release(),e.openGLTexture.deactivate()}},t.updateBufferObjects=()=>{if(!e.tris.getCABO().getElementCount()){const r=new Float32Array(12);for(let c=0;c<4;c++)r[c*3]=c%2*2-1,r[c*3+1]=c>1?1:-1,r[c*3+2]=1;const a=Oe.newInstance({numberOfComponents:3,values:r});a.setName("points");const s=new Uint16Array(8);s[0]=3,s[1]=0,s[2]=1,s[3]=3,s[4]=3,s[5]=0,s[6]=3,s[7]=2;const o=Oe.newInstance({numberOfComponents:1,values:s});e.tris.getCABO().createVBO(o,"polys",on.SURFACE,{points:a,cellOffset:0})}e.renderable.getFormat()!==e.lastFormat&&(e.lastFormat=e.renderable.getFormat(),e.lastFormat==="box"&&e.tris.setProgram(e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(`//VTK::System::Dec
             attribute vec3 vertexMC;
             uniform mat4 IMCPCMatrix;
             varying vec3 TexCoords;
             void main () {
              gl_Position = vec4(vertexMC.xyz, 1.0);
              vec4 wpos = IMCPCMatrix * gl_Position;
              TexCoords = wpos.xyz/wpos.w;
             }`,`//VTK::System::Dec
             //VTK::Output::Dec
             varying vec3 TexCoords;
             uniform samplerCube sbtexture;
             uniform vec3 camPos;
             void main () {
               // skybox looks from inside out
               // which means we have to adjust
               // our tcoords. Otherwise text would
               // be flipped
               vec3 tc = normalize(TexCoords - camPos);
               if (abs(tc.z) < max(abs(tc.x),abs(tc.y)))
               {
                 tc = vec3(1.0, 1.0, -1.0) * tc;
               }
               else
               {
                 tc = vec3(-1.0, 1.0, 1.0) * tc;
               }
               gl_FragData[0] = textureCube(sbtexture, tc);
             }`,"")),e.lastFormat==="background"&&e.tris.setProgram(e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(`//VTK::System::Dec
             attribute vec3 vertexMC;
             uniform mat4 IMCPCMatrix;
             varying vec2 TexCoords;
             void main () {
              gl_Position = vec4(vertexMC.xyz, 1.0);
              vec4 wpos = IMCPCMatrix * gl_Position;
              TexCoords = vec2(vertexMC.x, vertexMC.y)*0.5 + 0.5;
             }`,`//VTK::System::Dec
             //VTK::Output::Dec
             varying vec2 TexCoords;
             uniform sampler2D sbtexture;
             void main () {
               gl_FragData[0] = texture2D(sbtexture, TexCoords);
             }`,"")),e.tris.getShaderSourceTime().modified(),e.tris.getVAO().bind(),e.tris.getVAO().addAttributeArray(e.tris.getProgram(),e.tris.getCABO(),"vertexMC",e.tris.getCABO().getVertexOffset(),e.tris.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE)||Uv("Error setting vertexMC in shader VAO."));const n=e.renderable.getTextures();n.length||Uv("vtkSkybox requires a texture map"),e.openGLTexture.getRenderable()!==n[0]&&(e.openGLTexture.releaseGraphicsResources(e._openGLRenderWindow),e.openGLTexture.setRenderable(n[0]))}}const S_={context:null};function C_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,S_,n),qe.extend(t,e,n),e.openGLTexture=Da.newInstance(),e.tris=Ms.newInstance(),e.keyMatrixTime={},vt(e.keyMatrixTime,{mtime:0}),e.keyMatrices={normalMatrix:Va(new Float64Array(9)),mcwc:Ce(new Float64Array(16))},ct(t,e,["context"]),Nt(t,e,["activeTextures"]),x_(t,e)}const w_=Ne(C_);cn("vtkSkybox",w_);const{vtkDebugMacro:E_}=Pn;function m_(t,e){e.classHierarchy.push("vtkOpenGLPixelSpaceCallbackMapper"),t.opaquePass=(n,r)=>{e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow");const a=e._openGLRenderer.getAspectRatio(),s=e._openGLRenderer?e._openGLRenderer.getRenderable().getActiveCamera():null,o=e._openGLRenderer.getTiledSizeAndOrigin();let c=null;if(e.renderable.getUseZValues()){const f=r.getZBufferTexture(),l=Math.floor(f.getWidth()),h=Math.floor(f.getHeight()),g=e._openGLRenderWindow.getContext();f.bind();const d=r.getFramebuffer();d?d.saveCurrentBindingsAndBuffers():E_("No framebuffer to save/restore");const v=g.createFramebuffer();g.bindFramebuffer(g.FRAMEBUFFER,v),g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,f.getHandle(),0),g.checkFramebufferStatus(g.FRAMEBUFFER)===g.FRAMEBUFFER_COMPLETE&&(c=new Uint8Array(l*h*4),g.viewport(0,0,l,h),g.readPixels(0,0,l,h,g.RGBA,g.UNSIGNED_BYTE,c)),d&&d.restorePreviousBindingsAndBuffers(),g.deleteFramebuffer(v)}e.renderable.invokeCallback(e.renderable.getInputData(),s,a,o,c)},t.queryPass=(n,r)=>{n&&e.renderable.getUseZValues()&&r.requestDepth()}}const R_={};function O_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,R_,n),qe.extend(t,e,n),m_(t,e)}const D_=Ne(O_,"vtkOpenGLPixelSpaceCallbackMapper");cn("vtkPixelSpaceCallbackMapper",D_);const i2=Object.create(null);function Xn(t,e){i2[t]=e}function M_(t,e){e.classHierarchy.push("vtkWebGPUViewNodeFactory")}const L_={};function o2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,L_,n),e.overrides=i2,dT.extend(t,e,n),M_(t,e)}const __=L.newInstance(o2,"vtkWebGPUViewNodeFactory");var V_={newInstance:__,extend:o2};function k_(t,e){e.classHierarchy.push("vtkWebGPUCamera"),t.getProjectionMatrix=(n,r,a,s)=>{if(Ce(n),e.renderable.getParallelProjection()){const o=e.renderable.getParallelScale(),c=o*r,f=o,l=(s[0]-1)*c,h=(s[0]+1)*c,g=(s[1]-1)*f,d=(s[1]+1)*f,v=1/(h-l),S=1/(d-g);n[0]=2*v,n[5]=2*S,n[10]=1/(a[1]-a[0]),n[12]=(h+l)*v,n[13]=(d+g)*S,n[14]=a[1]/(a[1]-a[0])}else{const o=Math.tan(Math.PI*e.renderable.getViewAngle()/360);let c,f;e.renderable.getUseHorizontalViewAngle()===!0?(c=a[0]*o,f=a[0]*o/r):(c=a[0]*o*r,f=a[0]*o);const l=(s[0]-1)*c,h=(s[0]+1)*c,g=(s[1]-1)*f,d=(s[1]+1)*f;n[0]=2*a[0]/(h-l),n[5]=2*a[0]/(d-g),n[12]=(l+h)/(h-l),n[13]=(g+d)/(d-g),n[10]=0,n[14]=a[0],n[11]=-1,n[15]=0}},t.convertToOpenGLDepth=n=>{if(e.renderable.getParallelProjection())return 1-n;const r=e.renderable.getClippingRangeByReference();let a=-r[0]/n;return a=(r[0]+r[1])/(r[1]-r[0])+2*r[0]*r[1]/(a*(r[1]-r[0])),.5*a+.5},t.getKeyMatrices=n=>{const r=n.getRenderable(),a=n.getParent();if(Math.max(a.getMTime(),t.getMTime(),r.getMTime(),e.renderable.getMTime(),n.getStabilizedTime())>e.keyMatrixTime.getMTime()){const s=e.renderable.getViewMatrix();St(e.keyMatrices.normalMatrix,s),e.keyMatrices.normalMatrix[3]=0,e.keyMatrices.normalMatrix[7]=0,e.keyMatrices.normalMatrix[11]=0,Ft(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix),ze(e.keyMatrices.wcvc,s);const o=n.getStabilizedCenterByReference();tt(e.keyMatrices.scvc,e.keyMatrices.wcvc,o);const c=n.getAspectRatio(),f=e.renderable.getClippingRangeByReference();t.getProjectionMatrix(e.keyMatrices.vcpc,c,f,e.renderable.getWindowCenterByReference()),ut(e.keyMatrices.scpc,e.keyMatrices.vcpc,e.keyMatrices.scvc),Ft(e.keyMatrices.pcsc,e.keyMatrices.scpc),e.keyMatrixTime.modified()}return e.keyMatrices}}const B_={keyMatrixTime:null,keyMatrices:null};function F_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,B_,n),qe.extend(t,e,n),e.keyMatrixTime={},L.obj(e.keyMatrixTime),e.keyMatrices={normalMatrix:new Float64Array(16),vcpc:new Float64Array(16),pcsc:new Float64Array(16),wcvc:new Float64Array(16),scpc:new Float64Array(16),scvc:new Float64Array(16)},L.setGet(t,e,["keyMatrixTime"]),k_(t,e)}const N_=L.newInstance(F_);Xn("vtkCamera",N_);function U_(t,e){e.classHierarchy.push("vtkWebGPUBindGroup"),t.setBindables=n=>{if(e.bindables.length===n.length){let r=!0;for(let a=0;a<e.bindables.length;a++)e.bindables[a]!==n[a]&&(r=!1);if(r)return}e.bindables=n,t.modified()},t.getBindGroupLayout=n=>{const r=[];for(let a=0;a<e.bindables.length;a++){const s=e.bindables[a].getBindGroupLayoutEntry();s.binding=a,r.push(s)}return n.getBindGroupLayout({entries:r})},t.getBindGroup=n=>{let r=t.getMTime();for(let s=0;s<e.bindables.length;s++){const o=e.bindables[s].getBindGroupTime().getMTime();r=o>r?o:r}if(r<e.bindGroupTime.getMTime())return e.bindGroup;const a=[];for(let s=0;s<e.bindables.length;s++){const o=e.bindables[s].getBindGroupEntry();o.binding=s,a.push(o)}return e.bindGroup=n.getHandle().createBindGroup({layout:t.getBindGroupLayout(n),entries:a,label:e.label}),e.bindGroupTime.modified(),e.bindGroup},t.getShaderCode=n=>{const r=[],a=n.getBindGroupLayoutCount(e.label);for(let s=0;s<e.bindables.length;s++)r.push(e.bindables[s].getShaderCode(s,a));return r.join(`
`)}}const G_={device:null,handle:null,label:null};function u2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,G_,n),L.obj(t,e),e.bindables=[],e.bindGroupTime={},L.obj(e.bindGroupTime,{mtime:0}),L.get(t,e,["bindGroupTime","handle","sizeInBytes","usage"]),L.setGet(t,e,["label","device","arrayInformation"]),U_(t,e)}const $_=L.newInstance(u2);var c2={newInstance:$_,extend:u2};function z_(t,e){e.classHierarchy.push("vtkWebGPUShaderModule"),t.initialize=(n,r)=>{e.device=n,e.handle=e.device.getHandle().createShaderModule({code:r.getCode()})}}const W_={device:null,handle:null};function f2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,W_,n),L.obj(t,e),L.get(t,e,["lastCameraMTime"]),L.setGet(t,e,["device","handle"]),z_(t,e)}const H_=L.newInstance(f2,"vtkWebGPUShaderModule");var b_={newInstance:H_,extend:f2};function A_(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;const a=Array.isArray(n)?n.join(`
`):n;let s=!1;t.search(e)!==-1&&(s=!0);let o="";r&&(o="g");const c=new RegExp(e,o),f=t.replace(c,a);return{replace:s,result:f}}function j_(t,e){e.classHierarchy.push("vtkWebGPUShaderCache"),t.getShaderModule=n=>{const r=n.getType(),a=n.getHash(),s=e._shaderModules.keys();for(let c=0;c<s.length;c++){const f=s[c];if(f.getHash()===a&&f.getType()===r)return e._shaderModules.get(f)}const o=b_.newInstance();return o.initialize(e.device,n),e._shaderModules.set(n,o),o}}const K_={shaderModules:null,device:null,window:null};function l2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,K_,n),e._shaderModules=new Map,L.obj(t,e),L.setGet(t,e,["device","window"]),j_(t,e)}const P_=L.newInstance(l2,"vtkWebGPUShaderCache");var ve={newInstance:P_,extend:l2,substitute:A_};function X_(t,e){e.classHierarchy.push("vtkWebGPUPipeline"),t.getShaderDescriptions=()=>e.shaderDescriptions,t.initialize=(n,r)=>{e.pipelineDescription=e.renderEncoder.getPipelineSettings(),e.pipelineDescription.primitive.topology=e.topology,e.pipelineDescription.vertex=e.vertexState,e.pipelineDescription.label=r;const a=[];for(let s=0;s<e.layouts.length;s++)a.push(e.layouts[s].layout);e.pipelineLayout=n.getHandle().createPipelineLayout({bindGroupLayouts:a}),e.pipelineDescription.layout=e.pipelineLayout;for(let s=0;s<e.shaderDescriptions.length;s++){const o=e.shaderDescriptions[s],c=n.getShaderModule(o);o.getType()==="vertex"&&(e.pipelineDescription.vertex.module=c.getHandle(),e.pipelineDescription.vertex.entryPoint="main"),o.getType()==="fragment"&&(e.pipelineDescription.fragment.module=c.getHandle(),e.pipelineDescription.fragment.entryPoint="main")}e.handle=n.getHandle().createRenderPipeline(e.pipelineDescription)},t.getShaderDescription=n=>{for(let r=0;r<e.shaderDescriptions.length;r++)if(e.shaderDescriptions[r].getType()===n)return e.shaderDescriptions[r];return null},t.addBindGroupLayout=n=>{n&&e.layouts.push({layout:n.getBindGroupLayout(e.device),label:n.getLabel()})},t.getBindGroupLayout=n=>e.layouts[n].layout,t.getBindGroupLayoutCount=n=>{for(let r=0;r<e.layouts.length;r++)if(e.layouts[r].label===n)return r;return 0},t.bindVertexInput=(n,r)=>{r.bindBuffers(n)}}const I_={handle:null,layouts:null,renderEncoder:null,shaderDescriptions:null,vertexState:null,topology:null,pipelineDescription:null};function g2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,I_,n),vt(t,e),e.layouts=[],e.shaderDescriptions=[],Nt(t,e,["handle","pipelineDescription"]),ct(t,e,["device","renderEncoder","topology","vertexState"]),X_(t,e)}const Y_=Ne(g2,"vtkWebGPUPipeline");var q_={newInstance:Y_,extend:g2};function Q_(t,e){e.classHierarchy.push("vtkWebGPUShaderDescription"),t.hasOutput=n=>e.outputNames.includes(n),t.addOutput=function(n,r){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;e.outputTypes.push(n),e.outputNames.push(r),e.outputInterpolations.push(a)},t.addBuiltinOutput=(n,r)=>{e.builtinOutputTypes.push(n),e.builtinOutputNames.push(r)},t.addBuiltinInput=(n,r)=>{e.builtinInputTypes.push(n),e.builtinInputNames.push(r)},t.replaceShaderCode=(n,r)=>{const a=[];let s=[];if(r&&a.push(r.getShaderCode()),n||e.builtinInputNames.length){const o=[];if(o.push(`struct ${e.type}Input
{`),n){const c=n.getOutputNamesByReference(),f=n.getOutputTypesByReference(),l=n.getOutputInterpolationsByReference();for(let h=0;h<c.length;h++)l[h]!==void 0?o.push(`  @location(${h}) @interpolate(${l[h]}) ${c[h]} : ${f[h]},`):o.push(`  @location(${h}) ${c[h]} : ${f[h]},`)}for(let c=0;c<e.builtinInputNames.length;c++)o.push(`  ${e.builtinInputNames[c]} : ${e.builtinInputTypes[c]},`);o.length>1&&(o.push("};"),s=o,a[a.length-1]+=",",a.push(`input: ${e.type}Input`))}if(a.length&&(e.code=ve.substitute(e.code,"//VTK::IOStructs::Input",a).result),e.outputNames.length+e.builtinOutputNames.length){const o=[`struct ${e.type}Output
{`];for(let c=0;c<e.outputNames.length;c++)e.outputInterpolations[c]!==void 0?o.push(`  @location(${c}) @interpolate(${e.outputInterpolations[c]}) ${e.outputNames[c]} : ${e.outputTypes[c]},`):o.push(`  @location(${c}) ${e.outputNames[c]} : ${e.outputTypes[c]},`);for(let c=0;c<e.builtinOutputNames.length;c++)o.push(`  ${e.builtinOutputNames[c]} : ${e.builtinOutputTypes[c]},`);o.push("};"),s=s.concat(o),e.code=ve.substitute(e.code,"//VTK::IOStructs::Output",[`-> ${e.type}Output`]).result}e.code=ve.substitute(e.code,"//VTK::IOStructs::Dec",s).result}}const Z_={type:null,hash:null,code:null,outputNames:null,outputTypes:null};function p2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Z_,n),e.outputNames=[],e.outputTypes=[],e.outputInterpolations=[],e.builtinOutputNames=[],e.builtinOutputTypes=[],e.builtinInputNames=[],e.builtinInputTypes=[],L.obj(t,e),L.setGet(t,e,["type","hash","code"]),L.getArray(t,e,["outputTypes","outputNames","outputInterpolations"]),Q_(t,e)}const J_=L.newInstance(p2,"vtkWebGPUShaderDescription");var Gv={newInstance:J_,extend:p2};const $v={r8unorm:{numComponents:1,nativeType:Uint8Array,stride:1,elementSize:1,sampleType:"float"},r8snorm:{numComponents:1,nativeType:Int8Array,stride:1,elementSize:1,sampleType:"float"},r8uint:{numComponents:1,nativeType:Uint8Array,stride:1,elementSize:1,sampleType:"uint"},r8sint:{numComponents:1,nativeType:Int8Array,stride:1,elementSize:1,sampleType:"sint"},r16uint:{numComponents:1,nativeType:Uint16Array,stride:2,elementSize:2,sampleType:"uint"},r16sint:{numComponents:1,nativeType:Int16Array,stride:2,elementSize:2,sampleType:"sint"},r16float:{numComponents:1,nativeType:Float32Array,stride:2,elementSize:2,sampleType:"float"},rg8unorm:{numComponents:2,nativeType:Uint8Array,stride:2,elementSize:1,sampleType:"float"},rg8snorm:{numComponents:2,nativeType:Int8Array,stride:2,elementSize:1,sampleType:"float"},rg8uint:{numComponents:2,nativeType:Uint8Array,stride:2,elementSize:1,sampleType:"uint"},rg8sint:{numComponents:2,nativeType:Int8Array,stride:2,elementSize:1,sampleType:"sint"},r32uint:{numComponents:1,nativeType:Uint32Array,stride:4,elementSize:4,sampleType:"uint"},r32sint:{numComponents:1,nativeType:Int32Array,stride:4,elementSize:4,sampleType:"sint"},r32float:{numComponents:1,nativeType:Float32Array,stride:4,elementSize:4,sampleType:"unfilterable-float"},rg16uint:{numComponents:2,nativeType:Uint16Array,stride:4,elementSize:2,sampleType:"uint"},rg16sint:{numComponents:2,nativeType:Int16Array,stride:4,elementSize:2,sampleType:"sint"},rg16float:{numComponents:2,nativeType:Float32Array,stride:4,elementSize:2,sampleType:"float"},rgba8unorm:{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"float"},"rgba8unorm-srgb":{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"float"},rgba8snorm:{numComponents:4,nativeType:Int8Array,stride:4,elementSize:1,sampleType:"float"},rgba8uint:{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"uint"},rgba8sint:{numComponents:4,nativeType:Int8Array,stride:4,elementSize:1,sampleType:"sint"},bgra8unorm:{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"float"},"bgra8unorm-srgb":{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"float"},rgb9e5ufloat:{numComponents:4,nativeType:Uint32Array,stride:4,sampleType:"float"},rgb10a2unorm:{numComponents:4,nativeType:Uint32Array,stride:4,sampleType:"float"},rg11b10ufloat:{numComponents:4,nativeType:Float32Array,stride:4,sampleType:"float"},rg32uint:{numComponents:2,nativeType:Uint32Array,stride:8,elementSize:4,sampleType:"uint"},rg32sint:{numComponents:2,nativeType:Int32Array,stride:8,elementSize:4,sampleType:"sint"},rg32float:{numComponents:2,nativeType:Float32Array,stride:8,elementSize:4,sampleType:"unfilterable-float"},rgba16uint:{numComponents:4,nativeType:Uint16Array,stride:8,elementSize:2,sampleType:"uint"},rgba16sint:{numComponents:4,nativeType:Int16Array,stride:8,elementSize:2,sampleType:"sint"},rgba16float:{numComponents:4,nativeType:Float32Array,stride:8,elementSize:2,sampleType:"float"},rgba32uint:{numComponents:4,nativeType:Uint32Array,stride:16,elementSize:4,sampleType:"uint"},rgba32sint:{numComponents:4,nativeType:Int32Array,stride:16,elementSize:4,sampleType:"sint"},rgba32float:{numComponents:4,nativeType:Float32Array,stride:16,elementSize:4,sampleType:"unfilterable-float"},stencil8:{numComponents:1,nativeType:Uint8Array,stride:1,elementSize:1,sampleType:"uint"},depth16unorm:{numComponents:1,nativeType:Uint16Array,stride:2,elementSize:2,sampleType:"depth"},depth24plus:{numComponents:1,nativeType:Uint32Array,stride:4,elementSize:3,sampleType:"depth"},"depth24plus-stencil8":{numComponents:2,nativeType:Uint32Array,stride:4,sampleType:"mixed"},depth32float:{numComponents:1,nativeType:Float32Array,stride:4,elementSize:4,sampleType:"depth"}};function eV(t){return!t||t.length<6?0:t in $v?$v[t]:(we(`unknown format ${t}`),null)}function tV(t){if(!t||t.length<5)return 0;let e=1;t[t.length-2]==="x"&&(e=Number(t[t.length-1]));const n=e===1?t.length-1:t.length-3,r=Number(t[n]);if(Number.isNaN(r))return we(`unknown format ${t}`),0;const a=5-r/2;return e*a}function nV(t){if(!t||t.length<5)return 0;let e=1;return t[t.length-2]==="x"&&(e=Number(t[t.length-1])),e}function rV(t){if(!t||t.length<5)return 0;let e;if(t[0]==="f")e="Float";else if(t[0]==="s")e="Int";else if(t[0]==="u")e="Uint";else{we(`unknown format ${t}`);return}const n=t.split("x")[0],r=Number(n[n.length-1]);if(Number.isNaN(r)){we(`unknown format ${t}`);return}return e+=8*(5-r/2),e+="Array",e}function aV(t){let e;if(t[0]==="f"||t[1]==="n")e="f32";else if(t[0]==="s"&&t[1]==="i")e="i32";else if(t[0]==="u"&&t[1]==="i")e="u32";else{we(`unknown format ${t}`);return}let n=1;return t[t.length-2]==="x"&&(n=Number(t[t.length-1])),n===4?`vec4<${e}>`:n===3?`vec3<${e}>`:n===2?`vec2<${e}>`:e}function sV(t){if(!t)return 0;let e=1;return t.substring(0,3)==="vec"?e=Number(t[3]):t.substring(0,3)==="mat"&&(e=t[3]*t[5]),e*4}function iV(t){if(t){if(t.includes("f32"))return"Float32Array";if(t.includes("i32"))return"Int32Array";if(t.includes("u32"))return"Uint32Array";we(`unknown format ${t}`)}}var ht={getDetailsFromTextureFormat:eV,getByteStrideFromBufferFormat:tV,getNumberOfComponentsFromBufferFormat:nV,getNativeTypeFromBufferFormat:rV,getShaderTypeFromBufferFormat:aV,getByteStrideFromShaderFormat:sV,getNativeTypeFromShaderFormat:iV};function oV(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!e.includes(t[n]))return!1;return!0}function uV(t,e){e.classHierarchy.push("vtkWebGPUVertexInput"),t.addBuffer=function(n,r){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"vertex",s=r;Array.isArray(s)||(s=[s]);for(let o=0;o<e.inputs.length;o++)if(oV(e.inputs[o].names,s)){if(e.inputs[o].buffer===n)return;e.inputs[o].buffer=n;return}e.inputs.push({buffer:n,stepMode:a,names:s}),e.inputs=e.inputs.sort((o,c)=>o.names[0]<c.names[0]?-1:o.names[0]>c.names[0]?1:0)},t.removeBufferIfPresent=n=>{for(let r=0;r<e.inputs.length;r++)e.inputs[r].names.includes(n)&&e.inputs.splice(r,1)},t.getBuffer=n=>{for(let r=0;r<e.inputs.length;r++)if(e.inputs[r].names.includes(n))return e.inputs[r].buffer;return null},t.hasAttribute=n=>{for(let r=0;r<e.inputs.length;r++)if(e.inputs[r].names.includes(n))return!0;return!1},t.getAttributeTime=n=>{for(let r=0;r<e.inputs.length;r++)if(e.inputs[r].names.includes(n))return e.inputs[r].buffer.getSourceTime();return 0},t.getShaderCode=()=>{let n="",r=0;for(let a=0;a<e.inputs.length;a++)for(let s=0;s<e.inputs[a].names.length;s++){const o=e.inputs[a].buffer.getArrayInformation()[s],c=ht.getShaderTypeFromBufferFormat(o.format);r>0&&(n+=`,
`),n=`${n}  @location(${r}) ${e.inputs[a].names[s]} : ${c}`,r++}return n},t.getVertexInputInformation=()=>{const n={};if(e.inputs.length){const r=[];let a=0;for(let s=0;s<e.inputs.length;s++){const o=e.inputs[s].buffer,c={arrayStride:o.getStrideInBytes(),stepMode:e.inputs[s].stepMode,attributes:[]},f=o.getArrayInformation();for(let l=0;l<e.inputs[s].names.length;l++)c.attributes.push({shaderLocation:a,offset:f[l].offset,format:f[l].format}),a++;r.push(c)}n.buffers=r}return n},t.bindBuffers=n=>{for(let r=0;r<e.inputs.length;r++)n.setVertexBuffer(r,e.inputs[r].buffer.getHandle());e.indexBuffer&&n.setIndexBuffer(e.indexBuffer.getHandle(),e.indexBuffer.getArrayInformation()[0].format)},t.getReady=()=>{},t.releaseGraphicsResources=()=>{e.created&&(e.inputs=[],e.bindingDescriptions=[],e.attributeDescriptions=[])}}const cV={inputs:null,bindingDescriptions:!1,attributeDescriptions:null,indexBuffer:null};function h2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,cV,n),vt(t,e),e.bindingDescriptions=[],e.attributeDescriptions=[],e.inputs=[],ct(t,e,["created","device","handle","indexBuffer"]),uV(t,e)}const fV=Ne(h2,"vtkWebGPUVertexInput");var lV={newInstance:fV,extend:h2};const gV=`
//VTK::Renderer::Dec

//VTK::Color::Dec

//VTK::Normal::Dec

//VTK::TCoord::Dec

//VTK::Select::Dec

//VTK::Mapper::Dec

//VTK::IOStructs::Dec

@vertex
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output : vertexOutput;

  // var vertex: vec4<f32> = vertexBC;

  //VTK::Color::Impl

  //VTK::Normal::Impl

  //VTK::TCoord::Impl

  //VTK::Select::Impl

  //VTK::Position::Impl

  return output;
}
`,pV=`
//VTK::Renderer::Dec

//VTK::Color::Dec

//VTK::Normal::Dec

//VTK::TCoord::Dec

//VTK::Select::Dec

//VTK::RenderEncoder::Dec

//VTK::Mapper::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output : fragmentOutput;

  //VTK::Color::Impl

  //VTK::Normal::Impl

  //VTK::Light::Impl

  //VTK::TCoord::Impl

  //VTK::Select::Impl

  // var computedColor:vec4<f32> = vec4<f32>(1.0,0.5,0.5,1.0);

  //VTK::RenderEncoder::Impl
  return output;
}
`;function hV(t,e){e.classHierarchy.push("vtkWebGPUSimpleMapper"),t.generateShaderDescriptions=(n,r,a)=>{const s=Gv.newInstance({type:"vertex",hash:n,code:e.vertexShaderTemplate}),o=Gv.newInstance({type:"fragment",hash:n,code:e.fragmentShaderTemplate}),c=r.getShaderDescriptions();c.push(s),c.push(o);const f=e.vertexShaderTemplate+e.fragmentShaderTemplate,l=new RegExp("//VTK::[^:]*::","g"),g=f.match(l).filter((d,v,S)=>S.indexOf(d)===v).map(d=>`replaceShader${d.substring(7,d.length-2)}`);for(let d=0;d<g.length;d++){const v=g[d];v!=="replaceShaderIOStructs"&&e.shaderReplacements.has(v)&&e.shaderReplacements.get(v)(n,r,a)}t.replaceShaderIOStructs(n,r,a)},t.replaceShaderIOStructs=(n,r,a)=>{const s=r.getShaderDescription("vertex");s.replaceShaderCode(null,a),r.getShaderDescription("fragment").replaceShaderCode(s)},t.replaceShaderRenderEncoder=(n,r,a)=>{e.renderEncoder.replaceShaderCode(r)},e.shaderReplacements.set("replaceShaderRenderEncoder",t.replaceShaderRenderEncoder),t.replaceShaderRenderer=(n,r,a)=>{if(!e.WebGPURenderer)return;const s=e.WebGPURenderer.getBindGroup().getShaderCode(r),o=r.getShaderDescription("vertex");let c=o.getCode();c=ve.substitute(c,"//VTK::Renderer::Dec",[s]).result,o.setCode(c);const f=r.getShaderDescription("fragment");c=f.getCode(),c=ve.substitute(c,"//VTK::Renderer::Dec",[s]).result,f.setCode(c)},e.shaderReplacements.set("replaceShaderRenderer",t.replaceShaderRenderer),t.replaceShaderMapper=(n,r,a)=>{const s=e.bindGroup.getShaderCode(r),o=r.getShaderDescription("vertex");let c=o.getCode();c=ve.substitute(c,"//VTK::Mapper::Dec",[s]).result,o.setCode(c);const f=r.getShaderDescription("fragment");f.addBuiltinInput("bool","@builtin(front_facing) frontFacing"),c=f.getCode(),c=ve.substitute(c,"//VTK::Mapper::Dec",[s]).result,f.setCode(c)},e.shaderReplacements.set("replaceShaderMapper",t.replaceShaderMapper),t.replaceShaderPosition=(n,r,a)=>{const s=r.getShaderDescription("vertex");s.addBuiltinOutput("vec4<f32>","@builtin(position) Position");let o=s.getCode();o=ve.substitute(o,"//VTK::Position::Impl",["    output.Position = rendererUBO.SCPCMatrix*vertexBC;"]).result,s.setCode(o)},e.shaderReplacements.set("replaceShaderPosition",t.replaceShaderPosition),t.replaceShaderTCoord=(n,r,a)=>{r.getShaderDescription("vertex").addOutput("vec2<f32>","tcoordVS")},e.shaderReplacements.set("replaceShaderTCoord",t.replaceShaderTCoord),t.addTextureView=n=>{e.textureViews.includes(n)||e.textureViews.push(n)},t.prepareToDraw=n=>{e.renderEncoder=n,t.updateInput(),t.updateBuffers(),t.updateBindings(),t.updatePipeline()},t.updateInput=()=>{},t.updateBuffers=()=>{},t.updateBindings=()=>{e.bindGroup.setBindables(t.getBindables())},t.computePipelineHash=()=>{},t.registerDrawCallback=n=>{n.registerDrawCallback(e.pipeline,t.draw)},t.prepareAndDraw=n=>{t.prepareToDraw(n),n.setPipeline(e.pipeline),t.draw(n)},t.draw=n=>{const r=n.getBoundPipeline();n.activateBindGroup(e.bindGroup),e.WebGPURenderer&&e.WebGPURenderer.bindUBO(n),r.bindVertexInput(n,e.vertexInput);const a=e.vertexInput.getIndexBuffer();a?n.drawIndexed(a.getIndexCount(),e.numberOfInstances,0,0,0):n.draw(e.numberOfVertices,e.numberOfInstances,0,0)},t.getBindables=()=>{const n=[...e.additionalBindables];e.UBO&&n.push(e.UBO),e.SSBO&&n.push(e.SSBO);for(let r=0;r<e.textureViews.length;r++){n.push(e.textureViews[r]);const a=e.textureViews[r].getSampler();a&&n.push(a)}return n},t.updatePipeline=()=>{t.computePipelineHash(),e.pipeline=e.device.getPipeline(e.pipelineHash),e.pipeline||(e.pipeline=q_.newInstance(),e.pipeline.setDevice(e.device),e.WebGPURenderer&&e.pipeline.addBindGroupLayout(e.WebGPURenderer.getBindGroup()),e.pipeline.addBindGroupLayout(e.bindGroup),t.generateShaderDescriptions(e.pipelineHash,e.pipeline,e.vertexInput),e.pipeline.setTopology(e.topology),e.pipeline.setRenderEncoder(e.renderEncoder),e.pipeline.setVertexState(e.vertexInput.getVertexInputInformation()),e.device.createPipeline(e.pipelineHash,e.pipeline))}}const dV={additionalBindables:void 0,bindGroup:null,device:null,fragmentShaderTemplate:null,numberOfInstances:1,numberOfVertices:0,pipelineHash:null,shaderReplacements:null,SSBO:null,textureViews:null,topology:"triangle-list",UBO:null,vertexShaderTemplate:null,WebGPURenderer:null};function d2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,dV,n),qe.extend(t,e,n),e.textureViews=[],e.vertexInput=lV.newInstance(),e.bindGroup=c2.newInstance({label:"mapperBG"}),e.additionalBindables=[],e.fragmentShaderTemplate=e.fragmentShaderTemplate||pV,e.vertexShaderTemplate=e.vertexShaderTemplate||gV,e.shaderReplacements=new Map,L.get(t,e,["pipeline","vertexInput"]),L.setGet(t,e,["additionalBindables","device","fragmentShaderTemplate","interpolate","numberOfInstances","numberOfVertices","pipelineHash","shaderReplacements","SSBO","textureViews","topology","UBO","vertexShaderTemplate","WebGPURenderer"]),hV(t,e)}const vV=L.newInstance(d2,"vtkWebGPUSimpleMapper");var X1={newInstance:vV,extend:d2};function yV(t,e){e.classHierarchy.push("vtkWebGPUFullScreenQuad"),t.replaceShaderPosition=(n,r,a)=>{const s=r.getShaderDescription("vertex");s.addBuiltinOutput("vec4<f32>","@builtin(position) Position"),s.addOutput("vec4<f32>","vertexVC");let o=s.getCode();o=ve.substitute(o,"//VTK::Position::Impl",["output.tcoordVS = vec2<f32>(vertexBC.x * 0.5 + 0.5, 1.0 - vertexBC.y * 0.5 - 0.5);","output.Position = vec4<f32>(vertexBC, 1.0);","output.vertexVC = vec4<f32>(vertexBC, 1);"]).result,s.setCode(o)},e.shaderReplacements.set("replaceShaderPosition",t.replaceShaderPosition),t.updateBuffers=()=>{const n=e.device.getBufferManager().getFullScreenQuadBuffer();e.vertexInput.addBuffer(n,["vertexBC"]),e.numberOfVertices=6}}const TV={};function v2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,TV,n),X1.extend(t,e,n),yV(t,e)}const xV=L.newInstance(v2,"vtkWebGPUFullScreenQuad");var Cs={newInstance:xV,extend:v2};const SV={Verts:0,Lines:1,Triangles:2,Strips:3,LinesFromStrips:4,LinesFromTriangles:5,Points:6,UniformArray:7,PointArray:8,NormalsFromPoints:9,Texture:10,RawVertex:11,Storage:12,Index:13},CV={Start:0,Points:0,Lines:1,Triangles:2,TriangleStrips:3,TriangleEdges:4,TriangleStripEdges:5,End:6};var Pi={BufferUsage:SV,PrimitiveTypes:CV};const vg=["getMappedRange","mapAsync","unmap"];function wV(t,e,n,r){const a=r.byteLength,s=t.createBuffer({size:a,usage:GPUBufferUsage.COPY_SRC,mappedAtCreation:!0}),o=s.getMappedRange(0,a);new Uint8Array(o).set(new Uint8Array(r)),s.unmap();const c=t.createCommandEncoder();c.copyBufferToBuffer(s,0,e,n,a);const f=c.finish();t.queue.submit([f]),s.destroy()}function EV(t,e){e.classHierarchy.push("vtkWebGPUBuffer"),t.create=(n,r)=>{e.handle=e.device.getHandle().createBuffer({size:n,usage:r,label:e.label}),e.sizeInBytes=n,e.usage=r},t.write=n=>{wV(e.device.getHandle(),e.handle,0,n.buffer)},t.createAndWrite=(n,r)=>{e.handle=e.device.getHandle().createBuffer({size:n.byteLength,usage:r,mappedAtCreation:!0,label:e.label}),e.sizeInBytes=n.byteLength,e.usage=r,new Uint8Array(e.handle.getMappedRange()).set(new Uint8Array(n.buffer)),e.handle.unmap()};for(let n=0;n<vg.length;n++)t[vg[n]]=function(){return e.handle[vg[n]](...arguments)}}const mV={device:null,handle:null,sizeInBytes:0,strideInBytes:0,arrayInformation:null,usage:null,label:null,sourceTime:null};function y2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,mV,n),L.obj(t,e),L.get(t,e,["handle","sizeInBytes","usage"]),L.setGet(t,e,["strideInBytes","device","arrayInformation","label","sourceTime"]),EV(t,e)}const RV=L.newInstance(y2);var ws={newInstance:RV,extend:y2,...Pi};const{Representation:zv}=Ds,{PrimitiveTypes:jr}=Pi;class OV{constructor(){this.keys=new Uint32Array(10),this.values=new Uint32Array(10),this.count=0}clear(){this.count=0}has(e){for(let n=0;n<this.count;n++)if(this.keys[n]===e)return!0}get(e){for(let n=0;n<this.count;n++)if(this.keys[n]===e)return this.values[n]}set(e,n){this.count<9&&(this.keys[this.count]=e,this.values[this.count++]=n)}}function DV(t){switch(t){case jr.Points:return"points";case jr.Lines:return"lines";case jr.Triangles:case jr.TriangleEdges:return"polys";case jr.TriangleStripEdges:case jr.TriangleStrips:return"strips";default:return""}}function Du(t,e,n){let r=t.pointIdToFlatId[e];return r<0&&(r=t.flatId,t.pointIdToFlatId[e]=r,t.flatIdToPointId[t.flatId]=e,t.flatIdToCellId[t.flatId]=n,t.flatId++),r}function MV(t,e,n){const r=t.length;for(let o=0;o<r;o++){let c=t[o];if(n.cellProvokedMap.has(c)){n.ibo[n.iboId++]=n.cellProvokedMap.get(c);for(let f=o+1;f<o+r;f++){c=t[f%r];const l=Du(n,c,e);n.ibo[n.iboId++]=l}return}}for(let o=0;o<r;o++){let c=t[o];if(!n.provokedPointIds[c]){let f=Du(n,c,e);n.provokedPointIds[c]=1,n.cellProvokedMap.set(c,f),n.flatIdToCellId[f]=e,n.ibo[n.iboId++]=f;for(let l=o+1;l<o+r;l++)c=t[l%r],f=Du(n,c,e),n.ibo[n.iboId++]=f;return}}let a=t[0],s=n.flatId;n.cellProvokedMap.set(a,s),n.flatIdToPointId[n.flatId]=a,n.flatIdToCellId[n.flatId]=e,n.flatId++,n.ibo[n.iboId++]=s;for(let o=1;o<r;o++)a=t[o],s=Du(n,a,e),n.ibo[n.iboId++]=s}function LV(t,e,n){const r=t.length;n.iboSize+=r;for(let a=0;a<r;a++){const s=t[a];if(n.cellProvokedMap.has(s))return}for(let a=0;a<r;a++){const s=t[a];if(!n.provokedPointIds[s]){n.provokedPointIds[s]=1,n.cellProvokedMap.set(s,1);return}}n.cellProvokedMap.set(t[0],1),n.extraPoints++}let or;const Wv=new Uint32Array(1),rn=new Uint32Array(2),Gr=new Uint32Array(3),yg={anythingToPoints(t,e,n,r,a){for(let s=0;s<t;++s)Wv[0]=e[n+s],or(Wv,r,a)},linesToWireframe(t,e,n,r,a){for(let s=0;s<t-1;++s)rn[0]=e[n+s],rn[1]=e[n+s+1],or(rn,r,a)},polysToWireframe(t,e,n,r,a){if(t>2)for(let s=0;s<t;++s)rn[0]=e[n+s],rn[1]=e[n+(s+1)%t],or(rn,r,a)},stripsToWireframe(t,e,n,r,a){if(t>2){for(let s=0;s<t-1;++s)rn[0]=e[n+s],rn[1]=e[n+s+1],or(rn,r,a);for(let s=0;s<t-2;s++)rn[0]=e[n+s],rn[1]=e[n+s+2],or(rn,r,a)}},polysToSurface(t,e,n,r,a){for(let s=0;s<t-2;s++)Gr[0]=e[n],Gr[1]=e[n+s+1],Gr[2]=e[n+s+2],or(Gr,r,a)},stripsToSurface(t,e,n,r,a){for(let s=0;s<t-2;s++)Gr[0]=e[n+s],Gr[1]=e[n+s+1+s%2],Gr[2]=e[n+s+1+(s+1)%2],or(Gr,r,a)}};function _V(t,e){e.classHierarchy.push("vtkWebGPUIndexBuffer"),t.buildIndexBuffer=n=>{const r=n.cells,a=n.primitiveType,s=n.representation,o=n.cellOffset,c=r.getData(),f=c.length,l=DV(a),h=n.numberOfPoints,g={provokedPointIds:new Uint8Array(h),extraPoints:0,iboSize:0,flatId:0,iboId:0,cellProvokedMap:new OV};let d=null;s===zv.POINTS||a===jr.Points?d=yg.anythingToPoints:s===zv.WIREFRAME||a===jr.Lines?d=yg[`${l}ToWireframe`]:d=yg[`${l}ToSurface`],or=LV;let v=o||0;for(let S=0;S<f;)g.cellProvokedMap.clear(),d(c[S],c,S+1,v,g),S+=c[S]+1,v++;h<=65535?g.flatIdToPointId=new Uint16Array(h+g.extraPoints):g.flatIdToPointId=new Uint32Array(h+g.extraPoints),h+g.extraPoints<36863?g.pointIdToFlatId=new Int16Array(h):g.pointIdToFlatId=new Int32Array(h),h+g.extraPoints<=65535?(g.ibo=new Uint16Array(g.iboSize),n.format="uint16"):(g.ibo=new Uint32Array(g.iboSize),n.format="uint32"),v<=65535?g.flatIdToCellId=new Uint16Array(h+g.extraPoints):g.flatIdToCellId=new Uint32Array(h+g.extraPoints),g.pointIdToFlatId.fill(-1),g.provokedPointIds.fill(0),or=MV,v=o||0;for(let S=0;S<f;)g.cellProvokedMap.clear(),d(c[S],c,S+1,v,g),S+=c[S]+1,v++;delete g.provokedPointIds,delete g.pointIdToFlatId,n.nativeArray=g.ibo,e.flatIdToPointId=g.flatIdToPointId,e.flatIdToCellId=g.flatIdToCellId,e.flatSize=g.flatId,e.indexCount=g.iboId}}const VV={flatIdToPointId:null,flatIdToCellId:null,flatSize:0,indexCount:0};function T2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,VV,n),ws.extend(t,e,n),L.setGet(t,e,["flatIdToPointId","flatIdToCellId","flatSize","indexCount"]),_V(t,e)}const kV=L.newInstance(T2);var BV={newInstance:kV,extend:T2,...Pi};const{BufferUsage:$r}=Pi,{vtkErrorMacro:FV}=Pn,{VtkDataTypes:Ta}=Oe,NV={};function UV(t){let e;switch(t.getDataType()){case Ta.UNSIGNED_CHAR:e="uint8";break;case Ta.FLOAT:e="float32";break;case Ta.UNSIGNED_INT:e="uint32";break;case Ta.INT:e="sint32";break;case Ta.DOUBLE:e="float32";break;case Ta.UNSIGNED_SHORT:e="uint16";break;case Ta.SHORT:e="sin16";break;default:e="float32";break}switch(t.getNumberOfComponents()){case 2:e+="x2";break;case 3:e.includes("32")||FV(`unsupported x3 type for ${e}`),e+="x3";break;case 4:e+="x4";break}return e}function Hv(t,e,n,r,a){const s={},o=t.getFlatSize();if(!o)return s;let c=[0,0,0,0];a.shift&&(a.shift.length?c=a.shift:c.fill(a.shift));let f=[1,1,1,1];a.scale&&(a.scale.length?f=a.scale:f.fill(a.scale));const l=Object.prototype.hasOwnProperty.call(a,"packExtra")?a.packExtra:!1;let h,g=0;const d=n+(l?1:0),v=Rs(r,o*d);let S=t.getFlatIdToPointId();a.cellData&&(S=t.getFlatIdToCellId()),n===1?h=function(x){v[g++]=f[0]*e[x]+c[0]}:n===2?h=function(x){v[g++]=f[0]*e[x]+c[0],v[g++]=f[1]*e[x+1]+c[1]}:n===3&&!l?h=function(x){v[g++]=f[0]*e[x]+c[0],v[g++]=f[1]*e[x+1]+c[1],v[g++]=f[2]*e[x+2]+c[2]}:n===3&&l?h=function(x){v[g++]=f[0]*e[x]+c[0],v[g++]=f[1]*e[x+1]+c[1],v[g++]=f[2]*e[x+2]+c[2],v[g++]=f[3]*1+c[3]}:n===4&&(h=function(x){v[g++]=f[0]*e[x]+c[0],v[g++]=f[1]*e[x+1]+c[1],v[g++]=f[2]*e[x+2]+c[2],v[g++]=f[3]*e[x+3]+c[3]});for(let T=0;T<o;T++){const x=n*S[T];h(x)}return s.nativeArray=v,s}function GV(t,e,n,r){const a=[t[r*3]-t[n*3],t[r*3+1]-t[n*3+1],t[r*3+2]-t[n*3+2]],s=[t[e*3]-t[n*3],t[e*3+1]-t[n*3+1],t[e*3+2]-t[n*3+2]],o=[];return Gi(a,s,o),xs(o),o}function $V(t,e){const n=e.getData(),r=t.getData();if(!r||!n)return null;const a=new Int8Array(t.getNumberOfCells()*4),s=r.length;let o=0;for(let c=0;c<s;){const f=GV(n,r[c+1],r[c+2],r[c+3]);a[o++]=127*f[0],a[o++]=127*f[1],a[o++]=127*f[2],a[o++]=127,c+=r[c]+1}return a}function zV(t,e){e.classHierarchy.push("vtkWebGPUBufferManager");function n(r){r.dataArray&&!r.nativeArray&&(r.nativeArray=r.dataArray.getData());let a,s;if(r.usage===$r.Index&&(a=BV.newInstance({label:r.label}),a.setDevice(e.device),s=GPUBufferUsage.INDEX|GPUBufferUsage.COPY_DST,a.buildIndexBuffer(r),a.createAndWrite(r.nativeArray,s),a.setArrayInformation([{format:r.format}])),a||(a=ws.newInstance({label:r.label}),a.setDevice(e.device)),r.usage===$r.UniformArray&&(s=GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,a.createAndWrite(r.nativeArray,s)),r.usage===$r.Storage&&(s=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST,a.createAndWrite(r.nativeArray,s)),r.usage===$r.Texture&&(s=GPUBufferUsage.COPY_SRC,a.createAndWrite(r.nativeArray,s)),r.usage===$r.PointArray){s=GPUBufferUsage.VERTEX;const o=ht.getNativeTypeFromBufferFormat(r.format),c=Hv(r.indexBuffer,r.dataArray.getData(),r.dataArray.getNumberOfComponents(),o,{packExtra:r.packExtra,shift:r.shift,scale:r.scale,cellData:r.cellData,cellOffset:r.cellOffset});a.createAndWrite(c.nativeArray,s),a.setStrideInBytes(ht.getByteStrideFromBufferFormat(r.format)),a.setArrayInformation([{offset:0,format:r.format,interpolation:r.cellData?"flat":"perspective"}])}if(r.usage===$r.NormalsFromPoints){s=GPUBufferUsage.VERTEX;const o=ht.getNativeTypeFromBufferFormat(r.format),c=$V(r.cells,r.dataArray),f=Hv(r.indexBuffer,c,4,o,{cellData:!0});a.createAndWrite(f.nativeArray,s),a.setStrideInBytes(ht.getByteStrideFromBufferFormat(r.format)),a.setArrayInformation([{offset:0,format:r.format,interpolation:"flat"}])}return r.usage===$r.RawVertex&&(s=GPUBufferUsage.VERTEX,a.createAndWrite(r.nativeArray,s),a.setStrideInBytes(ht.getByteStrideFromBufferFormat(r.format)),a.setArrayInformation([{offset:0,format:r.format}])),a.setSourceTime(r.time),a}t.hasBuffer=r=>e.device.hasCachedObject(r),t.getBuffer=r=>r.hash?e.device.getCachedObject(r.hash,n,r):n(r),t.getBufferForPointArray=(r,a)=>{const s=UV(r),o={hash:`${r.getMTime()}I${a.getMTime()}${s}`,usage:$r.PointArray,format:s,dataArray:r,indexBuffer:a};return t.getBuffer(o)},t.getFullScreenQuadBuffer=()=>{if(e.fullScreenQuadBuffer)return e.fullScreenQuadBuffer;e.fullScreenQuadBuffer=ws.newInstance(),e.fullScreenQuadBuffer.setDevice(e.device);const r=new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,-1,0,1,1,0,-1,1,0]);return e.fullScreenQuadBuffer.createAndWrite(r,GPUBufferUsage.VERTEX),e.fullScreenQuadBuffer.setStrideInBytes(12),e.fullScreenQuadBuffer.setArrayInformation([{offset:0,format:"float32x3"}]),e.fullScreenQuadBuffer}}const WV={device:null,fullScreenQuadBuffer:null};function x2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,WV,n),vt(t,e),ct(t,e,["device"]),zV(t,e)}const HV=Ne(x2);var Zr={newInstance:HV,extend:x2,...NV,...Pi};const{BufferUsage:bV}=Zr,{vtkErrorMacro:os}=L;function AV(t,e){e.classHierarchy.push("vtkWebGPUStorageBuffer"),t.addEntry=(n,r)=>{if(e._bufferEntryNames.has(n)){os(`entry named ${n} already exists`);return}e._bufferEntryNames.set(n,e.bufferEntries.length);const a=ht.getByteStrideFromShaderFormat(r);e.bufferEntries.push({name:n,type:r,sizeInBytes:a,offset:e.sizeInBytes,nativeType:ht.getNativeTypeFromShaderFormat(r)}),e.sizeInBytes+=a},t.send=n=>{if(!e._buffer){const r={nativeArray:e.Float32Array,usage:bV.Storage,label:e.label};e._buffer=n.getBufferManager().getBuffer(r),e.bindGroupTime.modified(),e._sendTime.modified();return}n.getHandle().queue.writeBuffer(e._buffer.getHandle(),0,e.arrayBuffer,0,e.sizeInBytes*e.numberOfInstances),e._sendTime.modified()},t.createView=n=>{n in e||(e.arrayBuffer||(e.arrayBuffer=new ArrayBuffer(e.sizeInBytes*e.numberOfInstances)),e[n]=L.newTypedArray(n,e.arrayBuffer))},t.setValue=(n,r,a)=>{const s=e._bufferEntryNames.get(n);if(s===void 0){os(`entry named ${n} not found in UBO`);return}const o=e.bufferEntries[s];t.createView(o.nativeType);const c=e[o.nativeType];c[(o.offset+r*e.sizeInBytes)/c.BYTES_PER_ELEMENT]=a},t.setArray=(n,r,a)=>{const s=e._bufferEntryNames.get(n);if(s===void 0){os(`entry named ${n} not found in UBO`);return}const o=e.bufferEntries[s];t.createView(o.nativeType);const c=e[o.nativeType],f=(o.offset+r*e.sizeInBytes)/c.BYTES_PER_ELEMENT;for(let l=0;l<a.length;l++)c[f+l]=a[l]},t.setAllInstancesFromArray=(n,r)=>{const a=e._bufferEntryNames.get(n);if(a===void 0){os(`entry named ${n} not found in UBO`);return}const s=e.bufferEntries[a];t.createView(s.nativeType);const o=e[s.nativeType],c=r.length/e.numberOfInstances;for(let f=0;f<e.numberOfInstances;f++){const l=(s.offset+f*e.sizeInBytes)/o.BYTES_PER_ELEMENT;for(let h=0;h<c;h++)o[l+h]=r[f*c+h]}},t.setAllInstancesFromArrayColorToFloat=(n,r)=>{const a=e._bufferEntryNames.get(n);if(a===void 0){os(`entry named ${n} not found in UBO`);return}const s=e.bufferEntries[a];t.createView(s.nativeType);const o=e[s.nativeType],c=r.length/e.numberOfInstances;for(let f=0;f<e.numberOfInstances;f++){const l=(s.offset+f*e.sizeInBytes)/o.BYTES_PER_ELEMENT;for(let h=0;h<c;h++)o[l+h]=r[f*c+h]/255}},t.setAllInstancesFromArray3x3To4x4=(n,r)=>{const a=e._bufferEntryNames.get(n);if(a===void 0){os(`entry named ${n} not found in UBO`);return}const s=e.bufferEntries[a];t.createView(s.nativeType);const o=e[s.nativeType],c=9;for(let f=0;f<e.numberOfInstances;f++){const l=(s.offset+f*e.sizeInBytes)/o.BYTES_PER_ELEMENT;for(let h=0;h<3;h++)for(let g=0;g<3;g++)o[l+h*4+g]=r[f*c+h*3+g]}},t.getSendTime=()=>e._sendTime.getMTime(),t.getShaderCode=(n,r)=>{const a=[`struct ${e.label}StructEntry
{`];for(let s=0;s<e.bufferEntries.length;s++){const o=e.bufferEntries[s];a.push(`  ${o.name}: ${o.type},`)}return a.push(`
};
struct ${e.label}Struct
{
  values: array<${e.label}StructEntry>,
};
@binding(${n}) @group(${r}) var<storage, read> ${e.label}: ${e.label}Struct;
`),a.join(`
`)},t.getBindGroupEntry=()=>({resource:{buffer:e._buffer.getHandle()}}),t.clearData=()=>{e.numberOfInstances=0,e.sizeInBytes=0,e.bufferEntries=[],e._bufferEntryNames=new Map,e._buffer=null,delete e.arrayBuffer,delete e.Float32Array}}const jV={bufferEntries:null,bufferEntryNames:null,sizeInBytes:0,label:null,numberOfInstances:1};function S2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,jV,n),L.obj(t,e),e._bufferEntryNames=new Map,e.bufferEntries=[],e._sendTime={},L.obj(e._sendTime,{mtime:0}),e.bindGroupTime={},L.obj(e.bindGroupTime,{mtime:0}),e.bindGroupLayoutEntry=e.bindGroupLayoutEntry||{buffer:{type:"read-only-storage"}},L.get(t,e,["bindGroupTime"]),L.setGet(t,e,["device","bindGroupLayoutEntry","label","numberOfInstances","sizeInBytes"]),AV(t,e)}const KV=L.newInstance(S2,"vtkWebGPUStorageBuffer");var n1={newInstance:KV,extend:S2};const{BufferUsage:PV}=Zr,{vtkErrorMacro:Tg}=L;function XV(t,e){e.classHierarchy.push("vtkWebGPUUniformBuffer"),t.addEntry=(n,r)=>{if(e._bufferEntryNames.has(n)){Tg(`entry named ${n} already exists`);return}e.sortDirty=!0,e._bufferEntryNames.set(n,e.bufferEntries.length),e.bufferEntries.push({name:n,type:r,sizeInBytes:ht.getByteStrideFromShaderFormat(r),offset:-1,nativeType:ht.getNativeTypeFromShaderFormat(r),packed:!1})},t.sortBufferEntries=()=>{if(!e.sortDirty)return;let n=0;const r=[];let a=4;for(let s=0;s<e.bufferEntries.length;s++){const o=e.bufferEntries[s];o.sizeInBytes%16===0&&(a=Math.max(16,a)),o.sizeInBytes%8===0&&(a=Math.max(8,a))}for(let s=0;s<e.bufferEntries.length;s++){const o=e.bufferEntries[s];o.packed===!1&&o.sizeInBytes%16===0&&(o.packed=!0,o.offset=n,r.push(o),n+=o.sizeInBytes)}for(let s=0;s<e.bufferEntries.length;s++){const o=e.bufferEntries[s];if(o.packed===!1&&o.sizeInBytes===12)for(let c=0;c<e.bufferEntries.length;c++){const f=e.bufferEntries[c];if(f.packed===!1&&f.sizeInBytes===4){o.packed=!0,o.offset=n,r.push(o),n+=o.sizeInBytes,f.packed=!0,f.offset=n,r.push(f),n+=f.sizeInBytes;break}}}for(let s=0;s<e.bufferEntries.length;s++){const o=e.bufferEntries[s];if(!o.packed&&o.sizeInBytes%8===0)for(let c=s+1;c<e.bufferEntries.length;c++){const f=e.bufferEntries[c];if(!f.packed&&f.sizeInBytes%8===0){o.packed=!0,o.offset=n,r.push(o),n+=o.sizeInBytes,f.packed=!0,f.offset=n,r.push(f),n+=f.sizeInBytes;break}}}for(let s=0;s<e.bufferEntries.length;s++){const o=e.bufferEntries[s];if(!o.packed&&o.sizeInBytes%8===0){let c=!1;for(let f=0;!c&&f<e.bufferEntries.length;f++){const l=e.bufferEntries[f];if(!l.packed&&l.sizeInBytes===4)for(let h=f+1;h<e.bufferEntries.length;h++){const g=e.bufferEntries[h];if(!g.packed&&g.sizeInBytes===4){o.packed=!0,o.offset=n,r.push(o),n+=o.sizeInBytes,l.packed=!0,l.offset=n,r.push(l),n+=l.sizeInBytes,g.packed=!0,g.offset=n,r.push(g),n+=g.sizeInBytes,c=!0;break}}}}}for(let s=0;s<e.bufferEntries.length;s++){const o=e.bufferEntries[s];!o.packed&&o.sizeInBytes>4&&(o.packed=!0,o.offset=n,r.push(o),n+=o.sizeInBytes)}for(let s=0;s<e.bufferEntries.length;s++){const o=e.bufferEntries[s];o.packed||(o.packed=!0,o.offset=n,r.push(o),n+=o.sizeInBytes)}e.bufferEntries=r,e._bufferEntryNames.clear();for(let s=0;s<e.bufferEntries.length;s++)e._bufferEntryNames.set(e.bufferEntries[s].name,s);e.sizeInBytes=n,e.sizeInBytes=a*Math.ceil(e.sizeInBytes/a),e.sortDirty=!1},t.sendIfNeeded=n=>{if(!e.UBO){const r={nativeArray:e.Float32Array,usage:PV.UniformArray,label:e.label};e.UBO=n.getBufferManager().getBuffer(r),e.bindGroupTime.modified(),e.sendDirty=!1}e.sendDirty&&(n.getHandle().queue.writeBuffer(e.UBO.getHandle(),0,e.arrayBuffer,0,e.sizeInBytes),e.sendDirty=!1),e.sendTime.modified()},t.createView=n=>{n in e||(e.arrayBuffer||(e.arrayBuffer=new ArrayBuffer(e.sizeInBytes)),e[n]=L.newTypedArray(n,e.arrayBuffer))},t.setValue=(n,r)=>{t.sortBufferEntries();const a=e._bufferEntryNames.get(n);if(a===void 0){Tg(`entry named ${n} not found in UBO`);return}const s=e.bufferEntries[a];t.createView(s.nativeType);const o=e[s.nativeType];s.lastValue!==r&&(o[s.offset/o.BYTES_PER_ELEMENT]=r,e.sendDirty=!0),s.lastValue=r},t.setArray=(n,r)=>{t.sortBufferEntries();const a=e._bufferEntryNames.get(n);if(a===void 0){Tg(`entry named ${n} not found in UBO`);return}const s=e.bufferEntries[a];t.createView(s.nativeType);const o=e[s.nativeType];let c=!1;for(let f=0;f<r.length;f++)(!s.lastValue||s.lastValue[f]!==r[f])&&(o[s.offset/o.BYTES_PER_ELEMENT+f]=r[f],c=!0);c&&(e.sendDirty=!0,s.lastValue=[...r])},t.getBindGroupEntry=()=>({resource:{buffer:e.UBO.getHandle()}}),t.getSendTime=()=>e.sendTime.getMTime(),t.getShaderCode=(n,r)=>{t.sortBufferEntries();const a=[`struct ${e.label}Struct
{`];for(let s=0;s<e.bufferEntries.length;s++){const o=e.bufferEntries[s];a.push(`  ${o.name}: ${o.type},`)}return a.push(`};
@binding(${n}) @group(${r}) var<uniform> ${e.label}: ${e.label}Struct;`),a.join(`
`)}}const IV={bufferEntries:null,bufferEntryNames:null,sizeInBytes:0,label:null,bindGroupLayoutEntry:null,bindGroupEntry:null};function C2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,IV,n),L.obj(t,e),e._bufferEntryNames=new Map,e.bufferEntries=[],e.bindGroupLayoutEntry=e.bindGroupLayoutEntry||{buffer:{type:"uniform"}},e.sendTime={},L.obj(e.sendTime,{mtime:0}),e.bindGroupTime={},L.obj(e.bindGroupTime,{mtime:0}),e.sendDirty=!0,e.sortDirty=!0,L.get(t,e,["binding","bindGroupTime"]),L.setGet(t,e,["bindGroupLayoutEntry","device","label","sizeInBytes"]),XV(t,e)}const YV=L.newInstance(C2,"vtkWebGPUUniformBuffer");var Ma={newInstance:YV,extend:C2};const{vtkDebugMacro:qV}=Pn,bv=`
//VTK::Renderer::Dec

//VTK::Mapper::Dec

//VTK::TCoord::Dec

//VTK::RenderEncoder::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output: fragmentOutput;

  var computedColor: vec4<f32> = mapperUBO.BackgroundColor;

  //VTK::RenderEncoder::Impl
  return output;
}
`,QV=`
fn vecToRectCoord(dir: vec3<f32>) -> vec2<f32> {
  var tau: f32 = 6.28318530718;
  var pi: f32 = 3.14159265359;
  var out: vec2<f32> = vec2<f32>(0.0);

  out.x = atan2(dir.z, dir.x) / tau;
  out.x += 0.5;

  var phix: f32 = length(vec2(dir.x, dir.z));
  out.y = atan2(dir.y, phix) / pi + 0.5;

  return out;
}

//VTK::Renderer::Dec

//VTK::Mapper::Dec

//VTK::TCoord::Dec

//VTK::RenderEncoder::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output: fragmentOutput;

  var tcoord: vec4<f32> = vec4<f32>(input.vertexVC.xy, -1, 1);
  var V: vec4<f32> = normalize(mapperUBO.FSQMatrix * tcoord); // vec2<f32>((input.tcoordVS.x - 0.5) * 2, -(input.tcoordVS.y - 0.5) * 2);
  // textureSampleLevel gets rid of some ugly artifacts
  var background = textureSampleLevel(EnvironmentTexture, EnvironmentTextureSampler, vecToRectCoord(V.xyz), 0.0);
  var computedColor: vec4<f32> = vec4<f32>(background.rgb, 1);

  //VTK::RenderEncoder::Impl
  return output;
}
`,Mu=new Float64Array(16),Av=new Float64Array(16);function ZV(t){return t.getPositional()?t.getConeAngle()>=90?0:2:1}function JV(t,e){e.classHierarchy.push("vtkWebGPURenderer"),t.buildPass=n=>{if(n){if(!e.renderable)return;e.camera=e.renderable.getActiveCamera(),t.updateLights(),t.prepareNodes(),t.addMissingNode(e.camera),t.addMissingNodes(e.renderable.getViewPropsWithNestedProps()),t.removeUnusedNodes(),e.webgpuCamera=t.getViewNodeFor(e.camera),t.updateStabilizedMatrix()}},t.updateStabilizedMatrix=()=>{const n=e.camera.getClippingRange(),r=e.camera.getPositionByReference(),a=e.camera.getDirectionOfProjectionByReference(),s=[],o=[];Hr(o,a,.5*(n[0]+n[1])),Ri(s,r,o),$g(o,s,e.stabilizedCenter),Gy(o)/(n[1]-n[0])>e.recenterThreshold&&(e.stabilizedCenter=s,e.stabilizedTime.modified())},t.updateLights=()=>{let n=0;const r=e.renderable.getLightsByReference();for(let a=0;a<r.length;++a)r[a].getSwitch()>0&&n++;return n||(qV("No lights are on, creating one."),e.renderable.createLight()),n},t.updateUBO=()=>{var r;const n=e.UBO.getSendTime();if(e._parent.getMTime()>n||t.getMTime()>n||e.camera.getMTime()>n||e.renderable.getMTime()>n){const a=e.webgpuCamera.getKeyMatrices(t);e.UBO.setArray("WCVCMatrix",a.wcvc),e.UBO.setArray("SCPCMatrix",a.scpc),e.UBO.setArray("PCSCMatrix",a.pcsc),e.UBO.setArray("SCVCMatrix",a.scvc),e.UBO.setArray("VCPCMatrix",a.vcpc),e.UBO.setArray("WCVCNormals",a.normalMatrix),e.UBO.setValue("LightCount",e.renderable.getLights().length),e.UBO.setValue("MaxEnvironmentMipLevel",(r=e.renderable.getEnvironmentTexture())==null?void 0:r.getMipLevel()),e.UBO.setValue("BackgroundDiffuseStrength",e.renderable.getEnvironmentTextureDiffuseStrength()),e.UBO.setValue("BackgroundSpecularStrength",e.renderable.getEnvironmentTextureSpecularStrength());const s=t.getYInvertedTiledSizeAndOrigin();e.UBO.setArray("viewportSize",[s.usize,s.vsize]),e.UBO.setValue("cameraParallel",e.camera.getParallelProjection());const o=e._parent.getDevice();e.UBO.sendIfNeeded(o)}},t.updateSSBO=()=>{const n=e.renderable.getLights(),r=e.webgpuCamera.getKeyMatrices(t);let a=`${e.renderable.getMTime()}`;for(let s=0;s<n.length;s++)a+=n[s].getMTime();if(a!==e.lightTimeString){const s=new Float32Array(n.length*4),o=new Float32Array(n.length*4),c=new Float32Array(n.length*4),f=new Float32Array(n.length*4);for(let h=0;h<n.length;h++){const g=h*4,d=n[h].getPosition();Ve(d,d,r.wcvc),s[g]=d[0],s[g+1]=d[1],s[g+2]=d[2],s[g+3]=0,o[g]=-n[h].getDirection()[0],o[g+1]=-n[h].getDirection()[1],o[g+2]=-n[h].getDirection()[2],o[g+3]=0,c[g]=n[h].getColor()[0],c[g+1]=n[h].getColor()[1],c[g+2]=n[h].getColor()[2],c[g+3]=n[h].getIntensity()*5,f[g]=ZV(n[h]),f[g+1]=Math.cos(et(n[h].getConeAngle())),f[g+2]=Math.cos(et(n[h].getConeAngle()+n[h].getConeFalloff())),f[g+3]=0}e.SSBO.clearData(),e.SSBO.setNumberOfInstances(n.length),e.SSBO.addEntry("LightPos","vec4<f32>"),e.SSBO.addEntry("LightDir","vec4<f32>"),e.SSBO.addEntry("LightColor","vec4<f32>"),e.SSBO.addEntry("LightData","vec4<f32>"),e.SSBO.setAllInstancesFromArray("LightPos",s),e.SSBO.setAllInstancesFromArray("LightDir",o),e.SSBO.setAllInstancesFromArray("LightColor",c),e.SSBO.setAllInstancesFromArray("LightData",f);const l=e._parent.getDevice();e.SSBO.send(l)}e.lightTimeString=a},t.scissorAndViewport=n=>{const r=t.getYInvertedTiledSizeAndOrigin();n.getHandle().setViewport(r.lowerLeftU,r.lowerLeftV,r.usize,r.vsize,0,1),n.getHandle().setScissorRect(r.lowerLeftU,r.lowerLeftV,r.usize,r.vsize)},t.bindUBO=n=>{n.activateBindGroup(e.bindGroup)},t.opaquePass=n=>{n?(e.renderEncoder.begin(e._parent.getCommandEncoder()),t.updateUBO(),t.updateSSBO()):(t.scissorAndViewport(e.renderEncoder),t.clear(),e.renderEncoder.end())},t.clear=()=>{var s;if(e.renderable.getTransparent()||e.suppressClear)return;const n=e._parent.getDevice();if(!e.clearFSQ){e.clearFSQ=Cs.newInstance(),e.clearFSQ.setDevice(n),e.clearFSQ.setPipelineHash("clearfsq"),e.clearFSQ.setFragmentShaderTemplate(bv);const o=Ma.newInstance({label:"mapperUBO"});o.addEntry("FSQMatrix","mat4x4<f32>"),o.addEntry("BackgroundColor","vec4<f32>"),e.clearFSQ.setUBO(o),e.backgroundTex=e.renderable.getEnvironmentTexture()}if(e.clearFSQ.getPipelineHash()!=="clearfsqwithtexture"&&e.renderable.getUseEnvironmentTextureAsBackground()&&((s=e.backgroundTex)!=null&&s.getImageLoaded())){e.clearFSQ.setFragmentShaderTemplate(QV);const o=Ma.newInstance({label:"mapperUBO"});o.addEntry("FSQMatrix","mat4x4<f32>"),o.addEntry("BackgroundColor","vec4<f32>"),e.clearFSQ.setUBO(o);const c=n.getTextureManager().getTextureForVTKTexture(e.backgroundTex);if(c.getReady()){const f=c.createView("EnvironmentTexture");e.clearFSQ.setTextureViews([f]),e.backgroundTexLoaded=!0;const l=e.backgroundTex.getInterpolate()?"linear":"nearest";f.addSampler(n,{addressModeU:"repeat",addressModeV:"clamp-to-edge",addressModeW:"repeat",minFilter:l,magFilter:l,mipmapFilter:"linear"})}e.clearFSQ.setPipelineHash("clearfsqwithtexture")}else if(e.clearFSQ.getPipelineHash()==="clearfsqwithtexture"&&!e.renderable.getUseEnvironmentTextureAsBackground()){e.clearFSQ=Cs.newInstance(),e.clearFSQ.setDevice(n),e.clearFSQ.setPipelineHash("clearfsq"),e.clearFSQ.setFragmentShaderTemplate(bv);const o=Ma.newInstance({label:"mapperUBO"});o.addEntry("FSQMatrix","mat4x4<f32>"),o.addEntry("BackgroundColor","vec4<f32>"),e.clearFSQ.setUBO(o)}const r=e.webgpuCamera.getKeyMatrices(t),a=e.renderable.getBackgroundByReference();e.clearFSQ.getUBO().setArray("BackgroundColor",a),ze(Av,r.normalMatrix),Ng(Mu,r.scvc,r.pcsc),Ng(Mu,Av,Mu),e.clearFSQ.getUBO().setArray("FSQMatrix",Mu),e.clearFSQ.getUBO().sendIfNeeded(n),e.clearFSQ.prepareAndDraw(e.renderEncoder)},t.translucentPass=n=>{n?e.renderEncoder.begin(e._parent.getCommandEncoder()):(t.scissorAndViewport(e.renderEncoder),e.renderEncoder.end())},t.volumeDepthRangePass=n=>{n?e.renderEncoder.begin(e._parent.getCommandEncoder()):(t.scissorAndViewport(e.renderEncoder),e.renderEncoder.end())},t.getAspectRatio=()=>{const n=e._parent.getSizeByReference(),r=e.renderable.getViewportByReference();return n[0]*(r[2]-r[0])/((r[3]-r[1])*n[1])},t.convertToOpenGLDepth=n=>e.webgpuCamera.convertToOpenGLDepth(n),t.getYInvertedTiledSizeAndOrigin=()=>{const n=t.getTiledSizeAndOrigin(),r=e._parent.getSizeByReference();return n.lowerLeftV=r[1]-n.vsize-n.lowerLeftV,n},t.getTiledSizeAndOrigin=()=>{const n=e.renderable.getViewportByReference(),r=[0,0,1,1],a=n[0]-r[0],s=n[1]-r[1],o=e._parent.normalizedDisplayToDisplay(a,s),c=Math.round(o[0]),f=Math.round(o[1]),l=n[2]-r[0],h=n[3]-r[1],g=e._parent.normalizedDisplayToDisplay(l,h);let d=Math.round(g[0])-c,v=Math.round(g[1])-f;return d<0&&(d=0),v<0&&(v=0),{usize:d,vsize:v,lowerLeftU:c,lowerLeftV:f}},t.getPropFromID=n=>{for(let r=0;r<e.children.length;r++)if((e.children[r].getPropID?e.children[r].getPropID():-1)===n)return e.children[r];return null},t.getStabilizedTime=()=>e.stabilizedTime.getMTime(),t.releaseGraphicsResources=()=>{e.selector!==null&&e.selector.releaseGraphicsResources()}}const ek={bindGroup:null,selector:null,renderEncoder:null,recenterThreshold:20,suppressClear:!1,stabilizedCenter:[0,0,0]};function tk(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,ek,n),qe.extend(t,e,n),e.UBO=Ma.newInstance({label:"rendererUBO"}),e.UBO.addEntry("WCVCMatrix","mat4x4<f32>"),e.UBO.addEntry("SCPCMatrix","mat4x4<f32>"),e.UBO.addEntry("PCSCMatrix","mat4x4<f32>"),e.UBO.addEntry("SCVCMatrix","mat4x4<f32>"),e.UBO.addEntry("VCPCMatrix","mat4x4<f32>"),e.UBO.addEntry("WCVCNormals","mat4x4<f32>"),e.UBO.addEntry("viewportSize","vec2<f32>"),e.UBO.addEntry("LightCount","i32"),e.UBO.addEntry("MaxEnvironmentMipLevel","f32"),e.UBO.addEntry("BackgroundDiffuseStrength","f32"),e.UBO.addEntry("BackgroundSpecularStrength","f32"),e.UBO.addEntry("cameraParallel","u32"),e.SSBO=n1.newInstance({label:"rendererLightSSBO"}),e.lightTimeString="",e.bindGroup=c2.newInstance({label:"rendererBG"}),e.bindGroup.setBindables([e.UBO,e.SSBO]),e.tmpMat4=Ce(new Float64Array(16)),e.stabilizedTime={},vt(e.stabilizedTime,{mtime:0}),Nt(t,e,["bindGroup","stabilizedTime"]),Os(t,e,["stabilizedCenter"]),ct(t,e,["renderEncoder","selector","suppressClear","UBO"]),JV(t,e)}const nk=Ne(tk,"vtkWebGPURenderer");Xn("vtkRenderer",nk);const{CoordinateSystem:jv}=ji;function rk(t,e){e.classHierarchy.push("vtkWebGPUActor"),t.buildPass=n=>{n&&(e.WebGPURenderer=t.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getFirstAncestorOfType("vtkWebGPURenderWindow"),e.propID===void 0&&(e.propID=e.WebGPURenderWindow.getUniquePropID()),t.prepareNodes(),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes())},t.traverseOpaquePass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||!e.renderable.getIsOpaque()||e.WebGPURenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children[0]&&e.children[0].traverse(n),t.apply(n,!1))},t.traverseTranslucentPass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||e.renderable.getIsOpaque()||e.WebGPURenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children[0]&&e.children[0].traverse(n),t.apply(n,!1))},t.queryPass=(n,r)=>{if(n){if(!e.renderable||!e.renderable.getVisibility())return;e.renderable.getIsOpaque()?r.incrementOpaqueActorCount():r.incrementTranslucentActorCount()}},t.getBufferShift=n=>(t.getKeyMatrices(n),e.bufferShift),t.getKeyMatrices=n=>{if(Math.max(e.renderable.getMTime(),n.getStabilizedTime())>e.keyMatricesTime.getMTime()){e.renderable.computeMatrix();const r=e.renderable.getMatrix();e.bufferShift[0]=r[3],e.bufferShift[1]=r[7],e.bufferShift[2]=r[11];const a=n.getStabilizedCenterByReference();e.renderable.getCoordinateSystem()===jv.WORLD&&(e.bufferShift[0]-=a[0],e.bufferShift[1]-=a[1],e.bufferShift[2]-=a[2]),ze(e.keyMatrices.bcwc,r),e.renderable.getIsIdentity()?Ce(e.keyMatrices.normalMatrix):(St(e.keyMatrices.normalMatrix,e.keyMatrices.bcwc),e.keyMatrices.normalMatrix[3]=0,e.keyMatrices.normalMatrix[7]=0,e.keyMatrices.normalMatrix[11]=0,Ft(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix),ze(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix)),tt(e.keyMatrices.bcwc,e.keyMatrices.bcwc,[-e.bufferShift[0],-e.bufferShift[1],-e.bufferShift[2]]),e.renderable.getCoordinateSystem()===jv.WORLD?tt(e.keyMatrices.bcsc,e.keyMatrices.bcwc,[-a[0],-a[1],-a[2]]):St(e.keyMatrices.bcsc,e.keyMatrices.bcwc),e.keyMatricesTime.modified()}return e.keyMatrices}}const ak={keyMatricesTime:null,keyMatrices:null,propID:void 0,bufferShift:void 0};function sk(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,ak,n),qe.extend(t,e,n),e.keyMatricesTime={},L.obj(e.keyMatricesTime,{mtime:0}),e.keyMatrices={normalMatrix:new Float64Array(16),bcwc:new Float64Array(16),bcsc:new Float64Array(16)},L.get(t,e,["propID","keyMatricesTime"]),e.bufferShift=[0,0,0,0],rk(t,e)}const ik=L.newInstance(sk);Xn("vtkActor",ik);const{CoordinateSystem:Kv}=ji;function ok(t,e){e.classHierarchy.push("vtkWebGPUActor2D"),t.buildPass=n=>{n&&(e.WebGPURenderer=t.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getFirstAncestorOfType("vtkWebGPURenderWindow"),e.propID===void 0&&(e.propID=e.WebGPURenderWindow.getUniquePropID()),t.prepareNodes(),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes())},t.traverseOpaquePass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||!e.renderable.getIsOpaque()||e.WebGPURenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children[0]&&e.children[0].traverse(n),t.apply(n,!1))},t.traverseTranslucentPass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||e.renderable.getIsOpaque()||e.WebGPURenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children[0]&&e.children[0].traverse(n),t.apply(n,!1))},t.queryPass=(n,r)=>{if(n){if(!e.renderable||!e.renderable.getVisibility())return;e.renderable.getIsOpaque()?r.incrementOpaqueActorCount():r.incrementTranslucentActorCount()}},t.getBufferShift=n=>(t.getKeyMatrices(n),e.bufferShift),t.getKeyMatrices=n=>{if(Math.max(e.renderable.getMTime(),n.getStabilizedTime())>e.keyMatricesTime.getMTime()){e.bufferShift[0]=0,e.bufferShift[1]=0,e.bufferShift[2]=0;const r=n.getStabilizedCenterByReference();e.renderable.getCoordinateSystem()===Kv.WORLD&&(e.bufferShift[0]-=r[0],e.bufferShift[1]-=r[1],e.bufferShift[2]-=r[2]),Ce(e.keyMatrices.bcwc),Ce(e.keyMatrices.normalMatrix),tt(e.keyMatrices.bcwc,e.keyMatrices.bcwc,[-e.bufferShift[0],-e.bufferShift[1],-e.bufferShift[2]]),e.renderable.getCoordinateSystem()===Kv.WORLD?tt(e.keyMatrices.bcsc,e.keyMatrices.bcwc,[-r[0],-r[1],-r[2]]):St(e.keyMatrices.bcsc,e.keyMatrices.bcwc),e.keyMatricesTime.modified()}return e.keyMatrices}}const uk={keyMatricesTime:null,keyMatrices:null,propID:void 0,bufferShift:void 0};function ck(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,uk,n),qe.extend(t,e,n),e.keyMatricesTime={},L.obj(e.keyMatricesTime,{mtime:0}),e.keyMatrices={normalMatrix:new Float64Array(16),bcwc:new Float64Array(16),bcsc:new Float64Array(16)},L.get(t,e,["propID","keyMatricesTime"]),e.bufferShift=[0,0,0,0],ok(t,e)}const fk=L.newInstance(ck);Xn("vtkActor2D",fk);function lk(t,e){e.classHierarchy.push("vtkWebGPUCubeAxesActor"),t.buildPass=n=>{n&&(e.WebGPURenderer=t.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getParent(),e.CubeAxesActorHelper.getRenderable()||e.CubeAxesActorHelper.setRenderable(e.renderable),t.prepareNodes(),t.addMissingNode(e.CubeAxesActorHelper.getTmActor()),t.addMissingNode(e.renderable.getGridActor()),t.removeUnusedNodes())},t.opaquePass=(n,r)=>{if(n){const a=e.WebGPURenderer?e.WebGPURenderer.getRenderable().getActiveCamera():null,s=e.WebGPURenderer.getTiledSizeAndOrigin();e.CubeAxesActorHelper.updateAPISpecificData([s.usize,s.vsize],a,e.WebGPURenderWindow.getRenderable())}}}const gk={};function pk(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,gk,n),qe.extend(t,e,n),e.CubeAxesActorHelper=K1.newCubeAxesActorHelper(),lk(t,e)}const hk=Ne(pk,"vtkWebGPUCubeAxesActor");Xn("vtkCubeAxesActor",hk);const{DisplayLocation:r1}=n2;function dk(t,e){e.classHierarchy.push("vtkProperty2D"),t.setDisplayLocationToBackground=()=>t.setDisplayLocation(r1.BACKGROUND),t.setDisplayLocationToForeground=()=>t.setDisplayLocation(r1.FOREGROUND),t.setRepresentationToWireframe=()=>t.setRepresentation(on.WIREFRAME),t.setRepresentationToSurface=()=>t.setRepresentation(on.SURFACE),t.setRepresentationToPoints=()=>t.setRepresentation(on.POINTS),t.getRepresentationAsString=()=>L.enumToString(on,e.representation)}const vk={color:[1,1,1],opacity:1,pointSize:1,lineWidth:1,representation:on.SURFACE,displayLocation:r1.FOREGROUND};function w2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,vk,n),L.obj(t,e),L.setGet(t,e,["opacity","lineWidth","pointSize","displayLocation","representation"]),L.setGetArray(t,e,["color"],3),dk(t,e)}const yk=L.newInstance(w2,"vtkProperty2D");var Tk={newInstance:yk,extend:w2,...n2};const{BufferUsage:pt,PrimitiveTypes:Lt}=Zr,{Representation:Lu}=Ds,{ScalarMode:_u}=An,{CoordinateSystem:xk}=ji,{DisplayLocation:Sk}=Tk,Ck=`
//VTK::Renderer::Dec

//VTK::Color::Dec

//VTK::Normal::Dec

//VTK::TCoord::Dec

//VTK::Select::Dec

//VTK::Mapper::Dec

//VTK::IOStructs::Dec

@vertex
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output : vertexOutput;

  var vertex: vec4<f32> = vertexBC;

  //VTK::Color::Impl

  //VTK::Normal::Impl

  //VTK::TCoord::Impl

  //VTK::Select::Impl

  //VTK::Position::Impl

  return output;
}
`,wk=`
struct PBRData {
  diffuse: vec3<f32>,
  specular: vec3<f32>,
}

// Dot product with the max already in it
fn mdot(a: vec3<f32>, b: vec3<f32>) -> f32 {
  return max(0.0, dot(a, b));
}
// Dot product with a max in it that does not allow for negative values
// Physically based rendering is accurate as long as normals are accurate,
// however this is pretty often not the case. In order to prevent negative
// values from ruining light calculations and creating zones of zero light,
// this remapping is used, which smoothly clamps the dot product between
// zero and one while still maintaining a good amount of accuracy.
fn cdot(a: vec3<f32>, b: vec3<f32>) -> f32 {
  var d: f32 = max(0.0, dot(a, b));
  d = pow((d + 1.0) / 2.0, 2.6);
  return d;
}

// Lambertian diffuse model
fn lambertDiffuse(base: vec3<f32>, N: vec3<f32>, L: vec3<f32>) -> vec3<f32> {
  var pi: f32 = 3.14159265359; 
  var NdotL: f32 = mdot(N, L);
  NdotL = pow(NdotL, 1.5);
  return (base/pi)*NdotL;
}

// Yasuhiro Fujii improvement on the Oren-Nayar model
// https://mimosa-pudica.net/improved-oren-nayar.html
// p is surface color, o is roughness
fn fujiiOrenNayar(p: vec3<f32>, o: f32, N: vec3<f32>, L: vec3<f32>, V: vec3<f32>) -> vec3<f32> {
  var invpi: f32 = 0.31830988618; // 1/pi

  var o2 = o*o;
  var NdotL: f32 = mdot(N, L);
  NdotL = pow(NdotL, 1.5); // Less physically accurate, but hides the "seams" between lights better

  var NdotV: f32 = mdot(N, V);
  var LdotV: f32 = mdot(L, V);

  var s: f32 = LdotV - NdotL*NdotV;
  var t: f32 = mix(1.0, max(NdotL, NdotV), step(0.0, s)); // Mix with step is the equivalent of an if statement
  var A: vec3<f32> = 0.5*(o2 / (o2 + 0.33)) + 0.17*p*(o2 / (o2 + 0.13));
  A = invpi*(1 - A);
  var B: f32 = 0.45*(o2 / (o2 + 0.09));
  B = invpi*B;

  return p*NdotL*(A + B*(s/t));
}

// Fresnel portion of BRDF (IOR only, simplified)
fn schlickFresnelIOR(V: vec3<f32>, N: vec3<f32>, ior: f32, k: f32) -> f32 {
  var NdotV: f32 = mdot(V, N);
  var F0: f32 = (pow((ior - 1.0), 2.0) + k*k) / (pow((ior + 1.0), 2.0) + k*k); // This takes into account the roughness, which the other one does not
  return F0 + (1.0 - F0) * pow((1.0-NdotV), 5.0);
}

// Fresnel portion of BRDF (Color ior, better)
fn schlickFresnelRGB(V: vec3<f32>, N: vec3<f32>, F0: vec3<f32>) -> vec3<f32> {
  var NdotV: f32 = mdot(V, N);
  return F0 + (1.0 - F0) * pow((1-NdotV), 5.0);
}

// Normal portion of BRDF
// https://learnopengl.com/PBR/Theory
// Trowbridge-Reitz GGX functions: normal, halfway, roughness^2
fn trGGX(N: vec3<f32>, H: vec3<f32>, a: f32) -> f32 {
  var pi: f32 = 3.14159265359; 

  var a2: f32 = a*a;
  var NdotH = mdot(N, H);
  var NdotH2 = NdotH*NdotH;
  
  var denom: f32 = NdotH2 * (a2 - 1.0) + 1.0;

  return a2 / max((pi*denom*denom), 0.000001);
}

// A VERY bad approximation of anisotropy. Real anisotropic calculations require tangent and bitangent
fn anisotrophicTrGGX(N: vec3<f32>, H: vec3<f32>, O: vec3<f32>, s: f32, a: f32) -> f32 {
  var Op: vec3<f32> = (rendererUBO.WCVCNormals * vec4<f32>(normalize(O) * s, 0.)).xyz;

  var ggx1: f32 = trGGX(N + Op*s, H, a);
  var ggx2: f32 = trGGX(N - Op*s, H, a);
  return (0.5 * ggx1 + 0.5 * ggx2);
}

// Geometry portion of BRDF
fn schlickGGX(N: vec3<f32>, X: vec3<f32>, k: f32) -> f32 {
  var NdotX = cdot(N, X);
  return NdotX / max(0.000001, (NdotX*(1.0-k) + k));
}

fn smithSurfaceRoughness(N: vec3<f32>, V: vec3<f32>, L: vec3<f32>, k: f32) -> f32 {
  var ggx1: f32 = min(1.0, schlickGGX(N, V, k));
  var ggx2: f32 = min(1.0, schlickGGX(N, L, k));
  return ggx1*ggx2;
}

// BRDF Combination
fn cookTorrance(D: f32, F: f32, G: f32, N: vec3<f32>, V: vec3<f32>, L: vec3<f32>) -> f32 {
  var num: f32 = D*F*G;
  var denom: f32 = 4*cdot(V, N)*cdot(L, N);

  return num / max(denom, 0.000001);
}

// Different lighting calculations for different light sources
fn calcDirectionalLight(N: vec3<f32>, V: vec3<f32>, ior: f32, roughness: f32, metallic: f32, direction: vec3<f32>, color: vec3<f32>, base: vec3<f32>) -> PBRData {  
  var L: vec3<f32> = normalize(direction); // Light Vector
  var H: vec3<f32> = normalize(L + V); // Halfway Vector

  var alpha = roughness*roughness;
  var k: f32 = alpha*alpha / 2;

  var D: f32 = trGGX(N, H, alpha); // Distribution
  // var F: f32 = schlickFresnelIOR(V, N, ior, k); // Fresnel
  var G: f32 = smithSurfaceRoughness(N, V, L, k); // Geometry

  var brdf: f32 = cookTorrance(D, 1.0, G, N, V, L); // Fresnel term is replaced with 1 because it is added later
  var incoming: vec3<f32> = color;
  var angle: f32 = mdot(L, N);
  angle = pow(angle, 1.5);

  var specular: vec3<f32> = brdf*incoming*angle;
  // Oren-Nayar gives a clay-like effect when fully rough which some people may not want, so it might be better to give a separate
  // control property for the diffuse vs specular roughness
  var diffuse: vec3<f32> = incoming*fujiiOrenNayar(base, roughness, N, L, V); 
  // Stores the specular and diffuse separately to allow for finer post processing
  var out = PBRData(diffuse, specular);
  
  return out; // Returns angle along with color of light so the final color can be multiplied by angle as well (creates black areas)
}

// TODO: find some way to reduce the number of arguments going in here
fn calcPointLight(N: vec3<f32>, V: vec3<f32>, fragPos: vec3<f32>, ior: f32, roughness: f32, metallic: f32, position: vec3<f32>, color: vec3<f32>, base: vec3<f32>) -> PBRData {
  var L: vec3<f32> = normalize(position - fragPos); // Light Vector
  var H: vec3<f32> = normalize(L + V); // Halfway Vector
  var dist = distance(position, fragPos);

  var alpha = roughness*roughness;
  var k: f32 = alpha*alpha / 2.0; // could also be pow(alpha + 1.0, 2) / 8

  var D: f32 = trGGX(N, H, alpha); // Distribution
  // var F: f32 = schlickFresnelIOR(V, N, ior, k); // Fresnel
  var G: f32 = smithSurfaceRoughness(N, V, L, k); // Geometry

  var brdf: f32 = cookTorrance(D, 1.0, G, N, V, L);
  var incoming: vec3<f32> = color * (1.0 / (dist*dist));
  var angle: f32 = mdot(L, N);
  angle = pow(angle, 1.5); // Smoothing factor makes it less accurate, but reduces ugly "seams" bewteen light sources

  var specular: vec3<f32> = brdf*incoming*angle;
  var diffuse: vec3<f32> = incoming*fujiiOrenNayar(base, roughness, N, L, V);

  // Stores the specular and diffuse separately to allow for finer post processing
  // Could also be done (propably more properly) with a struct
  var out = PBRData(diffuse, specular);
  
  return out; // Returns angle along with color of light so the final color can be multiplied by angle as well (creates black areas)
}

// For a reason unknown to me, spheres dont seem to behave propperly with head-on spot lights
fn calcSpotLight(N: vec3<f32>, V: vec3<f32>, fragPos: vec3<f32>, ior: f32, roughness: f32, metallic: f32, position: vec3<f32>, direction: vec3<f32>, cones: vec2<f32>, color: vec3<f32>, base: vec3<f32>) -> PBRData {
  var L: vec3<f32> = normalize(position - fragPos);
  var H: vec3<f32> = normalize(L + V); // Halfway Vector
  var dist = distance(position, fragPos);

  var alpha = roughness*roughness;
  var k: f32 = alpha*alpha / 2.0; // could also be pow(alpha + 1.0, 2) / 8

  var D: f32 = trGGX(N, H, alpha); // Distribution
  // var F: f32 = schlickFresnelIOR(V, N, ior, k); // Fresnel
  var G: f32 = smithSurfaceRoughness(N, V, L, k); // Geometry

  var brdf: f32 = cookTorrance(D, 1.0, G, N, V, L);
  
  // Cones.x is the inner phi and cones.y is the outer phi
  var theta: f32 = mdot(normalize(direction), L);
  var epsilon: f32 = cones.x - cones.y;
  var intensity: f32 = (theta - cones.y) / epsilon;
  intensity = clamp(intensity, 0.0, 1.0);
  intensity /= dist*dist;

  var incoming: vec3<f32> = color * intensity;

  var angle: f32 = mdot(L, N);
  angle = pow(angle, 1.5); // Smoothing factor makes it less accurate, but reduces ugly "seams" bewteen light sources

  var specular: vec3<f32> = brdf*incoming*angle;
  var diffuse: vec3<f32> = incoming*fujiiOrenNayar(base, roughness, N, L, V);

  // Stores the specular and diffuse separately to allow for finer post processing
  // Could also be done (propably more properly) with a struct
  var out = PBRData(diffuse, specular);
  
  return out; // Returns angle along with color of light so the final color can be multiplied by angle as well (creates black areas)
}

// Environment mapping stuff
// Takes in a vector and converts it to an equivalent coordinate in a rectilinear texture. Should be replaced with cubemaps at some point
fn vecToRectCoord(dir: vec3<f32>) -> vec2<f32> {
  var tau: f32 = 6.28318530718;
  var pi: f32 = 3.14159265359;
  var out: vec2<f32> = vec2<f32>(0.0);

  out.x = atan2(dir.z, dir.x) / tau;
  out.x += 0.5;

  var phix: f32 = length(vec2(dir.x, dir.z));
  out.y = atan2(dir.y, phix) / pi + 0.5;

  return out;
}

//VTK::Renderer::Dec

//VTK::Color::Dec

//VTK::TCoord::Dec

// optional surface normal declaration
//VTK::Normal::Dec

//VTK::Select::Dec

//VTK::RenderEncoder::Dec

//VTK::Mapper::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output : fragmentOutput;

  // Temporary ambient, diffuse, and opacity
  var ambientColor: vec4<f32> = mapperUBO.AmbientColor;
  var diffuseColor: vec4<f32> = mapperUBO.DiffuseColor;
  var opacity: f32 = mapperUBO.Opacity;

  // This should be declared somewhere else
  var _diffuseMap: vec4<f32> = vec4<f32>(1.0);
  var _roughnessMap: vec4<f32> = vec4<f32>(1.0);
  var _metallicMap: vec4<f32> = vec4<f32>(1.0);
  var _normalMap: vec4<f32> = vec4<f32>(0.0, 0.0, 1.0, 0.0); // normal map was setting off the normal vector detection in fragment
  var _ambientOcclusionMap: vec4<f32> = vec4<f32>(1.);
  var _emissionMap: vec4<f32> = vec4<f32>(0.);

  //VTK::Color::Impl

  //VTK::TCoord::Impl

  //VTK::Normal::Impl

  var computedColor: vec4<f32> = vec4<f32>(diffuseColor.rgb, 1.0);

  //VTK::Light::Impl

  //VTK::Select::Impl

  if (computedColor.a == 0.0) { discard; };

  //VTK::Position::Impl

  //VTK::RenderEncoder::Impl

  return output;
}
`;function Pv(t){return t.indexOf("edge")>=0}function Ek(t,e){e.classHierarchy.push("vtkWebGPUCellArrayMapper"),t.buildPass=n=>{n&&(e.is2D?(e.WebGPUActor=t.getFirstAncestorOfType("vtkWebGPUActor2D"),e.forceZValue=!0):(e.WebGPUActor=t.getFirstAncestorOfType("vtkWebGPUActor"),e.forceZValue=!1),e.coordinateSystem=e.WebGPUActor.getRenderable().getCoordinateSystem(),e.useRendererMatrix=e.coordinateSystem!==xk.DISPLAY,e.WebGPURenderer=e.WebGPUActor.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getParent(),e.device=e.WebGPURenderWindow.getDevice())},t.translucentPass=n=>{n&&(t.prepareToDraw(e.WebGPURenderer.getRenderEncoder()),e.renderEncoder.registerDrawCallback(e.pipeline,t.draw))},t.opaquePass=n=>{n&&(t.prepareToDraw(e.WebGPURenderer.getRenderEncoder()),e.renderEncoder.registerDrawCallback(e.pipeline,t.draw))},t.updateUBO=()=>{var s;const r=e.WebGPUActor.getRenderable().getProperty(),a=e.UBO.getSendTime();if(t.getMTime()>a||r.getMTime()>a||e.renderable.getMTime()>a){const o=e.WebGPUActor.getKeyMatrices(e.WebGPURenderer);if(e.UBO.setArray("BCWCMatrix",o.bcwc),e.UBO.setArray("BCSCMatrix",o.bcsc),e.UBO.setArray("MCWCNormals",o.normalMatrix),e.is2D){e.UBO.setValue("ZValue",e.WebGPUActor.getRenderable().getProperty().getDisplayLocation()===Sk.FOREGROUND?1:0);const l=r.getColorByReference();e.UBO.setValue("AmbientIntensity",1),e.UBO.setArray("DiffuseColor",[l[0],l[1],l[2],1]),e.UBO.setValue("DiffuseIntensity",0),e.UBO.setValue("SpecularIntensity",0)}else{let l=r.getAmbientColorByReference();e.UBO.setValue("AmbientIntensity",r.getAmbient()),e.UBO.setArray("AmbientColor",[l[0],l[1],l[2],1]),e.UBO.setValue("DiffuseIntensity",r.getDiffuse()),l=r.getDiffuseColorByReference(),e.UBO.setArray("DiffuseColor",[l[0],l[1],l[2],1]),e.UBO.setValue("Roughness",r.getRoughness()),e.UBO.setValue("BaseIOR",r.getBaseIOR()),e.UBO.setValue("Metallic",r.getMetallic()),e.UBO.setValue("NormalStrength",r.getNormalStrength()),e.UBO.setValue("Emission",r.getEmission()),e.UBO.setValue("SpecularIntensity",r.getSpecular()),l=r.getSpecularColorByReference(),e.UBO.setArray("SpecularColor",[l[0],l[1],l[2],1])}const c=(s=r.getEdgeColorByReference)==null?void 0:s.call(r);c&&e.UBO.setArray("EdgeColor",[c[0],c[1],c[2],1]),e.UBO.setValue("LineWidth",r.getLineWidth()),e.UBO.setValue("Opacity",r.getOpacity()),e.UBO.setValue("PropID",e.WebGPUActor.getPropID());const f=e.WebGPURenderWindow.getDevice();e.UBO.sendIfNeeded(f)}},t.haveWideLines=()=>{const n=e.WebGPUActor.getRenderable(),r=n.getProperty().getRepresentation();return n.getProperty().getLineWidth()<=1||e.primitiveType===Lt.Verts?!1:e.primitiveType===Lt.Triangles||e.primitiveType===Lt.TriangleStrips?r===Lu.WIREFRAME:!0},t.replaceShaderPosition=(n,r,a)=>{const s=r.getShaderDescription("vertex");s.addBuiltinOutput("vec4<f32>","@builtin(position) Position"),s.hasOutput("vertexVC")||s.addOutput("vec4<f32>","vertexVC");let o=s.getCode();e.useRendererMatrix?(o=ve.substitute(o,"//VTK::Position::Impl",["    var pCoord: vec4<f32> = rendererUBO.SCPCMatrix*mapperUBO.BCSCMatrix*vertexBC;","    output.vertexVC = rendererUBO.SCVCMatrix * mapperUBO.BCSCMatrix * vec4<f32>(vertexBC.xyz, 1.0);","//VTK::Position::Impl"]).result,e.forceZValue&&(o=ve.substitute(o,"//VTK::Position::Impl",["pCoord = vec4<f32>(pCoord.xyz/pCoord.w, 1.0);","pCoord.z = mapperUBO.ZValue;","//VTK::Position::Impl"]).result)):(o=ve.substitute(o,"//VTK::Position::Impl",["    var pCoord: vec4<f32> = mapperUBO.BCSCMatrix*vertexBC;","    pCoord.x = 2.0* pCoord.x / rendererUBO.viewportSize.x - 1.0;","    pCoord.y = 2.0* pCoord.y / rendererUBO.viewportSize.y - 1.0;","    pCoord.z = 0.5 - 0.5 * pCoord.z;","//VTK::Position::Impl"]).result,e.forceZValue&&(o=ve.substitute(o,"//VTK::Position::Impl",["    pCoord.z = mapperUBO.ZValue;","//VTK::Position::Impl"]).result)),t.haveWideLines()&&(s.addBuiltinInput("u32","@builtin(instance_index) instanceIndex"),o=ve.substitute(o,"//VTK::Position::Impl",["    var tmpPos: vec4<f32> = pCoord;","    var numSteps: f32 = ceil(mapperUBO.LineWidth - 1.0);","    var offset: f32 = (mapperUBO.LineWidth - 1.0) * (f32(input.instanceIndex / 2u) - numSteps/2.0) / numSteps;","    var tmpPos2: vec3<f32> = tmpPos.xyz / tmpPos.w;","    tmpPos2.x = tmpPos2.x + 2.0 * (f32(input.instanceIndex) % 2.0) * offset / rendererUBO.viewportSize.x;","    tmpPos2.y = tmpPos2.y + 2.0 * (f32(input.instanceIndex + 1u) % 2.0) * offset / rendererUBO.viewportSize.y;","    tmpPos2.z = min(1.0, tmpPos2.z + 0.00001);","    pCoord = vec4<f32>(tmpPos2.xyz * tmpPos.w, tmpPos.w);","//VTK::Position::Impl"]).result),o=ve.substitute(o,"//VTK::Position::Impl",["    output.Position = pCoord;"]).result,s.setCode(o)},e.shaderReplacements.set("replaceShaderPosition",t.replaceShaderPosition),t.replaceShaderNormal=(n,r,a)=>{const s=a.getBuffer("normalMC"),o=e.WebGPUActor.getRenderable();if(s){const c=r.getShaderDescription("vertex");c.hasOutput("normalVC")||c.addOutput("vec3<f32>","normalVC",s.getArrayInformation()[0].interpolation),c.hasOutput("tangentVC")||c.addOutput("vec3<f32>","tangentVC",s.getArrayInformation()[0].interpolation),c.hasOutput("bitangentVC")||c.addOutput("vec3<f32>","bitangentVC",s.getArrayInformation()[0].interpolation);let f=c.getCode();f=ve.substitute(f,"//VTK::Normal::Impl",["  output.normalVC = normalize((rendererUBO.WCVCNormals * mapperUBO.MCWCNormals * normalMC).xyz);","  var c1: vec3<f32> = cross(output.normalVC, vec3<f32>(0, 0, 1));","  var c2: vec3<f32> = cross(output.normalVC, vec3<f32>(0, 1, 0));","  var tangent: vec3<f32> = mix(c1, c2, distance(c1, c2));","  output.tangentVC = normalize(tangent);","  output.bitangentVC = normalize(cross(output.normalVC, tangent));"]).result,c.setCode(f);const l=r.getShaderDescription("fragment");f=l.getCode(),o.getProperty().getNormalTexture()?f=ve.substitute(f,"//VTK::Normal::Impl",["  var normal: vec3<f32> = input.normalVC;","  if (!input.frontFacing) { normal = -normal; }","  var tangent: vec3<f32> = input.tangentVC;","  var bitangent: vec3<f32> = input.bitangentVC;","  var TCVCMatrix: mat3x3<f32> = mat3x3<f32>(","    tangent.x, bitangent.x, normal.x,","    tangent.y, bitangent.y, normal.y,","    tangent.z, bitangent.z, normal.z,","  );","  var mappedNormal: vec3<f32> = TCVCMatrix * (_normalMap.xyz * 2 - 1);","  normal = mix(normal, mappedNormal, mapperUBO.NormalStrength);","  normal = normalize(normal);"]).result:f=ve.substitute(f,"//VTK::Normal::Impl",["  var normal: vec3<f32> = input.normalVC;","  if (!input.frontFacing) { normal = -normal; }","  normal = normalize(normal);"]).result,l.setCode(f)}},e.shaderReplacements.set("replaceShaderNormal",t.replaceShaderNormal),t.replaceShaderLight=(n,r,a)=>{var l;if(n.includes("sel"))return;const s=r.getShaderDescription("vertex");s.hasOutput("vertexVC")||s.addOutput("vec4<f32>","vertexVC");const o=e.WebGPURenderer.getRenderable(),c=r.getShaderDescription("fragment");let f=c.getCode();if(f.includes("var normal:")&&e.useRendererMatrix&&!Pv(n)&&!e.is2D&&!n.includes("sel")){const h=["  var pi: f32 = 3.14159265359;","  var fragPos: vec3<f32> = vec3<f32>(input.vertexVC.xyz);","  var V: vec3<f32> = mix(normalize(-fragPos), vec3<f32>(0, 0, 1), f32(rendererUBO.cameraParallel)); // View Vector","  var baseColor: vec3<f32> = _diffuseMap.rgb * diffuseColor.rgb;","  var roughness: f32 = max(0.000001, mapperUBO.Roughness * _roughnessMap.r);","  var metallic: f32 = mapperUBO.Metallic * _metallicMap.r;","  var alpha: f32 = roughness*roughness;","  var ior: f32 = mapperUBO.BaseIOR;","  var k: f32 = alpha*alpha / 2;","  var diffuse: vec3<f32> = vec3<f32>(0.);","  var specular: vec3<f32> = vec3<f32>(0.);","  var emission: vec3<f32> = _emissionMap.rgb * mapperUBO.Emission;","  {","    var i: i32 = 0;","    loop {","      if !(i < rendererUBO.LightCount) { break; }","      switch (i32(rendererLightSSBO.values[i].LightData.x)) {","         // Point Light","         case 0 {","           var color: vec3<f32> = rendererLightSSBO.values[i].LightColor.rgb * rendererLightSSBO.values[i].LightColor.w;","           var pos: vec3<f32> = (rendererLightSSBO.values[i].LightPos).xyz;","           var calculated: PBRData = calcPointLight(normal, V, fragPos, ior, roughness, metallic, pos, color, baseColor);","           diffuse += max(vec3<f32>(0), calculated.diffuse);","           specular += max(vec3<f32>(0), calculated.specular);","          }","         // Directional light","         case 1 {","           var dir: vec3<f32> = (rendererUBO.WCVCNormals * vec4<f32>(normalize(rendererLightSSBO.values[i].LightDir.xyz), 0.)).xyz;","           dir = normalize(dir);","           var color: vec3<f32> = rendererLightSSBO.values[i].LightColor.rgb * rendererLightSSBO.values[i].LightColor.w;","           var calculated: PBRData = calcDirectionalLight(normal, V, ior, roughness, metallic, dir, color, baseColor); // diffuseColor.rgb needs to be fixed with a more dynamic diffuse color","           diffuse += max(vec3<f32>(0), calculated.diffuse);","           specular += max(vec3<f32>(0), calculated.specular);","         }","         // Spot Light","         case 2 {","           var color: vec3<f32> = rendererLightSSBO.values[i].LightColor.rgb * rendererLightSSBO.values[i].LightColor.w;","           var pos: vec3<f32> = (rendererLightSSBO.values[i].LightPos).xyz;","           var dir: vec3<f32> = (rendererUBO.WCVCNormals * vec4<f32>(normalize(rendererLightSSBO.values[i].LightDir.xyz), 0.)).xyz;","           dir = normalize(dir);","           var cones: vec2<f32> = vec2<f32>(rendererLightSSBO.values[i].LightData.y, rendererLightSSBO.values[i].LightData.z);","           var calculated: PBRData = calcSpotLight(normal, V, fragPos, ior, roughness, metallic, pos, dir, cones, color, baseColor);","           diffuse += max(vec3<f32>(0), calculated.diffuse);","           specular += max(vec3<f32>(0), calculated.specular);","         }","         default { continue; }","       }","      continuing { i++; }","    }","  }","  var fresnel: f32 = schlickFresnelIOR(V, normal, ior, k); // Fresnel","  fresnel = min(1.0, fresnel);","  // This could be controlled with its own variable (that isnt base color) for better artistic control","  var fresnelMetallic: vec3<f32> = schlickFresnelRGB(V, normal, baseColor); // Fresnel for metal, takes color into account","  var kS: vec3<f32> = mix(vec3<f32>(fresnel), fresnelMetallic, metallic);","  kS = min(vec3<f32>(1.0), kS);","  var kD: vec3<f32> = (1.0 - kS) * (1.0 - metallic);","  var PBR: vec3<f32> = mapperUBO.DiffuseIntensity*kD*diffuse + kS*specular;","  PBR += emission;","  computedColor = vec4<f32>(PBR, mapperUBO.Opacity);"];(l=o.getEnvironmentTexture())!=null&&l.getImageLoaded()&&h.push("  // To get diffuse IBL, the texture is sampled with normals in worldspace","  var diffuseIBLCoords: vec3<f32> = (transpose(rendererUBO.WCVCNormals) * vec4<f32>(normal, 1.)).xyz;","  var diffuseCoords: vec2<f32> = vecToRectCoord(diffuseIBLCoords);","  // To get specular IBL, the texture is sampled as the worldspace reflection between the normal and view vectors","  // Reflections are first calculated in viewspace, then converted to worldspace to sample the environment","  var VreflN: vec3<f32> = normalize(reflect(-V, normal));","  var reflectionIBLCoords = (transpose(rendererUBO.WCVCNormals) * vec4<f32>(VreflN, 1.)).xyz;","  var specularCoords: vec2<f32> = vecToRectCoord(reflectionIBLCoords);","  var diffuseIBL = textureSampleLevel(EnvironmentTexture, EnvironmentTextureSampler, diffuseCoords, rendererUBO.MaxEnvironmentMipLevel);","  var level = roughness * rendererUBO.MaxEnvironmentMipLevel;","  var specularIBL = textureSampleLevel(EnvironmentTexture, EnvironmentTextureSampler, specularCoords, level);","  var specularIBLContribution: vec3<f32> = specularIBL.rgb*rendererUBO.BackgroundSpecularStrength;","  computedColor += vec4<f32>(specularIBLContribution*kS, 0);","  var diffuseIBLContribution: vec3<f32> = diffuseIBL.rgb*rendererUBO.BackgroundDiffuseStrength;","  diffuseIBLContribution *= baseColor * _ambientOcclusionMap.rgb;","  computedColor += vec4<f32>(diffuseIBLContribution*kD, 0);"),f=ve.substitute(f,"//VTK::Light::Impl",h).result,c.setCode(f)}else f=ve.substitute(f,"//VTK::Light::Impl",["  var diffuse: vec3<f32> = diffuseColor.rgb;","  var specular: vec3<f32> = mapperUBO.SpecularColor.rgb * mapperUBO.SpecularColor.a;","  computedColor = vec4<f32>(diffuse * _diffuseMap.rgb, mapperUBO.Opacity);"]).result,c.setCode(f)},e.shaderReplacements.set("replaceShaderLight",t.replaceShaderLight),t.replaceShaderColor=(n,r,a)=>{if(Pv(n)){const l=r.getShaderDescription("fragment");let h=l.getCode();h=ve.substitute(h,"//VTK::Color::Impl",["ambientColor = mapperUBO.EdgeColor;","diffuseColor = mapperUBO.EdgeColor;"]).result,l.setCode(h);return}const s=a.getBuffer("colorVI");if(!s)return;const o=r.getShaderDescription("vertex");o.addOutput("vec4<f32>","color",s.getArrayInformation()[0].interpolation);let c=o.getCode();c=ve.substitute(c,"//VTK::Color::Impl",["  output.color = colorVI;"]).result,o.setCode(c);const f=r.getShaderDescription("fragment");c=f.getCode(),c=ve.substitute(c,"//VTK::Color::Impl",["ambientColor = input.color;","diffuseColor = input.color;","opacity = mapperUBO.Opacity * input.color.a;"]).result,f.setCode(c)},e.shaderReplacements.set("replaceShaderColor",t.replaceShaderColor),t.replaceShaderTCoord=(n,r,a)=>{var v,S,T,x,m,O,w,R,M,D,V,B,z,k,U,H,P,A,ne,ae;if(!a.hasAttribute("tcoord"))return;const s=r.getShaderDescription("vertex"),o=a.getBuffer("tcoord"),c=ht.getNumberOfComponentsFromBufferFormat(o.getArrayInformation()[0].format);let f=s.getCode();s.addOutput(`vec${c}<f32>`,"tcoordVS"),f=ve.substitute(f,"//VTK::TCoord::Impl",["  output.tcoordVS = tcoord;"]).result,s.setCode(f);const l=r.getShaderDescription("fragment");f=l.getCode();const h=e.WebGPUActor.getRenderable(),g=se=>se?se.getDimensionality()===c:!1,d=[];((T=(S=(v=h.getProperty()).getDiffuseTexture)==null?void 0:S.call(v))!=null&&T.getImageLoaded()||h.getTextures()[0]||e.colorTexture)&&(g((m=(x=h.getProperty()).getDiffuseTexture)==null?void 0:m.call(x))||g(h.getTextures()[0])||g(e.colorTexture))&&d.push("_diffuseMap = textureSample(DiffuseTexture, DiffuseTextureSampler, input.tcoordVS);"),(R=(w=(O=h.getProperty()).getRoughnessTexture)==null?void 0:w.call(O))!=null&&R.getImageLoaded()&&g(h.getProperty().getRoughnessTexture())&&d.push("_roughnessMap = textureSample(RoughnessTexture, RoughnessTextureSampler, input.tcoordVS);"),(V=(D=(M=h.getProperty()).getMetallicTexture)==null?void 0:D.call(M))!=null&&V.getImageLoaded()&&g(h.getProperty().getMetallicTexture())&&d.push("_metallicMap = textureSample(MetallicTexture, MetallicTextureSampler, input.tcoordVS);"),(k=(z=(B=h.getProperty()).getNormalTexture)==null?void 0:z.call(B))!=null&&k.getImageLoaded()&&g(h.getProperty().getNormalTexture())&&d.push("_normalMap = textureSample(NormalTexture, NormalTextureSampler, input.tcoordVS);"),(P=(H=(U=h.getProperty()).getAmbientOcclusionTexture)==null?void 0:H.call(U))!=null&&P.getImageLoaded()&&g(h.getProperty().getAmbientOcclusionTexture())&&d.push("_ambientOcclusionMap = textureSample(AmbientOcclusionTexture, AmbientOcclusionTextureSampler, input.tcoordVS);"),(ae=(ne=(A=h.getProperty()).getEmissionTexture)==null?void 0:ne.call(A))!=null&&ae.getImageLoaded()&&g(h.getProperty().getEmissionTexture())&&d.push("_emissionMap = textureSample(EmissionTexture, EmissionTextureSampler, input.tcoordVS);"),f=ve.substitute(f,"//VTK::TCoord::Impl",d).result,l.setCode(f)},e.shaderReplacements.set("replaceShaderTCoord",t.replaceShaderTCoord),t.replaceShaderSelect=(n,r,a)=>{if(n.includes("sel")){const s=r.getShaderDescription("fragment");let o=s.getCode();o=ve.substitute(o,"//VTK::Select::Impl",["  var compositeID: u32 = 0u;"]).result,s.setCode(o)}},e.shaderReplacements.set("replaceShaderSelect",t.replaceShaderSelect),t.getUsage=(n,r)=>n===Lu.POINTS||r===Lt.Points?pt.Verts:r===Lt.Lines?pt.Lines:n===Lu.WIREFRAME?r===Lt.Triangles?pt.LinesFromTriangles:pt.LinesFromStrips:r===Lt.Triangles?pt.Triangles:r===Lt.TriangleStrips?pt.Strips:r===Lt.TriangleEdges?pt.LinesFromTriangles:pt.LinesFromStrips,t.getHashFromUsage=n=>`pt${n}`,t.getTopologyFromUsage=n=>{switch(n){case pt.Triangles:return"triangle-list";case pt.Verts:return"point-list";case pt.Lines:default:return"line-list"}},t.buildVertexInput=()=>{var T,x;const n=e.currentInput,r=e.cellArray,a=e.primitiveType;let o=e.WebGPUActor.getRenderable().getProperty().getRepresentation();const c=e.WebGPURenderWindow.getDevice();let f=!1;a===Lt.TriangleEdges&&(f=!0,o=Lu.WIREFRAME);const l=e.vertexInput,h=n.getPoints();let g;if(r){const m={hash:`R${o}P${a}${r.getMTime()}`,usage:pt.Index,cells:r,numberOfPoints:h.getNumberOfPoints(),primitiveType:a,representation:o};g=c.getBufferManager().getBuffer(m),l.setIndexBuffer(g)}else l.setIndexBuffer(null);if(h){const m=e.WebGPUActor.getBufferShift(e.WebGPURenderer),O={hash:`${h.getMTime()}I${g.getMTime()}${m.join()}float32x4`,usage:pt.PointArray,format:"float32x4",dataArray:h,indexBuffer:g,shift:m,packExtra:!0},w=c.getBufferManager().getBuffer(O);l.addBuffer(w,["vertexBC"])}else l.removeBufferIfPresent("vertexBC");const d=t.getUsage(o,a);if(e._usesCellNormals=!1,!e.is2D&&(d===pt.Triangles||d===pt.Strips)){const m=n.getPointData().getNormals(),O={format:"snorm8x4",indexBuffer:g,packExtra:!0,shift:0,scale:127};if(m){O.hash=`${m.getMTime()}I${g.getMTime()}snorm8x4`,O.dataArray=m,O.usage=pt.PointArray;const w=c.getBufferManager().getBuffer(O);l.addBuffer(w,["normalMC"])}else if(a===Lt.Triangles){e._usesCellNormals=!0,O.hash=`PFN${h.getMTime()}I${g.getMTime()}snorm8x4`,O.dataArray=h,O.cells=r,O.usage=pt.NormalsFromPoints;const w=c.getBufferManager().getBuffer(O);l.addBuffer(w,["normalMC"])}else l.removeBufferIfPresent("normalMC")}else l.removeBufferIfPresent("normalMC");let v=!1;if(e.renderable.getScalarVisibility()){const m=e.renderable.getColorMapColors();if(m&&!f){const O=e.renderable.getScalarMode();let w=!1;(O===_u.USE_CELL_DATA||O===_u.USE_CELL_FIELD_DATA||O===_u.USE_FIELD_DATA||!n.getPointData().getScalars())&&O!==_u.USE_POINT_FIELD_DATA&&m&&(w=!0);const R={usage:pt.PointArray,format:"unorm8x4",hash:`${w}${m.getMTime()}I${g.getMTime()}unorm8x4`,dataArray:m,indexBuffer:g,cellData:w,cellOffset:0},M=c.getBufferManager().getBuffer(R);l.addBuffer(M,["colorVI"]),v=!0}}v||l.removeBufferIfPresent("colorVI");let S=null;if((x=(T=e.renderable).getInterpolateScalarsBeforeMapping)!=null&&x.call(T)&&e.renderable.getColorCoordinates()?S=e.renderable.getColorCoordinates():S=n.getPointData().getTCoords(),S&&!f){const m=c.getBufferManager().getBufferForPointArray(S,l.getIndexBuffer());l.addBuffer(m,["tcoord"])}else l.removeBufferIfPresent("tcoord")},t.updateTextures=()=>{var f,l,h,g,d,v,S,T,x,m,O,w,R,M,D;const n=[],r=[],a=(l=(f=e.renderable).getColorTextureMap)==null?void 0:l.call(f);a&&(e.colorTexture||(e.colorTexture=Vc.newInstance({label:"polyDataColor"})),e.colorTexture.setInputData(a),r.push(["Diffuse",e.colorTexture]));const s=e.WebGPUActor.getRenderable(),o=e.WebGPURenderer.getRenderable(),c=[];if((g=(h=s.getProperty()).getDiffuseTexture)!=null&&g.call(h)){const V=["Diffuse",s.getProperty().getDiffuseTexture()];c.push(V)}if(s.getTextures()[0]){const V=["Diffuse",s.getTextures()[0]];c.push(V)}if(e.colorTexture){const V=["Diffuse",e.colorTexture];c.push(V)}if((v=(d=s.getProperty()).getRoughnessTexture)!=null&&v.call(d)){const V=["Roughness",s.getProperty().getRoughnessTexture()];c.push(V)}if((T=(S=s.getProperty()).getMetallicTexture)!=null&&T.call(S)){const V=["Metallic",s.getProperty().getMetallicTexture()];c.push(V)}if((m=(x=s.getProperty()).getNormalTexture)!=null&&m.call(x)){const V=["Normal",s.getProperty().getNormalTexture()];c.push(V)}if((w=(O=s.getProperty()).getAmbientOcclusionTexture)!=null&&w.call(O)){const V=["AmbientOcclusion",s.getProperty().getAmbientOcclusionTexture()];c.push(V)}if((M=(R=s.getProperty()).getEmissionTexture)!=null&&M.call(R)){const V=["Emission",s.getProperty().getEmissionTexture()];c.push(V)}if((D=o.getEnvironmentTexture)!=null&&D.call(o)){const V=["Environment",o.getEnvironmentTexture()];c.push(V)}for(let V=0;V<c.length;V++)(c[V][1].getInputData()||c[V][1].getJsImageData()||c[V][1].getCanvas())&&r.push(c[V]),c[V][1].getImage()&&c[V][1].getImageLoaded()&&r.push(c[V]);for(let V=0;V<r.length;V++){const B=r[V][1],z=r[V][0],k=e.device.getTextureManager().getTextureForVTKTexture(B);if(k.getReady()){let U=!1;for(let H=0;H<e.textures.length;H++)e.textures[H]===k&&(U=!0,n[H]=!0);if(!U){n[e.textures.length]=!0;const H=k.createView(`${z}Texture`);e.textures.push(k),e.textureViews.push(H);const P=B.getInterpolate()?"linear":"nearest";let A=null;!A&&B.getEdgeClamp()&&B.getRepeat()&&(A="mirror-repeat"),!A&&B.getEdgeClamp()&&(A="clamp-to-edge"),!A&&B.getRepeat()&&(A="repeat"),z!=="Environment"?H.addSampler(e.device,{addressModeU:A,addressModeV:A,addressModeW:A,minFilter:P,magFilter:P}):H.addSampler(e.device,{addressModeU:"repeat",addressModeV:"clamp-to-edge",addressModeW:"repeat",minFilter:P,magFilter:P,mipmapFilter:"linear"})}}}for(let V=e.textures.length-1;V>=0;V--)n[V]||(e.textures.splice(V,1),e.textureViews.splice(V,1))},t.computePipelineHash=()=>{let n=`pd${e.useRendererMatrix?"r":""}${e.forceZValue?"z":""}`;if(e.primitiveType===Lt.TriangleEdges||e.primitiveType===Lt.TriangleStripEdges)n+="edge";else{if(e.vertexInput.hasAttribute("normalMC")&&(n+="n"),e.vertexInput.hasAttribute("colorVI")&&(n+="c"),e.vertexInput.hasAttribute("tcoord")){const a=e.vertexInput.getBuffer("tcoord"),s=ht.getNumberOfComponentsFromBufferFormat(a.getArrayInformation()[0].format);n+=`t${s}`}e.textures.length&&(n+=`tx${e.textures.length}`)}e._usesCellNormals&&(n+="cn"),e.SSBO&&(n+="ssbo");const r=t.getHashFromUsage(e.usage);n+=r,n+=e.renderEncoder.getPipelineHash(),e.pipelineHash=n},t.updateBuffers=()=>{e.primitiveType!==Lt.TriangleEdges&&e.primitiveType!==Lt.TriangleStripEdges&&t.updateTextures();const n=e.WebGPUActor.getRenderable(),r=n.getProperty().getRepresentation();e.usage=t.getUsage(r,e.primitiveType),t.buildVertexInput();const a=e.vertexInput.getBuffer("vertexBC");if(t.setNumberOfVertices(a.getSizeInBytes()/a.getStrideInBytes()),t.setTopology(t.getTopologyFromUsage(e.usage)),t.updateUBO(),t.haveWideLines()){const s=n.getProperty();t.setNumberOfInstances(Math.ceil(s.getLineWidth()*2))}else t.setNumberOfInstances(1)}}const mk={is2D:!1,cellArray:null,currentInput:null,cellOffset:0,primitiveType:0,colorTexture:null,renderEncoder:null,textures:null};function E2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,mk,n),X1.extend(t,e,n),e.fragmentShaderTemplate=wk,e.vertexShaderTemplate=Ck,e._tmpMat3=Va(new Float64Array(9)),e._tmpMat4=Ce(new Float64Array(16)),e.UBO=Ma.newInstance({label:"mapperUBO"}),e.UBO.addEntry("BCWCMatrix","mat4x4<f32>"),e.UBO.addEntry("BCSCMatrix","mat4x4<f32>"),e.UBO.addEntry("MCWCNormals","mat4x4<f32>"),e.UBO.addEntry("AmbientColor","vec4<f32>"),e.UBO.addEntry("DiffuseColor","vec4<f32>"),e.UBO.addEntry("EdgeColor","vec4<f32>"),e.UBO.addEntry("SpecularColor","vec4<f32>"),e.UBO.addEntry("AmbientIntensity","f32"),e.UBO.addEntry("DiffuseIntensity","f32"),e.UBO.addEntry("Roughness","f32"),e.UBO.addEntry("Metallic","f32"),e.UBO.addEntry("Ambient","f32"),e.UBO.addEntry("Normal","f32"),e.UBO.addEntry("Emission","f32"),e.UBO.addEntry("NormalStrength","f32"),e.UBO.addEntry("BaseIOR","f32"),e.UBO.addEntry("SpecularIntensity","f32"),e.UBO.addEntry("LineWidth","f32"),e.UBO.addEntry("Opacity","f32"),e.UBO.addEntry("ZValue","f32"),e.UBO.addEntry("PropID","u32"),e.UBO.addEntry("ClipNear","f32"),e.UBO.addEntry("ClipFar","f32"),e.UBO.addEntry("Time","u32"),ct(t,e,["cellArray","currentInput","cellOffset","is2D","primitiveType","renderEncoder"]),e.textures=[],Ek(t,e)}const Rk=Ne(E2,"vtkWebGPUCellArrayMapper");var m2={newInstance:Rk,extend:E2};const{PrimitiveTypes:Vu}=Zr;function Ok(t,e){e.classHierarchy.push("vtkWebGPUPolyDataMapper"),t.createCellArrayMapper=()=>m2.newInstance(),t.buildPass=n=>{if(n){e.WebGPUActor=t.getFirstAncestorOfType("vtkWebGPUActor"),e.renderable.getStatic()||e.renderable.update();const r=e.renderable.getInputData();e.renderable.mapScalars(r,1),t.updateCellArrayMappers(r)}},t.updateCellArrayMappers=n=>{const r=[n.getVerts(),n.getLines(),n.getPolys(),n.getStrips()],a=[];let s=0;for(let o=Vu.Points;o<=Vu.Triangles;o++)if(r[o].getNumberOfValues()>0){e.primitives[o]||(e.primitives[o]=t.createCellArrayMapper());const c=e.primitives[o];c.setCellArray(r[o]),c.setCurrentInput(n),c.setCellOffset(s),c.setPrimitiveType(o),c.setRenderable(e.renderable),s+=r[o].getNumberOfCells(),a.push(c)}else e.primitives[o]=null;if(e.WebGPUActor.getRenderable().getProperty().getEdgeVisibility())for(let o=Vu.TriangleEdges;o<=Vu.TriangleStripEdges;o++)if(r[o-2].getNumberOfValues()>0){e.primitives[o]||(e.primitives[o]=t.createCellArrayMapper());const c=e.primitives[o];c.setCellArray(r[o-2]),c.setCurrentInput(n),c.setCellOffset(e.primitives[o-2].getCellOffset()),c.setPrimitiveType(o),c.setRenderable(e.renderable),a.push(c)}else e.primitives[o]=null;t.prepareNodes(),t.addMissingChildren(a),t.removeUnusedNodes()}}const Dk={primitives:null};function Mk(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Dk,n),qe.extend(t,e,n),e.primitives=[],Ok(t,e)}const Lk=Ne(Mk,"vtkWebGPUPolyDataMapper");Xn("vtkMapper",Lk);const{PrimitiveTypes:Xv}=Zr;function _k(t,e){e.classHierarchy.push("vtkWebGPUPolyDataMapper2D"),t.createCellArrayMapper=()=>m2.newInstance(),t.buildPass=n=>{if(n){e.WebGPUActor=t.getFirstAncestorOfType("vtkWebGPUActor2D"),e.renderable.getStatic()||e.renderable.update();const r=e.renderable.getInputData();e.renderable.mapScalars(r,1),t.updateCellArrayMappers(r)}},t.updateCellArrayMappers=n=>{const r=[n.getVerts(),n.getLines(),n.getPolys(),n.getStrips()],a=[];let s=0;for(let o=Xv.Points;o<=Xv.Triangles;o++)if(r[o].getNumberOfValues()>0){e.primitives[o]||(e.primitives[o]=t.createCellArrayMapper());const c=e.primitives[o];c.setCellArray(r[o]),c.setCurrentInput(n),c.setCellOffset(s),c.setPrimitiveType(o),c.setRenderable(e.renderable),c.setIs2D(!0),s+=r[o].getNumberOfCells(),a.push(c)}else e.primitives[o]=null;t.prepareNodes(),t.addMissingChildren(a),t.removeUnusedNodes()}}function Vk(t){return{primitives:[],...t}}function kk(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Vk(n)),qe.extend(t,e,n),e.primitives=[],_k(t,e)}const Bk=Ne(kk,"vtkWebGPUPolyDataMapper2D");Xn("vtkMapper2D",Bk);function Fk(t,e){e.classHierarchy.push("vtkWebGPUScalarBarActor"),t.buildPass=n=>{n&&(e.WebGPURenderer=t.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getParent(),e.scalarBarActorHelper.getRenderable()||e.scalarBarActorHelper.setRenderable(e.renderable),t.prepareNodes(),t.addMissingNode(e.scalarBarActorHelper.getBarActor()),t.addMissingNode(e.scalarBarActorHelper.getTmActor()),t.removeUnusedNodes())},t.opaquePass=(n,r)=>{if(n){const a=e.WebGPURenderer?e.WebGPURenderer.getRenderable().getActiveCamera():null,s=e.WebGPURenderer.getTiledSizeAndOrigin();e.scalarBarActorHelper.updateAPISpecificData([s.usize,s.vsize],a,e.WebGPURenderWindow.getRenderable())}}}const Nk={};function Uk(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Nk,n),qe.extend(t,e,n),e.scalarBarActorHelper=P1.newScalarBarActorHelper(),Fk(t,e)}const Gk=Ne(Uk,"vtkWebGPUScalarBarActor");Xn("vtkScalarBarActor",Gk);function $k(t,e){e.classHierarchy.push("vtkWebGPUSampler"),t.create=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.device=n,e.options.addressModeU=r.addressModeU?r.addressModeU:"clamp-to-edge",e.options.addressModeV=r.addressModeV?r.addressModeV:"clamp-to-edge",e.options.addressModeW=r.addressModeW?r.addressModeW:"clamp-to-edge",e.options.magFilter=r.magFilter?r.magFilter:"nearest",e.options.minFilter=r.minFilter?r.minFilter:"nearest",e.options.mipmapFilter=r.mipmapFilter?r.mipmapFilter:"nearest",e.options.label=e.label,e.handle=e.device.getHandle().createSampler(e.options),e.bindGroupTime.modified()},t.getShaderCode=(n,r)=>`@binding(${n}) @group(${r}) var ${e.label}: sampler;`,t.getBindGroupEntry=()=>({resource:e.handle})}const zk={device:null,handle:null,label:null,options:null};function R2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,zk,n),L.obj(t,e),e.options={},e.bindGroupLayoutEntry={visibility:GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT,sampler:{}},e.bindGroupTime={},L.obj(e.bindGroupTime,{mtime:0}),L.get(t,e,["bindGroupTime","handle","options"]),L.setGet(t,e,["bindGroupLayoutEntry","device","label"]),$k(t,e)}const Wk=L.newInstance(R2);var I1={newInstance:Wk,extend:R2};function Hk(t,e){e.classHierarchy.push("vtkWebGPUTextureView"),t.create=(n,r)=>{e.texture=n,e.options=r,e.options.dimension=e.options.dimension||"2d",e.options.label=e.label,e.textureHandle=n.getHandle(),e.handle=e.textureHandle.createView(e.options),e.bindGroupLayoutEntry.texture.viewDimension=e.options.dimension;const a=ht.getDetailsFromTextureFormat(e.texture.getFormat());e.bindGroupLayoutEntry.texture.sampleType=a.sampleType},t.createFromTextureHandle=(n,r)=>{e.texture=null,e.options=r,e.options.dimension=e.options.dimension||"2d",e.options.label=e.label,e.textureHandle=n,e.handle=e.textureHandle.createView(e.options),e.bindGroupLayoutEntry.texture.viewDimension=e.options.dimension;const a=ht.getDetailsFromTextureFormat(r.format);e.bindGroupLayoutEntry.texture.sampleType=a.sampleType,e.bindGroupTime.modified()},t.getBindGroupEntry=()=>({resource:t.getHandle()}),t.getShaderCode=(n,r)=>{let a="f32";e.bindGroupLayoutEntry.texture.sampleType==="sint"?a="i32":e.bindGroupLayoutEntry.texture.sampleType==="uint"&&(a="u32");let s=`@binding(${n}) @group(${r}) var ${e.label}: texture_${e.options.dimension}<${a}>;`;return e.bindGroupLayoutEntry.texture.sampleType==="depth"&&(s=`@binding(${n}) @group(${r}) var ${e.label}: texture_depth_${e.options.dimension};`),s},t.addSampler=(n,r)=>{const a=I1.newInstance({label:`${e.label}Sampler`});a.create(n,r),t.setSampler(a)},t.getBindGroupTime=()=>(e.texture&&e.texture.getHandle()!==e.textureHandle&&(e.textureHandle=e.texture.getHandle(),e.handle=e.textureHandle.createView(e.options),e.bindGroupTime.modified()),e.bindGroupTime),t.getHandle=()=>(e.texture&&e.texture.getHandle()!==e.textureHandle&&(e.textureHandle=e.texture.getHandle(),e.handle=e.textureHandle.createView(e.options),e.bindGroupTime.modified()),e.handle)}const bk={texture:null,handle:null,sampler:null,label:null};function O2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,bk,n),L.obj(t,e),e.bindGroupLayoutEntry={visibility:GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d"}},e.bindGroupTime={},L.obj(e.bindGroupTime,{mtime:0}),L.get(t,e,["bindGroupTime","texture"]),L.setGet(t,e,["bindGroupLayoutEntry","label","sampler"]),Hk(t,e)}const Ak=L.newInstance(O2);var D2={newInstance:Ak,extend:O2};const{BufferUsage:Iv}=Zr;function jk(t,e){e.classHierarchy.push("vtkWebGPUTexture"),t.create=(n,r)=>{e.device=n,e.width=r.width,e.height=r.height,e.depth=r.depth?r.depth:1;const a=e.depth===1?"2d":"3d";e.format=r.format?r.format:"rgba8unorm",e.mipLevel=r.mipLevel?r.mipLevel:0,e.usage=r.usage?r.usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST,e.handle=e.device.getHandle().createTexture({size:[e.width,e.height,e.depth],format:e.format,usage:e.usage,label:e.label,dimension:a,mipLevelCount:e.mipLevel+1})},t.assignFromHandle=(n,r,a)=>{e.device=n,e.handle=r,e.width=a.width,e.height=a.height,e.depth=a.depth?a.depth:1,e.format=a.format?a.format:"rgba8unorm",e.usage=a.usage?a.usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST},t.writeImageData=n=>{let r=[];if(n.canvas){e.device.getHandle().queue.copyExternalImageToTexture({source:n.canvas,flipY:n.flip},{texture:e.handle,premultipliedAlpha:!0},[e.width,e.height,e.depth]),e.ready=!0;return}n.jsImageData&&!n.nativeArray&&(n.width=n.jsImageData.width,n.height=n.jsImageData.height,n.depth=1,n.format="rgba8unorm",n.flip=!0,n.nativeArray=n.jsImageData.data);const a=ht.getDetailsFromTextureFormat(e.format);let s=e.width*a.stride;const o=(f,l,h)=>{const g=f.length/(l*h)*f.BYTES_PER_ELEMENT,d=a.elementSize===2&&a.sampleType==="float";if(d||g%256){const v=f,S=g/v.BYTES_PER_ELEMENT,T=a.elementSize,x=256*Math.floor((S*T+255)/256),m=x/T,O=L.newTypedArray(d?"Uint16Array":v.constructor.name,m*l*h);for(let w=0;w<l*h;w++)if(d)for(let R=0;R<S;R++)O[w*m+R]=Rn.toHalf(v[w*S+R]);else O.set(v.subarray(w*S,(w+1)*S),w*m);return[O,x]}return[f,g]};if(n.nativeArray&&(r=n.nativeArray),n.image){const f=document.createElement("canvas");f.width=n.image.width,f.height=n.image.height;const l=f.getContext("2d");l.translate(0,f.height),l.scale(1,-1),l.drawImage(n.image,0,0,n.image.width,n.image.height,0,0,f.width,f.height),r=l.getImageData(0,0,n.image.width,n.image.height).data}const c=e.device.createCommandEncoder();if(t.getDimensionality()!==3){const f=Vc.generateMipmaps(r,e.width,e.height,e.mipLevel);let l=e.width,h=e.height;for(let g=0;g<=e.mipLevel;g++){const d=o(f[g],h,1);s=d[1];const v={dataArray:n.dataArray?n.dataArray:null,nativeArray:d[0],usage:Iv.Texture},S=e.device.getBufferManager().getBuffer(v);c.copyBufferToTexture({buffer:S.getHandle(),offset:0,bytesPerRow:s,rowsPerImage:h},{texture:e.handle,mipLevel:g},[l,h,1]),l/=2,h/=2}e.device.submitCommandEncoder(c),e.ready=!0}else{const f=o(r,e.height,e.depth);s=f[1];const l={dataArray:n.dataArray?n.dataArray:null,usage:Iv.Texture};l.nativeArray=f[0];const h=e.device.getBufferManager().getBuffer(l);c.copyBufferToTexture({buffer:h.getHandle(),offset:0,bytesPerRow:s,rowsPerImage:e.height},{texture:e.handle},[e.width,e.height,e.depth]),e.device.submitCommandEncoder(c),e.ready=!0}},t.getScale=()=>{const n=ht.getDetailsFromTextureFormat(e.format);return n.elementSize===2&&n.sampleType==="float"?1:255},t.getNumberOfComponents=()=>ht.getDetailsFromTextureFormat(e.format).numComponents,t.getDimensionality=()=>{let n=0;return e.width>1&&n++,e.height>1&&n++,e.depth>1&&n++,n},t.resizeToMatch=n=>{(n.getWidth()!==e.width||n.getHeight()!==e.height||n.getDepth()!==e.depth)&&(e.width=n.getWidth(),e.height=n.getHeight(),e.depth=n.getDepth(),e.handle=e.device.getHandle().createTexture({size:[e.width,e.height,e.depth],format:e.format,usage:e.usage,label:e.label}))},t.resize=function(n,r){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;(n!==e.width||r!==e.height||a!==e.depth)&&(e.width=n,e.height=r,e.depth=a,e.handle=e.device.getHandle().createTexture({size:[e.width,e.height,e.depth],format:e.format,usage:e.usage,label:e.label}))},t.createView=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};r.dimension||(r.dimension=e.depth===1?"2d":"3d");const a=D2.newInstance({label:n});return a.create(t,r),a}}const Kk={device:null,handle:null,buffer:null,ready:!1,label:null};function M2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Kk,n),L.obj(t,e),L.get(t,e,["handle","ready","width","height","depth","format","usage"]),L.setGet(t,e,["device","label"]),jk(t,e)}const Pk=L.newInstance(M2);var Hn={newInstance:Pk,extend:M2};function Xk(t,e){e.classHierarchy.push("vtkWebGPUPixelSpaceCallbackMapper"),t.opaquePass=(n,r)=>{e.WebGPURenderer=t.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getParent();const a=e.WebGPURenderer.getAspectRatio(),s=e.WebGPURenderer?e.WebGPURenderer.getRenderable().getActiveCamera():null,o=e.WebGPURenderer.getTiledSizeAndOrigin(),c=null;e.renderable.getUseZValues(),e.renderable.invokeCallback(e.renderable.getInputData(),s,a,o,c)}}const Ik={};function Yk(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Ik,n),qe.extend(t,e,n),Xk(t,e)}const qk=L.newInstance(Yk,"vtkWebGPUPixelSpaceCallbackMapper");Xn("vtkPixelSpaceCallbackMapper",qk);const Qk=t=>t,Yv=1e-6;class L2{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.matrix=Ce(new Float64Array(16)),this.tmp=new Float64Array(3),this.angleConv=e?yE:Qk}rotateFromDirections(e,n){const r=new Float64Array(3),a=new Float64Array(3),s=new Float64Array(16);$n(r,e[0],e[1],e[2]),$n(a,n[0],n[1],n[2]),Xr(r,r),Xr(a,a);const o=y1(r,a);return o>=1?this:(vs(this.tmp,r,a),Gg(this.tmp)<Yv&&(vs(this.tmp,[1,0,0],e),Gg(this.tmp)<Yv&&vs(this.tmp,[0,1,0],e)),Dy(s,Math.acos(o),this.tmp),ut(this.matrix,this.matrix,s),this)}rotate(e,n){return $n(this.tmp,...n),Xr(this.tmp,this.tmp),Tn(this.matrix,this.matrix,this.angleConv(e),this.tmp),this}rotateX(e){return h1(this.matrix,this.matrix,this.angleConv(e)),this}rotateY(e){return d1(this.matrix,this.matrix,this.angleConv(e)),this}rotateZ(e){return v1(this.matrix,this.matrix,this.angleConv(e)),this}translate(e,n,r){return $n(this.tmp,e,n,r),tt(this.matrix,this.matrix,this.tmp),this}scale(e,n,r){return $n(this.tmp,e,n,r),La(this.matrix,this.matrix,this.tmp),this}multiply(e){return ut(this.matrix,this.matrix,e),this}multiply3x3(e){return ut(this.matrix,this.matrix,[e[0],e[1],e[2],0,e[3],e[4],e[5],0,e[6],e[7],e[8],0,0,0,0,1]),this}invert(){return Ft(this.matrix,this.matrix),this}identity(){return Ce(this.matrix),this}apply(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;if(OT(WO,this.matrix))return this;const a=r===-1?e.length:n+r*3;for(let s=n;s<a;s+=3)$n(this.tmp,e[s],e[s+1],e[s+2]),Ve(this.tmp,this.tmp,this.matrix),e[s]=this.tmp[0],e[s+1]=this.tmp[1],e[s+2]=this.tmp[2];return this}getMatrix(){return this.matrix}setMatrix(e){return e&&e.length===16&&St(this.matrix,e),this}}function Zk(){return new L2(!0)}function Jk(){return new L2(!1)}var cr={buildFromDegree:Zk,buildFromRadian:Jk};function eB(t,e){e.classHierarchy.push("vtkConeSource");function n(r,a){if(e.deleted)return;let s=a[0];const o=2*Math.PI/e.resolution,c=-e.height/2,f=e.resolution+1,l=4*e.resolution+1+e.resolution;let h=0;const g=L.newTypedArray(e.pointType,f*3);let d=0;const v=new Uint32Array(l);g[0]=e.height/2,g[1]=0,g[2]=0,e.capping&&(v[d++]=e.resolution);for(let S=0;S<e.resolution;S++)h++,g[h*3+0]=c,g[h*3+1]=e.radius*Math.cos(S*o),g[h*3+2]=e.radius*Math.sin(S*o),e.capping&&(v[e.resolution-d+++1]=h);for(let S=0;S<e.resolution;S++)v[d++]=3,v[d++]=0,v[d++]=S+1,v[d++]=S+2>e.resolution?1:S+2;cr.buildFromRadian().translate(...e.center).rotateFromDirections([1,0,0],e.direction).apply(g),s=jn.newInstance(),s.getPoints().setData(g,3),s.getPolys().setData(v,1),a[0]=s}t.requestData=n}const tB={height:1,radius:.5,resolution:6,center:[0,0,0],direction:[1,0,0],capping:!0,pointType:"Float64Array"};function _2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,tB,n),L.obj(t,e),L.setGet(t,e,["height","radius","resolution","capping"]),L.setGetArray(t,e,["center","direction"],3),L.algo(t,e,0,1),eB(t,e)}const nB=L.newInstance(_2,"vtkConeSource");var V2={newInstance:nB,extend:_2};const{vtkDebugMacro:ku}=L;function rB(t,e){e.classHierarchy.push("vtkCamera");const n=new Float64Array(3),r=new Float64Array([0,0,-1]),a=new Float64Array([0,1,0]),s=Ce(new Float64Array(16)),o=Ce(new Float64Array(16)),c=new Float64Array(3),f=new Float64Array(3),l=new Float64Array(3),h=Ce(new Float64Array(16)),g=Ce(new Float64Array(16)),d=new Float64Array(3),v=new Float64Array(3);function S(){e.viewPlaneNormal[0]=-e.directionOfProjection[0],e.viewPlaneNormal[1]=-e.directionOfProjection[1],e.viewPlaneNormal[2]=-e.directionOfProjection[2]}t.orthogonalizeViewUp=()=>{const T=t.getViewMatrix();e.viewUp[0]=T[4],e.viewUp[1]=T[5],e.viewUp[2]=T[6],t.modified()},t.setPosition=(T,x,m)=>{T===e.position[0]&&x===e.position[1]&&m===e.position[2]||(e.position[0]=T,e.position[1]=x,e.position[2]=m,t.computeDistance(),t.modified())},t.setFocalPoint=(T,x,m)=>{T===e.focalPoint[0]&&x===e.focalPoint[1]&&m===e.focalPoint[2]||(e.focalPoint[0]=T,e.focalPoint[1]=x,e.focalPoint[2]=m,t.computeDistance(),t.modified())},t.setDistance=T=>{if(e.distance===T)return;e.distance=T,e.distance<1e-20&&(e.distance=1e-20,ku("Distance is set to minimum."));const x=e.directionOfProjection;e.focalPoint[0]=e.position[0]+x[0]*e.distance,e.focalPoint[1]=e.position[1]+x[1]*e.distance,e.focalPoint[2]=e.position[2]+x[2]*e.distance,t.modified()},t.computeDistance=()=>{const T=e.focalPoint[0]-e.position[0],x=e.focalPoint[1]-e.position[1],m=e.focalPoint[2]-e.position[2];if(e.distance=Math.sqrt(T*T+x*x+m*m),e.distance<1e-20){e.distance=1e-20,ku("Distance is set to minimum.");const O=e.directionOfProjection;e.focalPoint[0]=e.position[0]+O[0]*e.distance,e.focalPoint[1]=e.position[1]+O[1]*e.distance,e.focalPoint[2]=e.position[2]+O[2]*e.distance}e.directionOfProjection[0]=T/e.distance,e.directionOfProjection[1]=x/e.distance,e.directionOfProjection[2]=m/e.distance,S()},t.dolly=T=>{if(T<=0)return;const x=e.distance/T;t.setPosition(e.focalPoint[0]-x*e.directionOfProjection[0],e.focalPoint[1]-x*e.directionOfProjection[1],e.focalPoint[2]-x*e.directionOfProjection[2])},t.roll=T=>{const x=e.position,m=e.focalPoint,O=e.viewUp,w=new Float64Array([O[0],O[1],O[2],0]);Ce(h);const R=new Float64Array([m[0]-x[0],m[1]-x[1],m[2]-x[2]]);Tn(h,h,et(T),R),cu(w,w,h),e.viewUp[0]=w[0],e.viewUp[1]=w[1],e.viewUp[2]=w[2],t.modified()},t.azimuth=T=>{const x=e.focalPoint;Ce(g),tt(g,g,x),Tn(g,g,et(T),e.viewUp),tt(g,g,[-x[0],-x[1],-x[2]]),Ve(d,e.position,g),t.setPosition(d[0],d[1],d[2])},t.yaw=T=>{const x=e.position;Ce(g),tt(g,g,x),Tn(g,g,et(T),e.viewUp),tt(g,g,[-x[0],-x[1],-x[2]]),Ve(v,e.focalPoint,g),t.setFocalPoint(v[0],v[1],v[2])},t.elevation=T=>{const x=e.focalPoint,m=t.getViewMatrix(),O=[-m[0],-m[1],-m[2]];Ce(g),tt(g,g,x),Tn(g,g,et(T),O),tt(g,g,[-x[0],-x[1],-x[2]]),Ve(d,e.position,g),t.setPosition(d[0],d[1],d[2])},t.pitch=T=>{const x=e.position,m=t.getViewMatrix(),O=[m[0],m[1],m[2]];Ce(g),tt(g,g,x),Tn(g,g,et(T),O),tt(g,g,[-x[0],-x[1],-x[2]]),Ve(v,e.focalPoint,g),t.setFocalPoint(...v)},t.zoom=T=>{T<=0||(e.parallelProjection?e.parallelScale/=T:e.viewAngle/=T,t.modified())},t.translate=(T,x,m)=>{const O=[T,x,m];Kg(e.position,O,e.position),Kg(e.focalPoint,O,e.focalPoint),t.computeDistance(),t.modified()},t.applyTransform=T=>{const x=[...e.viewUp,1],m=[],O=[],w=[];x[0]+=e.position[0],x[1]+=e.position[1],x[2]+=e.position[2],cu(m,[...e.position,1],T),cu(O,[...e.focalPoint,1],T),cu(w,x,T),w[0]-=m[0],w[1]-=m[1],w[2]-=m[2],t.setPosition(...m.slice(0,3)),t.setFocalPoint(...O.slice(0,3)),t.setViewUp(...w.slice(0,3))},t.getThickness=()=>e.clippingRange[1]-e.clippingRange[0],t.setThickness=T=>{let x=T;x<1e-20&&(x=1e-20,ku("Thickness is set to minimum.")),t.setClippingRange(e.clippingRange[0],e.clippingRange[0]+x)},t.setThicknessFromFocalPoint=T=>{let x=T;x<1e-20&&(x=1e-20,ku("Thickness is set to minimum.")),t.setClippingRange(e.distance-x/2,e.distance+x/2)},t.setRoll=T=>{},t.getRoll=()=>{},t.setObliqueAngles=(T,x)=>{},t.getOrientation=()=>{},t.getOrientationWXYZ=()=>{},t.getFrustumPlanes=T=>{},t.getCameraLightTransformMatrix=T=>(St(T,e.cameraLightTransform),T),t.computeCameraLightTransform=()=>{St(s,t.getViewMatrix()),Ft(s,s),Oy(o,[e.distance,e.distance,e.distance]),ut(s,s,o),Ce(e.cameraLightTransform),tt(e.cameraLightTransform,s,[0,0,-1])},t.deepCopy=T=>{},t.physicalOrientationToWorldDirection=T=>{const x=Td(T[0],T[1],T[2],T[3]),m=_a(),O=Td(0,0,1,0);return Sm(m,x),yd(O,x,O),yd(O,O,m),[O[0],O[1],O[2]]},t.getPhysicalToWorldMatrix=T=>{t.getWorldToPhysicalMatrix(T),Ft(T,T)},t.getWorldToPhysicalMatrix=T=>{Ce(T);const x=[3];Gi(e.physicalViewNorth,e.physicalViewUp,x),T[0]=x[0],T[1]=x[1],T[2]=x[2],T[4]=e.physicalViewUp[0],T[5]=e.physicalViewUp[1],T[6]=e.physicalViewUp[2],T[8]=-e.physicalViewNorth[0],T[9]=-e.physicalViewNorth[1],T[10]=-e.physicalViewNorth[2],ze(T,T),$n(c,1/e.physicalScale,1/e.physicalScale,1/e.physicalScale),La(T,T,c),tt(T,T,e.physicalTranslation)},t.computeViewParametersFromViewMatrix=T=>{Ft(s,T),Ve(c,n,s),t.computeDistance();const x=e.distance;t.setPosition(c[0],c[1],c[2]),Ve(f,r,s),Pr(f,f,c),Xr(f,f),t.setDirectionOfProjection(f[0],f[1],f[2]),Ve(l,a,s),Pr(l,l,c),Xr(l,l),t.setViewUp(l[0],l[1],l[2]),t.setDistance(x)},t.computeViewParametersFromPhysicalMatrix=T=>{t.getWorldToPhysicalMatrix(s),ut(s,T,s),t.computeViewParametersFromViewMatrix(s)},t.setViewMatrix=T=>{e.viewMatrix=T,e.viewMatrix&&(St(s,e.viewMatrix),t.computeViewParametersFromViewMatrix(s),ze(e.viewMatrix,e.viewMatrix))},t.getViewMatrix=()=>{if(e.viewMatrix)return e.viewMatrix;Fy(s,e.position,e.focalPoint,e.viewUp),ze(s,s);const T=new Float64Array(16);return St(T,s),T},t.setProjectionMatrix=T=>{e.projectionMatrix=T},t.getProjectionMatrix=(T,x,m)=>{const O=new Float64Array(16);if(Ce(O),e.projectionMatrix){const M=1/e.physicalScale;return $n(c,M,M,M),St(O,e.projectionMatrix),La(O,O,c),ze(O,O),O}Ce(s);const w=e.clippingRange[1]-e.clippingRange[0],R=[e.clippingRange[0]+(x+1)*w/2,e.clippingRange[0]+(m+1)*w/2];if(e.parallelProjection){const M=e.parallelScale*T,D=e.parallelScale,V=(e.windowCenter[0]-1)*M,B=(e.windowCenter[0]+1)*M,z=(e.windowCenter[1]-1)*D,k=(e.windowCenter[1]+1)*D;By(s,V,B,z,k,R[0],R[1]),ze(s,s)}else{if(e.useOffAxisProjection)throw new Error("Off-Axis projection is not supported at this time");{const M=Math.tan(et(e.viewAngle)/2);let D,V;e.useHorizontalViewAngle===!0?(D=e.clippingRange[0]*M,V=e.clippingRange[0]*M/T):(D=e.clippingRange[0]*M*T,V=e.clippingRange[0]*M);const B=(e.windowCenter[0]-1)*D,z=(e.windowCenter[0]+1)*D,k=(e.windowCenter[1]-1)*V,U=(e.windowCenter[1]+1)*V,H=R[0],P=R[1];s[0]=2*H/(z-B),s[5]=2*H/(U-k),s[2]=(B+z)/(z-B),s[6]=(k+U)/(U-k),s[10]=-(H+P)/(P-H),s[14]=-1,s[11]=-2*H*P/(P-H),s[15]=0}}return St(O,s),O},t.getCompositeProjectionMatrix=(T,x,m)=>{const O=t.getViewMatrix(),w=t.getProjectionMatrix(T,x,m);return ut(w,O,w),w},t.setDirectionOfProjection=(T,x,m)=>{if(e.directionOfProjection[0]===T&&e.directionOfProjection[1]===x&&e.directionOfProjection[2]===m)return;e.directionOfProjection[0]=T,e.directionOfProjection[1]=x,e.directionOfProjection[2]=m;const O=e.directionOfProjection;e.focalPoint[0]=e.position[0]+O[0]*e.distance,e.focalPoint[1]=e.position[1]+O[1]*e.distance,e.focalPoint[2]=e.position[2]+O[2]*e.distance,S()},t.setDeviceAngles=(T,x,m,O)=>{const w=[3];Gi(e.physicalViewNorth,e.physicalViewUp,w);const R=Ce(new Float64Array(16));Tn(R,R,et(T),e.physicalViewUp),Tn(R,R,et(x),w),Tn(R,R,et(m),e.physicalViewNorth),Tn(R,R,et(-O),e.physicalViewUp);const M=new Float64Array([-e.physicalViewUp[0],-e.physicalViewUp[1],-e.physicalViewUp[2]]),D=new Float64Array(e.physicalViewNorth);Ve(M,M,R),Ve(D,D,R),t.setDirectionOfProjection(M[0],M[1],M[2]),t.setViewUp(D[0],D[1],D[2]),t.modified()},t.setOrientationWXYZ=(T,x,m,O)=>{const w=Ce(new Float64Array(16));if(T!==0&&(x!==0||m!==0||O!==0)){const D=et(T),V=_a();T1(V,[x,m,O],D),nc(w,V)}const R=new Float64Array(3);Ve(R,[0,0,-1],w);const M=new Float64Array(3);Ve(M,[0,1,0],w),t.setDirectionOfProjection(...R),t.setViewUp(...M),t.modified()},t.computeClippingRange=T=>{let x=null,m=null;x=e.viewPlaneNormal,m=e.position;const O=-x[0],w=-x[1],R=-x[2],M=-(O*m[0]+w*m[1]+R*m[2]),D=[O*T[0]+w*T[2]+R*T[4]+M,1e-18];for(let V=0;V<2;V++)for(let B=0;B<2;B++)for(let z=0;z<2;z++){const k=O*T[z]+w*T[2+B]+R*T[4+V]+M;D[0]=k<D[0]?k:D[0],D[1]=k>D[1]?k:D[1]}return D}}const aB={position:[0,0,1],focalPoint:[0,0,0],viewUp:[0,1,0],directionOfProjection:[0,0,-1],parallelProjection:!1,useHorizontalViewAngle:!1,viewAngle:30,parallelScale:1,clippingRange:[.01,1000.01],windowCenter:[0,0],viewPlaneNormal:[0,0,1],useOffAxisProjection:!1,screenBottomLeft:[-.5,-.5,-.5],screenBottomRight:[.5,-.5,-.5],screenTopRight:[.5,.5,-.5],freezeFocalPoint:!1,projectionMatrix:null,viewMatrix:null,cameraLightTransform:p1(),physicalTranslation:[0,0,0],physicalScale:1,physicalViewUp:[0,1,0],physicalViewNorth:[0,0,-1]};function k2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,aB,n),L.obj(t,e),L.get(t,e,["distance"]),L.setGet(t,e,["parallelProjection","useHorizontalViewAngle","viewAngle","parallelScale","useOffAxisProjection","freezeFocalPoint","physicalScale"]),L.getArray(t,e,["directionOfProjection","viewPlaneNormal","position","focalPoint"]),L.setGetArray(t,e,["clippingRange","windowCenter"],2),L.setGetArray(t,e,["viewUp","screenBottomLeft","screenBottomRight","screenTopRight","physicalTranslation","physicalViewUp","physicalViewNorth"],3),rB(t,e)}const sB=L.newInstance(k2,"vtkCamera");var iB={newInstance:sB,extend:k2};const oB=["HeadLight","CameraLight","SceneLight"];function uB(t,e){e.classHierarchy.push("vtkLight");const n=new Float64Array(3);t.getTransformedPosition=()=>(e.transformMatrix?Ve(n,e.position,e.transformMatrix):$n(n,e.position[0],e.position[1],e.position[2]),n),t.getTransformedFocalPoint=()=>(e.transformMatrix?Ve(n,e.focalPoint,e.transformMatrix):$n(n,e.focalPoint[0],e.focalPoint[1],e.focalPoint[2]),n),t.getDirection=()=>(e.directionMTime<e.mtime&&($g(e.direction,e.focalPoint,e.position),xs(e.direction),e.directionMTime=e.mtime),e.direction),t.setDirection=r=>{const a=new Float64Array(3);$g(a,e.position,r),e.focalPoint=a},t.setDirectionAngle=(r,a)=>{const s=et(r),o=et(a);t.setPosition(Math.cos(s)*Math.sin(o),Math.sin(s),Math.cos(s)*Math.cos(o)),t.setFocalPoint(0,0,0),t.setPositional(0)},t.setLightTypeToHeadLight=()=>{t.setLightType("HeadLight")},t.setLightTypeToCameraLight=()=>{t.setLightType("CameraLight")},t.setLightTypeToSceneLight=()=>{t.setTransformMatrix(null),t.setLightType("SceneLight")},t.lightTypeIsHeadLight=()=>e.lightType==="HeadLight",t.lightTypeIsSceneLight=()=>e.lightType==="SceneLight",t.lightTypeIsCameraLight=()=>e.lightType==="CameraLight"}const cB={switch:!0,intensity:1,color:[1,1,1],position:[0,0,1],focalPoint:[0,0,0],positional:!1,exponent:1,coneAngle:30,coneFalloff:5,attenuationValues:[1,0,0],transformMatrix:null,lightType:"SceneLight",shadowAttenuation:1,direction:[0,0,0],directionMTime:0};function B2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,cB,n),L.obj(t,e),L.setGet(t,e,["intensity","switch","positional","exponent","coneAngle","coneFalloff","transformMatrix","lightType","shadowAttenuation","attenuationValues"]),L.setGetArray(t,e,["color","position","focalPoint","attenuationValues"],3),uB(t,e)}const fB=L.newInstance(B2,"vtkLight");var lB={newInstance:fB,extend:B2,LIGHT_TYPES:oB};const{vtkErrorMacro:Zu}=L;function gB(t){return()=>Zu(`vtkViewport::${t} - NOT IMPLEMENTED`)}function pB(t,e){e.classHierarchy.push("vtkViewport"),t.getViewProps=()=>e.props,t.hasViewProp=r=>e.props.includes(r),t.addViewProp=r=>{r&&!t.hasViewProp(r)&&e.props.push(r)},t.removeViewProp=r=>{const a=e.props.filter(s=>s!==r);e.props.length!==a.length&&(e.props=a)},t.removeAllViewProps=()=>{e.props=[]};function n(r){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];a.push(r);const s=r.getNestedProps();if(s&&s.length)for(let o=0;o<s.length;o++)n(s[o],a);return a}t.getViewPropsWithNestedProps=()=>{const r=[];for(let a=0;a<e.props.length;a++)n(e.props[a],r);return r},t.addActor2D=t.addViewProp,t.removeActor2D=r=>{t.removeViewProp(r)},t.getActors2D=()=>(e.actors2D=[],e.props.forEach(r=>{e.actors2D=e.actors2D.concat(r.getActors2D())}),e.actors2D),t.displayToView=()=>Zu("call displayToView on your view instead"),t.viewToDisplay=()=>Zu("callviewtodisplay on your view instead"),t.getSize=()=>Zu("call getSize on your View instead"),t.normalizedDisplayToProjection=(r,a,s)=>{const o=t.normalizedDisplayToNormalizedViewport(r,a,s);return t.normalizedViewportToProjection(o[0],o[1],o[2])},t.normalizedDisplayToNormalizedViewport=(r,a,s)=>{const o=[e.viewport[2]-e.viewport[0],e.viewport[3]-e.viewport[1]];return[(r-e.viewport[0])/o[0],(a-e.viewport[1])/o[1],s]},t.normalizedViewportToProjection=(r,a,s)=>[r*2-1,a*2-1,s*2-1],t.projectionToNormalizedDisplay=(r,a,s)=>{const o=t.projectionToNormalizedViewport(r,a,s);return t.normalizedViewportToNormalizedDisplay(o[0],o[1],o[2])},t.normalizedViewportToNormalizedDisplay=(r,a,s)=>{const o=[e.viewport[2]-e.viewport[0],e.viewport[3]-e.viewport[1]];return[r*o[0]+e.viewport[0],a*o[1]+e.viewport[1],s]},t.projectionToNormalizedViewport=(r,a,s)=>[(r+1)*.5,(a+1)*.5,(s+1)*.5],t.PickPropFrom=gB("PickPropFrom")}const hB={background:[0,0,0],background2:[.2,.2,.2],gradientBackground:!1,viewport:[0,0,1,1],aspect:[1,1],pixelAspect:[1,1],props:[],actors2D:[]};function F2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,hB,n),L.obj(t,e),L.event(t,e,"event"),L.setGetArray(t,e,["viewport"],4),L.setGetArray(t,e,["background","background2"],3),pB(t,e)}const dB=L.newInstance(F2,"vtkViewport");var vB={newInstance:dB,extend:F2};const{vtkDebugMacro:Si,vtkErrorMacro:Ar,vtkWarningMacro:yB}=Pn;function qv(t){return()=>Ar(`vtkRenderer::${t} - NOT IMPLEMENTED`)}function TB(t,e){e.classHierarchy.push("vtkRenderer");const n={type:"ComputeVisiblePropBoundsEvent",renderer:t},r={type:"ResetCameraClippingRangeEvent",renderer:t},a={type:"ResetCameraEvent",renderer:t};t.updateCamera=()=>(e.activeCamera||(Si("No cameras are on, creating one."),t.getActiveCameraAndResetIfCreated()),e.activeCamera.render(t),!0),t.updateLightsGeometryToFollowCamera=()=>{const s=t.getActiveCameraAndResetIfCreated();e.lights.forEach(o=>{o.lightTypeIsSceneLight()||(o.lightTypeIsHeadLight()?(o.setPositionFrom(s.getPositionByReference()),o.setFocalPointFrom(s.getFocalPointByReference()),o.modified(s.getMTime())):o.lightTypeIsCameraLight()?o.setTransformMatrix(s.getCameraLightTransformMatrix(p1())):Ar("light has unknown light type",o.get()))})},t.updateLightGeometry=()=>e.lightFollowCamera?t.updateLightsGeometryToFollowCamera():!0,t.allocateTime=qv("allocateTime"),t.updateGeometry=qv("updateGeometry"),t.getVTKWindow=()=>e._renderWindow,t.setLayer=s=>{Si(t.getClassName(),t,"setting Layer to ",s),e.layer!==s&&(e.layer=s,t.modified()),t.setPreserveColorBuffer(!!s)},t.setActiveCamera=s=>e.activeCamera===s?!1:(e.activeCamera=s,t.modified(),t.invokeEvent({type:"ActiveCameraEvent",camera:s}),!0),t.makeCamera=()=>{const s=iB.newInstance();return t.invokeEvent({type:"CreateCameraEvent",camera:s}),s},t.getActiveCamera=()=>(e.activeCamera||(e.activeCamera=t.makeCamera()),e.activeCamera),t.getActiveCameraAndResetIfCreated=()=>(e.activeCamera||(t.getActiveCamera(),t.resetCamera()),e.activeCamera),t.getActors=()=>(e.actors=[],e.props.forEach(s=>{e.actors=e.actors.concat(s.getActors())}),e.actors),t.addActor=t.addViewProp,t.removeActor=s=>{e.actors=e.actors.filter(o=>o!==s),t.removeViewProp(s),t.modified()},t.removeAllActors=()=>{t.getActors().forEach(o=>{t.removeViewProp(o)}),e.actors=[],t.modified()},t.getVolumes=()=>(e.volumes=[],e.props.forEach(s=>{e.volumes=e.volumes.concat(s.getVolumes())}),e.volumes),t.addVolume=t.addViewProp,t.removeVolume=s=>{e.volumes=e.volumes.filter(o=>o!==s),t.removeViewProp(s),t.modified()},t.removeAllVolumes=()=>{t.getVolumes().forEach(o=>{t.removeViewProp(o)}),e.volumes=[],t.modified()},t.hasLight=s=>e.lights.includes(s),t.addLight=s=>{s&&!t.hasLight(s)&&(e.lights.push(s),t.modified())},t.removeLight=s=>{e.lights=e.lights.filter(o=>o!==s),t.modified()},t.removeAllLights=()=>{e.lights=[],t.modified()},t.setLightCollection=s=>{e.lights=s,t.modified()},t.makeLight=lB.newInstance,t.createLight=()=>{e.automaticLightCreation&&(e._createdLight&&(t.removeLight(e._createdLight),e._createdLight.delete(),e._createdLight=null),e._createdLight=t.makeLight(),t.addLight(e._createdLight),e._createdLight.setLightTypeToHeadLight(),e._createdLight.setPosition(t.getActiveCamera().getPosition()),e._createdLight.setFocalPoint(t.getActiveCamera().getFocalPoint()))},t.normalizedDisplayToWorld=(s,o,c,f)=>{let l=t.normalizedDisplayToProjection(s,o,c);return l=t.projectionToView(l[0],l[1],l[2],f),t.viewToWorld(l[0],l[1],l[2])},t.worldToNormalizedDisplay=(s,o,c,f)=>{let l=t.worldToView(s,o,c);return l=t.viewToProjection(l[0],l[1],l[2],f),t.projectionToNormalizedDisplay(l[0],l[1],l[2])},t.viewToWorld=(s,o,c)=>{if(e.activeCamera===null)return Ar("ViewToWorld: no active camera, cannot compute view to world, returning 0,0,0"),[0,0,0];const f=e.activeCamera.getViewMatrix();Ft(f,f),ze(f,f);const l=new Float64Array([s,o,c]);return Ve(l,l,f),l},t.projectionToView=(s,o,c,f)=>{if(e.activeCamera===null)return Ar("ProjectionToView: no active camera, cannot compute projection to view, returning 0,0,0"),[0,0,0];const l=e.activeCamera.getProjectionMatrix(f,-1,1);Ft(l,l),ze(l,l);const h=new Float64Array([s,o,c]);return Ve(h,h,l),h},t.worldToView=(s,o,c)=>{if(e.activeCamera===null)return Ar("WorldToView: no active camera, cannot compute view to world, returning 0,0,0"),[0,0,0];const f=e.activeCamera.getViewMatrix();ze(f,f);const l=new Float64Array([s,o,c]);return Ve(l,l,f),l},t.viewToProjection=(s,o,c,f)=>{if(e.activeCamera===null)return Ar("ViewToProjection: no active camera, cannot compute view to projection, returning 0,0,0"),[0,0,0];const l=e.activeCamera.getProjectionMatrix(f,-1,1);ze(l,l);const h=new Float64Array([s,o,c]);return Ve(h,h,l),h},t.computeVisiblePropBounds=()=>{e.allBounds[0]=$e.INIT_BOUNDS[0],e.allBounds[1]=$e.INIT_BOUNDS[1],e.allBounds[2]=$e.INIT_BOUNDS[2],e.allBounds[3]=$e.INIT_BOUNDS[3],e.allBounds[4]=$e.INIT_BOUNDS[4],e.allBounds[5]=$e.INIT_BOUNDS[5];let s=!0;t.invokeEvent(n);for(let o=0;o<e.props.length;++o){const c=e.props[o];if(c.getVisibility()&&c.getUseBounds()){const f=c.getBounds();f&&rg(f)&&(s=!1,f[0]<e.allBounds[0]&&(e.allBounds[0]=f[0]),f[1]>e.allBounds[1]&&(e.allBounds[1]=f[1]),f[2]<e.allBounds[2]&&(e.allBounds[2]=f[2]),f[3]>e.allBounds[3]&&(e.allBounds[3]=f[3]),f[4]<e.allBounds[4]&&(e.allBounds[4]=f[4]),f[5]>e.allBounds[5]&&(e.allBounds[5]=f[5]))}}return s&&(V1(e.allBounds),Si("Can't compute bounds, no 3D props are visible")),e.allBounds},t.resetCamera=function(){const o=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:null)||t.computeVisiblePropBounds(),c=[0,0,0];if(!rg(o))return Si("Cannot reset camera!"),!1;let f=null;if(t.getActiveCamera())f=e.activeCamera.getViewPlaneNormal();else return Ar("Trying to reset non-existent camera"),!1;e.activeCamera.setViewAngle(30),c[0]=(o[0]+o[1])/2,c[1]=(o[2]+o[3])/2,c[2]=(o[4]+o[5])/2;let l=o[1]-o[0],h=o[3]-o[2],g=o[5]-o[4];l*=l,h*=h,g*=g;let d=l+h+g;d=d===0?1:d,d=Math.sqrt(d)*.5;const v=et(e.activeCamera.getViewAngle()),S=d,T=d/Math.sin(v*.5),x=e.activeCamera.getViewUp();return Math.abs(Ee(x,f))>.999&&(yB("Resetting view-up since view plane normal is parallel"),e.activeCamera.setViewUp(-x[2],x[0],x[1])),e.activeCamera.setFocalPoint(c[0],c[1],c[2]),e.activeCamera.setPosition(c[0]+T*f[0],c[1]+T*f[1],c[2]+T*f[2]),t.resetCameraClippingRange(o),e.activeCamera.setParallelScale(S),e.activeCamera.setPhysicalScale(d),e.activeCamera.setPhysicalTranslation(-c[0],-c[1],-c[2]),t.invokeEvent(a),!0},t.resetCameraClippingRange=function(){const o=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:null)||t.computeVisiblePropBounds();if(!rg(o))return Si("Cannot reset camera clipping range!"),!1;if(t.getActiveCameraAndResetIfCreated(),!e.activeCamera)return Ar("Trying to reset clipping range of non-existent camera"),!1;const c=e.activeCamera.computeClippingRange(o);let f=0;if(e.activeCamera.getParallelProjection())f=.2*e.activeCamera.getParallelScale();else{const l=et(e.activeCamera.getViewAngle());f=.2*Math.tan(l/2)*c[1]}return c[1]-c[0]<f&&(f=f-c[1]+c[0],c[1]+=f/2,c[0]-=f/2),c[0]<0&&(c[0]=0),c[0]=.99*c[0]-(c[1]-c[0])*e.clippingRangeExpansion,c[1]=1.01*c[1]+(c[1]-c[0])*e.clippingRangeExpansion,c[0]=c[0]>=c[1]?.01*c[1]:c[0],e.nearClippingPlaneTolerance||(e.nearClippingPlaneTolerance=.01),c[0]<e.nearClippingPlaneTolerance*c[1]&&(c[0]=e.nearClippingPlaneTolerance*c[1]),e.activeCamera.setClippingRange(c[0],c[1]),t.invokeEvent(r),!1},t.setRenderWindow=s=>{s!==e._renderWindow&&(e._vtkWindow=s,e._renderWindow=s)},t.visibleActorCount=()=>e.props.filter(s=>s.getVisibility()).length,t.visibleVolumeCount=t.visibleActorCount,t.getMTime=()=>{let s=e.mtime;const o=e.activeCamera?e.activeCamera.getMTime():0;o>s&&(s=o);const c=e._createdLight?e._createdLight.getMTime():0;return c>s&&(s=c),s},t.getTransparent=()=>!!e.preserveColorBuffer,t.isActiveCameraCreated=()=>!!e.activeCamera}const xB={pickedProp:null,activeCamera:null,allBounds:[],ambient:[1,1,1],allocatedRenderTime:100,timeFactor:1,automaticLightCreation:!0,twoSidedLighting:!0,lastRenderTimeInSeconds:-1,renderWindow:null,lights:[],actors:[],volumes:[],lightFollowCamera:!0,numberOfPropsRendered:0,propArray:null,pathArray:null,layer:0,preserveColorBuffer:!1,preserveDepthBuffer:!1,computeVisiblePropBounds:k1(),interactive:!0,nearClippingPlaneTolerance:0,clippingRangeExpansion:.05,erase:!0,draw:!0,useShadows:!1,useDepthPeeling:!1,occlusionRatio:0,maximumNumberOfPeels:4,selector:null,delegate:null,texturedBackground:!1,backgroundTexture:null,environmentTexture:null,environmentTextureDiffuseStrength:1,environmentTextureSpecularStrength:1,useEnvironmentTextureAsBackground:!1,pass:0};function N2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};for(Object.assign(e,xB,n),vB.extend(t,e,n),e.background||(e.background=[0,0,0,1]);e.background.length<3;)e.background.push(0);e.background.length===3&&e.background.push(1),Nt(t,e,["_renderWindow","allocatedRenderTime","timeFactor","lastRenderTimeInSeconds","numberOfPropsRendered","lastRenderingUsedDepthPeeling","selector"]),ct(t,e,["twoSidedLighting","lightFollowCamera","automaticLightCreation","erase","draw","nearClippingPlaneTolerance","clippingRangeExpansion","backingStore","interactive","layer","preserveColorBuffer","preserveDepthBuffer","useDepthPeeling","occlusionRatio","maximumNumberOfPeels","delegate","backgroundTexture","texturedBackground","environmentTexture","environmentTextureDiffuseStrength","environmentTextureSpecularStrength","useEnvironmentTextureAsBackground","useShadows","pass"]),Os(t,e,["actors","volumes","lights"]),w1(t,e,["background"],4,1),bi(t,e,["renderWindow"]),TB(t,e)}const SB=Ne(N2,"vtkRenderer");var CB={newInstance:SB,extend:N2};const wB="WebGL",Cc=Object.create(null);function Y1(t,e){Cc[t]=e}function EB(){return Object.keys(Cc)}function U2(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Cc[t]&&Cc[t](e)}function mB(t,e){e.classHierarchy.push("vtkRenderWindow"),t.addRenderer=n=>{t.hasRenderer(n)||(n.setRenderWindow(t),e.renderers.push(n),t.modified())},t.removeRenderer=n=>{e.renderers=e.renderers.filter(r=>r!==n),t.modified()},t.hasRenderer=n=>e.renderers.indexOf(n)!==-1,t.newAPISpecificView=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return U2(n||e.defaultViewAPI,r)},t.addView=n=>{t.hasView(n)||(n.setRenderable(t),e._views.push(n),t.modified())},t.removeView=n=>{e._views=e._views.filter(r=>r!==n),t.modified()},t.hasView=n=>e._views.indexOf(n)!==-1,t.preRender=()=>{e.renderers.forEach(n=>{n.isActiveCameraCreated()||n.resetCamera()})},t.render=()=>{t.preRender(),e.interactor?e.interactor.render():e._views.forEach(n=>n.traverseAllPasses())},t.getStatistics=()=>{const n={propCount:0,invisiblePropCount:0,gpuMemoryMB:0};return e._views.forEach(r=>{r.getGraphicsMemoryInfo&&(n.gpuMemoryMB+=r.getGraphicsMemoryInfo()/1e6)}),e.renderers.forEach(r=>{const a=r.getViewProps(),s=e._views[0].getViewNodeFor(r);a.forEach(o=>{if(o.getVisibility()){n.propCount+=1;const c=o.getMapper&&o.getMapper();if(c&&c.getPrimitiveCount){const f=s.getViewNodeFor(c);if(f){f.getAllocatedGPUMemoryInBytes&&(n.gpuMemoryMB+=f.getAllocatedGPUMemoryInBytes()/1e6);const l=c.getPrimitiveCount();Object.keys(l).forEach(h=>{n[h]||(n[h]=0),n[h]+=l[h]})}}}else n.invisiblePropCount+=1})}),n.str=Object.keys(n).map(r=>`${r}: ${n[r]}`).join(`
`),n},t.captureImages=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"image/png",r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return L.setImmediate(t.render),e._views.map(a=>a.captureNextImage?a.captureNextImage(n,r):void 0).filter(a=>!!a)},t.addRenderWindow=n=>e.childRenderWindows.includes(n)?!1:(e.childRenderWindows.push(n),t.modified(),!0),t.removeRenderWindow=n=>{const r=e.childRenderWindows.findIndex(a=>a===n);return r<0?!1:(e.childRenderWindows.splice(r,1),t.modified(),!0)}}const RB={defaultViewAPI:wB,renderers:[],views:[],interactor:null,neverRendered:!0,numberOfLayers:1,childRenderWindows:[]};function G2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,RB,n),L.obj(t,e),L.setGet(t,e,["interactor","numberOfLayers","_views","defaultViewAPI"]),L.get(t,e,["neverRendered"]),L.getArray(t,e,["renderers","childRenderWindows"]),L.moveToProtected(t,e,["views"]),L.event(t,e,"completion"),mB(t,e)}const OB=L.newInstance(G2,"vtkRenderWindow");var DB={newInstance:OB,extend:G2,registerViewConstructor:Y1,listViewAPIs:EB,newAPISpecificView:U2};const a1={Unknown:0,LeftController:1,RightController:2},Mi={Unknown:0,Trigger:1,TrackPad:2,Grip:3,Thumbstick:4,A:5,B:6,ApplicationMenu:7},MB={Unknown:0,TouchpadX:1,TouchpadY:2,ThumbstickX:3,ThumbstickY:4};var $2={Device:a1,Input:Mi,Axis:MB};const{Device:Bu,Input:Sa}=$2,{vtkWarningMacro:Fu,vtkErrorMacro:Nu,normalizeWheel:LB,vtkOnceErrorMacro:_B}=L,us={ctrlKey:!1,altKey:!1,shiftKey:!1},xg={"xr-standard":[Sa.Trigger,Sa.Grip,Sa.TrackPad,Sa.Thumbstick,Sa.A,Sa.B]},q1=["StartAnimation","Animation","EndAnimation","PointerEnter","PointerLeave","MouseEnter","MouseLeave","StartMouseMove","MouseMove","EndMouseMove","LeftButtonPress","LeftButtonRelease","MiddleButtonPress","MiddleButtonRelease","RightButtonPress","RightButtonRelease","KeyPress","KeyDown","KeyUp","StartMouseWheel","MouseWheel","EndMouseWheel","StartPinch","Pinch","EndPinch","StartPan","Pan","EndPan","StartRotate","Rotate","EndRotate","Button3D","Move3D","StartPointerLock","EndPointerLock","StartInteraction","Interaction","EndInteraction","AnimationFrameRateUpdate"];function Ci(t){t.cancelable&&t.preventDefault()}function Uu(t){const e=Object.create(null);return t.forEach(n=>{let{pointerId:r,position:a}=n;e[r]=a}),e}function VB(t,e){e.classHierarchy.push("vtkRenderWindowInteractor");const n={...t},r=new Set,a=new Map;let s=1;t.start=()=>{!e.initialized&&(t.initialize(),!e.initialized)||t.startEventLoop()},t.setRenderWindow=T=>{Nu("you want to call setView(view) instead of setRenderWindow on a vtk.js interactor")},t.setInteractorStyle=T=>{e.interactorStyle!==T&&(e.interactorStyle!=null&&e.interactorStyle.setInteractor(null),e.interactorStyle=T,e.interactorStyle!=null&&e.interactorStyle.getInteractor()!==t&&e.interactorStyle.setInteractor(t))},t.initialize=()=>{e.initialized=!0,t.enable(),t.render()},t.enable=()=>t.setEnabled(!0),t.disable=()=>t.setEnabled(!1),t.startEventLoop=()=>Fu("empty event loop");function o(T,x){e._forcedRenderer||(e.currentRenderer=t.findPokedRenderer(T,x))}t.getCurrentRenderer=()=>(e.currentRenderer||o(0,0),e.currentRenderer);function c(T){const x=e._view.getCanvas(),m=x.getBoundingClientRect(),O=x.width/m.width,w=x.height/m.height,R={x:O*(T.clientX-m.left),y:w*(m.height-T.clientY+m.top),z:0};return(a.size<=1||!e.currentRenderer)&&o(R.x,R.y),R}const f=e._getScreenEventPositionFor||c;function l(T){return{controlKey:T.ctrlKey,altKey:T.altKey,shiftKey:T.shiftKey}}function h(T){const x=l(T);return{key:T.key,keyCode:T.charCode,...x}}function g(T){return T.pointerType||""}const d=()=>{if(e.container===null)return;const{container:T}=e;T.addEventListener("contextmenu",Ci),T.addEventListener("wheel",t.handleWheel),T.addEventListener("DOMMouseScroll",t.handleWheel),T.addEventListener("pointerenter",t.handlePointerEnter),T.addEventListener("pointerleave",t.handlePointerLeave),T.addEventListener("pointermove",t.handlePointerMove,{passive:!1}),T.addEventListener("pointerdown",t.handlePointerDown,{passive:!1}),T.addEventListener("pointerup",t.handlePointerUp),T.addEventListener("pointercancel",t.handlePointerCancel),document.addEventListener("keypress",t.handleKeyPress),document.addEventListener("keydown",t.handleKeyDown),document.addEventListener("keyup",t.handleKeyUp),document.addEventListener("pointerlockchange",t.handlePointerLockChange),T.style.touchAction="none",T.style.userSelect="none",T.style.webkitTapHighlightColor="rgba(0,0,0,0)"};t.bindEvents=T=>{if(T===null)return;n.setContainer(T)&&d()};const v=()=>{clearTimeout(e.moveTimeoutID),clearTimeout(e.wheelTimeoutID),e.moveTimeoutID=0,e.wheelTimeoutID=0,s=1;const{container:T}=e;T&&(T.removeEventListener("contextmenu",Ci),T.removeEventListener("wheel",t.handleWheel),T.removeEventListener("DOMMouseScroll",t.handleWheel),T.removeEventListener("pointerenter",t.handlePointerEnter),T.removeEventListener("pointerleave",t.handlePointerLeave),T.removeEventListener("pointermove",t.handlePointerMove,{passive:!1}),T.removeEventListener("pointerdown",t.handlePointerDown,{passive:!1}),T.removeEventListener("pointerup",t.handlePointerUp),T.removeEventListener("pointercancel",t.handlePointerCancel)),document.removeEventListener("keypress",t.handleKeyPress),document.removeEventListener("keydown",t.handleKeyDown),document.removeEventListener("keyup",t.handleKeyUp),document.removeEventListener("pointerlockchange",t.handlePointerLockChange),a.clear()};t.unbindEvents=()=>{v(),n.setContainer(null)},t.handleKeyPress=T=>{const x=h(T);t.keyPressEvent(x)},t.handleKeyDown=T=>{const x=h(T);t.keyDownEvent(x)},t.handleKeyUp=T=>{const x=h(T);t.keyUpEvent(x)},t.handlePointerEnter=T=>{const x={...l(T),position:f(T),deviceType:g(T)};t.pointerEnterEvent(x),x.deviceType==="mouse"&&t.mouseEnterEvent(x)},t.handlePointerLeave=T=>{const x={...l(T),position:f(T),deviceType:g(T)};t.pointerLeaveEvent(x),x.deviceType==="mouse"&&t.mouseLeaveEvent(x)},t.handlePointerDown=T=>{if(!(T.button>2||t.isPointerLocked()))switch(e.preventDefaultOnPointerDown&&Ci(T),T.target.hasPointerCapture(T.pointerId)&&T.target.releasePointerCapture(T.pointerId),e.container.setPointerCapture(T.pointerId),a.has(T.pointerId)&&Fu("[RenderWindowInteractor] duplicate pointerId detected"),a.set(T.pointerId,{pointerId:T.pointerId,position:f(T)}),T.pointerType){case"pen":case"touch":t.handleTouchStart(T);break;case"mouse":default:t.handleMouseDown(T);break}},t.handlePointerUp=T=>{if(a.has(T.pointerId))switch(e.preventDefaultOnPointerUp&&Ci(T),a.delete(T.pointerId),e.container.releasePointerCapture(T.pointerId),T.pointerType){case"pen":case"touch":t.handleTouchEnd(T);break;case"mouse":default:t.handleMouseUp(T);break}},t.handlePointerCancel=T=>{if(a.has(T.pointerId))switch(a.delete(T.pointerId),T.pointerType){case"pen":case"touch":t.handleTouchEnd(T);break;case"mouse":default:t.handleMouseUp(T);break}},t.handlePointerMove=T=>{if(a.has(T.pointerId)){const x=a.get(T.pointerId);x.position=f(T)}switch(T.pointerType){case"pen":case"touch":t.handleTouchMove(T);break;case"mouse":default:t.handleMouseMove(T);break}},t.handleMouseDown=T=>{const x={...l(T),position:f(T),deviceType:g(T)};switch(T.button){case 0:t.leftButtonPressEvent(x);break;case 1:t.middleButtonPressEvent(x);break;case 2:t.rightButtonPressEvent(x);break;default:Nu(`Unknown mouse button pressed: ${T.button}`);break}},t.requestPointerLock=()=>{e.container&&e.container.requestPointerLock()},t.exitPointerLock=()=>{var T;return(T=document.exitPointerLock)==null?void 0:T.call(document)},t.isPointerLocked=()=>!!e.container&&document.pointerLockElement===e.container,t.handlePointerLockChange=()=>{t.isPointerLocked()?t.startPointerLockEvent():t.endPointerLockEvent()};function S(){e._view&&e.enabled&&e.enableRender&&(e.inRender=!0,e._view.traverseAllPasses(),e.inRender=!1),t.invokeRenderEvent()}t.requestAnimation=T=>{if(T===void 0){Nu("undefined requester, can not start animating");return}if(r.has(T)){Fu("requester is already registered for animating");return}r.add(T),!e.animationRequest&&r.size===1&&!e.xrAnimation&&(e._animationStartTime=Date.now(),e._animationFrameCount=0,e.animationRequest=requestAnimationFrame(t.handleAnimation),t.startAnimationEvent())},t.extendAnimation=T=>{const x=Date.now()+T;e._animationExtendedEnd=Math.max(e._animationExtendedEnd,x),!e.animationRequest&&r.size===0&&!e.xrAnimation&&(e._animationStartTime=Date.now(),e._animationFrameCount=0,e.animationRequest=requestAnimationFrame(t.handleAnimation),t.startAnimationEvent())},t.isAnimating=()=>e.xrAnimation||e.animationRequest!==null,t.cancelAnimation=function(T){let x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!r.has(T)){if(!x){const m=T&&T.getClassName?T.getClassName():T;Fu(`${m} did not request an animation`)}return}r.delete(T),e.animationRequest&&r.size===0&&Date.now()>e._animationExtendedEnd&&(cancelAnimationFrame(e.animationRequest),e.animationRequest=null,t.endAnimationEvent(),t.render())},t.switchToXRAnimation=()=>{e.animationRequest&&(cancelAnimationFrame(e.animationRequest),e.animationRequest=null),e.xrAnimation=!0},t.returnFromXRAnimation=()=>{e.xrAnimation=!1,r.size!==0&&(e.recentAnimationFrameRate=10,e.animationRequest=requestAnimationFrame(t.handleAnimation))},t.updateXRGamepads=(T,x,m)=>{T.inputSources.forEach(O=>{const w=O.gripSpace==null?null:x.getPose(O.gripSpace,m),R=O.gripSpace==null?null:x.getPose(O.targetRaySpace,m),M=O.gamepad,D=O.handedness;if(M){M.index in e.lastGamepadValues||(e.lastGamepadValues[M.index]={left:{buttons:{}},right:{buttons:{}},none:{buttons:{}}});for(let V=0;V<M.buttons.length;++V)V in e.lastGamepadValues[M.index][D].buttons||(e.lastGamepadValues[M.index][D].buttons[V]=!1),e.lastGamepadValues[M.index][D].buttons[V]!==M.buttons[V].pressed&&w!=null&&(t.button3DEvent({gamepad:M,position:w.transform.position,orientation:w.transform.orientation,targetPosition:R.transform.position,targetOrientation:R.transform.orientation,pressed:M.buttons[V].pressed,device:O.handedness==="left"?Bu.LeftController:Bu.RightController,input:xg[M.mapping]&&xg[M.mapping][V]?xg[M.mapping][V]:Sa.Trigger}),e.lastGamepadValues[M.index][D].buttons[V]=M.buttons[V].pressed),e.lastGamepadValues[M.index][D].buttons[V]&&w!=null&&t.move3DEvent({gamepad:M,position:w.transform.position,orientation:w.transform.orientation,targetPosition:R.transform.position,targetOrientation:R.transform.orientation,device:O.handedness==="left"?Bu.LeftController:Bu.RightController})}})},t.handleMouseMove=T=>{const x={...l(T),position:f(T),deviceType:g(T)};e.moveTimeoutID===0?t.startMouseMoveEvent(x):(t.mouseMoveEvent(x),clearTimeout(e.moveTimeoutID)),e.moveTimeoutID=setTimeout(()=>{t.endMouseMoveEvent(),e.moveTimeoutID=0},200)},t.handleAnimation=()=>{const T=Date.now();e._animationFrameCount++,T-e._animationStartTime>1e3&&e._animationFrameCount>1&&(e.recentAnimationFrameRate=1e3*(e._animationFrameCount-1)/(T-e._animationStartTime),e.lastFrameTime=1/e.recentAnimationFrameRate,t.animationFrameRateUpdateEvent(),e._animationStartTime=T,e._animationFrameCount=1),t.animationEvent(),S(),r.size>0||Date.now()<e._animationExtendedEnd?e.animationRequest=requestAnimationFrame(t.handleAnimation):(cancelAnimationFrame(e.animationRequest),e.animationRequest=null,t.endAnimationEvent(),t.render())},t.handleWheel=T=>{Ci(T);const x={...LB(T),...l(T),position:f(T),deviceType:g(T)};e.wheelTimeoutID===0&&(Math.abs(x.spinY)>=.3?s=Math.abs(x.spinY):s=1),x.spinY/=s,e.wheelTimeoutID===0?(t.startMouseWheelEvent(x),t.mouseWheelEvent(x)):(t.mouseWheelEvent(x),clearTimeout(e.wheelTimeoutID)),e.mouseScrollDebounceByPass?(t.extendAnimation(600),t.endMouseWheelEvent(),e.wheelTimeoutID=0):e.wheelTimeoutID=setTimeout(()=>{t.extendAnimation(600),t.endMouseWheelEvent(),e.wheelTimeoutID=0},200)},t.handleMouseUp=T=>{const x={...l(T),position:f(T),deviceType:g(T)};switch(T.button){case 0:t.leftButtonReleaseEvent(x);break;case 1:t.middleButtonReleaseEvent(x);break;case 2:t.rightButtonReleaseEvent(x);break;default:Nu(`Unknown mouse button released: ${T.button}`);break}},t.handleTouchStart=T=>{const x=[...a.values()];if(e.recognizeGestures&&x.length>1){const m=Uu(a);if(x.length===2){const O={...l(us),position:x[0].position,deviceType:g(T)};t.leftButtonReleaseEvent(O)}t.recognizeGesture("TouchStart",m)}else if(x.length===1){const m={...l(us),position:f(T),deviceType:g(T)};t.leftButtonPressEvent(m)}},t.handleTouchMove=T=>{const x=[...a.values()];if(e.recognizeGestures&&x.length>1){const m=Uu(a);t.recognizeGesture("TouchMove",m)}else if(x.length===1){const m={...l(us),position:x[0].position,deviceType:g(T)};t.mouseMoveEvent(m)}},t.handleTouchEnd=T=>{const x=[...a.values()];if(e.recognizeGestures)if(x.length===0){const m={...l(us),position:f(T),deviceType:g(T)};t.leftButtonReleaseEvent(m)}else if(x.length===1){const m=Uu(a);t.recognizeGesture("TouchEnd",m);const O={...l(us),position:x[0].position,deviceType:g(T)};t.leftButtonPressEvent(O)}else{const m=Uu(a);t.recognizeGesture("TouchMove",m)}else if(x.length===1){const m={...l(us),position:x[0].position,deviceType:g(T)};t.leftButtonReleaseEvent(m)}},t.setView=T=>{e._view!==T&&(e._view=T,e._view.getRenderable().setInteractor(t),t.modified())},t.getFirstRenderer=()=>{var T,x,m;return(m=(x=(T=e._view)==null?void 0:T.getRenderable())==null?void 0:x.getRenderersByReference())==null?void 0:m[0]},t.findPokedRenderer=function(){var D,V;let T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!e._view)return null;const m=(V=(D=e._view)==null?void 0:D.getRenderable())==null?void 0:V.getRenderers();if(!m||m.length===0)return null;m.sort((B,z)=>B.getLayer()-z.getLayer());let O=null,w=null,R=null,M=m.length;for(;M--;){const B=m[M];if(e._view.isInViewport(T,x,B)&&B.getInteractive()){R=B;break}O===null&&B.getInteractive()&&(O=B),w===null&&e._view.isInViewport(T,x,B)&&(w=B)}return R===null&&(R=O),R===null&&(R=w),R==null&&(R=m[0]),R},t.render=()=>{!t.isAnimating()&&!e.inRender&&S()},q1.forEach(T=>{const x=T.charAt(0).toLowerCase()+T.slice(1);t[`${x}Event`]=m=>{if(!e.enabled)return;if(!t.getCurrentRenderer()){_B(`
          Can not forward events without a current renderer on the interactor.
        `);return}const w={type:T,pokedRenderer:e.currentRenderer,firstRenderer:t.getFirstRenderer(),...m};t[`invoke${T}`](w)}}),t.recognizeGesture=(T,x)=>{if(Object.keys(x).length>2)return;if(e.startingEventPositions||(e.startingEventPositions={}),T==="TouchStart"){Object.keys(x).forEach(k=>{e.startingEventPositions[k]=x[k]}),e.currentGesture="Start";return}if(T==="TouchEnd"){e.currentGesture==="Pinch"&&(t.render(),t.endPinchEvent()),e.currentGesture==="Rotate"&&(t.render(),t.endRotateEvent()),e.currentGesture==="Pan"&&(t.render(),t.endPanEvent()),e.currentGesture="Start",e.startingEventPositions={};return}let m=0;const O=[],w=[];Object.keys(x).forEach(k=>{O[m]=x[k],w[m]=e.startingEventPositions[k],m++});const R=Math.sqrt((w[0].x-w[1].x)*(w[0].x-w[1].x)+(w[0].y-w[1].y)*(w[0].y-w[1].y)),M=Math.sqrt((O[0].x-O[1].x)*(O[0].x-O[1].x)+(O[0].y-O[1].y)*(O[0].y-O[1].y));let D=Ui(Math.atan2(w[1].y-w[0].y,w[1].x-w[0].x)),V=Ui(Math.atan2(O[1].y-O[0].y,O[1].x-O[0].x)),B=V-D;V=V+180>=360?V-180:V+180,D=D+180>=360?D-180:D+180,Math.abs(V-D)<Math.abs(B)&&(B=V-D);const z=[];if(z[0]=(O[0].x-w[0].x+O[1].x-w[1].x)/2,z[1]=(O[0].y-w[0].y+O[1].y-w[1].y)/2,T==="TouchMove")if(e.currentGesture==="Start"){let k=.01*Math.sqrt(e.container.clientWidth*e.container.clientWidth+e.container.clientHeight*e.container.clientHeight);k<15&&(k=15);const U=Math.abs(M-R),H=M*3.1415926*Math.abs(B)/360,P=Math.sqrt(z[0]*z[0]+z[1]*z[1]);if(U>k&&U>H&&U>P){e.currentGesture="Pinch";const A={scale:1,touches:x};t.startPinchEvent(A)}else if(H>k&&H>P){e.currentGesture="Rotate";const A={rotation:0,touches:x};t.startRotateEvent(A)}else if(P>k){e.currentGesture="Pan";const A={translation:[0,0],touches:x};t.startPanEvent(A)}}else{if(e.currentGesture==="Rotate"){const k={rotation:B,touches:x};t.rotateEvent(k)}if(e.currentGesture==="Pinch"){const k={scale:M/R,touches:x};t.pinchEvent(k)}if(e.currentGesture==="Pan"){const k={translation:z,touches:x};t.panEvent(k)}}},t.handleVisibilityChange=()=>{e._animationStartTime=Date.now(),e._animationFrameCount=0},t.setCurrentRenderer=T=>{e._forcedRenderer=!!T,e.currentRenderer=T},t.setContainer=T=>{v();const x=n.setContainer(T??null);return x&&d(),x},t.delete=()=>{for(;r.size;)t.cancelAnimation(r.values().next().value);typeof document.hidden<"u"&&document.removeEventListener("visibilitychange",t.handleVisibilityChange),e.container&&t.setContainer(null),n.delete()},typeof document.hidden<"u"&&document.addEventListener("visibilitychange",t.handleVisibilityChange,!1)}const kB={renderWindow:null,interactorStyle:null,picker:null,pickingManager:null,initialized:!1,enabled:!1,enableRender:!0,currentRenderer:null,lightFollowCamera:!0,desiredUpdateRate:30,stillUpdateRate:2,container:null,recognizeGestures:!0,currentGesture:"Start",animationRequest:null,lastFrameTime:.1,recentAnimationFrameRate:10,wheelTimeoutID:0,moveTimeoutID:0,lastGamepadValues:{},preventDefaultOnPointerDown:!1,preventDefaultOnPointerUp:!1,mouseScrollDebounceByPass:!1};function z2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,kB,n),L.obj(t,e),e._animationExtendedEnd=0,L.event(t,e,"RenderEvent"),q1.forEach(r=>L.event(t,e,r)),L.get(t,e,["initialized","interactorStyle","lastFrameTime","recentAnimationFrameRate","_view"]),L.setGet(t,e,["container","lightFollowCamera","enabled","enableRender","recognizeGestures","desiredUpdateRate","stillUpdateRate","picker","preventDefaultOnPointerDown","preventDefaultOnPointerUp","mouseScrollDebounceByPass"]),L.moveToProtected(t,e,["view"]),VB(t,e)}const BB=L.newInstance(z2,"vtkRenderWindowInteractor");var W2={newInstance:BB,extend:z2,handledEvents:q1,...$2};const{vtkErrorMacro:FB,VOID:NB}=L;function UB(t,e,n,r){return t.getRenderWindow().getViews()[0].worldToDisplay(e,n,r,t)}function GB(t,e,n,r){return t.getRenderWindow().getViews()[0].displayToWorld(e,n,r,t)}const $B={computeWorldToDisplay:UB,computeDisplayToWorld:GB};function zB(t,e){e.classHierarchy.push("vtkInteractorObserver");const n={...t};function r(){for(;e.subscribedEvents.length;)e.subscribedEvents.pop().unsubscribe()}function a(){W2.handledEvents.forEach(s=>{t[`handle${s}`]&&e.subscribedEvents.push(e._interactor[`on${s}`](o=>e.processEvents?t[`handle${s}`](o):NB,e.priority))})}t.setInteractor=s=>{s!==e._interactor&&(r(),e._interactor=s,s&&e.enabled&&a(),t.modified())},t.setEnabled=s=>{s!==e.enabled&&(r(),s&&(e._interactor?a():FB(`
          The interactor must be set before subscribing to events
        `)),e.enabled=s,t.modified())},t.computeDisplayToWorld=(s,o,c,f)=>s?e._interactor.getView().displayToWorld(o,c,f,s):null,t.computeWorldToDisplay=(s,o,c,f)=>s?e._interactor.getView().worldToDisplay(o,c,f,s):null,t.setPriority=s=>{n.setPriority(s)&&e._interactor&&(r(),a())}}const WB={enabled:!0,priority:0,processEvents:!0,subscribedEvents:[]};function H2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,WB,n),L.obj(t,e),L.event(t,e,"InteractionEvent"),L.event(t,e,"StartInteractionEvent"),L.event(t,e,"EndInteractionEvent"),L.get(t,e,["_interactor","enabled"]),L.setGet(t,e,["priority","processEvents"]),L.moveToProtected(t,e,["interactor"]),zB(t,e)}const HB=L.newInstance(H2,"vtkInteractorObserver");var bB={newInstance:HB,extend:H2,...$B};const AB={IS_START:0,IS_NONE:0,IS_ROTATE:1,IS_PAN:2,IS_SPIN:3,IS_DOLLY:4,IS_CAMERA_POSE:11,IS_WINDOW_LEVEL:1024,IS_SLICE:1025};var Q1={States:AB};const{States:Gn}=Q1,Sg={Rotate:Gn.IS_ROTATE,Pan:Gn.IS_PAN,Spin:Gn.IS_SPIN,Dolly:Gn.IS_DOLLY,CameraPose:Gn.IS_CAMERA_POSE,WindowLevel:Gn.IS_WINDOW_LEVEL,Slice:Gn.IS_SLICE};function jB(t,e){e.classHierarchy.push("vtkInteractorStyle"),Object.keys(Sg).forEach(n=>{L.event(t,e,`Start${n}Event`),t[`start${n}`]=()=>{e.state===Gn.IS_NONE&&(e.state=Sg[n],e._interactor.requestAnimation(t),t.invokeStartInteractionEvent({type:"StartInteractionEvent"}),t[`invokeStart${n}Event`]({type:`Start${n}Event`}))},L.event(t,e,`End${n}Event`),t[`end${n}`]=()=>{e.state===Sg[n]&&(e.state=Gn.IS_NONE,e._interactor.cancelAnimation(t),t.invokeEndInteractionEvent({type:"EndInteractionEvent"}),t[`invokeEnd${n}Event`]({type:`End${n}Event`}),e._interactor.render())}}),e.getRenderer=n=>e.focusedRenderer||n.pokedRenderer,t.handleKeyPress=n=>{const r=e._interactor;let a=null;switch(n.key){case"r":case"R":e.getRenderer(n).resetCamera(),r.render();break;case"w":case"W":a=e.getRenderer(n).getActors(),a.forEach(s=>{const o=s.getProperty();o.setRepresentationToWireframe&&o.setRepresentationToWireframe()}),r.render();break;case"s":case"S":a=e.getRenderer(n).getActors(),a.forEach(s=>{const o=s.getProperty();o.setRepresentationToSurface&&o.setRepresentationToSurface()}),r.render();break;case"v":case"V":a=e.getRenderer(n).getActors(),a.forEach(s=>{const o=s.getProperty();o.setRepresentationToPoints&&o.setRepresentationToPoints()}),r.render();break}}}const KB={state:Gn.IS_NONE,handleObservers:1,autoAdjustCameraClippingRange:1};function b2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,KB,n),bB.extend(t,e,n),L.setGet(t,e,["focusedRenderer"]),jB(t,e)}const PB=L.newInstance(b2,"vtkInteractorStyle");var XB={newInstance:PB,extend:b2,...Q1};const{States:Bn}=Q1;function IB(t,e){e.classHierarchy.push("vtkInteractorStyleTrackballCamera"),t.handleMouseMove=n=>{const r=n.position,a=e.getRenderer(n);switch(e.state){case Bn.IS_ROTATE:t.handleMouseRotate(a,r),t.invokeInteractionEvent({type:"InteractionEvent"});break;case Bn.IS_PAN:t.handleMousePan(a,r),t.invokeInteractionEvent({type:"InteractionEvent"});break;case Bn.IS_DOLLY:t.handleMouseDolly(a,r),t.invokeInteractionEvent({type:"InteractionEvent"});break;case Bn.IS_SPIN:t.handleMouseSpin(a,r),t.invokeInteractionEvent({type:"InteractionEvent"});break}e.previousPosition=r},t.handleButton3D=n=>{if(n&&n.pressed&&n.device===a1.RightController&&(n.input===Mi.Trigger||n.input===Mi.TrackPad)){t.startCameraPose();return}n&&!n.pressed&&n.device===a1.RightController&&(n.input===Mi.Trigger||n.input===Mi.TrackPad)&&e.state===Bn.IS_CAMERA_POSE&&t.endCameraPose()},t.handleMove3D=n=>{switch(e.state){case Bn.IS_CAMERA_POSE:t.updateCameraPose(n);break}},t.updateCameraPose=n=>{const r=e.getRenderer(n).getActiveCamera(),a=r.getPhysicalTranslation(),o=.5*.05*r.getPhysicalScale(),c=r.physicalOrientationToWorldDirection([n.orientation.x,n.orientation.y,n.orientation.z,n.orientation.w]);r.setPhysicalTranslation(a[0]+c[0]*o,a[1]+c[1]*o,a[2]+c[2]*o)},t.handleLeftButtonPress=n=>{const r=n.position;e.previousPosition=r,n.shiftKey?n.controlKey||n.altKey?t.startDolly():t.startPan():n.controlKey||n.altKey?t.startSpin():t.startRotate()},t.handleLeftButtonRelease=()=>{switch(e.state){case Bn.IS_DOLLY:t.endDolly();break;case Bn.IS_PAN:t.endPan();break;case Bn.IS_SPIN:t.endSpin();break;case Bn.IS_ROTATE:t.endRotate();break}},t.handleStartMouseWheel=()=>{t.startDolly()},t.handleEndMouseWheel=()=>{t.endDolly()},t.handleStartPinch=n=>{e.previousScale=n.scale,t.startDolly()},t.handleEndPinch=()=>{t.endDolly()},t.handleStartRotate=n=>{e.previousRotation=n.rotation,t.startRotate()},t.handleEndRotate=()=>{t.endRotate()},t.handleStartPan=n=>{e.previousTranslation=n.translation,t.startPan()},t.handleEndPan=()=>{t.endPan()},t.handlePinch=n=>{t.dollyByFactor(e.getRenderer(n),n.scale/e.previousScale),e.previousScale=n.scale},t.handlePan=n=>{const r=e.getRenderer(n).getActiveCamera();let a=r.getFocalPoint();a=t.computeWorldToDisplay(e.getRenderer(n),a[0],a[1],a[2]);const s=a[2],o=n.translation,c=e.previousTranslation,f=t.computeDisplayToWorld(e.getRenderer(n),a[0]+o[0]-c[0],a[1]+o[1]-c[1],s),l=t.computeDisplayToWorld(e.getRenderer(n),a[0],a[1],s),h=[];h[0]=l[0]-f[0],h[1]=l[1]-f[1],h[2]=l[2]-f[2],a=r.getFocalPoint();const g=r.getPosition();r.setFocalPoint(h[0]+a[0],h[1]+a[1],h[2]+a[2]),r.setPosition(h[0]+g[0],h[1]+g[1],h[2]+g[2]),e._interactor.getLightFollowCamera()&&e.getRenderer(n).updateLightsGeometryToFollowCamera(),r.orthogonalizeViewUp(),e.previousTranslation=n.translation},t.handleRotate=n=>{const r=e.getRenderer(n).getActiveCamera();r.roll(n.rotation-e.previousRotation),r.orthogonalizeViewUp(),e.previousRotation=n.rotation},t.handleMouseRotate=(n,r)=>{if(!e.previousPosition)return;const a=e._interactor,s=r.x-e.previousPosition.x,o=r.y-e.previousPosition.y,c=a.getView().getViewportSize(n);let f=-.1,l=-.1;c[0]&&c[1]&&(f=-20/c[1],l=-20/c[0]);const h=s*l*e.motionFactor,g=o*f*e.motionFactor,d=n.getActiveCamera();!Number.isNaN(h)&&!Number.isNaN(g)&&(d.azimuth(h),d.elevation(g),d.orthogonalizeViewUp()),e.autoAdjustCameraClippingRange&&n.resetCameraClippingRange(),a.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera()},t.handleMouseSpin=(n,r)=>{if(!e.previousPosition)return;const a=e._interactor,s=n.getActiveCamera(),o=a.getView().getViewportCenter(n),c=Ui(Math.atan2(e.previousPosition.y-o[1],e.previousPosition.x-o[0])),f=Ui(Math.atan2(r.y-o[1],r.x-o[0]))-c;Number.isNaN(f)||(s.roll(f),s.orthogonalizeViewUp())},t.handleMousePan=(n,r)=>{if(!e.previousPosition)return;const a=n.getActiveCamera();let s=a.getFocalPoint();s=t.computeWorldToDisplay(n,s[0],s[1],s[2]);const o=s[2],c=t.computeDisplayToWorld(n,r.x,r.y,o),f=t.computeDisplayToWorld(n,e.previousPosition.x,e.previousPosition.y,o),l=[];l[0]=f[0]-c[0],l[1]=f[1]-c[1],l[2]=f[2]-c[2],s=a.getFocalPoint();const h=a.getPosition();a.setFocalPoint(l[0]+s[0],l[1]+s[1],l[2]+s[2]),a.setPosition(l[0]+h[0],l[1]+h[1],l[2]+h[2]),e._interactor.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera()},t.handleMouseDolly=(n,r)=>{if(!e.previousPosition)return;const a=r.y-e.previousPosition.y,o=e._interactor.getView().getViewportCenter(n),c=e.motionFactor*a/o[1];t.dollyByFactor(n,1.1**c)},t.handleMouseWheel=n=>{const r=1-n.spinY/e.zoomFactor;t.dollyByFactor(e.getRenderer(n),r)},t.dollyByFactor=(n,r)=>{if(Number.isNaN(r))return;const a=n.getActiveCamera();a.getParallelProjection()?a.setParallelScale(a.getParallelScale()/r):(a.dolly(r),e.autoAdjustCameraClippingRange&&n.resetCameraClippingRange()),e._interactor.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera()}}const YB={motionFactor:10,zoomFactor:10};function A2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,YB,n),XB.extend(t,e,n),L.setGet(t,e,["motionFactor","zoomFactor"]),IB(t,e)}const qB=L.newInstance(A2,"vtkInteractorStyleTrackballCamera");var QB={newInstance:qB,extend:A2};function ZB(t){return t}function Z1(t){if(t===null||t==="null")return null;if(t==="true")return!0;if(t==="false")return!1;if(!(t===void 0||t==="undefined"))return t[0]==="["&&t[t.length-1]==="]"?t.substring(1,t.length-1).split(",").map(e=>Z1(e.trim())):t===""||Number.isNaN(Number(t))?t:Number(t)}function JB(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:window.location.search;const n={},r=t?Z1:ZB;return(e||"").replace(/#.*/,"").replace("?","").split("&").forEach(s=>{const[o,c]=s.split("=").map(f=>decodeURIComponent(f));o&&(n[o]=c?r(c):!0)}),n}var eF={toNativeType:Z1,extractURLParameters:JB};function tF(t,e){e.classHierarchy.push("vtkFramebuffer"),t.getBothMode=()=>e.context.FRAMEBUFFER,t.saveCurrentBindingsAndBuffers=n=>{const r=typeof n<"u"?n:t.getBothMode();t.saveCurrentBindings(r),t.saveCurrentBuffers(r)},t.saveCurrentBindings=n=>{if(!e.context){we("you must set the OpenGLRenderWindow before calling saveCurrentBindings");return}const r=e.context;e.previousDrawBinding=r.getParameter(e.context.FRAMEBUFFER_BINDING),e.previousActiveFramebuffer=e._openGLRenderWindow.getActiveFramebuffer()},t.saveCurrentBuffers=n=>{},t.restorePreviousBindingsAndBuffers=n=>{const r=typeof n<"u"?n:t.getBothMode();t.restorePreviousBindings(r),t.restorePreviousBuffers(r)},t.restorePreviousBindings=n=>{if(!e.context){we("you must set the OpenGLRenderWindow before calling restorePreviousBindings");return}const r=e.context;r.bindFramebuffer(r.FRAMEBUFFER,e.previousDrawBinding),e._openGLRenderWindow.setActiveFramebuffer(e.previousActiveFramebuffer)},t.restorePreviousBuffers=n=>{},t.bind=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;r===null&&(r=e.context.FRAMEBUFFER),e.context.bindFramebuffer(r,e.glFramebuffer);for(let a=0;a<e.colorBuffers.length;a++)e.colorBuffers[a].bind();e._openGLRenderWindow.setActiveFramebuffer(t)},t.create=(n,r)=>{if(!e.context){we("you must set the OpenGLRenderWindow before calling create");return}e.glFramebuffer=e.context.createFramebuffer(),e.glFramebuffer.width=n,e.glFramebuffer.height=r},t.setColorBuffer=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const a=e.context;if(!a){we("you must set the OpenGLRenderWindow before calling setColorBuffer");return}let s=a.COLOR_ATTACHMENT0;if(r>0)if(e._openGLRenderWindow.getWebgl2())s+=r;else{we("Using multiple framebuffer attachments requires WebGL 2");return}e.colorBuffers[r]=n,a.framebufferTexture2D(a.FRAMEBUFFER,s,a.TEXTURE_2D,n.getHandle(),0)},t.removeColorBuffer=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;const r=e.context;if(!r){we("you must set the OpenGLRenderWindow before calling removeColorBuffer");return}let a=r.COLOR_ATTACHMENT0;if(n>0)if(e._openGLRenderWindow.getWebgl2())a+=n;else{we("Using multiple framebuffer attachments requires WebGL 2");return}r.framebufferTexture2D(r.FRAMEBUFFER,a,r.TEXTURE_2D,null,0),e.colorBuffers=e.colorBuffers.splice(n,1)},t.setDepthBuffer=n=>{if(!e.context){we("you must set the OpenGLRenderWindow before calling setDepthBuffer");return}if(e._openGLRenderWindow.getWebgl2()){const r=e.context;r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,n.getHandle(),0)}else we("Attaching depth buffer textures to fbo requires WebGL 2")},t.removeDepthBuffer=()=>{if(!e.context){we("you must set the OpenGLRenderWindow before calling removeDepthBuffer");return}if(e._openGLRenderWindow.getWebgl2()){const n=e.context;n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,null,0)}else we("Attaching depth buffer textures to framebuffers requires WebGL 2")},t.getGLFramebuffer=()=>e.glFramebuffer,t.setOpenGLRenderWindow=n=>{e._openGLRenderWindow!==n&&(t.releaseGraphicsResources(),e._openGLRenderWindow=n,e.context=null,n&&(e.context=e._openGLRenderWindow.getContext()))},t.releaseGraphicsResources=()=>{e.glFramebuffer&&e.context.deleteFramebuffer(e.glFramebuffer)},t.getSize=()=>e.glFramebuffer==null?null:[e.glFramebuffer.width,e.glFramebuffer.height],t.populateFramebuffer=()=>{if(!e.context){we("you must set the OpenGLRenderWindow before calling populateFrameBuffer");return}t.bind();const n=e.context,r=Da.newInstance();r.setOpenGLRenderWindow(e._openGLRenderWindow),r.setMinificationFilter(t1.LINEAR),r.setMagnificationFilter(t1.LINEAR),r.create2DFromRaw(e.glFramebuffer.width,e.glFramebuffer.height,4,rt.UNSIGNED_CHAR,null),t.setColorBuffer(r),e.depthTexture=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,e.depthTexture),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,e.glFramebuffer.width,e.glFramebuffer.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,e.depthTexture)},t.getColorTexture=()=>e.colorBuffers[0]}const nF={glFramebuffer:null,colorBuffers:null,depthTexture:null,previousDrawBinding:0,previousReadBinding:0,previousDrawBuffer:0,previousReadBuffer:0,previousActiveFramebuffer:null};function j2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,nF,n),vt(t,e),e.colorBuffers&&we("you cannot initialize colorBuffers through the constructor. You should call setColorBuffer() instead."),e.colorBuffers=[],Os(t,e,["colorBuffers"]),tF(t,e)}const rF=Ne(j2,"vtkFramebuffer");var J1={newInstance:rF,extend:j2};function aF(t,e){e.classHierarchy.push("vtkRenderPass"),t.getOperation=()=>e.currentOperation,t.setCurrentOperation=n=>{e.currentOperation=n,e.currentTraverseOperation=`traverse${L.capitalize(e.currentOperation)}`},t.getTraverseOperation=()=>e.currentTraverseOperation,t.traverse=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;e.deleted||(e._currentParent=r,e.preDelegateOperations.forEach(a=>{t.setCurrentOperation(a),n.traverse(t)}),e.delegates.forEach(a=>{a.traverse(n,t)}),e.postDelegateOperations.forEach(a=>{t.setCurrentOperation(a),n.traverse(t)}))}}const sF={delegates:[],currentOperation:null,preDelegateOperations:[],postDelegateOperations:[],currentParent:null};function K2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,sF,n),L.obj(t,e),L.get(t,e,["currentOperation"]),L.setGet(t,e,["delegates","_currentParent","preDelegateOperations","postDelegateOperations"]),L.moveToProtected(t,e,["currentParent"]),aF(t,e)}const iF=L.newInstance(K2,"vtkRenderPass");var hr={newInstance:iF,extend:K2};const{Representation:oF}=Ds,{vtkErrorMacro:Qv}=L;function uF(t){const e=Z.substitute(t.Fragment,"//VTK::RenderPassFragmentShader::Impl",`
      float weight = gl_FragData[0].a * pow(max(1.1 - gl_FragCoord.z, 0.0), 2.0);
      gl_FragData[0] = vec4(gl_FragData[0].rgb*weight, gl_FragData[0].a);
      gl_FragData[1].r = weight;
    `,!1);t.Fragment=e.result}const cF=`//VTK::System::Dec

in vec2 tcoord;

uniform sampler2D translucentRTexture;
uniform sampler2D translucentRGBATexture;

// the output of this shader
//VTK::Output::Dec

void main()
{
  vec4 t1Color = texture(translucentRGBATexture, tcoord);
  float t2Color = texture(translucentRTexture, tcoord).r;
  gl_FragData[0] = vec4(t1Color.rgb/max(t2Color,0.01), 1.0 - t1Color.a);
}
`;function fF(t,e){e.classHierarchy.push("vtkOpenGLOrderIndependentTranslucentPass"),t.createVertexBuffer=()=>{const n=new Float32Array([-1,-1,-1,1,-1,-1,-1,1,-1,1,1,-1]),r=new Float32Array([0,0,1,0,0,1,1,1]),a=new Uint16Array([4,0,1,3,2]),s=Oe.newInstance({numberOfComponents:3,values:n});s.setName("points");const o=Oe.newInstance({numberOfComponents:2,values:r});o.setName("tcoords");const c=Oe.newInstance({numberOfComponents:1,values:a});e.tris.getCABO().createVBO(c,"polys",oF.SURFACE,{points:s,tcoords:o,cellOffset:0}),e.VBOBuildTime.modified()},t.createFramebuffer=n=>{const r=n.getSize(),a=n.getContext();e.framebuffer=J1.newInstance(),e.framebuffer.setOpenGLRenderWindow(n),e.framebuffer.create(...r),e.framebuffer.saveCurrentBindingsAndBuffers(),e.framebuffer.bind(),e.translucentRGBATexture=Da.newInstance(),e.translucentRGBATexture.setInternalFormat(a.RGBA16F),e.translucentRGBATexture.setFormat(a.RGBA),e.translucentRGBATexture.setOpenGLDataType(a.HALF_FLOAT),e.translucentRGBATexture.setOpenGLRenderWindow(n),e.translucentRGBATexture.create2DFromRaw(r[0],r[1],4,"Float32Array",null),e.translucentRTexture=Da.newInstance(),e.translucentRTexture.setInternalFormat(a.R16F),e.translucentRTexture.setFormat(a.RED),e.translucentRTexture.setOpenGLDataType(a.HALF_FLOAT),e.translucentRTexture.setOpenGLRenderWindow(n),e.translucentRTexture.create2DFromRaw(r[0],r[1],1,"Float32Array",null),e.translucentZTexture=Da.newInstance(),e.translucentZTexture.setOpenGLRenderWindow(n),e.translucentZTexture.createDepthFromRaw(r[0],r[1],"Float32Array",null),e.framebuffer.setColorBuffer(e.translucentRGBATexture,0),e.framebuffer.setColorBuffer(e.translucentRTexture,1),e.framebuffer.setDepthBuffer(e.translucentZTexture)},t.createCopyShader=n=>{e.copyShader=n.getShaderCache().readyShaderProgramArray(["//VTK::System::Dec","attribute vec4 vertexDC;","attribute vec2 tcoordTC;","varying vec2 tcoord;","void main() { tcoord = tcoordTC; gl_Position = vertexDC; }"].join(`
`),cF,"")},t.createVBO=n=>{const r=n.getContext();e.tris.setOpenGLRenderWindow(n),t.createVertexBuffer();const a=e.copyShader;e.tris.getCABO().bind(),e.copyVAO.addAttributeArray(a,e.tris.getCABO(),"vertexDC",e.tris.getCABO().getVertexOffset(),e.tris.getCABO().getStride(),r.FLOAT,3,r.FALSE)||Qv("Error setting vertexDC in copy shader VAO."),e.copyVAO.addAttributeArray(a,e.tris.getCABO(),"tcoordTC",e.tris.getCABO().getTCoordOffset(),e.tris.getCABO().getStride(),r.FLOAT,2,r.FALSE)||Qv("Error setting vertexDC in copy shader VAO.")},t.traverse=(n,r,a)=>{if(e.deleted)return;const s=n.getSize(),o=n.getContext();if(e._supported=!1,r.getSelector()||!o||!n.getWebgl2()||!o.getExtension("EXT_color_buffer_half_float")&&!o.getExtension("EXT_color_buffer_float")){t.setCurrentOperation("translucentPass"),r.traverse(t);return}if(e._supported=!0,e.framebuffer===null)t.createFramebuffer(n);else{const f=e.framebuffer.getSize();f===null||f[0]!==s[0]||f[1]!==s[1]?(e.framebuffer.releaseGraphicsResources(),e.translucentRGBATexture.releaseGraphicsResources(n),e.translucentRTexture.releaseGraphicsResources(n),e.translucentZTexture.releaseGraphicsResources(n),t.createFramebuffer(n)):(e.framebuffer.saveCurrentBindingsAndBuffers(),e.framebuffer.bind())}o.drawBuffers([o.COLOR_ATTACHMENT0]),o.clearBufferfv(o.COLOR,0,[0,0,0,0]),o.clearBufferfv(o.DEPTH,0,[1]),o.colorMask(!1,!1,!1,!1),a.getOpaqueActorCount()>0&&(a.setCurrentOperation("opaqueZBufferPass"),r.traverse(a)),o.colorMask(!0,!0,!0,!0),o.drawBuffers([o.COLOR_ATTACHMENT0,o.COLOR_ATTACHMENT1]),o.viewport(0,0,s[0],s[1]),o.scissor(0,0,s[0],s[1]),o.clearBufferfv(o.COLOR,0,[0,0,0,1]),o.clearBufferfv(o.COLOR,1,[0,0,0,0]),o.enable(o.DEPTH_TEST),o.enable(o.BLEND),o.blendFuncSeparate(o.ONE,o.ONE,o.ZERO,o.ONE_MINUS_SRC_ALPHA),t.setCurrentOperation("translucentPass"),r.traverse(t),o.drawBuffers([o.NONE]),e.framebuffer.restorePreviousBindingsAndBuffers(),e.copyShader===null?t.createCopyShader(n):n.getShaderCache().readyShaderProgram(e.copyShader),e.copyVAO||(e.copyVAO=Ix.newInstance(),e.copyVAO.setOpenGLRenderWindow(n)),e.copyVAO.bind(),e.VBOBuildTime.getMTime()<t.getMTime()&&t.createVBO(n),o.blendFuncSeparate(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA),o.depthMask(!1),o.depthFunc(o.ALWAYS),o.viewport(0,0,s[0],s[1]),o.scissor(0,0,s[0],s[1]),e.translucentRGBATexture.activate(),e.copyShader.setUniformi("translucentRGBATexture",e.translucentRGBATexture.getTextureUnit()),e.translucentRTexture.activate(),e.copyShader.setUniformi("translucentRTexture",e.translucentRTexture.getTextureUnit()),o.drawArrays(o.TRIANGLES,0,e.tris.getCABO().getElementCount()),o.depthMask(!0),o.depthFunc(o.LEQUAL),e.translucentRGBATexture.deactivate(),e.translucentRTexture.deactivate();const c=r.getTiledSizeAndOrigin();o.scissor(c.lowerLeftU,c.lowerLeftV,c.usize,c.vsize),o.viewport(c.lowerLeftU,c.lowerLeftV,c.usize,c.vsize)},t.getShaderReplacement=()=>e._supported?uF:null,t.releaseGraphicsResources=n=>{e.framebuffer&&(e.framebuffer.releaseGraphicsResources(n),e.framebuffer=null),e.translucentRGBATexture&&(e.translucentRGBATexture.releaseGraphicsResources(n),e.translucentRGBATexture=null),e.translucentRTexture&&(e.translucentRTexture.releaseGraphicsResources(n),e.translucentRTexture=null),e.translucentZTexture&&(e.translucentZTexture.releaseGraphicsResources(n),e.translucentZTexture=null),e.copyVAO&&(e.copyVAO.releaseGraphicsResources(n),e.copyVAO=null),e.copyShader&&(e.copyShader.releaseGraphicsResources(n),e.copyShader=null),e.tris&&(e.tris.releaseGraphicsResources(n),e.tris=null),t.modified()}}const lF={framebuffer:null,copyShader:null,tris:null};function P2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,lF,n),hr.extend(t,e,n),e.VBOBuildTime={},L.obj(e.VBOBuildTime,{mtime:0}),e.tris=Ms.newInstance(),L.get(t,e,["framebuffer"]),fF(t,e)}const gF=L.newInstance(P2,"vtkOpenGLOrderIndependentTranslucentPass");var pF={newInstance:gF,extend:P2};function hF(t,e){e.classHierarchy.push("vtkForwardPass"),t.traverse=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(e.deleted)return;e._currentParent=r,t.setCurrentOperation("buildPass"),n.traverse(t);const a=n.getRenderable().getNumberOfLayers(),s=n.getRenderable().getRenderersByReference();for(let o=0;o<a;o++)for(let c=0;c<s.length;c++){const f=s[c],l=n.getViewNodeFor(f);if(f.getDraw()&&f.getLayer()===o){if(e.opaqueActorCount=0,e.translucentActorCount=0,e.volumeCount=0,e.overlayActorCount=0,t.setCurrentOperation("queryPass"),l.traverse(t),(e.opaqueActorCount>0||e.translucentActorCount>0)&&e.volumeCount>0||e.depthRequested){const h=n.getFramebufferSize();e.framebuffer===null&&(e.framebuffer=J1.newInstance()),e.framebuffer.setOpenGLRenderWindow(n),e.framebuffer.saveCurrentBindingsAndBuffers();const g=e.framebuffer.getSize();(g===null||g[0]!==h[0]||g[1]!==h[1])&&(e.framebuffer.create(h[0],h[1]),e.framebuffer.populateFramebuffer()),e.framebuffer.bind(),t.setCurrentOperation("zBufferPass"),l.traverse(t),e.framebuffer.restorePreviousBindingsAndBuffers(),e.depthRequested=!1}t.setCurrentOperation("cameraPass"),l.traverse(t),e.opaqueActorCount>0&&(t.setCurrentOperation("opaquePass"),l.traverse(t)),e.translucentActorCount>0&&(e.translucentPass||(e.translucentPass=pF.newInstance()),e.translucentPass.traverse(n,l,t)),e.volumeCount>0&&(t.setCurrentOperation("volumePass"),l.traverse(t)),e.overlayActorCount>0&&(t.setCurrentOperation("overlayPass"),l.traverse(t))}}},t.getZBufferTexture=()=>e.framebuffer?e.framebuffer.getColorTexture():null,t.requestDepth=()=>{e.depthRequested=!0},t.incrementOpaqueActorCount=()=>e.opaqueActorCount++,t.incrementTranslucentActorCount=()=>e.translucentActorCount++,t.incrementVolumeCount=()=>e.volumeCount++,t.incrementOverlayActorCount=()=>e.overlayActorCount++}const dF={opaqueActorCount:0,translucentActorCount:0,volumeCount:0,overlayActorCount:0,framebuffer:null,depthRequested:!1};function X2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,dF,n),hr.extend(t,e,n),L.get(t,e,["framebuffer","opaqueActorCount","translucentActorCount","volumeCount"]),hF(t,e)}const vF=L.newInstance(X2,"vtkForwardPass");var yF={newInstance:vF,extend:X2};const{FieldAssociations:TF}=ka;function xF(t,e){e.classHierarchy.push("vtkHardwareSelector"),t.getSourceDataAsync=async(n,r,a,s,o)=>{},t.selectAsync=async(n,r,a,s,o)=>{const c=await t.getSourceDataAsync(n,r,a,s,o);return c?c.generateSelection(r,a,s,o):[]}}const SF={fieldAssociation:TF.FIELD_ASSOCIATION_CELLS,captureZValues:!1};function I2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,SF,n),L.obj(t,e),L.setGet(t,e,["fieldAssociation","captureZValues"]),xF(t,e)}const CF=L.newInstance(I2,"vtkHardwareSelector");var Y2={newInstance:CF,extend:I2};const wF={GLOBALIDS:0,PEDIGREEIDS:1,VALUES:2,INDICES:3,FRUSTUM:4,LOCATIONS:5,THRESHOLDS:6,BLOCKS:7,QUERY:8},EF={CELL:0,POINT:1,FIELD:2,VERTEX:3,EDGE:4,ROW:5};var mF={SelectionContent:wF,SelectionField:EF};function RF(t,e){e.classHierarchy.push("vtkSelectionNode"),t.getBounds=()=>e.points.getBounds()}const OF={contentType:-1,fieldType:-1,properties:null,selectionList:[]};function q2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,OF,n),L.obj(t,e),e.properties={},L.setGet(t,e,["contentType","fieldType","properties","selectionList"]),RF(t,e)}const DF=L.newInstance(q2,"vtkSelectionNode");var kc={newInstance:DF,extend:q2,...mF};const{PassTypes:Je}=Ex,{SelectionContent:MF,SelectionField:Zv}=kc,{FieldAssociations:Vi}=ka,{vtkErrorMacro:Q2}=L,Kr=1;function Z2(t){return`${t.propID} ${t.compositeID}`}function J2(t,e,n,r){if(!n)return 0;const a=(e*(r[2]-r[0]+1)+t)*4;return n[a+3]}function fr(t,e,n,r){if(!n)return 0;const a=(e*(r[2]-r[0]+1)+t)*4,s=n[a],o=n[a+1];return(n[a+2]*256+o)*256+s}function eS(t,e){let n=e;return n<<=24,n|=t,n}function LF(t,e,n,r){{if(r[0]=e[0],r[1]=e[1],e[0]<t.area[0]||e[0]>t.area[2]||e[1]<t.area[1]||e[1]>t.area[3])return null;const a=[e[0]-t.area[0],e[1]-t.area[1]],s=fr(a[0],a[1],t.pixBuffer[Je.ACTOR_PASS],t.area);if(s<=0||s-Kr>=t.props.length)return null;const o={};o.valid=!0,o.propID=s-Kr,o.prop=t.props[o.propID];let c=fr(a[0],a[1],t.pixBuffer[Je.COMPOSITE_INDEX_PASS],t.area);if((c<0||c>16777215)&&(c=0),o.compositeID=c-Kr,t.captureZValues){const h=(a[1]*(t.area[2]-t.area[0]+1)+a[0])*4;o.zValue=(256*t.zBuffer[h]+t.zBuffer[h+1])/65535,o.displayPosition=e}if(t.pixBuffer[Je.ID_LOW24]&&J2(a[0],a[1],t.pixBuffer[Je.ID_LOW24],t.area)===0)return o;const f=fr(a[0],a[1],t.pixBuffer[Je.ID_LOW24],t.area),l=fr(a[0],a[1],t.pixBuffer[Je.ID_HIGH24],t.area);return o.attributeID=eS(f,l),o}}function tS(t,e,n,r,a){const s=[];let o=0;return e.forEach((c,f)=>{const l=kc.newInstance();switch(l.setContentType(MF.INDICES),t){case Vi.FIELD_ASSOCIATION_CELLS:l.setFieldType(Zv.CELL);break;case Vi.FIELD_ASSOCIATION_POINTS:l.setFieldType(Zv.POINT);break;default:Q2("Unknown field association")}l.getProperties().propID=c.info.propID,l.getProperties().prop=c.info.prop,l.getProperties().compositeID=c.info.compositeID,l.getProperties().attributeID=c.info.attributeID,l.getProperties().pixelCount=c.pixelCount,n&&(l.getProperties().displayPosition=[c.info.displayPosition[0],c.info.displayPosition[1],c.info.zValue],l.getProperties().worldPosition=a.displayToWorld(c.info.displayPosition[0],c.info.displayPosition[1],c.info.zValue,r)),l.setSelectionList(c.attributeIDs),s[o]=l,o++}),s}function _F(t,e,n,r,a){const s=Math.floor(e),o=Math.floor(n),c=Math.floor(r),f=Math.floor(a),l=new Map,h=[0,0];for(let g=o;g<=f;g++)for(let d=s;d<=c;d++){const S=LF(t,[d,g],0,h);if(S&&S.valid){const T=Z2(S);if(!l.has(T))l.set(T,{info:S,pixelCount:1,attributeIDs:[S.attributeID]});else{const x=l.get(T);x.pixelCount++,t.captureZValues&&S.zValue<x.info.zValue&&(x.info=S),x.attributeIDs.indexOf(S.attributeID)===-1&&x.attributeIDs.push(S.attributeID)}}}return tS(t.fieldAssociation,l,t.captureZValues,t.renderer,t.openGLRenderWindow)}function VF(t,e){e.classHierarchy.push("vtkOpenGLHardwareSelector"),t.releasePixBuffers=()=>{e.rawPixBuffer=[],e.pixBuffer=[],e.zBuffer=null},t.beginSelection=()=>{e._openGLRenderer=e._openGLRenderWindow.getViewNodeFor(e._renderer),e.maxAttributeId=0;const r=e._openGLRenderWindow.getSize();if(!e.framebuffer)e.framebuffer=J1.newInstance(),e.framebuffer.setOpenGLRenderWindow(e._openGLRenderWindow),e.framebuffer.saveCurrentBindingsAndBuffers(),e.framebuffer.create(r[0],r[1]),e.framebuffer.populateFramebuffer();else{e.framebuffer.setOpenGLRenderWindow(e._openGLRenderWindow),e.framebuffer.saveCurrentBindingsAndBuffers();const a=e.framebuffer.getSize();!a||a[0]!==r[0]||a[1]!==r[1]?(e.framebuffer.create(r[0],r[1]),e.framebuffer.populateFramebuffer()):e.framebuffer.bind()}if(e._openGLRenderer.clear(),e._openGLRenderer.setSelector(t),e.hitProps={},e.propPixels={},e.props=[],t.releasePixBuffers(),e.fieldAssociation===Vi.FIELD_ASSOCIATION_POINTS){const a=e._openGLRenderWindow.getContext(),s=a.isEnabled(a.BLEND);a.disable(a.BLEND),e._openGLRenderWindow.traverseAllPasses(),s&&a.enable(a.BLEND)}},t.endSelection=()=>{e.hitProps={},e._openGLRenderer.setSelector(null),e.framebuffer.restorePreviousBindingsAndBuffers()},t.preCapturePass=()=>{const r=e._openGLRenderWindow.getContext();e.originalBlending=r.isEnabled(r.BLEND),r.disable(r.BLEND)},t.postCapturePass=()=>{const r=e._openGLRenderWindow.getContext();e.originalBlending&&r.enable(r.BLEND)},t.select=()=>{let r=null;return t.captureBuffers()&&(r=t.generateSelection(e.area[0],e.area[1],e.area[2],e.area[3]),t.releasePixBuffers()),r},t.getSourceDataAsync=async(r,a,s,o,c)=>{if(e._renderer=r,a===void 0){const l=e._openGLRenderWindow.getSize();t.setArea(0,0,l[0]-1,l[1]-1)}else t.setArea(a,s,o,c);if(!t.captureBuffers())return!1;const f={area:[...e.area],pixBuffer:[...e.pixBuffer],captureZValues:e.captureZValues,zBuffer:e.zBuffer,props:[...e.props],fieldAssociation:e.fieldAssociation,renderer:r,openGLRenderWindow:e._openGLRenderWindow};return f.generateSelection=function(){for(var l=arguments.length,h=new Array(l),g=0;g<l;g++)h[g]=arguments[g];return _F(f,...h)},f},t.captureBuffers=()=>{if(!e._renderer||!e._openGLRenderWindow)return Q2("Renderer and view must be set before calling Select."),!1;e._openGLRenderer=e._openGLRenderWindow.getViewNodeFor(e._renderer),e._openGLRenderWindow.getRenderable().preRender(),t.invokeEvent({type:"StartEvent"}),e.originalBackground=e._renderer.getBackgroundByReference(),e._renderer.setBackground(0,0,0,0);const r=e._openGLRenderWindow.getRenderPasses();t.beginSelection();const a=[];for(e.currentPass=Je.MIN_KNOWN_PASS;e.currentPass<=Je.MAX_KNOWN_PASS;e.currentPass++)t.passRequired(e.currentPass)&&(t.preCapturePass(e.currentPass),e.captureZValues&&e.currentPass===Je.ACTOR_PASS&&typeof r[0].requestDepth=="function"&&typeof r[0].getFramebuffer=="function"&&r[0].requestDepth(),e._openGLRenderWindow.traverseAllPasses(),t.postCapturePass(e.currentPass),t.savePixelBuffer(e.currentPass),a.push(e.currentPass));return a.forEach(s=>{e.currentPass=s,t.processPixelBuffers()}),e.currentPass=Je.MAX_KNOWN_PASS,t.endSelection(),e._renderer.setBackground(e.originalBackground),t.invokeEvent({type:"EndEvent"}),!0},t.processPixelBuffers=()=>{e.props.forEach((r,a)=>{t.isPropHit(a)&&r.processSelectorPixelBuffers(t,e.propPixels[a])})},t.passRequired=r=>{if(r===Je.ID_HIGH24){if(e.fieldAssociation===Vi.FIELD_ASSOCIATION_POINTS)return e.maximumPointId>16777215;if(e.fieldAssociation===Vi.FIELD_ASSOCIATION_CELLS)return e.maximumCellId>16777215}return!0},t.savePixelBuffer=r=>{if(e.pixBuffer[r]=e._openGLRenderWindow.getPixelData(e.area[0],e.area[1],e.area[2],e.area[3]),!e.rawPixBuffer[r]){const a=(e.area[2]-e.area[0]+1)*(e.area[3]-e.area[1]+1)*4;e.rawPixBuffer[r]=new Uint8Array(a),e.rawPixBuffer[r].set(e.pixBuffer[r])}if(r===Je.ACTOR_PASS){if(e.captureZValues){const a=e._openGLRenderWindow.getRenderPasses();if(typeof a[0].requestDepth=="function"&&typeof a[0].getFramebuffer=="function"){const s=a[0].getFramebuffer();s.saveCurrentBindingsAndBuffers(),s.bind(),e.zBuffer=e._openGLRenderWindow.getPixelData(e.area[0],e.area[1],e.area[2],e.area[3]),s.restorePreviousBindingsAndBuffers()}}t.buildPropHitList(e.rawPixBuffer[r])}},t.buildPropHitList=r=>{let a=0;for(let s=0;s<=e.area[3]-e.area[1];s++)for(let o=0;o<=e.area[2]-e.area[0];o++){let c=fr(o,s,r,e.area);c>0&&(c--,c in e.hitProps||(e.hitProps[c]=!0,e.propPixels[c]=[]),e.propPixels[c].push(a*4)),++a}},t.renderProp=r=>{e.currentPass===Je.ACTOR_PASS&&(t.setPropColorValueFromInt(e.props.length+Kr),e.props.push(r))},t.renderCompositeIndex=r=>{e.currentPass===Je.COMPOSITE_INDEX_PASS&&t.setPropColorValueFromInt(r+Kr)},t.renderAttributeId=r=>{r<0||(e.maxAttributeId=r>e.maxAttributeId?r:e.maxAttributeId)},t.passTypeToString=r=>L.enumToString(Je,r),t.isPropHit=r=>!!e.hitProps[r],t.setPropColorValueFromInt=r=>{e.propColorValue[0]=r%256/255,e.propColorValue[1]=Math.floor(r/256)%256/255,e.propColorValue[2]=Math.floor(r/65536)%256/255},t.getPixelInformation=(r,a,s)=>{const o=a<0?0:a;if(o===0){if(s[0]=r[0],s[1]=r[1],r[0]<e.area[0]||r[0]>e.area[2]||r[1]<e.area[1]||r[1]>e.area[3])return null;const h=[r[0]-e.area[0],r[1]-e.area[1]],g=fr(h[0],h[1],e.pixBuffer[Je.ACTOR_PASS],e.area);if(g<=0||g-Kr>=e.props.length)return null;const d={};d.valid=!0,d.propID=g-Kr,d.prop=e.props[d.propID];let v=fr(h[0],h[1],e.pixBuffer[Je.COMPOSITE_INDEX_PASS],e.area);if((v<0||v>16777215)&&(v=0),d.compositeID=v-Kr,e.captureZValues){const x=(h[1]*(e.area[2]-e.area[0]+1)+h[0])*4;d.zValue=(256*e.zBuffer[x]+e.zBuffer[x+1])/65535,d.displayPosition=r}if(e.pixBuffer[Je.ID_LOW24]&&J2(h[0],h[1],e.pixBuffer[Je.ID_LOW24],e.area)===0)return d;const S=fr(h[0],h[1],e.pixBuffer[Je.ID_LOW24],e.area),T=fr(h[0],h[1],e.pixBuffer[Je.ID_HIGH24],e.area);return d.attributeID=eS(S,T),d}const c=[r[0],r[1]],f=[0,0];let l=t.getPixelInformation(r,0,s);if(l&&l.valid)return l;for(let h=1;h<o;++h){for(let g=c[1]>h?c[1]-h:0;g<=c[1]+h;++g)if(f[1]=g,c[0]>=h&&(f[0]=c[0]-h,l=t.getPixelInformation(f,0,s),l&&l.valid)||(f[0]=c[0]+h,l=t.getPixelInformation(f,0,s),l&&l.valid))return l;for(let g=c[0]>=h?c[0]-(h-1):0;g<=c[0]+(h-1);++g)if(f[0]=g,c[1]>=h&&(f[1]=c[1]-h,l=t.getPixelInformation(f,0,s),l&&l.valid)||(f[1]=c[1]+h,l=t.getPixelInformation(f,0,s),l&&l.valid))return l}return s[0]=r[0],s[1]=r[1],null},t.generateSelection=(r,a,s,o)=>{const c=Math.floor(r),f=Math.floor(a),l=Math.floor(s),h=Math.floor(o),g=new Map,d=[0,0];for(let v=f;v<=h;v++)for(let S=c;S<=l;S++){const T=[S,v],x=t.getPixelInformation(T,0,d);if(x&&x.valid){const m=Z2(x);if(!g.has(m))g.set(m,{info:x,pixelCount:1,attributeIDs:[x.attributeID]});else{const O=g.get(m);O.pixelCount++,e.captureZValues&&x.zValue<O.info.zValue&&(O.info=x),O.attributeIDs.indexOf(x.attributeID)===-1&&O.attributeIDs.push(x.attributeID)}}}return tS(e.fieldAssociation,g,e.captureZValues,e._renderer,e._openGLRenderWindow)},t.getRawPixelBuffer=r=>e.rawPixBuffer[r],t.getPixelBuffer=r=>e.pixBuffer[r],t.attach=(r,a)=>{e._openGLRenderWindow=r,e._renderer=a};const n=t.setArea;t.setArea=function(){return n(...arguments)?(e.area[0]=Math.floor(e.area[0]),e.area[1]=Math.floor(e.area[1]),e.area[2]=Math.floor(e.area[2]),e.area[3]=Math.floor(e.area[3]),!0):!1}}const kF={area:void 0,currentPass:-1,propColorValue:null,props:null,maximumPointId:0,maximumCellId:0,idOffset:1};function nS(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,kF,n),Y2.extend(t,e,n),e.propColorValue=[0,0,0],e.props=[],e.area||(e.area=[0,0,0,0]),L.setGetArray(t,e,["area"],4),L.setGet(t,e,["_renderer","currentPass","_openGLRenderWindow","maximumPointId","maximumCellId"]),L.setGetArray(t,e,["propColorValue"],3),L.moveToProtected(t,e,["renderer","openGLRenderWindow"]),L.event(t,e,"event"),VF(t,e)}const BF=L.newInstance(nS,"vtkOpenGLHardwareSelector");var rS={newInstance:BF,extend:nS,...Ex},Cg={exports:{}},Jv;function FF(){return Jv||(Jv=1,function(t,e){(function(n){t.exports=n()})(function(n){var r=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function a(m,O){var w=m[0],R=m[1],M=m[2],D=m[3];w+=(R&M|~R&D)+O[0]-680876936|0,w=(w<<7|w>>>25)+R|0,D+=(w&R|~w&M)+O[1]-389564586|0,D=(D<<12|D>>>20)+w|0,M+=(D&w|~D&R)+O[2]+606105819|0,M=(M<<17|M>>>15)+D|0,R+=(M&D|~M&w)+O[3]-1044525330|0,R=(R<<22|R>>>10)+M|0,w+=(R&M|~R&D)+O[4]-176418897|0,w=(w<<7|w>>>25)+R|0,D+=(w&R|~w&M)+O[5]+1200080426|0,D=(D<<12|D>>>20)+w|0,M+=(D&w|~D&R)+O[6]-1473231341|0,M=(M<<17|M>>>15)+D|0,R+=(M&D|~M&w)+O[7]-45705983|0,R=(R<<22|R>>>10)+M|0,w+=(R&M|~R&D)+O[8]+1770035416|0,w=(w<<7|w>>>25)+R|0,D+=(w&R|~w&M)+O[9]-1958414417|0,D=(D<<12|D>>>20)+w|0,M+=(D&w|~D&R)+O[10]-42063|0,M=(M<<17|M>>>15)+D|0,R+=(M&D|~M&w)+O[11]-1990404162|0,R=(R<<22|R>>>10)+M|0,w+=(R&M|~R&D)+O[12]+1804603682|0,w=(w<<7|w>>>25)+R|0,D+=(w&R|~w&M)+O[13]-40341101|0,D=(D<<12|D>>>20)+w|0,M+=(D&w|~D&R)+O[14]-1502002290|0,M=(M<<17|M>>>15)+D|0,R+=(M&D|~M&w)+O[15]+1236535329|0,R=(R<<22|R>>>10)+M|0,w+=(R&D|M&~D)+O[1]-165796510|0,w=(w<<5|w>>>27)+R|0,D+=(w&M|R&~M)+O[6]-1069501632|0,D=(D<<9|D>>>23)+w|0,M+=(D&R|w&~R)+O[11]+643717713|0,M=(M<<14|M>>>18)+D|0,R+=(M&w|D&~w)+O[0]-373897302|0,R=(R<<20|R>>>12)+M|0,w+=(R&D|M&~D)+O[5]-701558691|0,w=(w<<5|w>>>27)+R|0,D+=(w&M|R&~M)+O[10]+38016083|0,D=(D<<9|D>>>23)+w|0,M+=(D&R|w&~R)+O[15]-660478335|0,M=(M<<14|M>>>18)+D|0,R+=(M&w|D&~w)+O[4]-405537848|0,R=(R<<20|R>>>12)+M|0,w+=(R&D|M&~D)+O[9]+568446438|0,w=(w<<5|w>>>27)+R|0,D+=(w&M|R&~M)+O[14]-1019803690|0,D=(D<<9|D>>>23)+w|0,M+=(D&R|w&~R)+O[3]-187363961|0,M=(M<<14|M>>>18)+D|0,R+=(M&w|D&~w)+O[8]+1163531501|0,R=(R<<20|R>>>12)+M|0,w+=(R&D|M&~D)+O[13]-1444681467|0,w=(w<<5|w>>>27)+R|0,D+=(w&M|R&~M)+O[2]-51403784|0,D=(D<<9|D>>>23)+w|0,M+=(D&R|w&~R)+O[7]+1735328473|0,M=(M<<14|M>>>18)+D|0,R+=(M&w|D&~w)+O[12]-1926607734|0,R=(R<<20|R>>>12)+M|0,w+=(R^M^D)+O[5]-378558|0,w=(w<<4|w>>>28)+R|0,D+=(w^R^M)+O[8]-2022574463|0,D=(D<<11|D>>>21)+w|0,M+=(D^w^R)+O[11]+1839030562|0,M=(M<<16|M>>>16)+D|0,R+=(M^D^w)+O[14]-35309556|0,R=(R<<23|R>>>9)+M|0,w+=(R^M^D)+O[1]-1530992060|0,w=(w<<4|w>>>28)+R|0,D+=(w^R^M)+O[4]+1272893353|0,D=(D<<11|D>>>21)+w|0,M+=(D^w^R)+O[7]-155497632|0,M=(M<<16|M>>>16)+D|0,R+=(M^D^w)+O[10]-1094730640|0,R=(R<<23|R>>>9)+M|0,w+=(R^M^D)+O[13]+681279174|0,w=(w<<4|w>>>28)+R|0,D+=(w^R^M)+O[0]-358537222|0,D=(D<<11|D>>>21)+w|0,M+=(D^w^R)+O[3]-722521979|0,M=(M<<16|M>>>16)+D|0,R+=(M^D^w)+O[6]+76029189|0,R=(R<<23|R>>>9)+M|0,w+=(R^M^D)+O[9]-640364487|0,w=(w<<4|w>>>28)+R|0,D+=(w^R^M)+O[12]-421815835|0,D=(D<<11|D>>>21)+w|0,M+=(D^w^R)+O[15]+530742520|0,M=(M<<16|M>>>16)+D|0,R+=(M^D^w)+O[2]-995338651|0,R=(R<<23|R>>>9)+M|0,w+=(M^(R|~D))+O[0]-198630844|0,w=(w<<6|w>>>26)+R|0,D+=(R^(w|~M))+O[7]+1126891415|0,D=(D<<10|D>>>22)+w|0,M+=(w^(D|~R))+O[14]-1416354905|0,M=(M<<15|M>>>17)+D|0,R+=(D^(M|~w))+O[5]-57434055|0,R=(R<<21|R>>>11)+M|0,w+=(M^(R|~D))+O[12]+1700485571|0,w=(w<<6|w>>>26)+R|0,D+=(R^(w|~M))+O[3]-1894986606|0,D=(D<<10|D>>>22)+w|0,M+=(w^(D|~R))+O[10]-1051523|0,M=(M<<15|M>>>17)+D|0,R+=(D^(M|~w))+O[1]-2054922799|0,R=(R<<21|R>>>11)+M|0,w+=(M^(R|~D))+O[8]+1873313359|0,w=(w<<6|w>>>26)+R|0,D+=(R^(w|~M))+O[15]-30611744|0,D=(D<<10|D>>>22)+w|0,M+=(w^(D|~R))+O[6]-1560198380|0,M=(M<<15|M>>>17)+D|0,R+=(D^(M|~w))+O[13]+1309151649|0,R=(R<<21|R>>>11)+M|0,w+=(M^(R|~D))+O[4]-145523070|0,w=(w<<6|w>>>26)+R|0,D+=(R^(w|~M))+O[11]-1120210379|0,D=(D<<10|D>>>22)+w|0,M+=(w^(D|~R))+O[2]+718787259|0,M=(M<<15|M>>>17)+D|0,R+=(D^(M|~w))+O[9]-343485551|0,R=(R<<21|R>>>11)+M|0,m[0]=w+m[0]|0,m[1]=R+m[1]|0,m[2]=M+m[2]|0,m[3]=D+m[3]|0}function s(m){var O=[],w;for(w=0;w<64;w+=4)O[w>>2]=m.charCodeAt(w)+(m.charCodeAt(w+1)<<8)+(m.charCodeAt(w+2)<<16)+(m.charCodeAt(w+3)<<24);return O}function o(m){var O=[],w;for(w=0;w<64;w+=4)O[w>>2]=m[w]+(m[w+1]<<8)+(m[w+2]<<16)+(m[w+3]<<24);return O}function c(m){var O=m.length,w=[1732584193,-271733879,-1732584194,271733878],R,M,D,V,B,z;for(R=64;R<=O;R+=64)a(w,s(m.substring(R-64,R)));for(m=m.substring(R-64),M=m.length,D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],R=0;R<M;R+=1)D[R>>2]|=m.charCodeAt(R)<<(R%4<<3);if(D[R>>2]|=128<<(R%4<<3),R>55)for(a(w,D),R=0;R<16;R+=1)D[R]=0;return V=O*8,V=V.toString(16).match(/(.*?)(.{0,8})$/),B=parseInt(V[2],16),z=parseInt(V[1],16)||0,D[14]=B,D[15]=z,a(w,D),w}function f(m){var O=m.length,w=[1732584193,-271733879,-1732584194,271733878],R,M,D,V,B,z;for(R=64;R<=O;R+=64)a(w,o(m.subarray(R-64,R)));for(m=R-64<O?m.subarray(R-64):new Uint8Array(0),M=m.length,D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],R=0;R<M;R+=1)D[R>>2]|=m[R]<<(R%4<<3);if(D[R>>2]|=128<<(R%4<<3),R>55)for(a(w,D),R=0;R<16;R+=1)D[R]=0;return V=O*8,V=V.toString(16).match(/(.*?)(.{0,8})$/),B=parseInt(V[2],16),z=parseInt(V[1],16)||0,D[14]=B,D[15]=z,a(w,D),w}function l(m){var O="",w;for(w=0;w<4;w+=1)O+=r[m>>w*8+4&15]+r[m>>w*8&15];return O}function h(m){var O;for(O=0;O<m.length;O+=1)m[O]=l(m[O]);return m.join("")}h(c("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function m(O,w){return O=O|0||0,O<0?Math.max(O+w,0):Math.min(O,w)}ArrayBuffer.prototype.slice=function(O,w){var R=this.byteLength,M=m(O,R),D=R,V,B,z,k;return w!==n&&(D=m(w,R)),M>D?new ArrayBuffer(0):(V=D-M,B=new ArrayBuffer(V),z=new Uint8Array(B),k=new Uint8Array(this,M,V),z.set(k),B)}}();function g(m){return/[\u0080-\uFFFF]/.test(m)&&(m=unescape(encodeURIComponent(m))),m}function d(m,O){var w=m.length,R=new ArrayBuffer(w),M=new Uint8Array(R),D;for(D=0;D<w;D+=1)M[D]=m.charCodeAt(D);return O?M:R}function v(m){return String.fromCharCode.apply(null,new Uint8Array(m))}function S(m,O,w){var R=new Uint8Array(m.byteLength+O.byteLength);return R.set(new Uint8Array(m)),R.set(new Uint8Array(O),m.byteLength),R}function T(m){var O=[],w=m.length,R;for(R=0;R<w-1;R+=2)O.push(parseInt(m.substr(R,2),16));return String.fromCharCode.apply(String,O)}function x(){this.reset()}return x.prototype.append=function(m){return this.appendBinary(g(m)),this},x.prototype.appendBinary=function(m){this._buff+=m,this._length+=m.length;var O=this._buff.length,w;for(w=64;w<=O;w+=64)a(this._hash,s(this._buff.substring(w-64,w)));return this._buff=this._buff.substring(w-64),this},x.prototype.end=function(m){var O=this._buff,w=O.length,R,M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],D;for(R=0;R<w;R+=1)M[R>>2]|=O.charCodeAt(R)<<(R%4<<3);return this._finish(M,w),D=h(this._hash),m&&(D=T(D)),this.reset(),D},x.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},x.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},x.prototype.setState=function(m){return this._buff=m.buff,this._length=m.length,this._hash=m.hash,this},x.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},x.prototype._finish=function(m,O){var w=O,R,M,D;if(m[w>>2]|=128<<(w%4<<3),w>55)for(a(this._hash,m),w=0;w<16;w+=1)m[w]=0;R=this._length*8,R=R.toString(16).match(/(.*?)(.{0,8})$/),M=parseInt(R[2],16),D=parseInt(R[1],16)||0,m[14]=M,m[15]=D,a(this._hash,m)},x.hash=function(m,O){return x.hashBinary(g(m),O)},x.hashBinary=function(m,O){var w=c(m),R=h(w);return O?T(R):R},x.ArrayBuffer=function(){this.reset()},x.ArrayBuffer.prototype.append=function(m){var O=S(this._buff.buffer,m),w=O.length,R;for(this._length+=m.byteLength,R=64;R<=w;R+=64)a(this._hash,o(O.subarray(R-64,R)));return this._buff=R-64<w?new Uint8Array(O.buffer.slice(R-64)):new Uint8Array(0),this},x.ArrayBuffer.prototype.end=function(m){var O=this._buff,w=O.length,R=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],M,D;for(M=0;M<w;M+=1)R[M>>2]|=O[M]<<(M%4<<3);return this._finish(R,w),D=h(this._hash),m&&(D=T(D)),this.reset(),D},x.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},x.ArrayBuffer.prototype.getState=function(){var m=x.prototype.getState.call(this);return m.buff=v(m.buff),m},x.ArrayBuffer.prototype.setState=function(m){return m.buff=d(m.buff,!0),x.prototype.setState.call(this,m)},x.ArrayBuffer.prototype.destroy=x.prototype.destroy,x.ArrayBuffer.prototype._finish=x.prototype._finish,x.ArrayBuffer.hash=function(m,O){var w=f(new Uint8Array(m)),R=h(w);return O?T(R):R},x})}(Cg)),Cg.exports}var NF=FF();const UF=c1(NF),GF=["lastShaderProgramBound","context","_openGLRenderWindow"];function $F(t,e){e.classHierarchy.push("vtkShaderCache"),t.replaceShaderValues=(n,r,a)=>{let s=r;a.length>0&&(s=Z.substitute(s,"VSOut","GSOut").result);const o=e._openGLRenderWindow.getWebgl2();let c=`
`,f=`#version 100
`;o?f=`#version 300 es
#define attribute in
#define textureCube texture
#define texture2D texture
#define textureCubeLod textureLod
#define texture2DLod textureLod
`:(e.context.getExtension("OES_standard_derivatives"),e.context.getExtension("EXT_frag_depth")&&(c=`#extension GL_EXT_frag_depth : enable
`),e.context.getExtension("EXT_shader_texture_lod")&&(c+=`#extension GL_EXT_shader_texture_lod : enable
#define textureCubeLod textureCubeLodEXT
#define texture2DLod texture2DLodEXT`)),s=Z.substitute(s,"//VTK::System::Dec",[`${f}
`,o?"":`#extension GL_OES_standard_derivatives : enable
`,c,"#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","precision highp int;","#else","precision mediump float;","precision mediump int;","#endif"]).result;let l=Z.substitute(n,"//VTK::System::Dec",[`${f}
`,"#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","precision highp int;","#else","precision mediump float;","precision mediump int;","#endif"]).result;if(o){l=Z.substitute(l,"varying","out").result,s=Z.substitute(s,"varying","in").result;let g="",d=0;for(;s.includes(`gl_FragData[${d}]`);)s=Z.substitute(s,`gl_FragData\\[${d}\\]`,`fragOutput${d}`).result,g+=`layout(location = ${d}) out vec4 fragOutput${d};
`,d++;s=Z.substitute(s,"//VTK::Output::Dec",g).result}const h=Z.substitute(a,"//VTK::System::Dec",f).result;return{VSSource:l,FSSource:s,GSSource:h}},t.readyShaderProgramArray=(n,r,a)=>{const s=t.replaceShaderValues(n,r,a),o=t.getShaderProgram(s.VSSource,s.FSSource,s.GSSource);return t.readyShaderProgram(o)},t.readyShaderProgram=n=>!n||!n.getCompiled()&&!n.compileShader()||!t.bindShaderProgram(n)?null:n,t.getShaderProgram=(n,r,a)=>{const s=`${n}${r}${a}`,o=UF.hash(s);if(!(o in e.shaderPrograms)){const c=Z.newInstance();return c.setContext(e.context),c.getVertexShader().setSource(n),c.getFragmentShader().setSource(r),a&&c.getGeometryShader().setSource(a),c.setMd5Hash(o),e.shaderPrograms[o]=c,c}return e.shaderPrograms[o]},t.releaseGraphicsResources=n=>{t.releaseCurrentShaderProgram(),Object.keys(e.shaderPrograms).map(r=>e.shaderPrograms[r]).forEach(r=>r.cleanup()),e.shaderPrograms={}},t.releaseCurrentShaderProgram=()=>{e.lastShaderProgramBound&&(e.lastShaderProgramBound.cleanup(),e.lastShaderProgramBound=null)},t.bindShaderProgram=n=>(e.lastShaderProgramBound===n||(e.lastShaderProgramBound&&e.lastShaderProgramBound.release(),n.bind(),e.lastShaderProgramBound=n),1)}const zF={lastShaderProgramBound:null,shaderPrograms:null,context:null};function aS(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,zF,n),e.shaderPrograms={},L.obj(t,e),L.setGet(t,e,GF),L.moveToProtected(t,e,["openGLRenderWindow"]),$F(t,e)}const WF=L.newInstance(aS,"vtkShaderCache");var HF={newInstance:WF,extend:aS};const{vtkErrorMacro:bF}=L;function AF(t,e){e.classHierarchy.push("vtkOpenGLTextureUnitManager"),t.deleteTable=()=>{for(let n=0;n<e.numberOfTextureUnits;++n)e.textureUnits[n]===!0&&bF("some texture units  were not properly released");e.textureUnits=[],e.numberOfTextureUnits=0},t.setContext=n=>{if(e.context!==n){if(e.context!==0&&t.deleteTable(),e.context=n,e.context){e.numberOfTextureUnits=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS);for(let r=0;r<e.numberOfTextureUnits;++r)e.textureUnits[r]=!1}t.modified()}},t.allocate=()=>{for(let n=0;n<e.numberOfTextureUnits;n++)if(!t.isAllocated(n))return e.textureUnits[n]=!0,n;return-1},t.allocateUnit=n=>t.isAllocated(n)?-1:(e.textureUnits[n]=!0,n),t.isAllocated=n=>e.textureUnits[n],t.free=n=>{e.textureUnits[n]=!1},t.freeAll=()=>{for(let n=0;n<e.numberOfTextureUnits;++n)e.textureUnits[n]=!1}}const jF={context:null,numberOfTextureUnits:0,textureUnits:0};function sS(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,jF,n),L.obj(t,e),e.textureUnits=[],L.get(t,e,["numberOfTextureUnits"]),L.setGet(t,e,["context"]),AF(t,e)}const KF=L.newInstance(sS,"vtkOpenGLTextureUnitManager");var PF={newInstance:KF,extend:sS};function XF(t,e){e.classHierarchy.push("vtkRenderWindowViewNode"),t.getViewNodeFactory=()=>null,t.getAspectRatio=()=>e.size[0]/e.size[1],t.getAspectRatioForRenderer=n=>{const r=n.getViewportByReference();return e.size[0]*(r[2]-r[0])/((r[3]-r[1])*e.size[1])},t.isInViewport=(n,r,a)=>{const s=a.getViewportByReference(),o=t.getFramebufferSize();return s[0]*o[0]<=n&&s[2]*o[0]>=n&&s[1]*o[1]<=r&&s[3]*o[1]>=r},t.getViewportSize=n=>{const r=n.getViewportByReference(),a=t.getFramebufferSize();return[(r[2]-r[0])*a[0],(r[3]-r[1])*a[1]]},t.getViewportCenter=n=>{const r=t.getViewportSize(n);return[r[0]*.5,r[1]*.5]},t.displayToNormalizedDisplay=(n,r,a)=>{const s=t.getFramebufferSize();return[n/s[0],r/s[1],a]},t.normalizedDisplayToDisplay=(n,r,a)=>{const s=t.getFramebufferSize();return[n*s[0],r*s[1],a]},t.worldToView=(n,r,a,s)=>s.worldToView(n,r,a),t.viewToWorld=(n,r,a,s)=>s.viewToWorld(n,r,a),t.worldToDisplay=(n,r,a,s)=>{const o=s.worldToView(n,r,a),c=t.getViewportSize(s),f=s.viewToProjection(o[0],o[1],o[2],c[0]/c[1]),l=s.projectionToNormalizedDisplay(f[0],f[1],f[2]);return t.normalizedDisplayToDisplay(l[0],l[1],l[2])},t.displayToWorld=(n,r,a,s)=>{const o=t.displayToNormalizedDisplay(n,r,a),c=s.normalizedDisplayToProjection(o[0],o[1],o[2]),f=t.getViewportSize(s),l=s.projectionToView(c[0],c[1],c[2],f[0]/f[1]);return s.viewToWorld(l[0],l[1],l[2])},t.normalizedDisplayToViewport=(n,r,a,s)=>{let o=s.getViewportByReference();o=t.normalizedDisplayToDisplay(o[0],o[1],0);const c=t.normalizedDisplayToDisplay(n,r,a);return[c[0]-o[0]-.5,c[1]-o[1]-.5,a]},t.viewportToNormalizedViewport=(n,r,a,s)=>{const o=t.getViewportSize(s);return o&&o[0]!==0&&o[1]!==0?[n/(o[0]-1),r/(o[1]-1),a]:[n,r,a]},t.normalizedViewportToViewport=(n,r,a,s)=>{const o=t.getViewportSize(s);return[n*(o[0]-1),r*(o[1]-1),a]},t.displayToLocalDisplay=(n,r,a)=>{const s=t.getFramebufferSize();return[n,s[1]-r-1,a]},t.viewportToNormalizedDisplay=(n,r,a,s)=>{let o=s.getViewportByReference();o=t.normalizedDisplayToDisplay(o[0],o[1],0);const c=n+o[0]+.5,f=r+o[1]+.5;return t.displayToNormalizedDisplay(c,f,a)},t.getComputedDevicePixelRatio=()=>e.size[0]/t.getContainerSize()[0],t.getContainerSize=()=>{L.vtkErrorMacro("not implemented")},t.getPixelData=(n,r,a,s)=>{L.vtkErrorMacro("not implemented")},t.createSelector=()=>{L.vtkErrorMacro("not implemented")}}const IF={size:void 0,selector:void 0};function iS(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,IF,n),e.size||(e.size=[300,300]),L.getArray(t,e,["size"],2),L.get(t,e,["selector"]),qe.extend(t,e,n),XF(t,e)}const YF=L.newInstance(iS,"vtkRenderWindowViewNode");var oS={newInstance:YF,extend:iS};const qF="__getUnderlyingContext";function QF(){const t=new Map,e={apply(a,s,o){return t.has(o[0])?t.get(o[0]):a.apply(s,o)}};function n(a){return{apply(s,o,c){return t.set(a,c[0]),s.apply(o,c)}}}const r=Object.create(null);return r.getParameter=(a,s,o,c)=>new Proxy(c.bind(a),e),r.depthMask=(a,s,o,c)=>new Proxy(c.bind(a),n(a.DEPTH_WRITEMASK)),{get(a,s,o){if(s===qF)return()=>a;let c=Reflect.get(a,s,a);c instanceof Function&&(c=c.bind(a));const f=r[s];return f?f(a,s,o,c):c}}}const{vtkDebugMacro:ey,vtkErrorMacro:ty}=L,ZF={position:"absolute",top:0,left:0,width:"100%",height:"100%"},JF=["activateTexture","deactivateTexture","disableCullFace","enableCullFace","get3DContext","getActiveFramebuffer","getContext","getDefaultTextureByteSize","getDefaultTextureInternalFormat","getDefaultToWebgl2","getGLInformations","getGraphicsMemoryInfo","getGraphicsResourceForObject","getHardwareMaximumLineWidth","getPixelData","getShaderCache","getTextureUnitForTexture","getTextureUnitManager","getWebgl2","makeCurrent","releaseGraphicsResources","registerGraphicsResourceUser","unregisterGraphicsResourceUser","restoreContext","setActiveFramebuffer","setContext","setDefaultToWebgl2","setGraphicsResourceForObject"];function _t(t,e,n){const r=t.createFramebuffer(),a=t.createTexture();t.bindTexture(t.TEXTURE_2D,a),t.texImage2D(t.TEXTURE_2D,0,e,2,2,0,e,n,null),t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,a,0);const s=t.checkFramebufferStatus(t.FRAMEBUFFER);return t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindTexture(t.TEXTURE_2D,null),s===t.FRAMEBUFFER_COMPLETE}let wc=0;const uS=[];function eN(){wc++,uS.forEach(t=>t(wc))}function tN(){wc--,uS.forEach(t=>t(wc))}function ny(t){t.preventDefault()}function nN(t,e){e.classHierarchy.push("vtkOpenGLRenderWindow");let n;function r(){return n||(n=QF()),n}t.getViewNodeFactory=()=>e.myFactory,e.canvas.addEventListener("webglcontextlost",ny,!1),e.canvas.addEventListener("webglcontextrestored",t.restoreContext,!1);const a=[0,0];function s(){e.renderable&&(e.size[0]!==a[0]||e.size[1]!==a[1])&&(a[0]=e.size[0],a[1]=e.size[1],e.canvas.setAttribute("width",e.size[0]),e.canvas.setAttribute("height",e.size[1])),e.viewStream&&e.viewStream.setSize(e.size[0],e.size[1]),e.canvas.style.display=e.useOffScreen?"none":"block",e.el&&(e.el.style.cursor=e.cursorVisibility?e.cursor:"none"),e.containerSize=null}t.onModified(s),t.buildPass=g=>{if(g){if(!e.renderable)return;t.prepareNodes(),t.addMissingNodes(e.renderable.getRenderersByReference()),t.addMissingNodes(e.renderable.getChildRenderWindowsByReference()),t.removeUnusedNodes(),t.initialize(),e.children.forEach(d=>{var v;(v=d.setOpenGLRenderWindow)==null||v.call(d,t)})}},t.initialize=()=>{if(!e.initialized){if(e.rootOpenGLRenderWindow=t.getLastAncestorOfType("vtkOpenGLRenderWindow"),e.rootOpenGLRenderWindow)e.context2D=t.get2DContext();else{e.context=t.get3DContext(),t.resizeFromChildRenderWindows(),e.context&&eN(),e.textureUnitManager=PF.newInstance(),e.textureUnitManager.setContext(e.context),e.shaderCache.setContext(e.context);const g=e.context;g.blendFuncSeparate(g.SRC_ALPHA,g.ONE_MINUS_SRC_ALPHA,g.ONE,g.ONE_MINUS_SRC_ALPHA),g.depthFunc(g.LEQUAL),g.enable(g.BLEND)}e.initialized=!0}},t.makeCurrent=()=>{e.context.makeCurrent()},t.setContainer=g=>{e.el&&e.el!==g&&(e.canvas.parentNode!==e.el&&ty("Error: canvas parent node does not match container"),e.el.removeChild(e.canvas),e.el.contains(e.bgImage)&&e.el.removeChild(e.bgImage)),e.el!==g&&(e.el=g,e.el&&(e.el.appendChild(e.canvas),e.useBackgroundImage&&e.el.appendChild(e.bgImage)),t.modified())},t.getContainer=()=>e.el,t.getContainerSize=()=>{if(!e.containerSize&&e.el){const{width:g,height:d}=e.el.getBoundingClientRect();e.containerSize=[g,d]}return e.containerSize||e.size},t.getFramebufferSize=()=>{var d;return((d=e.activeFramebuffer)==null?void 0:d.getSize())||e.size},t.getPixelData=(g,d,v,S)=>{const T=new Uint8Array((v-g+1)*(S-d+1)*4);return e.context.readPixels(g,d,v-g+1,S-d+1,e.context.RGBA,e.context.UNSIGNED_BYTE,T),T},t.get3DContext=function(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{preserveDrawingBuffer:!1,depth:!0,alpha:!0,powerPreference:"high-performance"},d=null;const v=typeof WebGL2RenderingContext<"u";return e.webgl2=!1,e.defaultToWebgl2&&v&&(d=e.canvas.getContext("webgl2",g),d&&(e.webgl2=!0,ey("using webgl2"))),d||(ey("using webgl1"),d=e.canvas.getContext("webgl",g)||e.canvas.getContext("experimental-webgl",g)),new Proxy(d,r())},t.get2DContext=function(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e.canvas.getContext("2d",g)},t.restoreContext=()=>{const g=hr.newInstance();g.setCurrentOperation("Release"),g.traverse(t,null)},t.activateTexture=g=>{const d=e._textureResourceIds.get(g);if(d!==void 0){e.context.activeTexture(e.context.TEXTURE0+d);return}const v=t.getTextureUnitManager().allocate();if(v<0){ty("Hardware does not support the number of textures defined.");return}e._textureResourceIds.set(g,v),e.context.activeTexture(e.context.TEXTURE0+v)},t.deactivateTexture=g=>{const d=e._textureResourceIds.get(g);d!==void 0&&(t.getTextureUnitManager().free(d),e._textureResourceIds.delete(g))},t.getTextureUnitForTexture=g=>{const d=e._textureResourceIds.get(g);return d!==void 0?d:-1},t.getDefaultTextureByteSize=function(g){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(e.webgl2)switch(g){case rt.CHAR:case rt.SIGNED_CHAR:case rt.UNSIGNED_CHAR:return 1;case d:case v:case rt.UNSIGNED_SHORT:case rt.SHORT:case rt.VOID:return 2;default:return 4}return 1},t.getDefaultTextureInternalFormat=function(g,d){let v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,S=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e.webgl2)switch(g){case rt.UNSIGNED_CHAR:switch(d){case 1:return e.context.R8;case 2:return e.context.RG8;case 3:return e.context.RGB8;case 4:default:return e.context.RGBA8}case(v&&!S&&rt.UNSIGNED_SHORT):switch(d){case 1:return v.R16_EXT;case 2:return v.RG16_EXT;case 3:return v.RGB16_EXT;case 4:default:return v.RGBA16_EXT}case(v&&!S&&rt.SHORT):switch(d){case 1:return v.R16_SNORM_EXT;case 2:return v.RG16_SNORM_EXT;case 3:return v.RGB16_SNORM_EXT;case 4:default:return v.RGBA16_SNORM_EXT}case rt.UNSIGNED_SHORT:case rt.SHORT:case rt.FLOAT:default:switch(d){case 1:return S?e.context.R16F:e.context.R32F;case 2:return S?e.context.RG16F:e.context.RG32F;case 3:return S?e.context.RGB16F:e.context.RGB32F;case 4:default:return S?e.context.RGBA16F:e.context.RGBA32F}}switch(d){case 1:return e.context.LUMINANCE;case 2:return e.context.LUMINANCE_ALPHA;case 3:return e.context.RGB;case 4:default:return e.context.RGBA}},t.setBackgroundImage=g=>{e.bgImage.src=g.src},t.setUseBackgroundImage=g=>{e.useBackgroundImage=g,e.useBackgroundImage&&!e.el.contains(e.bgImage)?e.el.appendChild(e.bgImage):!e.useBackgroundImage&&e.el.contains(e.bgImage)&&e.el.removeChild(e.bgImage)};function o(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.imageFormat;const d=document.createElement("canvas"),v=d.getContext("2d");d.width=e.canvas.width,d.height=e.canvas.height,v.drawImage(e.canvas,0,0);const S=e.canvas.getBoundingClientRect();e.renderable.getRenderers().forEach(O=>{O.getViewProps().forEach(R=>{if(R.getContainer){const D=R.getContainer().getElementsByTagName("canvas");for(let V=0;V<D.length;V++){const B=D[V],z=B.getBoundingClientRect(),k=z.x-S.x,U=z.y-S.y;v.drawImage(B,k,U)}}})});const m=d.toDataURL(g);d.remove(),t.invokeImageReady(m)}t.captureNextImage=function(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"image/png",{resetCamera:d=!1,size:v=null,scale:S=1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e.deleted)return null;e.imageFormat=g;const T=e.notifyStartCaptureImage;return e.notifyStartCaptureImage=!0,e._screenshot={size:v||S!==1?v||e.size.map(x=>x*S):null},new Promise((x,m)=>{const O=t.onImageReady(w=>{var R;if(e._screenshot.size===null)e.notifyStartCaptureImage=T,O.unsubscribe(),e._screenshot.placeHolder&&(e.size=e._screenshot.originalSize,t.modified(),e._screenshot.cameras&&e._screenshot.cameras.forEach(M=>{let{restoreParamsFn:D,arg:V}=M;return D(V)}),t.traverseAllPasses(),e.el.removeChild(e._screenshot.placeHolder),e._screenshot.placeHolder.remove(),e._screenshot=null),x(w);else{const M=document.createElement("img");if(M.style=ZF,M.src=w,e._screenshot.placeHolder=e.el.appendChild(M),e.canvas.style.display="none",e._screenshot.originalSize=e.size,e.size=e._screenshot.size,(R=e.rootOpenGLRenderWindow)==null||R.resizeFromChildRenderWindows(),e._screenshot.size=null,t.modified(),d){const D=d!==!0;e._screenshot.cameras=e.renderable.getRenderers().map(V=>{const B=V.getActiveCamera(),z=B.get("focalPoint","position","parallelScale");return{resetCameraArgs:D?{renderer:V}:void 0,resetCameraFn:D?d:V.resetCamera,restoreParamsFn:B.set,arg:JSON.parse(JSON.stringify(z))}}),e._screenshot.cameras.forEach(V=>{let{resetCameraFn:B,resetCameraArgs:z}=V;return B(z)})}t.traverseAllPasses()}})})};let c;t.getHardwareMaximumLineWidth=()=>{if(c!=null)return c;const g=t.get3DContext(),d=g.getParameter(g.ALIASED_LINE_WIDTH_RANGE);return c=d[1],d[1]},t.getGLInformations=()=>{if(e._glInformation)return e._glInformation;const g=t.get3DContext(),d=g.getExtension("OES_texture_float"),v=g.getExtension("OES_texture_half_float"),S=g.getExtension("WEBGL_debug_renderer_info"),T=g.getExtension("WEBGL_draw_buffers"),x=g.getExtension("EXT_texture_filter_anisotropic")||g.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),m=[["Max Vertex Attributes","MAX_VERTEX_ATTRIBS",g.getParameter(g.MAX_VERTEX_ATTRIBS)],["Max Varying Vectors","MAX_VARYING_VECTORS",g.getParameter(g.MAX_VARYING_VECTORS)],["Max Vertex Uniform Vectors","MAX_VERTEX_UNIFORM_VECTORS",g.getParameter(g.MAX_VERTEX_UNIFORM_VECTORS)],["Max Fragment Uniform Vectors","MAX_FRAGMENT_UNIFORM_VECTORS",g.getParameter(g.MAX_FRAGMENT_UNIFORM_VECTORS)],["Max Fragment Texture Image Units","MAX_TEXTURE_IMAGE_UNITS",g.getParameter(g.MAX_TEXTURE_IMAGE_UNITS)],["Max Vertex Texture Image Units","MAX_VERTEX_TEXTURE_IMAGE_UNITS",g.getParameter(g.MAX_VERTEX_TEXTURE_IMAGE_UNITS)],["Max Combined Texture Image Units","MAX_COMBINED_TEXTURE_IMAGE_UNITS",g.getParameter(g.MAX_COMBINED_TEXTURE_IMAGE_UNITS)],["Max 2D Texture Size","MAX_TEXTURE_SIZE",g.getParameter(g.MAX_TEXTURE_SIZE)],["Max Cube Texture Size","MAX_CUBE_MAP_TEXTURE_SIZE",g.getParameter(g.MAX_CUBE_MAP_TEXTURE_SIZE)],["Max Texture Anisotropy","MAX_TEXTURE_MAX_ANISOTROPY_EXT",x&&g.getParameter(x.MAX_TEXTURE_MAX_ANISOTROPY_EXT)],["Point Size Range","ALIASED_POINT_SIZE_RANGE",g.getParameter(g.ALIASED_POINT_SIZE_RANGE).join(" - ")],["Line Width Range","ALIASED_LINE_WIDTH_RANGE",g.getParameter(g.ALIASED_LINE_WIDTH_RANGE).join(" - ")],["Max Viewport Dimensions","MAX_VIEWPORT_DIMS",g.getParameter(g.MAX_VIEWPORT_DIMS).join(" - ")],["Max Renderbuffer Size","MAX_RENDERBUFFER_SIZE",g.getParameter(g.MAX_RENDERBUFFER_SIZE)],["Framebuffer Red Bits","RED_BITS",g.getParameter(g.RED_BITS)],["Framebuffer Green Bits","GREEN_BITS",g.getParameter(g.GREEN_BITS)],["Framebuffer Blue Bits","BLUE_BITS",g.getParameter(g.BLUE_BITS)],["Framebuffer Alpha Bits","ALPHA_BITS",g.getParameter(g.ALPHA_BITS)],["Framebuffer Depth Bits","DEPTH_BITS",g.getParameter(g.DEPTH_BITS)],["Framebuffer Stencil Bits","STENCIL_BITS",g.getParameter(g.STENCIL_BITS)],["Framebuffer Subpixel Bits","SUBPIXEL_BITS",g.getParameter(g.SUBPIXEL_BITS)],["MSAA Samples","SAMPLES",g.getParameter(g.SAMPLES)],["MSAA Sample Buffers","SAMPLE_BUFFERS",g.getParameter(g.SAMPLE_BUFFERS)],["Supported Formats for UByte Render Targets     ","UNSIGNED_BYTE RENDER TARGET FORMATS",[d&&_t(g,g.RGBA,g.UNSIGNED_BYTE)?"RGBA":"",d&&_t(g,g.RGB,g.UNSIGNED_BYTE)?"RGB":"",d&&_t(g,g.LUMINANCE,g.UNSIGNED_BYTE)?"LUMINANCE":"",d&&_t(g,g.ALPHA,g.UNSIGNED_BYTE)?"ALPHA":"",d&&_t(g,g.LUMINANCE_ALPHA,g.UNSIGNED_BYTE)?"LUMINANCE_ALPHA":""].join(" ")],["Supported Formats for Half Float Render Targets","HALF FLOAT RENDER TARGET FORMATS",[v&&_t(g,g.RGBA,v.HALF_FLOAT_OES)?"RGBA":"",v&&_t(g,g.RGB,v.HALF_FLOAT_OES)?"RGB":"",v&&_t(g,g.LUMINANCE,v.HALF_FLOAT_OES)?"LUMINANCE":"",v&&_t(g,g.ALPHA,v.HALF_FLOAT_OES)?"ALPHA":"",v&&_t(g,g.LUMINANCE_ALPHA,v.HALF_FLOAT_OES)?"LUMINANCE_ALPHA":""].join(" ")],["Supported Formats for Full Float Render Targets","FLOAT RENDER TARGET FORMATS",[d&&_t(g,g.RGBA,g.FLOAT)?"RGBA":"",d&&_t(g,g.RGB,g.FLOAT)?"RGB":"",d&&_t(g,g.LUMINANCE,g.FLOAT)?"LUMINANCE":"",d&&_t(g,g.ALPHA,g.FLOAT)?"ALPHA":"",d&&_t(g,g.LUMINANCE_ALPHA,g.FLOAT)?"LUMINANCE_ALPHA":""].join(" ")],["Max Multiple Render Targets Buffers","MAX_DRAW_BUFFERS_WEBGL",T?g.getParameter(T.MAX_DRAW_BUFFERS_WEBGL):0],["High Float Precision in Vertex Shader","HIGH_FLOAT VERTEX_SHADER",[g.getShaderPrecisionFormat(g.VERTEX_SHADER,g.HIGH_FLOAT).precision," (-2<sup>",g.getShaderPrecisionFormat(g.VERTEX_SHADER,g.HIGH_FLOAT).rangeMin,"</sup> - 2<sup>",g.getShaderPrecisionFormat(g.VERTEX_SHADER,g.HIGH_FLOAT).rangeMax,"</sup>)"].join("")],["Medium Float Precision in Vertex Shader","MEDIUM_FLOAT VERTEX_SHADER",[g.getShaderPrecisionFormat(g.VERTEX_SHADER,g.MEDIUM_FLOAT).precision," (-2<sup>",g.getShaderPrecisionFormat(g.VERTEX_SHADER,g.MEDIUM_FLOAT).rangeMin,"</sup> - 2<sup>",g.getShaderPrecisionFormat(g.VERTEX_SHADER,g.MEDIUM_FLOAT).rangeMax,"</sup>)"].join("")],["Low Float Precision in Vertex Shader","LOW_FLOAT VERTEX_SHADER",[g.getShaderPrecisionFormat(g.VERTEX_SHADER,g.LOW_FLOAT).precision," (-2<sup>",g.getShaderPrecisionFormat(g.VERTEX_SHADER,g.LOW_FLOAT).rangeMin,"</sup> - 2<sup>",g.getShaderPrecisionFormat(g.VERTEX_SHADER,g.LOW_FLOAT).rangeMax,"</sup>)"].join("")],["High Float Precision in Fragment Shader","HIGH_FLOAT FRAGMENT_SHADER",[g.getShaderPrecisionFormat(g.FRAGMENT_SHADER,g.HIGH_FLOAT).precision," (-2<sup>",g.getShaderPrecisionFormat(g.FRAGMENT_SHADER,g.HIGH_FLOAT).rangeMin,"</sup> - 2<sup>",g.getShaderPrecisionFormat(g.FRAGMENT_SHADER,g.HIGH_FLOAT).rangeMax,"</sup>)"].join("")],["Medium Float Precision in Fragment Shader","MEDIUM_FLOAT FRAGMENT_SHADER",[g.getShaderPrecisionFormat(g.FRAGMENT_SHADER,g.MEDIUM_FLOAT).precision," (-2<sup>",g.getShaderPrecisionFormat(g.FRAGMENT_SHADER,g.MEDIUM_FLOAT).rangeMin,"</sup> - 2<sup>",g.getShaderPrecisionFormat(g.FRAGMENT_SHADER,g.MEDIUM_FLOAT).rangeMax,"</sup>)"].join("")],["Low Float Precision in Fragment Shader","LOW_FLOAT FRAGMENT_SHADER",[g.getShaderPrecisionFormat(g.FRAGMENT_SHADER,g.LOW_FLOAT).precision," (-2<sup>",g.getShaderPrecisionFormat(g.FRAGMENT_SHADER,g.LOW_FLOAT).rangeMin,"</sup> - 2<sup>",g.getShaderPrecisionFormat(g.FRAGMENT_SHADER,g.LOW_FLOAT).rangeMax,"</sup>)"].join("")],["High Int Precision in Vertex Shader","HIGH_INT VERTEX_SHADER",[g.getShaderPrecisionFormat(g.VERTEX_SHADER,g.HIGH_INT).precision," (-2<sup>",g.getShaderPrecisionFormat(g.VERTEX_SHADER,g.HIGH_INT).rangeMin,"</sup> - 2<sup>",g.getShaderPrecisionFormat(g.VERTEX_SHADER,g.HIGH_INT).rangeMax,"</sup>)"].join("")],["Medium Int Precision in Vertex Shader","MEDIUM_INT VERTEX_SHADER",[g.getShaderPrecisionFormat(g.VERTEX_SHADER,g.MEDIUM_INT).precision," (-2<sup>",g.getShaderPrecisionFormat(g.VERTEX_SHADER,g.MEDIUM_INT).rangeMin,"</sup> - 2<sup>",g.getShaderPrecisionFormat(g.VERTEX_SHADER,g.MEDIUM_INT).rangeMax,"</sup>)"].join("")],["Low Int Precision in Vertex Shader","LOW_INT VERTEX_SHADER",[g.getShaderPrecisionFormat(g.VERTEX_SHADER,g.LOW_INT).precision," (-2<sup>",g.getShaderPrecisionFormat(g.VERTEX_SHADER,g.LOW_INT).rangeMin,"</sup> - 2<sup>",g.getShaderPrecisionFormat(g.VERTEX_SHADER,g.LOW_INT).rangeMax,"</sup>)"].join("")],["High Int Precision in Fragment Shader","HIGH_INT FRAGMENT_SHADER",[g.getShaderPrecisionFormat(g.FRAGMENT_SHADER,g.HIGH_INT).precision," (-2<sup>",g.getShaderPrecisionFormat(g.FRAGMENT_SHADER,g.HIGH_INT).rangeMin,"</sup> - 2<sup>",g.getShaderPrecisionFormat(g.FRAGMENT_SHADER,g.HIGH_INT).rangeMax,"</sup>)"].join("")],["Medium Int Precision in Fragment Shader","MEDIUM_INT FRAGMENT_SHADER",[g.getShaderPrecisionFormat(g.FRAGMENT_SHADER,g.MEDIUM_INT).precision," (-2<sup>",g.getShaderPrecisionFormat(g.FRAGMENT_SHADER,g.MEDIUM_INT).rangeMin,"</sup> - 2<sup>",g.getShaderPrecisionFormat(g.FRAGMENT_SHADER,g.MEDIUM_INT).rangeMax,"</sup>)"].join("")],["Low Int Precision in Fragment Shader","LOW_INT FRAGMENT_SHADER",[g.getShaderPrecisionFormat(g.FRAGMENT_SHADER,g.LOW_INT).precision," (-2<sup>",g.getShaderPrecisionFormat(g.FRAGMENT_SHADER,g.LOW_INT).rangeMin,"</sup> - 2<sup>",g.getShaderPrecisionFormat(g.FRAGMENT_SHADER,g.LOW_INT).rangeMax,"</sup>)"].join("")],["Supported Extensions","EXTENSIONS",g.getSupportedExtensions().join("<br/>					    ")],["WebGL Renderer","RENDERER",g.getParameter(g.RENDERER)],["WebGL Vendor","VENDOR",g.getParameter(g.VENDOR)],["WebGL Version","VERSION",g.getParameter(g.VERSION)],["Shading Language Version","SHADING_LANGUAGE_VERSION",g.getParameter(g.SHADING_LANGUAGE_VERSION)],["Unmasked Renderer","UNMASKED_RENDERER",S&&g.getParameter(S.UNMASKED_RENDERER_WEBGL)],["Unmasked Vendor","UNMASKED_VENDOR",S&&g.getParameter(S.UNMASKED_VENDOR_WEBGL)],["WebGL Version","WEBGL_VERSION",e.webgl2?2:1]],O={};for(;m.length;){const[w,R,M]=m.pop();R&&(O[R]={label:w,value:M})}return e._glInformation=O,O},t.traverseAllPasses=()=>{var d;if(e.renderPasses)for(let v=0;v<e.renderPasses.length;++v)e.renderPasses[v].traverse(t,null);t.copyParentContent(),e.notifyStartCaptureImage&&o();const g=e.renderable.getChildRenderWindowsByReference();for(let v=0;v<g.length;++v)(d=t.getViewNodeFor(g[v]))==null||d.traverseAllPasses()},t.copyParentContent=()=>{const g=e.rootOpenGLRenderWindow;if(!g||!e.context2D||e.children.some(S=>{var T;return!!((T=S.getSelector)!=null&&T.call(S))}))return;const d=g.getCanvas(),v=e.canvas;e.context2D.drawImage(d,0,d.height-v.height,v.width,v.height,0,0,v.width,v.height)},t.resizeFromChildRenderWindows=()=>{var d;const g=e.renderable.getChildRenderWindowsByReference();if(g.length>0){const v=[0,0];for(let S=0;S<g.length;++S){const T=(d=t.getViewNodeFor(g[S]))==null?void 0:d.getSize();T&&(v[0]=T[0]>v[0]?T[0]:v[0],v[1]=T[1]>v[1]?T[1]:v[1])}t.setSize(...v)}},t.disableCullFace=()=>{e.cullFaceEnabled&&(e.context.disable(e.context.CULL_FACE),e.cullFaceEnabled=!1)},t.enableCullFace=()=>{e.cullFaceEnabled||(e.context.enable(e.context.CULL_FACE),e.cullFaceEnabled=!0)},t.setViewStream=g=>{if(e.viewStream===g)return!1;if(e.subscription&&(e.subscription.unsubscribe(),e.subscription=null),e.viewStream=g,e.viewStream){const d=e.renderable.getRenderers()[0];d.getBackgroundByReference()[3]=0,t.setUseBackgroundImage(!0),e.subscription=e.viewStream.onImageReady(v=>t.setBackgroundImage(v.image)),e.viewStream.setSize(e.size[0],e.size[1]),e.viewStream.invalidateCache(),e.viewStream.render(),t.modified()}return!0},t.createSelector=()=>{const g=rS.newInstance();return g.setOpenGLRenderWindow(t),g};function f(){e.canvas.removeEventListener("webglcontextlost",ny),e.canvas.removeEventListener("webglcontextrestored",t.restoreContext)}t.delete=L.chain(()=>{e.context&&tN(),t.setContainer(),t.setViewStream()},f,t.delete),t.setActiveFramebuffer=g=>{e.activeFramebuffer=g};const l=t.setSize;t.setSize=(g,d)=>{const v=l(g,d);return v&&t.invokeWindowResizeEvent({width:g,height:d}),v},t.registerGraphicsResourceUser=(g,d)=>{e._graphicsResources.has(g)||t.setGraphicsResourceForObject(g,null,null);const v=e._graphicsResources.get(g);v==null||v.users.add(d)},t.unregisterGraphicsResourceUser=(g,d)=>{var S;const v=e._graphicsResources.get(g);v&&(v.users.delete(d),v.users.size||((S=v.oglObject)==null||S.releaseGraphicsResources(t),e._graphicsResources.delete(g)))},t.getGraphicsResourceForObject=g=>e._graphicsResources.get(g),t.setGraphicsResourceForObject=(g,d,v)=>{var T;if(!g)return;const S=e._graphicsResources.get(g);(T=S==null?void 0:S.oglObject)==null||T.releaseGraphicsResources(t),e._graphicsResources.set(g,{coreObject:g,oglObject:d,hash:v,users:(S==null?void 0:S.users)??new Set})},t.getGraphicsMemoryInfo=()=>{let g=0;return e._graphicsResources.forEach(d=>{let{oglObject:v}=d;g+=v.getAllocatedGPUMemoryInBytes()}),g},t.releaseGraphicsResources=()=>{e.shaderCache!==null&&e.shaderCache.releaseGraphicsResources(t),e._graphicsResources.forEach(g=>{let{oglObject:d}=g;d.releaseGraphicsResources(t)}),e._graphicsResources.clear(),e.textureUnitManager!==null&&e.textureUnitManager.freeAll(),e.renderable.getRenderersByReference().forEach(g=>{const d=t.getViewNodeFor(g);d==null||d.releaseGraphicsResources()})};const h={...t};JF.forEach(g=>{t[g]=function(){return e.rootOpenGLRenderWindow?e.rootOpenGLRenderWindow[g](...arguments):h[g](...arguments)}})}const rN={cullFaceEnabled:!1,shaderCache:null,initialized:!1,context:null,context2D:null,canvas:null,cursorVisibility:!0,cursor:"pointer",textureUnitManager:null,textureResourceIds:null,containerSize:null,renderPasses:[],notifyStartCaptureImage:!1,webgl2:!1,defaultToWebgl2:!0,activeFramebuffer:null,imageFormat:"image/png",useOffScreen:!1,useBackgroundImage:!1};function aN(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,rN,n),oS.extend(t,e,n),e.canvas||(e.canvas=document.createElement("canvas"),e.canvas.style.width="100%"),e.selector||(e.selector=rS.newInstance(),e.selector.setOpenGLRenderWindow(t)),e.bgImage=new Image,e.bgImage.style.position="absolute",e.bgImage.style.left="0",e.bgImage.style.top="0",e.bgImage.style.width="100%",e.bgImage.style.height="100%",e.bgImage.style.zIndex="-1",e._textureResourceIds=new Map,e._graphicsResources=new Map,e._glInformation=null,e.myFactory=nR.newInstance(),e.shaderCache=HF.newInstance(),e.shaderCache.setOpenGLRenderWindow(t),e.renderPasses[0]=yF.newInstance(),L.get(t,e,["shaderCache","textureUnitManager","webgl2","useBackgroundImage","activeFramebuffer","rootOpenGLRenderWindow"]),L.setGet(t,e,["initialized","context","context2D","canvas","renderPasses","notifyStartCaptureImage","defaultToWebgl2","cursor","useOffScreen"]),L.setGetArray(t,e,["size"],2),L.event(t,e,"imageReady"),L.event(t,e,"windowResizeEvent"),nN(t,e)}const cS=L.newInstance(aN,"vtkOpenGLRenderWindow");Y1("WebGL",cS);cn("vtkRenderWindow",cS);const wg=["setBindGroup","setIndexBuffer","setVertexBuffer","draw","drawIndexed"];function sN(t,e){e.classHierarchy.push("vtkWebGPURenderEncoder"),t.begin=n=>{e.drawCallbacks=[],e.handle=n.beginRenderPass(e.description),e.label&&e.handle.pushDebugGroup(e.label)},t.end=()=>{for(let n=0;n<e.drawCallbacks.length;n++){const r=e.drawCallbacks[n],a=r.pipeline;t.setPipeline(a);for(let s=0;s<r.callbacks.length;s++)r.callbacks[s](t)}e.label&&e.handle.popDebugGroup(),e.handle.end(),e.boundPipeline=null},t.setPipeline=n=>{var a,s;if(e.boundPipeline===n)return;e.handle.setPipeline(n.getHandle());const r=n.getPipelineDescription();if(e.colorTextureViews.length!==r.fragment.targets.length)console.log(`mismatched attachment counts on pipeline ${r.fragment.targets.length} while encoder has ${e.colorTextureViews.length}`),console.trace();else for(let o=0;o<e.colorTextureViews.length;o++){const c=(a=e.colorTextureViews[o].getTexture())==null?void 0:a.getFormat();c&&c!==r.fragment.targets[o].format&&(console.log(`mismatched attachments for attachment ${o} on pipeline ${r.fragment.targets[o].format} while encoder has ${c}`),console.trace())}if(!e.depthTextureView!=!("depthStencil"in r))console.log("mismatched depth attachments"),console.trace();else if(e.depthTextureView){const o=(s=e.depthTextureView.getTexture())==null?void 0:s.getFormat();o&&o!==r.depthStencil.format&&(console.log(`mismatched depth attachments on pipeline ${r.depthStencil.format} while encoder has ${o}`),console.trace())}e.boundPipeline=n},t.replaceShaderCode=n=>{e.replaceShaderCodeFunction(n)},t.setColorTextureView=(n,r)=>{e.colorTextureViews[n]!==r&&(e.colorTextureViews[n]=r)},t.activateBindGroup=n=>{const r=e.boundPipeline.getDevice(),a=e.boundPipeline.getBindGroupLayoutCount(n.getLabel());e.handle.setBindGroup(a,n.getBindGroup(r));const s=r.getBindGroupLayoutDescription(n.getBindGroupLayout(r)),o=r.getBindGroupLayoutDescription(e.boundPipeline.getBindGroupLayout(a));s!==o&&(console.log(`renderEncoder ${e.pipelineHash} mismatched bind group layouts bind group has
${s}
 versus pipeline
${o}
`),console.trace())},t.attachTextureViews=()=>{for(let n=0;n<e.colorTextureViews.length;n++)e.description.colorAttachments[n]?e.description.colorAttachments[n].view=e.colorTextureViews[n].getHandle():e.description.colorAttachments[n]={view:e.colorTextureViews[n].getHandle()};e.depthTextureView&&(e.description.depthStencilAttachment.view=e.depthTextureView.getHandle())},t.registerDrawCallback=(n,r)=>{for(let a=0;a<e.drawCallbacks.length;a++)if(e.drawCallbacks[a].pipeline===n){e.drawCallbacks[a].callbacks.push(r);return}e.drawCallbacks.push({pipeline:n,callbacks:[r]})};for(let n=0;n<wg.length;n++)t[wg[n]]=function(){return e.handle[wg[n]](...arguments)}}const iN={description:null,handle:null,boundPipeline:null,pipelineHash:null,pipelineSettings:null,replaceShaderCodeFunction:null,depthTextureView:null,label:null};function fS(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,iN,n),vt(t,e),e.description={colorAttachments:[{view:void 0,loadOp:"load",storeOp:"store"}],depthStencilAttachment:{view:void 0,depthLoadOp:"clear",depthClearValue:0,depthStoreOp:"store"}},e.replaceShaderCodeFunction=r=>{const a=r.getShaderDescription("fragment");a.addOutput("vec4<f32>","outColor");let s=a.getCode();s=ve.substitute(s,"//VTK::RenderEncoder::Impl",["output.outColor = computedColor;"]).result,a.setCode(s)},e.pipelineSettings={primitive:{cullMode:"none"},depthStencil:{depthWriteEnabled:!0,depthCompare:"greater-equal",format:"depth32float"},fragment:{targets:[{format:"rgba16float",blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{srcfactor:"one",dstFactor:"one-minus-src-alpha"}}}]}},e.colorTextureViews=[],Nt(t,e,["boundPipeline","colorTextureViews"]),ct(t,e,["depthTextureView","description","handle","label","pipelineHash","pipelineSettings","replaceShaderCodeFunction"]),sN(t,e)}const oN=Ne(fS,"vtkWebGPURenderEncoder");var lr={newInstance:oN,extend:fS};function uN(t,e){e.classHierarchy.push("vtkWebGPUOpaquePass"),t.traverse=(n,r)=>{if(e.deleted)return;e._currentParent=r;const a=r.getDevice();if(e.renderEncoder)e.colorTexture.resize(r.getCanvas().width,r.getCanvas().height),e.depthTexture.resize(r.getCanvas().width,r.getCanvas().height);else{t.createRenderEncoder(),e.colorTexture=Hn.newInstance({label:"opaquePassColor"}),e.colorTexture.create(a,{width:r.getCanvas().width,height:r.getCanvas().height,format:"rgba16float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_SRC});const s=e.colorTexture.createView("opaquePassColorTexture");e.renderEncoder.setColorTextureView(0,s),e.depthFormat="depth32float",e.depthTexture=Hn.newInstance({label:"opaquePassDepth"}),e.depthTexture.create(a,{width:r.getCanvas().width,height:r.getCanvas().height,format:e.depthFormat,usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_SRC});const o=e.depthTexture.createView("opaquePassDepthTexture");e.renderEncoder.setDepthTextureView(o)}e.renderEncoder.attachTextureViews(),t.setCurrentOperation("opaquePass"),n.setRenderEncoder(e.renderEncoder),n.traverse(t)},t.getColorTextureView=()=>e.renderEncoder.getColorTextureViews()[0],t.getDepthTextureView=()=>e.renderEncoder.getDepthTextureView(),t.createRenderEncoder=()=>{e.renderEncoder=lr.newInstance({label:"OpaquePass"}),e.renderEncoder.setPipelineHash("op")}}const cN={renderEncoder:null,colorTexture:null,depthTexture:null};function lS(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,cN,n),hr.extend(t,e,n),L.get(t,e,["colorTexture","depthTexture"]),uN(t,e)}const fN=L.newInstance(lS,"vtkWebGPUOpaquePass");var lN={newInstance:fN,extend:lS};const gN=`
//VTK::Mapper::Dec

//VTK::TCoord::Dec

//VTK::RenderEncoder::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output: fragmentOutput;

  var tcoord: vec2<i32> = vec2<i32>(i32(input.fragPos.x), i32(input.fragPos.y));
  var reveal: f32 = textureLoad(oitpAccumTexture, tcoord, 0).r;
  if (reveal == 1.0) { discard; }
  var tcolor: vec4<f32> = textureLoad(oitpColorTexture, tcoord, 0);
  var total: f32 = max(tcolor.a, 0.01);
  var computedColor: vec4<f32> = vec4<f32>(tcolor.r/total, tcolor.g/total, tcolor.b/total, 1.0 - reveal);

  //VTK::RenderEncoder::Impl
  return output;
}
`;function pN(t,e){e.classHierarchy.push("vtkWebGPUOrderIndependentTranslucentPass"),t.traverse=(n,r)=>{if(e.deleted)return;e._currentParent=r;const a=r.getDevice();if(e.translucentRenderEncoder)e.translucentColorTexture.resizeToMatch(e.colorTextureView.getTexture()),e.translucentAccumulateTexture.resizeToMatch(e.colorTextureView.getTexture());else{t.createRenderEncoder(),t.createFinalEncoder(),e.translucentColorTexture=Hn.newInstance({label:"translucentPassColor"}),e.translucentColorTexture.create(a,{width:r.getCanvas().width,height:r.getCanvas().height,format:"rgba16float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING});const s=e.translucentColorTexture.createView("oitpColorTexture");e.translucentRenderEncoder.setColorTextureView(0,s),e.translucentAccumulateTexture=Hn.newInstance({label:"translucentPassAccumulate"}),e.translucentAccumulateTexture.create(a,{width:r.getCanvas().width,height:r.getCanvas().height,format:"r16float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING});const o=e.translucentAccumulateTexture.createView("oitpAccumTexture");e.translucentRenderEncoder.setColorTextureView(1,o),e.fullScreenQuad=Cs.newInstance(),e.fullScreenQuad.setDevice(r.getDevice()),e.fullScreenQuad.setPipelineHash("oitpfsq"),e.fullScreenQuad.setTextureViews(e.translucentRenderEncoder.getColorTextureViews()),e.fullScreenQuad.setFragmentShaderTemplate(gN)}e.translucentRenderEncoder.setDepthTextureView(e.depthTextureView),e.translucentRenderEncoder.attachTextureViews(),t.setCurrentOperation("translucentPass"),n.setRenderEncoder(e.translucentRenderEncoder),n.traverse(t),t.finalPass(r,n)},t.finalPass=(n,r)=>{e.translucentFinalEncoder.setColorTextureView(0,e.colorTextureView),e.translucentFinalEncoder.attachTextureViews(),e.translucentFinalEncoder.begin(n.getCommandEncoder()),r.scissorAndViewport(e.translucentFinalEncoder),e.fullScreenQuad.prepareAndDraw(e.translucentFinalEncoder),e.translucentFinalEncoder.end()},t.getTextures=()=>[e.translucentColorTexture,e.translucentAccumulateTexture],t.createRenderEncoder=()=>{e.translucentRenderEncoder=lr.newInstance({label:"translucentRender"});const n=e.translucentRenderEncoder.getDescription();n.colorAttachments=[{view:void 0,clearValue:[0,0,0,0],loadOp:"clear",storeOp:"store"},{view:void 0,clearValue:[1,0,0,0],loadOp:"clear",storeOp:"store"}],n.depthStencilAttachment={view:void 0,depthLoadOp:"load",depthStoreOp:"store"},e.translucentRenderEncoder.setReplaceShaderCodeFunction(r=>{const a=r.getShaderDescription("fragment");a.addOutput("vec4<f32>","outColor"),a.addOutput("f32","outAccum"),a.addBuiltinInput("vec4<f32>","@builtin(position) fragPos");let s=a.getCode();s=ve.substitute(s,"//VTK::RenderEncoder::Impl",["var w: f32 = computedColor.a * pow(0.1 + input.fragPos.z, 2.0);","output.outColor = vec4<f32>(computedColor.rgb*w, w);","output.outAccum = computedColor.a;"]).result,a.setCode(s)}),e.translucentRenderEncoder.setPipelineHash("oitpr"),e.translucentRenderEncoder.setPipelineSettings({primitive:{cullMode:"none"},depthStencil:{depthWriteEnabled:!1,depthCompare:"greater",format:"depth32float"},fragment:{targets:[{format:"rgba16float",blend:{color:{srcFactor:"one",dstFactor:"one"},alpha:{srcfactor:"one",dstFactor:"one"}}},{format:"r16float",blend:{color:{srcFactor:"zero",dstFactor:"one-minus-src"},alpha:{srcfactor:"one",dstFactor:"one-minus-src-alpha"}}}]}})},t.createFinalEncoder=()=>{e.translucentFinalEncoder=lr.newInstance({label:"translucentFinal"}),e.translucentFinalEncoder.setDescription({colorAttachments:[{view:null,loadOp:"load",storeOp:"store"}]}),e.translucentFinalEncoder.setReplaceShaderCodeFunction(n=>{const r=n.getShaderDescription("fragment");r.addOutput("vec4<f32>","outColor"),r.addBuiltinInput("vec4<f32>","@builtin(position) fragPos");let a=r.getCode();a=ve.substitute(a,"//VTK::RenderEncoder::Impl",["output.outColor = vec4<f32>(computedColor.rgb, computedColor.a);"]).result,r.setCode(a)}),e.translucentFinalEncoder.setPipelineHash("oitpf"),e.translucentFinalEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:"rgba16float",blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{srcfactor:"one",dstFactor:"one-minus-src-alpha"}}}]}})}}const hN={colorTextureView:null,depthTextureView:null};function gS(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,hN,n),hr.extend(t,e,n),L.setGet(t,e,["colorTextureView","depthTextureView"]),pN(t,e)}const dN=L.newInstance(gS,"vtkWebGPUOrderIndependentTranslucentPass");var vN={newInstance:dN,extend:gS};const cs={COMPOSITE_BLEND:0,MAXIMUM_INTENSITY_BLEND:1,MINIMUM_INTENSITY_BLEND:2,AVERAGE_INTENSITY_BLEND:3,ADDITIVE_INTENSITY_BLEND:4,RADON_TRANSFORM_BLEND:5,LABELMAP_EDGE_PROJECTION_BLEND:6},yN=`
//VTK::Renderer::Dec

//VTK::Mapper::Dec

//VTK::TCoord::Dec

//VTK::Volume::TraverseDec

//VTK::RenderEncoder::Dec

//VTK::IOStructs::Dec

fn getTextureValue(vTex: texture_3d<f32>, tpos: vec4<f32>) -> f32
{
  // todo multicomponent support
  return textureSampleLevel(vTex, clampSampler, tpos.xyz, 0.0).r;
}

fn getGradient(vTex: texture_3d<f32>, tpos: vec4<f32>, vNum: i32, scalar: f32) -> vec4<f32>
{
  var result: vec4<f32>;

  var tstep: vec4<f32> = volumeSSBO.values[vNum].tstep;
  result.x = getTextureValue(vTex, tpos + vec4<f32>(tstep.x, 0.0, 0.0, 1.0)) - scalar;
  result.y = getTextureValue(vTex, tpos + vec4<f32>(0.0, tstep.y, 0.0, 1.0)) - scalar;
  result.z = getTextureValue(vTex, tpos + vec4<f32>(0.0, 0.0, tstep.z, 1.0)) - scalar;
  result.w = 0.0;

  // divide by spacing as that is our delta
  result = result / volumeSSBO.values[vNum].spacing;
  // now we have a gradient in unit tcoords

  var grad: f32 = length(result.xyz);
  if (grad > 0.0)
  {
    // rotate to View Coords, needed for lighting and shading
    var nMat: mat4x4<f32> = rendererUBO.SCVCMatrix * volumeSSBO.values[vNum].planeNormals;
    result = nMat * result;
    result = result / length(result);
  }

  // store gradient magnitude in .w
  result.w = grad;

  return result;
}

fn processVolume(vTex: texture_3d<f32>, vNum: i32, cNum: i32, posSC: vec4<f32>, tfunRows: f32) -> vec4<f32>
{
  var outColor: vec4<f32> = vec4<f32>(0.0, 0.0, 0.0, 0.0);

  // convert to tcoords and reject if outside the volume
  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*posSC;
  if (tpos.x < 0.0 || tpos.y < 0.0 || tpos.z < 0.0 ||
      tpos.x > 1.0 || tpos.y > 1.0 || tpos.z > 1.0) { return outColor; }

  var scalar: f32 = getTextureValue(vTex, tpos);

  var coord: vec2<f32> =
    vec2<f32>(scalar * componentSSBO.values[cNum].cScale + componentSSBO.values[cNum].cShift,
      (0.5 + 2.0 * f32(vNum)) / tfunRows);
  var color: vec4<f32> = textureSampleLevel(tfunTexture, clampSampler, coord, 0.0);

  var gofactor: f32 = 1.0;
  var normal: vec4<f32> = vec4<f32>(0.0,0.0,0.0,0.0);
  if (componentSSBO.values[cNum].gomin <  1.0 || volumeSSBO.values[vNum].shade[0] > 0.0)
  {
    normal = getGradient(vTex, tpos, vNum, scalar);
    if (componentSSBO.values[cNum].gomin <  1.0)
    {
      gofactor = clamp(normal.a*componentSSBO.values[cNum].goScale + componentSSBO.values[cNum].goShift,
      componentSSBO.values[cNum].gomin, componentSSBO.values[cNum].gomax);
    }
  }

  coord.x = (scalar * componentSSBO.values[cNum].oScale + componentSSBO.values[cNum].oShift);
  var opacity: f32 = textureSampleLevel(ofunTexture, clampSampler, coord, 0.0).r;

  if (volumeSSBO.values[vNum].shade[0] > 0.0)
  {
    color = color*abs(normal.z);
  }

  outColor = vec4<f32>(color.rgb, gofactor * opacity);

  return outColor;
}

// adjust the start and end point of a raycast such that it intersects the unit cube.
// This function is used to take a raycast starting point and step vector
// and numSteps and return the startijng and ending steps for intersecting the
// unit cube. Recall for a 3D texture, the unit cube is the range of texture coordsinates
// that have valid values. So this funtion can be used to take a ray in texture coordinates
// and bound it to intersecting the texture.
//
fn adjustBounds(tpos: vec4<f32>, tstep: vec4<f32>, numSteps: f32) -> vec2<f32>
{
  var result: vec2<f32> = vec2<f32>(0.0, numSteps);
  var tpos2: vec4<f32> = tpos + tstep*numSteps;

  // move tpos to the start of the volume
  var adjust: f32 =
    min(
      max(tpos.x/tstep.x, (tpos.x - 1.0)/tstep.x),
      min(
        max((tpos.y - 1.0)/tstep.y, tpos.y/tstep.y),
        max((tpos.z - 1.0)/tstep.z, tpos.z/tstep.z)));
  if (adjust < 0.0)
  {
    result.x = result.x - adjust;
  }

  // adjust length to the end
  adjust =
    max(
      min(tpos2.x/tstep.x, (tpos2.x - 1.0)/tstep.x),
      max(
        min((tpos2.y - 1.0)/tstep.y, tpos2.y/tstep.y),
        min((tpos2.z - 1.0)/tstep.z, tpos2.z/tstep.z)));
  if (adjust > 0.0)
  {
    result.y = result.y - adjust;
  }

  return result;
}

fn getSimpleColor(scalar: f32, vNum: i32, cNum: i32) -> vec4<f32>
{
  // how many rows (tfuns) do we have in our tfunTexture
  var tfunRows: f32 = f32(textureDimensions(tfunTexture).y);

  var coord: vec2<f32> =
    vec2<f32>(scalar * componentSSBO.values[cNum].cScale + componentSSBO.values[cNum].cShift,
      (0.5 + 2.0 * f32(vNum)) / tfunRows);
  var color: vec4<f32> = textureSampleLevel(tfunTexture, clampSampler, coord, 0.0);
  coord.x = (scalar * componentSSBO.values[cNum].oScale + componentSSBO.values[cNum].oShift);
  var opacity: f32 = textureSampleLevel(ofunTexture, clampSampler, coord, 0.0).r;
  return vec4<f32>(color.rgb, opacity);
}

fn traverseMax(vTex: texture_3d<f32>, vNum: i32, cNum: i32, rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>)
{
  // convert to tcoords and reject if outside the volume
  var numSteps: f32 = rayLengthSC/mapperUBO.SampleDistance;
  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*minPosSC;
  var tpos2: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*(minPosSC + rayStepSC);
  var tstep: vec4<f32> = tpos2 - tpos;

  var rayBounds: vec2<f32> = adjustBounds(tpos, tstep, numSteps);

  // did we hit anything
  if (rayBounds.x >= rayBounds.y)
  {
    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);
    return;
  }

  tpos = tpos + tstep*rayBounds.x;
  var curDist: f32 = rayBounds.x;
  var maxVal: f32 = -1.0e37;
  loop
  {
    var scalar: f32 = getTextureValue(vTex, tpos);
    if (scalar > maxVal)
    {
      maxVal = scalar;
    }

    // increment position
    curDist = curDist + 1.0;
    tpos = tpos + tstep;

    // check if we have reached a terminating condition
    if (curDist > rayBounds.y) { break; }
  }

  // process to get the color and opacity
  traverseVals[vNum] = getSimpleColor(maxVal, vNum, cNum);
}

fn traverseMin(vTex: texture_3d<f32>, vNum: i32, cNum: i32, rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>)
{
  // convert to tcoords and reject if outside the volume
  var numSteps: f32 = rayLengthSC/mapperUBO.SampleDistance;
  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*minPosSC;
  var tpos2: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*(minPosSC + rayStepSC);
  var tstep: vec4<f32> = tpos2 - tpos;

  var rayBounds: vec2<f32> = adjustBounds(tpos, tstep, numSteps);

  // did we hit anything
  if (rayBounds.x >= rayBounds.y)
  {
    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);
    return;
  }

  tpos = tpos + tstep*rayBounds.x;
  var curDist: f32 = rayBounds.x;
  var minVal: f32 = 1.0e37;
  loop
  {
    var scalar: f32 = getTextureValue(vTex, tpos);
    if (scalar < minVal)
    {
      minVal = scalar;
    }

    // increment position
    curDist = curDist + 1.0;
    tpos = tpos + tstep;

    // check if we have reached a terminating condition
    if (curDist > rayBounds.y) { break; }
  }

  // process to get the color and opacity
  traverseVals[vNum] = getSimpleColor(minVal, vNum, cNum);
}

fn traverseAverage(vTex: texture_3d<f32>, vNum: i32, cNum: i32, rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>)
{
  // convert to tcoords and reject if outside the volume
  var numSteps: f32 = rayLengthSC/mapperUBO.SampleDistance;
  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*minPosSC;
  var tpos2: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*(minPosSC + rayStepSC);
  var tstep: vec4<f32> = tpos2 - tpos;

  var rayBounds: vec2<f32> = adjustBounds(tpos, tstep, numSteps);

  // did we hit anything
  if (rayBounds.x >= rayBounds.y)
  {
    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);
    return;
  }

  let ipRange: vec4<f32> = volumeSSBO.values[vNum].ipScalarRange;
  tpos = tpos + tstep*rayBounds.x;
  var curDist: f32 = rayBounds.x;
  var avgVal: f32 = 0.0;
  var sampleCount: f32 = 0.0;
  loop
  {
    var sample: f32 = getTextureValue(vTex, tpos);
    // right now leave filtering off until WebGL changes get merged
    // if (ipRange.z == 0.0 || sample >= ipRange.x && sample <= ipRange.y)
    // {
      avgVal = avgVal + sample;
      sampleCount = sampleCount + 1.0;
    // }

    // increment position
    curDist = curDist + 1.0;
    tpos = tpos + tstep;

    // check if we have reached a terminating condition
    if (curDist > rayBounds.y) { break; }
  }

  if (sampleCount <= 0.0)
  {
    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);
  }

  // process to get the color and opacity
  traverseVals[vNum] = getSimpleColor(avgVal/sampleCount, vNum, cNum);
}

fn traverseAdditive(vTex: texture_3d<f32>, vNum: i32, cNum: i32, rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>)
{
  // convert to tcoords and reject if outside the volume
  var numSteps: f32 = rayLengthSC/mapperUBO.SampleDistance;
  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*minPosSC;
  var tpos2: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*(minPosSC + rayStepSC);
  var tstep: vec4<f32> = tpos2 - tpos;

  var rayBounds: vec2<f32> = adjustBounds(tpos, tstep, numSteps);

  // did we hit anything
  if (rayBounds.x >= rayBounds.y)
  {
    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);
    return;
  }

  let ipRange: vec4<f32> = volumeSSBO.values[vNum].ipScalarRange;
  tpos = tpos + tstep*rayBounds.x;
  var curDist: f32 = rayBounds.x;
  var sumVal: f32 = 0.0;
  loop
  {
    var sample: f32 = getTextureValue(vTex, tpos);
    // right now leave filtering off until WebGL changes get merged
    // if (ipRange.z == 0.0 || sample >= ipRange.x && sample <= ipRange.y)
    // {
      sumVal = sumVal + sample;
    // }

    // increment position
    curDist = curDist + 1.0;
    tpos = tpos + tstep;

    // check if we have reached a terminating condition
    if (curDist > rayBounds.y) { break; }
  }

  // process to get the color and opacity
  traverseVals[vNum] = getSimpleColor(sumVal, vNum, cNum);
}

fn composite(rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>) -> vec4<f32>
{
  // initial ray position is at the beginning
  var rayPosSC: vec4<f32> = minPosSC;

  // how many rows (tfuns) do we have in our tfunTexture
  var tfunRows: f32 = f32(textureDimensions(tfunTexture).y);

  var curDist: f32 = 0.0;
  var computedColor: vec4<f32> = vec4<f32>(0.0, 0.0, 0.0, 0.0);
  var sampleColor: vec4<f32>;
//VTK::Volume::TraverseCalls

  loop
  {
    // for each volume, sample and accumulate color
//VTK::Volume::CompositeCalls

    // increment position
    curDist = curDist + mapperUBO.SampleDistance;
    rayPosSC = rayPosSC + rayStepSC;

    // check if we have reached a terminating condition
    if (curDist > rayLengthSC) { break; }
    if (computedColor.a > 0.98) { break; }
  }
  return computedColor;
}

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output: fragmentOutput;

  var rayMax: f32 = textureSampleLevel(maxTexture, clampSampler, input.tcoordVS, 0.0).r;
  var rayMin: f32 = textureSampleLevel(minTexture, clampSampler, input.tcoordVS, 0.0).r;

  // discard empty rays
  if (rayMax <= rayMin) { discard; }
  else
  {
    // compute start and end ray positions in view coordinates
    var minPosSC: vec4<f32> = rendererUBO.PCSCMatrix*vec4<f32>(2.0 * input.tcoordVS.x - 1.0, 1.0 - 2.0 * input.tcoordVS.y, rayMax, 1.0);
    minPosSC = minPosSC * (1.0 / minPosSC.w);
    var maxPosSC: vec4<f32> = rendererUBO.PCSCMatrix*vec4<f32>(2.0 * input.tcoordVS.x - 1.0, 1.0 - 2.0 * input.tcoordVS.y, rayMin, 1.0);
    maxPosSC = maxPosSC * (1.0 / maxPosSC.w);

    var rayLengthSC: f32 = distance(minPosSC.xyz, maxPosSC.xyz);
    var rayStepSC: vec4<f32> = (maxPosSC - minPosSC)*(mapperUBO.SampleDistance/rayLengthSC);
    rayStepSC.w = 0.0;

    var computedColor: vec4<f32>;

//VTK::Volume::Loop

//VTK::RenderEncoder::Impl
  }

  return output;
}
`,Vt=new Float64Array(16),zr=new Float64Array(16);function TN(t,e){e.classHierarchy.push("vtkWebGPUVolumePassFSQ"),t.replaceShaderPosition=(a,s,o)=>{const c=s.getShaderDescription("vertex");c.addBuiltinOutput("vec4<f32>","@builtin(position) Position");let f=c.getCode();f=ve.substitute(f,"//VTK::Position::Impl",["output.tcoordVS = vec2<f32>(vertexBC.x * 0.5 + 0.5, 1.0 - vertexBC.y * 0.5 - 0.5);","output.Position = vec4<f32>(vertexBC, 1.0);"]).result,c.setCode(f),s.getShaderDescription("fragment").addBuiltinInput("vec4<f32>","@builtin(position) fragPos")},e.shaderReplacements.set("replaceShaderPosition",t.replaceShaderPosition),t.replaceShaderVolume=(a,s,o)=>{const c=s.getShaderDescription("fragment");let f=c.getCode();const l=[],h=[];for(let d=0;d<e.volumes.length;d++)e.volumes[d].getRenderable().getMapper().getBlendMode()===cs.COMPOSITE_BLEND?(l.push(`    sampleColor = processVolume(volTexture${d}, ${d}, ${e.rowStarts[d]}, rayPosSC, tfunRows);`),l.push(`    computedColor = vec4<f32>(
          sampleColor.a * sampleColor.rgb * (1.0 - computedColor.a) + computedColor.rgb,
          (1.0 - computedColor.a)*sampleColor.a + computedColor.a);`)):(h.push(`  sampleColor = traverseVals[${d}];`),h.push(`  computedColor = vec4<f32>(
          sampleColor.a * sampleColor.rgb * (1.0 - computedColor.a) + computedColor.rgb,
          (1.0 - computedColor.a)*sampleColor.a + computedColor.a);`));f=ve.substitute(f,"//VTK::Volume::CompositeCalls",l).result,f=ve.substitute(f,"//VTK::Volume::TraverseCalls",h).result,f=ve.substitute(f,"//VTK::Volume::TraverseDec",[`var<private> traverseVals: array<vec4<f32>,${e.volumes.length}>;`]).result;let g=!1;for(let d=0;d<e.volumes.length;d++){const v=e.volumes[d].getRenderable().getMapper().getBlendMode();v===cs.COMPOSITE_BLEND?g=!0:v===cs.MAXIMUM_INTENSITY_BLEND?f=ve.substitute(f,"//VTK::Volume::Loop",[`    traverseMax(volTexture${d}, ${d}, ${d}, rayLengthSC, minPosSC, rayStepSC);`,`    computedColor = traverseVals[${d}];`,"//VTK::Volume::Loop"]).result:v===cs.MINIMUM_INTENSITY_BLEND?f=ve.substitute(f,"//VTK::Volume::Loop",[`    traverseMin(volTexture${d}, ${d}, ${d}, rayLengthSC, minPosSC, rayStepSC);`,`    computedColor = traverseVals[${d}];`,"//VTK::Volume::Loop"]).result:v===cs.AVERAGE_INTENSITY_BLEND?f=ve.substitute(f,"//VTK::Volume::Loop",[`    traverseAverage(volTexture${d}, ${d}, ${d}, rayLengthSC, minPosSC, rayStepSC);`,`    computedColor = traverseVals[${d}];`,"//VTK::Volume::Loop"]).result:v===cs.ADDITIVE_INTENSITY_BLEND&&(f=ve.substitute(f,"//VTK::Volume::Loop",[`    traverseAdditive(volTexture${d}, ${d}, ${d}, rayLengthSC, minPosSC, rayStepSC);`,`    computedColor = traverseVals[${d}];`,"//VTK::Volume::Loop"]).result)}g&&(f=ve.substitute(f,"//VTK::Volume::Loop",["    computedColor = composite(rayLengthSC, minPosSC, rayStepSC);"]).result),c.setCode(f)},e.shaderReplacements.set("replaceShaderVolume",t.replaceShaderVolume),t.updateLUTImage=a=>{let s=t.getMTime();for(let g=0;g<e.volumes.length;g++){const d=e.volumes[g].getRenderable(),v=d.getMapper().getInputData();s=Math.max(s,d.getMTime(),v.getMTime())}if(s<e.lutBuildTime.getMTime())return;e.numRows=0,e.rowStarts=[];for(let g=0;g<e.volumes.length;g++){e.rowStarts.push(e.numRows);const v=e.volumes[g].getRenderable(),S=v.getMapper(),T=v.getProperty(),x=S.getInputData(),O=(x.getPointData()&&x.getPointData().getScalars()).getNumberOfComponents(),R=T.getIndependentComponents()?O:1;e.numRows+=R}const o=new Uint8ClampedArray(e.numRows*2*e.rowLength*4),c=new Float32Array(e.numRows*2*e.rowLength);let f=0;const l=new Float32Array(e.rowLength*3),h=e.rowLength;for(let g=0;g<e.volumes.length;g++){const v=e.volumes[g].getRenderable(),S=v.getMapper(),T=v.getProperty(),x=S.getInputData(),O=(x.getPointData()&&x.getPointData().getScalars()).getNumberOfComponents(),R=T.getIndependentComponents()?O:1;for(let M=0;M<R;++M){const D=T.getRGBTransferFunction(M),V=D.getRange();D.getTable(V[0],V[1],h,l,1);let B=f*h*4;for(let H=0;H<h;++H){o[B+H*4]=255*l[H*3],o[B+H*4+1]=255*l[H*3+1],o[B+H*4+2]=255*l[H*3+2],o[B+H*4+3]=255;for(let P=0;P<4;P++)o[B+(h+H)*4+P]=o[B+H*4+P]}const z=T.getScalarOpacity(M),k=e.sampleDist/T.getScalarOpacityUnitDistance(M),U=z.getRange();z.getTable(U[0],U[1],h,l,1),B=f*h;for(let H=0;H<h;++H)c[B+H]=1-(1-l[H])**k,c[B+H+h]=c[B+H];f+=2}}{const g={nativeArray:o,width:e.rowLength,height:e.numRows*2,depth:1,format:"rgba8unorm"},v=a.getTextureManager().getTexture(g).createView("tfunTexture");e.textureViews[2]=v}{const g={nativeArray:c,width:e.rowLength,height:e.numRows*2,depth:1,format:"r16float"},v=a.getTextureManager().getTexture(g).createView("ofunTexture");e.textureViews[3]=v}e.lutBuildTime.modified()},t.updateSSBO=a=>{let s=Math.max(t.getMTime(),e.WebGPURenderer.getStabilizedTime());for(let D=0;D<e.volumes.length;D++){const V=e.volumes[D].getRenderable(),B=V.getMapper(),z=B.getInputData();s=Math.max(s,V.getMTime(),z.getMTime(),B.getMTime())}if(s<e.SSBO.getSendTime())return;const o=e.WebGPURenderer.getStabilizedCenterByReference();e.SSBO.clearData(),e.SSBO.setNumberOfInstances(e.volumes.length);const c=new Float64Array(e.volumes.length*16),f=new Float64Array(e.volumes.length*16),l=new Float64Array(e.volumes.length*4),h=new Float64Array(e.volumes.length*4),g=new Float64Array(e.volumes.length*4),d=new Float64Array(e.volumes.length*4);for(let D=0;D<e.volumes.length;D++){const B=e.volumes[D].getRenderable(),z=B.getMapper(),k=z.getInputData();Ce(Vt),tt(Vt,Vt,o);const U=B.getMatrix();ze(zr,U),Ft(zr,zr),ut(Vt,zr,Vt);const H=k.getWorldToIndex();ut(Vt,H,Vt);const P=k.getDimensions();Ce(zr),La(zr,zr,[1/P[0],1/P[1],1/P[2]]),ut(Vt,zr,Vt);for(let se=0;se<16;se++)c[D*16+se]=Vt[se];Ft(Vt,Vt);for(let se=0;se<4;se++)f[D*16+se*4]=Vt[se*4],f[D*16+se*4+1]=Vt[se*4+1],f[D*16+se*4+2]=Vt[se*4+2],f[D*16+se*4+3]=0;l[D*4]=1/P[0],l[D*4+1]=1/P[1],l[D*4+2]=1/P[2],l[D*4+3]=1,h[D*4]=B.getProperty().getShade()?1:0;const A=k.getSpacing();g[D*4]=A[0],g[D*4+1]=A[1],g[D*4+2]=A[2],g[D*4+3]=1;const ne=e.textureViews[D+4].getTexture().getScale(),ae=z.getIpScalarRange();d[D*4]=ae[0]/ne,d[D*4+1]=ae[1]/ne,d[D*4+2]=z.getFilterMode()}e.SSBO.addEntry("SCTCMatrix","mat4x4<f32>"),e.SSBO.addEntry("planeNormals","mat4x4<f32>"),e.SSBO.addEntry("shade","vec4<f32>"),e.SSBO.addEntry("tstep","vec4<f32>"),e.SSBO.addEntry("spacing","vec4<f32>"),e.SSBO.addEntry("ipScalarRange","vec4<f32>"),e.SSBO.setAllInstancesFromArray("SCTCMatrix",c),e.SSBO.setAllInstancesFromArray("planeNormals",f),e.SSBO.setAllInstancesFromArray("shade",h),e.SSBO.setAllInstancesFromArray("tstep",l),e.SSBO.setAllInstancesFromArray("spacing",g),e.SSBO.setAllInstancesFromArray("ipScalarRange",d),e.SSBO.send(a),e.componentSSBO.clearData(),e.componentSSBO.setNumberOfInstances(e.numRows);const v=new Float64Array(e.numRows),S=new Float64Array(e.numRows),T=new Float64Array(e.numRows),x=new Float64Array(e.numRows),m=new Float64Array(e.numRows),O=new Float64Array(e.numRows),w=new Float64Array(e.numRows),R=new Float64Array(e.numRows);let M=0;for(let D=0;D<e.volumes.length;D++){const B=e.volumes[D].getRenderable(),z=B.getMapper(),k=B.getProperty(),U=z.getInputData(),P=(U.getPointData()&&U.getPointData().getScalars()).getNumberOfComponents(),A=k.getIndependentComponents(),ne=e.textureViews[D+4].getTexture().getFormat(),ae=ht.getDetailsFromTextureFormat(ne),se=ae.elementSize===2&&ae.sampleType==="float",Q={scale:[255],offset:[0]};se&&(Q.scale[0]=1);for(let j=0;j<P;j++){const G=A?j:0,N=Q.scale[j],q=k.getScalarOpacity(G).getRange(),le=N/(q[1]-q[0]),xe=(Q.offset[j]-q[0])/(q[1]-q[0]);x[M]=xe,T[M]=le;const ye=k.getRGBTransferFunction(G).getRange();if(S[M]=(Q.offset[j]-ye[0])/(ye[1]-ye[0]),v[M]=N/(ye[1]-ye[0]),k.getUseGradientOpacity(G)){const Be=k.getGradientOpacityMinimumOpacity(G),yt=k.getGradientOpacityMaximumOpacity(G);m[M]=Be,O[M]=yt;const On=[k.getGradientOpacityMinimumValue(G),k.getGradientOpacityMaximumValue(G)];R[M]=N*(yt-Be)/(On[1]-On[0]),w[M]=-On[0]*(yt-Be)/(On[1]-On[0])+Be}else m[M]=1,O[M]=1,R[M]=0,w[M]=1;M++}}e.componentSSBO.addEntry("cScale","f32"),e.componentSSBO.addEntry("cShift","f32"),e.componentSSBO.addEntry("oScale","f32"),e.componentSSBO.addEntry("oShift","f32"),e.componentSSBO.addEntry("goShift","f32"),e.componentSSBO.addEntry("goScale","f32"),e.componentSSBO.addEntry("gomin","f32"),e.componentSSBO.addEntry("gomax","f32"),e.componentSSBO.setAllInstancesFromArray("cScale",v),e.componentSSBO.setAllInstancesFromArray("cShift",S),e.componentSSBO.setAllInstancesFromArray("oScale",T),e.componentSSBO.setAllInstancesFromArray("oShift",x),e.componentSSBO.setAllInstancesFromArray("goScale",R),e.componentSSBO.setAllInstancesFromArray("goShift",w),e.componentSSBO.setAllInstancesFromArray("gomin",m),e.componentSSBO.setAllInstancesFromArray("gomax",O),e.componentSSBO.send(a)};const n=t.updateBuffers;t.updateBuffers=()=>{n();let a=e.volumes[0].getRenderable().getMapper().getSampleDistance();for(let s=0;s<e.volumes.length;s++){const f=e.volumes[s].getRenderable().getMapper().getSampleDistance();f<a&&(a=f)}e.sampleDist!==a&&(e.sampleDist=a,e.UBO.setValue("SampleDistance",a),e.UBO.sendIfNeeded(e.device));for(let s=0;s<e.volumes.length;s++){const l=e.volumes[s].getRenderable().getMapper().getInputData(),h=e.device.getTextureManager().getTextureForImageData(l);if(!e.textureViews[s+4]||e.textureViews[s+4].getTexture()!==h){const g=h.createView(`volTexture${s}`);e.textureViews[s+4]=g}}if(e.volumes.length<e.lastVolumeLength)for(let s=e.volumes.length;s<e.lastVolumeLength;s++)e.textureViews.pop();e.lastVolumeLength=e.volumes.length,t.updateLUTImage(e.device),t.updateSSBO(e.device),e.clampSampler||(e.clampSampler=I1.newInstance({label:"clampSampler"}),e.clampSampler.create(e.device,{minFilter:"linear",magFilter:"linear"}))},t.computePipelineHash=()=>{e.pipelineHash="volfsq";for(let a=0;a<e.volumes.length;a++){const s=e.volumes[a].getRenderable().getMapper().getBlendMode();e.pipelineHash+=`${s}`}},t.setVolumes=a=>{if(!e.volumes||e.volumes.length!==a.length){e.volumes=[...a],t.modified();return}for(let s=0;s<a.length;s++)if(a[s]!==e.volumes[s]){e.volumes=[...a],t.modified();return}};const r=t.getBindables;t.getBindables=()=>{const a=r();return a.push(e.componentSSBO),a.push(e.clampSampler),a}}const xN={volumes:null,rowLength:1024,lastVolumeLength:0};function pS(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,xN,n),Cs.extend(t,e,n),e.fragmentShaderTemplate=yN,e.UBO=Ma.newInstance({label:"mapperUBO"}),e.UBO.addEntry("SampleDistance","f32"),e.SSBO=n1.newInstance({label:"volumeSSBO"}),e.componentSSBO=n1.newInstance({label:"componentSSBO"}),e.lutBuildTime={},L.obj(e.lutBuildTime,{mtime:0}),TN(t,e)}const SN=L.newInstance(pS,"vtkWebGPUVolumePassFSQ");var CN={newInstance:SN,extend:pS};const{Representation:wN}=Ds,{BufferUsage:ry,PrimitiveTypes:EN}=Zr,Eg=[[0,4,6],[0,6,2],[1,3,7],[1,7,5],[0,5,4],[0,1,5],[2,6,7],[2,7,3],[0,3,1],[0,2,3],[4,5,7],[4,7,6]],mN=`
//VTK::Renderer::Dec

//VTK::Select::Dec

//VTK::VolumePass::Dec

//VTK::TCoord::Dec

//VTK::RenderEncoder::Dec

//VTK::Mapper::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output : fragmentOutput;

  //VTK::Select::Impl

  //VTK::TCoord::Impl

  //VTK::VolumePass::Impl

  // use the maximum (closest) of the current value and the zbuffer
  // the blend func will then take the min to find the farthest stop value
  var stopval: f32 = max(input.fragPos.z, textureLoad(opaquePassDepthTexture, vec2<i32>(i32(input.fragPos.x), i32(input.fragPos.y)), 0));

  //VTK::RenderEncoder::Impl
  return output;
}
`,RN=`
//VTK::Renderer::Dec

//VTK::Mapper::Dec

//VTK::TCoord::Dec

//VTK::RenderEncoder::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output: fragmentOutput;

  var computedColor: vec4<f32> = textureSample(volumePassColorTexture,
    volumePassColorTextureSampler, mapperUBO.tscale*input.tcoordVS);

  //VTK::RenderEncoder::Impl
  return output;
}
`;function ON(t,e){e.classHierarchy.push("vtkWebGPUVolumePass"),t.initialize=n=>{e._clearEncoder||t.createClearEncoder(n),e._mergeEncoder||t.createMergeEncoder(n),e._copyEncoder||t.createCopyEncoder(n),e._depthRangeEncoder||t.createDepthRangeEncoder(n),e.fullScreenQuad||(e.fullScreenQuad=CN.newInstance(),e.fullScreenQuad.setDevice(n.getDevice()),e.fullScreenQuad.setTextureViews([...e._depthRangeEncoder.getColorTextureViews()])),e._volumeCopyQuad||(e._volumeCopyQuad=Cs.newInstance(),e._volumeCopyQuad.setPipelineHash("volpassfsq"),e._volumeCopyQuad.setDevice(n.getDevice()),e._volumeCopyQuad.setFragmentShaderTemplate(RN),e._copyUBO=Ma.newInstance({label:"mapperUBO"}),e._copyUBO.addEntry("tscale","vec2<f32>"),e._volumeCopyQuad.setUBO(e._copyUBO),e._volumeCopyQuad.setTextureViews([e._colorTextureView]))},t.traverse=(n,r)=>{if(e.deleted)return;e._currentParent=r,t.initialize(r),t.computeTiming(r),t.renderDepthBounds(n,r),e._firstGroup=!0;const a=r.getDevice(),s=a.getHandle().limits.maxSampledTexturesPerShaderStage-4;if(e.volumes.length>s){const o=n.getRenderable().getActiveCamera().getPosition(),c=[];for(let g=0;g<e.volumes.length;g++){const d=e.volumes[g].getRenderable().getBounds(),v=[.5*(d[1]+d[0]),.5*(d[3]+d[2]),.5*(d[5]+d[4])];c[g]=Un(v,o)}const f=[...Array(e.volumes.length).keys()];f.sort((g,d)=>c[d]-c[g]);let l=[],h=f.length%s;for(let g=0;g<f.length;g++)l.push(e.volumes[f[g]]),l.length>=h&&(t.rayCastPass(r,n,l),l=[],h=s,e._firstGroup=!1)}else t.rayCastPass(r,n,e.volumes);if(e._volumeCopyQuad.setWebGPURenderer(n),e._useSmallViewport){const o=e._colorTextureView.getTexture().getWidth(),c=e._colorTextureView.getTexture().getHeight();e._copyUBO.setArray("tscale",[e._smallViewportWidth/o,e._smallViewportHeight/c])}else e._copyUBO.setArray("tscale",[1,1]);e._copyUBO.sendIfNeeded(a),e._copyEncoder.setColorTextureView(0,e.colorTextureView),e._copyEncoder.attachTextureViews(),e._copyEncoder.begin(r.getCommandEncoder()),n.scissorAndViewport(e._copyEncoder),e._volumeCopyQuad.prepareAndDraw(e._copyEncoder),e._copyEncoder.end()},t.delete=L.chain(()=>{e._animationRateSubscription&&(e._animationRateSubscription.unsubscribe(),e._animationRateSubscription=null)},t.delete),t.computeTiming=n=>{const r=n.getRenderable().getInteractor();if(e._lastScale==null){const a=e.volumes[0].getRenderable().getMapper();e._lastScale=a.getInitialInteractionScale()||1}e._useSmallViewport=!1,r.isAnimating()&&e._lastScale>1.5&&(e._useSmallViewport=!0),e._colorTexture.resize(n.getCanvas().width,n.getCanvas().height),e._animationRateSubscription||(e._animationRateSubscription=r.onAnimationFrameRateUpdate(()=>{const a=e.volumes[0].getRenderable().getMapper();if(a.getAutoAdjustSampleDistances()){const s=r.getRecentAnimationFrameRate(),o=e._lastScale*r.getDesiredUpdateRate()/s;e._lastScale=o,e._lastScale>400&&(e._lastScale=400)}else e._lastScale=a.getImageSampleDistance()*a.getImageSampleDistance();e._lastScale<1.5&&(e._lastScale=1.5)}))},t.rayCastPass=(n,r,a)=>{const s=e._firstGroup?e._clearEncoder:e._mergeEncoder;s.attachTextureViews(),s.begin(n.getCommandEncoder());let o=e._colorTextureView.getTexture().getWidth(),c=e._colorTextureView.getTexture().getHeight();if(e._useSmallViewport){const f=n.getCanvas(),l=1/Math.sqrt(e._lastScale);e._smallViewportWidth=Math.ceil(l*f.width),e._smallViewportHeight=Math.ceil(l*f.height),o=e._smallViewportWidth,c=e._smallViewportHeight}s.getHandle().setViewport(0,0,o,c,0,1),s.getHandle().setScissorRect(0,0,o,c),e.fullScreenQuad.setWebGPURenderer(r),e.fullScreenQuad.setVolumes(a),e.fullScreenQuad.prepareAndDraw(s),s.end()},t.renderDepthBounds=(n,r)=>{t.updateDepthPolyData(n);const a=e._boundsPoly,s=a.getPoints(),o=a.getPolys();let c={hash:`vp${o.getMTime()}`,usage:ry.Index,cells:o,numberOfPoints:s.getNumberOfPoints(),primitiveType:EN.Triangles,representation:wN.SURFACE};const f=r.getDevice().getBufferManager().getBuffer(c);e._mapper.getVertexInput().setIndexBuffer(f),c={usage:ry.PointArray,format:"float32x4",hash:`vp${s.getMTime()}${o.getMTime()}`,dataArray:s,indexBuffer:f,packExtra:!0};const l=r.getDevice().getBufferManager().getBuffer(c);e._mapper.getVertexInput().addBuffer(l,["vertexBC"]),e._mapper.setNumberOfVertices(l.getSizeInBytes()/l.getStrideInBytes()),t.drawDepthRange(n,r)},t.updateDepthPolyData=n=>{let r=!1;for(let h=0;h<e.volumes.length;h++){const g=e.volumes[h].getMTime();(!e._lastMTimes[h]||g!==e._lastMTimes[h])&&(r=!0,e._lastMTimes[h]=g)}const a=n.getStabilizedTime();if((e._lastMTimes.length<=e.volumes.length||a!==e._lastMTimes[e.volumes.length])&&(r=!0,e._lastMTimes[e.volumes.length]=a),!r)return;const s=n.getStabilizedCenterByReference(),o=e.volumes.length*8,c=new Float64Array(o*3),f=e.volumes.length*12,l=new Uint16Array(f*4);for(let h=0;h<e.volumes.length;h++){e.volumes[h].getBoundingCubePoints(c,h*24);let g=h*12*4;const d=h*8;for(let v=0;v<12;v++)l[g++]=3,l[g++]=d+Eg[v][0],l[g++]=d+Eg[v][1],l[g++]=d+Eg[v][2]}for(let h=0;h<c.length;h+=3)c[h]-=s[0],c[h+1]-=s[1],c[h+2]-=s[2];e._boundsPoly.getPoints().setData(c,3),e._boundsPoly.getPoints().modified(),e._boundsPoly.getPolys().setData(l,1),e._boundsPoly.getPolys().modified(),e._boundsPoly.modified()},t.drawDepthRange=(n,r)=>{e._depthRangeTexture.resizeToMatch(e.colorTextureView.getTexture()),e._depthRangeTexture2.resizeToMatch(e.colorTextureView.getTexture()),e._depthRangeEncoder.attachTextureViews(),t.setCurrentOperation("volumeDepthRangePass"),n.setRenderEncoder(e._depthRangeEncoder),n.volumeDepthRangePass(!0),e._mapper.setWebGPURenderer(n),e._mapper.prepareToDraw(e._depthRangeEncoder),e._mapper.registerDrawCallback(e._depthRangeEncoder),n.volumeDepthRangePass(!1)},t.createDepthRangeEncoder=n=>{const r=n.getDevice();e._depthRangeEncoder=lr.newInstance({label:"VolumePass DepthRange"}),e._depthRangeEncoder.setPipelineHash("volr"),e._depthRangeEncoder.setReplaceShaderCodeFunction(o=>{const c=o.getShaderDescription("fragment");c.addOutput("vec4<f32>","outColor1"),c.addOutput("vec4<f32>","outColor2");let f=c.getCode();f=ve.substitute(f,"//VTK::RenderEncoder::Impl",["output.outColor1 = vec4<f32>(input.fragPos.z, 0.0, 0.0, 0.0);","output.outColor2 = vec4<f32>(stopval, 0.0, 0.0, 0.0);"]).result,c.setCode(f)}),e._depthRangeEncoder.setDescription({colorAttachments:[{view:null,clearValue:[0,0,0,0],loadOp:"clear",storeOp:"store"},{view:null,clearValue:[1,1,1,1],loadOp:"clear",storeOp:"store"}]}),e._depthRangeEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:"r16float",blend:{color:{srcFactor:"one",dstFactor:"one",operation:"max"},alpha:{srcfactor:"one",dstFactor:"one",operation:"max"}}},{format:"r16float",blend:{color:{srcFactor:"one",dstFactor:"one",operation:"min"},alpha:{srcfactor:"one",dstFactor:"one",operation:"min"}}}]}}),e._depthRangeTexture=Hn.newInstance({label:"volumePassMaxDepth"}),e._depthRangeTexture.create(r,{width:n.getCanvas().width,height:n.getCanvas().height,format:"r16float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING});const a=e._depthRangeTexture.createView("maxTexture");e._depthRangeEncoder.setColorTextureView(0,a),e._depthRangeTexture2=Hn.newInstance({label:"volumePassDepthMin"}),e._depthRangeTexture2.create(r,{width:n.getCanvas().width,height:n.getCanvas().height,format:"r16float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING});const s=e._depthRangeTexture2.createView("minTexture");e._depthRangeEncoder.setColorTextureView(1,s),e._mapper.setDevice(n.getDevice()),e._mapper.setTextureViews([e.depthTextureView])},t.createClearEncoder=n=>{e._colorTexture=Hn.newInstance({label:"volumePassColor"}),e._colorTexture.create(n.getDevice(),{width:n.getCanvas().width,height:n.getCanvas().height,format:"bgra8unorm",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_SRC}),e._colorTextureView=e._colorTexture.createView("volumePassColorTexture"),e._colorTextureView.addSampler(n.getDevice(),{minFilter:"linear",magFilter:"linear"}),e._clearEncoder=lr.newInstance({label:"VolumePass Clear"}),e._clearEncoder.setColorTextureView(0,e._colorTextureView),e._clearEncoder.setDescription({colorAttachments:[{view:null,clearValue:[0,0,0,0],loadOp:"clear",storeOp:"store"}]}),e._clearEncoder.setPipelineHash("volpf"),e._clearEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:"bgra8unorm",blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{srcfactor:"one",dstFactor:"one-minus-src-alpha"}}}]}})},t.createCopyEncoder=n=>{e._copyEncoder=lr.newInstance({label:"volumePassCopy"}),e._copyEncoder.setDescription({colorAttachments:[{view:null,loadOp:"load",storeOp:"store"}]}),e._copyEncoder.setPipelineHash("volcopypf"),e._copyEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:"rgba16float",blend:{color:{srcFactor:"one",dstFactor:"one-minus-src-alpha"},alpha:{srcfactor:"one",dstFactor:"one-minus-src-alpha"}}}]}})},t.createMergeEncoder=n=>{e._mergeEncoder=lr.newInstance({label:"volumePassMerge"}),e._mergeEncoder.setColorTextureView(0,e._colorTextureView),e._mergeEncoder.setDescription({colorAttachments:[{view:null,loadOp:"load",storeOp:"store"}]}),e._mergeEncoder.setReplaceShaderCodeFunction(r=>{const a=r.getShaderDescription("fragment");a.addOutput("vec4<f32>","outColor");let s=a.getCode();s=ve.substitute(s,"//VTK::RenderEncoder::Impl",["output.outColor = vec4<f32>(computedColor.rgb, computedColor.a);"]).result,a.setCode(s)}),e._mergeEncoder.setPipelineHash("volpf"),e._mergeEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:"bgra8unorm",blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{srcfactor:"one",dstFactor:"one-minus-src-alpha"}}}]}})},t.setVolumes=n=>{if(!e.volumes||e.volumes.length!==n.length){e.volumes=[...n],t.modified();return}for(let r=0;r<n.length;r++)if(n[r]!==e.volumes[r]){e.volumes=[...n],t.modified();return}}}const DN={colorTextureView:null,depthTextureView:null,volumes:null};function hS(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,DN,n),hr.extend(t,e,n),e._mapper=X1.newInstance(),e._mapper.setFragmentShaderTemplate(mN),e._mapper.getShaderReplacements().set("replaceShaderVolumePass",(r,a,s)=>{a.getShaderDescription("fragment").addBuiltinInput("vec4<f32>","@builtin(position) fragPos")}),e._boundsPoly=jn.newInstance(),e._lastMTimes=[],L.setGet(t,e,["colorTextureView","depthTextureView"]),ON(t,e)}const MN=L.newInstance(hS,"vtkWebGPUVolumePass");var LN={newInstance:MN,extend:hS};const _N=`
//VTK::Mapper::Dec

//VTK::TCoord::Dec

//VTK::RenderEncoder::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output: fragmentOutput;

  var computedColor: vec4<f32> = clamp(textureSampleLevel(opaquePassColorTexture, finalPassSampler, input.tcoordVS, 0.0),vec4<f32>(0.0),vec4<f32>(1.0));

  //VTK::RenderEncoder::Impl
  return output;
}
`;function VN(t,e){e.classHierarchy.push("vtkForwardPass"),t.traverse=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(e.deleted)return;e._currentParent=r,t.setCurrentOperation("buildPass"),n.traverse(t),e.opaquePass||(e.opaquePass=lN.newInstance());const a=n.getRenderable().getNumberOfLayers(),s=n.getChildren();for(let o=0;o<a;o++)for(let c=0;c<s.length;c++){const f=s[c],l=n.getRenderable().getRenderers()[c];l.getDraw()&&l.getLayer()===o&&(e.opaqueActorCount=0,e.translucentActorCount=0,e.volumes=[],t.setCurrentOperation("queryPass"),f.traverse(t),t.setCurrentOperation("cameraPass"),f.traverse(t),e.opaquePass.traverse(f,n),e.translucentActorCount>0&&(e.translucentPass||(e.translucentPass=vN.newInstance()),e.translucentPass.setColorTextureView(e.opaquePass.getColorTextureView()),e.translucentPass.setDepthTextureView(e.opaquePass.getDepthTextureView()),e.translucentPass.traverse(f,n)),e.volumes.length>0&&(e.volumePass||(e.volumePass=LN.newInstance()),e.volumePass.setColorTextureView(e.opaquePass.getColorTextureView()),e.volumePass.setDepthTextureView(e.opaquePass.getDepthTextureView()),e.volumePass.setVolumes(e.volumes),e.volumePass.traverse(f,n)),t.finalPass(n,f))}},t.finalPass=(n,r)=>{e._finalBlitEncoder||t.createFinalBlitEncoder(n),e._finalBlitOutputTextureView.createFromTextureHandle(n.getCurrentTexture(),{depth:1,format:n.getPresentationFormat()}),e._finalBlitEncoder.attachTextureViews(),e._finalBlitEncoder.begin(n.getCommandEncoder()),r.scissorAndViewport(e._finalBlitEncoder),e._fullScreenQuad.prepareAndDraw(e._finalBlitEncoder),e._finalBlitEncoder.end()},t.createFinalBlitEncoder=n=>{e._finalBlitEncoder=lr.newInstance({label:"forwardPassBlit"}),e._finalBlitEncoder.setDescription({colorAttachments:[{view:null,loadOp:"load",storeOp:"store"}]}),e._finalBlitEncoder.setPipelineHash("fpf"),e._finalBlitEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:n.getPresentationFormat(),blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{srcfactor:"one",dstFactor:"one-minus-src-alpha"}}}]}}),e._fsqSampler=I1.newInstance({label:"finalPassSampler"}),e._fsqSampler.create(n.getDevice(),{minFilter:"linear",magFilter:"linear"}),e._fullScreenQuad=Cs.newInstance(),e._fullScreenQuad.setDevice(n.getDevice()),e._fullScreenQuad.setPipelineHash("fpfsq"),e._fullScreenQuad.setTextureViews([e.opaquePass.getColorTextureView()]),e._fullScreenQuad.setAdditionalBindables([e._fsqSampler]),e._fullScreenQuad.setFragmentShaderTemplate(_N),e._finalBlitOutputTextureView=D2.newInstance(),e._finalBlitEncoder.setColorTextureView(0,e._finalBlitOutputTextureView)},t.incrementOpaqueActorCount=()=>e.opaqueActorCount++,t.incrementTranslucentActorCount=()=>e.translucentActorCount++,t.addVolume=n=>{e.volumes.push(n)}}const kN={opaqueActorCount:0,translucentActorCount:0,volumes:null,opaqueRenderEncoder:null,translucentPass:null,volumePass:null};function dS(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,kN,n),hr.extend(t,e,n),L.setGet(t,e,["opaquePass","translucentPass","volumePass"]),VN(t,e)}const BN=L.newInstance(dS,"vtkForwardPass");var FN={newInstance:BN,extend:dS};const{VtkDataTypes:xa}=Oe;function NN(t,e){e.classHierarchy.push("vtkWebGPUTextureManager");function n(a){if(a.imageData){a.dataArray=a.imageData.getPointData().getScalars(),a.time=a.dataArray.getMTime(),a.nativeArray=a.dataArray.getData();const s=a.imageData.getDimensions();switch(a.width=s[0],a.height=s[1],a.depth=s[2],a.dataArray.getNumberOfComponents()){case 1:a.format="r";break;case 2:a.format="rg";break;case 3:case 4:default:a.format="rgba";break}switch(a.dataArray.getDataType()){case xa.UNSIGNED_CHAR:a.format+="8unorm";break;case xa.FLOAT:case xa.UNSIGNED_INT:case xa.INT:case xa.DOUBLE:case xa.UNSIGNED_SHORT:case xa.SHORT:default:a.format+="16float";break}}a.image&&(a.width=a.image.width,a.height=a.image.height,a.depth=1,a.format="rgba8unorm"),a.jsImageData&&(a.width=a.jsImageData.width,a.height=a.jsImageData.height,a.depth=1,a.format="rgba8unorm",a.flip=!0,a.nativeArray=a.jsImageData.data),a.canvas&&(a.width=a.canvas.width,a.height=a.canvas.height,a.depth=1,a.format="rgba8unorm",a.flip=!0,a.usage=GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT)}function r(a){const s=Hn.newInstance();return s.create(e.device,{width:a.width,height:a.height,depth:a.depth,format:a.format,usage:a.usage,mipLevel:a.mipLevel}),(a.nativeArray||a.image||a.canvas)&&s.writeImageData(a),s}t.getTexture=a=>a.hash?e.device.getCachedObject(a.hash,r,a):r(a),t.getTextureForImageData=a=>{const s={time:a.getMTime()};return s.imageData=a,n(s),s.hash=s.time+s.format+s.mipLevel,e.device.getTextureManager().getTexture(s)},t.getTextureForVTKTexture=a=>{const s={time:a.getMTime()};return a.getInputData()?s.imageData=a.getInputData():a.getImage()?s.image=a.getImage():a.getJsImageData()?s.jsImageData=a.getJsImageData():a.getCanvas()&&(s.canvas=a.getCanvas()),n(s),s.mipLevel=a.getMipLevel(),s.hash=s.time+s.format+s.mipLevel,e.device.getTextureManager().getTexture(s)}}const UN={handle:null,device:null};function vS(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,UN,n),L.obj(t,e),L.setGet(t,e,["device"]),NN(t,e)}const GN=L.newInstance(vS);var $N={newInstance:GN,extend:vS};class zN extends Map{constructor(){super(),this.registry=new FinalizationRegistry(e=>{const n=super.get(e);n&&n.deref&&n.deref()===void 0&&super.delete(e)})}getValue(e){const n=super.get(e);if(n){const r=n.deref();if(r!==void 0)return r;super.delete(e)}}setValue(e,n){let r;return n&&typeof n=="object"&&(r=new WeakRef(n),this.registry.register(n,e),super.set(e,r)),r}}function WN(t,e){e.classHierarchy.push("vtkWebGPUDevice"),t.initialize=n=>{e.handle=n},t.createCommandEncoder=()=>e.handle.createCommandEncoder(),t.submitCommandEncoder=n=>{e.handle.queue.submit([n.finish()])},t.getShaderModule=n=>e.shaderCache.getShaderModule(n),t.getBindGroupLayout=n=>{if(!n.entries)return null;for(let s=0;s<n.entries.length;s++){const o=n.entries[s];o.binding=o.binding||0,o.visibility=o.visibility||GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT}const r=JSON.stringify(n);for(let s=0;s<e.bindGroupLayouts.length;s++)if(e.bindGroupLayouts[s].sval===r)return e.bindGroupLayouts[s].layout;const a=e.handle.createBindGroupLayout(n);return e.bindGroupLayouts.push({sval:r,layout:a}),a},t.getBindGroupLayoutDescription=n=>{for(let r=0;r<e.bindGroupLayouts.length;r++)if(e.bindGroupLayouts[r].layout===n)return e.bindGroupLayouts[r].sval;return vtkErrorMacro("layout not found"),console.trace(),null},t.getPipeline=n=>n in e.pipelines?e.pipelines[n]:null,t.createPipeline=(n,r)=>{r.initialize(t,n),e.pipelines[n]=r},t.onSubmittedWorkDone=()=>e.handle.queue.onSubmittedWorkDone(),t.hasCachedObject=n=>e.objectCache.getValue(n),t.getCachedObject=function(n,r){if(!n)return vtkErrorMacro("attempt to cache an object without a hash"),null;const a=e.objectCache.getValue(n);if(a)return a;for(var s=arguments.length,o=new Array(s>2?s-2:0),c=2;c<s;c++)o[c-2]=arguments[c];const f=r(...o);return e.objectCache.setValue(n,f),f}}const HN={handle:null,pipelines:null,shaderCache:null,bindGroupLayouts:null,bufferManager:null,textureManager:null};function yS(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,HN,n),vt(t,e),ct(t,e,["handle"]),Nt(t,e,["bufferManager","shaderCache","textureManager"]),e.objectCache=new zN,e.shaderCache=ve.newInstance(),e.shaderCache.setDevice(t),e.bindGroupLayouts=[],e.bufferManager=Zr.newInstance(),e.bufferManager.setDevice(t),e.textureManager=$N.newInstance(),e.textureManager.setDevice(t),e.pipelines={},WN(t,e)}const bN=Ne(yS,"vtkWebGPUDevice");var AN={newInstance:bN,extend:yS};function jN(t,e){e.classHierarchy.push("vtkWebGPUHardwareSelectionPass"),t.traverse=(n,r)=>{if(e.deleted)return;e._currentParent=null,t.setCurrentOperation("buildPass"),n.traverse(t);const a=n.getDevice();if(e.selectionRenderEncoder)e.colorTexture.resize(n.getCanvas().width,n.getCanvas().height),e.depthTexture.resizeToMatch(e.colorTexture);else{t.createRenderEncoder(),e.colorTexture=Hn.newInstance({label:"hardwareSelectorColor"}),e.colorTexture.create(a,{width:n.getCanvas().width,height:n.getCanvas().height,format:"rgba32uint",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC});const s=e.colorTexture.createView("hardwareSelectColorTexture");e.selectionRenderEncoder.setColorTextureView(0,s),e.depthTexture=Hn.newInstance({label:"hardwareSelectorDepth"}),e.depthTexture.create(a,{width:n.getCanvas().width,height:n.getCanvas().height,format:"depth32float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC});const o=e.depthTexture.createView("hardwareSelectDepthTexture");e.selectionRenderEncoder.setDepthTextureView(o)}e.selectionRenderEncoder.attachTextureViews(),r.setRenderEncoder(e.selectionRenderEncoder),t.setCurrentOperation("cameraPass"),r.traverse(t),t.setCurrentOperation("opaquePass"),r.traverse(t)},t.createRenderEncoder=()=>{e.selectionRenderEncoder=lr.newInstance({label:"HardwareSelectionPass"}),e.selectionRenderEncoder.setPipelineHash("sel"),e.selectionRenderEncoder.setReplaceShaderCodeFunction(r=>{const a=r.getShaderDescription("fragment");a.addOutput("vec4<u32>","outColor");let s=a.getCode();s=ve.substitute(s,"//VTK::RenderEncoder::Impl",["output.outColor = vec4<u32>(mapperUBO.PropID, compositeID, 0u, 0u);"]).result,a.setCode(s)});const n=e.selectionRenderEncoder.getDescription();n.colorAttachments[0].clearValue=[0,0,0,0],e.selectionRenderEncoder.setPipelineSettings({primitive:{cullMode:"none"},depthStencil:{depthWriteEnabled:!0,depthCompare:"greater",format:"depth32float"},fragment:{targets:[{format:"rgba32uint",blend:void 0}]}})}}const KN={selectionRenderEncoder:null,colorTexture:null,depthTexture:null};function TS(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,KN,n),hr.extend(t,e,n),L.get(t,e,["colorTexture","depthTexture"]),jN(t,e)}const PN=L.newInstance(TS,"vtkWebGPUHardwareSelectionPass");var XN={newInstance:PN,extend:TS};const{SelectionContent:IN,SelectionField:ay}=kc,{FieldAssociations:sy}=ka,{vtkErrorMacro:xS}=L;function YN(t){return`${t.propID} ${t.compositeID}`}function iy(t,e,n,r){const a=((n.height-e-1)*n.colorBufferWidth+t)*4+r;return n.colorValues[a]}function qN(t,e,n,r){{if(r[0]=e[0],r[1]=e[1],e[0]<0||e[0]>=t.width||e[1]<0||e[1]>=t.height)return null;const a=iy(e[0],e[1],t,0);if(a<=0)return null;const s={};s.propID=a;let o=iy(e[0],e[1],t,1);if((o<0||o>16777215)&&(o=0),s.compositeID=o,t.captureZValues){const c=(t.height-e[1]-1)*t.zbufferBufferWidth+e[0];s.zValue=t.depthValues[c],s.zValue=t.webGPURenderer.convertToOpenGLDepth(s.zValue),s.displayPosition=e}return s}}function QN(t,e,n){const r=[];let a=0;return e.forEach((s,o)=>{const c=kc.newInstance();switch(c.setContentType(IN.INDICES),t){case sy.FIELD_ASSOCIATION_CELLS:c.setFieldType(ay.CELL);break;case sy.FIELD_ASSOCIATION_POINTS:c.setFieldType(ay.POINT);break;default:xS("Unknown field association")}c.getProperties().propID=s.info.propID;const f=n.webGPURenderer.getPropFromID(s.info.propID);c.getProperties().prop=f.getRenderable(),c.getProperties().compositeID=s.info.compositeID,c.getProperties().pixelCount=s.pixelCount,n.captureZValues&&(c.getProperties().displayPosition=[s.info.displayPosition[0],s.info.displayPosition[1],s.info.zValue],c.getProperties().worldPosition=n.webGPURenderWindow.displayToWorld(s.info.displayPosition[0],s.info.displayPosition[1],s.info.zValue,n.renderer)),c.setSelectionList(s.attributeIDs),r[a]=c,a++}),r}function ZN(t,e,n,r,a){const s=Math.floor(e),o=Math.floor(n),c=Math.floor(r),f=Math.floor(a),l=new Map,h=[0,0];for(let g=o;g<=f;g++)for(let d=s;d<=c;d++){const S=qN(t,[d,g],0,h);if(S){const T=YN(S);if(!l.has(T))l.set(T,{info:S,pixelCount:1,attributeIDs:[S.attributeID]});else{const x=l.get(T);x.pixelCount++,t.captureZValues&&S.zValue<x.info.zValue&&(x.info=S),x.attributeIDs.indexOf(S.attributeID)===-1&&x.attributeIDs.push(S.attributeID)}}}return QN(t.fieldAssociation,l,t)}function JN(t,e){e.classHierarchy.push("vtkWebGPUHardwareSelector"),t.endSelection=()=>{e.WebGPURenderer.setSelector(null)},t.getSourceDataAsync=async n=>{if(!n||!e._WebGPURenderWindow)return xS("Renderer and view must be set before calling Select."),!1;e._WebGPURenderWindow.getRenderable().preRender(),e._WebGPURenderWindow.getInitialized()||(e._WebGPURenderWindow.initialize(),await new Promise(v=>{e._WebGPURenderWindow.onInitialized(v)}));const r=e._WebGPURenderWindow.getViewNodeFor(n);if(!r)return!1;const a=r.getSuppressClear();r.setSuppressClear(!0),e._selectionPass.traverse(e._WebGPURenderWindow,r),r.setSuppressClear(a);const s=e._WebGPURenderWindow.getDevice(),o=e._selectionPass.getColorTexture(),c=e._selectionPass.getDepthTexture(),f={area:[0,0,o.getWidth()-1,o.getHeight()-1],captureZValues:e.captureZValues,fieldAssociation:e.fieldAssociation,renderer:n,webGPURenderer:r,webGPURenderWindow:e._WebGPURenderWindow,width:o.getWidth(),height:o.getHeight()};f.colorBufferWidth=16*Math.floor((f.width+15)/16),f.colorBufferSizeInBytes=f.colorBufferWidth*f.height*4*4;const l=ws.newInstance({label:"hardwareSelectColorBuffer"});l.setDevice(s),l.create(f.colorBufferSizeInBytes,GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST);const h=e._WebGPURenderWindow.getCommandEncoder();h.copyTextureToBuffer({texture:o.getHandle()},{buffer:l.getHandle(),bytesPerRow:16*f.colorBufferWidth,rowsPerImage:f.height},{width:f.width,height:f.height,depthOrArrayLayers:1});let g;e.captureZValues&&(f.zbufferBufferWidth=64*Math.floor((f.width+63)/64),g=ws.newInstance({label:"hardwareSelectDepthBuffer"}),g.setDevice(s),f.zbufferSizeInBytes=f.height*f.zbufferBufferWidth*4,g.create(f.zbufferSizeInBytes,GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST),h.copyTextureToBuffer({texture:c.getHandle(),aspect:"depth-only"},{buffer:g.getHandle(),bytesPerRow:4*f.zbufferBufferWidth,rowsPerImage:f.height},{width:f.width,height:f.height,depthOrArrayLayers:1})),s.submitCommandEncoder(h);const d=l.mapAsync(GPUMapMode.READ);if(e.captureZValues){const v=g.mapAsync(GPUMapMode.READ);await Promise.all([d,v]),f.depthValues=new Float32Array(g.getMappedRange().slice()),g.unmap()}else await d;return f.colorValues=new Uint32Array(l.getMappedRange().slice()),l.unmap(),f.generateSelection=(v,S,T,x)=>ZN(f,v,S,T,x),f}}const eU={};function SS(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,eU,n),Y2.extend(t,e,n),e._selectionPass=XN.newInstance(),L.setGet(t,e,["_WebGPURenderWindow"]),L.moveToProtected(t,e,["WebGPURenderWindow"]),JN(t,e)}const tU=L.newInstance(SS,"vtkWebGPUHardwareSelector");var CS={newInstance:tU,extend:SS};const{vtkErrorMacro:oy}=L,nU={position:"absolute",top:0,left:0,width:"100%",height:"100%"};function rU(t,e){e.classHierarchy.push("vtkWebGPURenderWindow"),t.getViewNodeFactory=()=>e.myFactory;const n=[0,0];function r(){e.renderable&&(e.size[0]!==n[0]||e.size[1]!==n[1])&&(n[0]=e.size[0],n[1]=e.size[1],e.canvas.setAttribute("width",e.size[0]),e.canvas.setAttribute("height",e.size[1]),t.recreateSwapChain()),e.viewStream&&e.viewStream.setSize(e.size[0],e.size[1]),e.canvas.style.display=e.useOffScreen?"none":"block",e.el&&(e.el.style.cursor=e.cursorVisibility?e.cursor:"none"),e.containerSize=null}t.onModified(r),t.recreateSwapChain=()=>{e.context&&(e.context.unconfigure(),e.presentationFormat=navigator.gpu.getPreferredCanvasFormat(e.adapter),e.context.configure({device:e.device.getHandle(),format:e.presentationFormat,alphaMode:"premultiplied",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_DST,width:e.size[0],height:e.size[1]}),e._configured=!0)},t.getCurrentTexture=()=>e.context.getCurrentTexture(),t.buildPass=o=>{if(o){if(!e.renderable)return;t.prepareNodes(),t.addMissingNodes(e.renderable.getRenderersByReference()),t.removeUnusedNodes(),t.initialize()}else e.initialized&&(e._configured||t.recreateSwapChain(),e.commandEncoder=e.device.createCommandEncoder())},t.initialize=()=>{if(!e.initializing){if(e.initializing=!0,!navigator.gpu){oy("WebGPU is not enabled.");return}t.create3DContextAsync().then(()=>{e.initialized=!0,!e.deleted&&t.invokeInitialized()})}},t.setContainer=o=>{e.el&&e.el!==o&&(e.canvas.parentNode!==e.el&&oy("Error: canvas parent node does not match container"),e.el.removeChild(e.canvas),e.el.contains(e.bgImage)&&e.el.removeChild(e.bgImage)),e.el!==o&&(e.el=o,e.el&&(e.el.appendChild(e.canvas),e.useBackgroundImage&&e.el.appendChild(e.bgImage)),t.modified())},t.getContainer=()=>e.el,t.getContainerSize=()=>{if(!e.containerSize&&e.el){const{width:o,height:c}=e.el.getBoundingClientRect();e.containerSize=[o,c]}return e.containerSize||e.size},t.getFramebufferSize=()=>e.size,t.create3DContextAsync=async()=>{if(e.adapter=await navigator.gpu.requestAdapter({powerPreference:"high-performance"}),!e.deleted){if(e.device=AN.newInstance(),e.device.initialize(await e.adapter.requestDevice()),e.deleted){e.device=null;return}e.context=e.canvas.getContext("webgpu")}},t.releaseGraphicsResources=()=>{const o=hr.newInstance();o.setCurrentOperation("Release"),o.traverse(t,null),e.adapter=null,e.device=null,e.context=null,e.initialized=!1,e.initializing=!1},t.setBackgroundImage=o=>{e.bgImage.src=o.src},t.setUseBackgroundImage=o=>{e.useBackgroundImage=o,e.useBackgroundImage&&!e.el.contains(e.bgImage)?e.el.appendChild(e.bgImage):!e.useBackgroundImage&&e.el.contains(e.bgImage)&&e.el.removeChild(e.bgImage)};async function a(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.imageFormat;const c=document.createElement("canvas"),f=c.getContext("2d");c.width=e.canvas.width,c.height=e.canvas.height;const l=await t.getPixelsAsync(),h=new ImageData(l.colorValues,l.width,l.height);f.putImageData(h,0,0);const g=e.canvas.getBoundingClientRect();e.renderable.getRenderers().forEach(T=>{T.getViewProps().forEach(m=>{if(m.getContainer){const w=m.getContainer().getElementsByTagName("canvas");for(let R=0;R<w.length;R++){const M=w[R],D=M.getBoundingClientRect(),V=D.x-g.x,B=D.y-g.y;f.drawImage(M,V,B)}}})});const S=c.toDataURL(o);c.remove(),t.invokeImageReady(S)}t.captureNextImage=function(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"image/png",{resetCamera:c=!1,size:f=null,scale:l=1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e.deleted)return null;e.imageFormat=o;const h=e.notifyStartCaptureImage;return e.notifyStartCaptureImage=!0,e._screenshot={size:f||l!==1?f||e.size.map(g=>g*l):null},new Promise((g,d)=>{const v=t.onImageReady(S=>{if(e._screenshot.size===null)e.notifyStartCaptureImage=h,v.unsubscribe(),e._screenshot.placeHolder&&(e.size=e._screenshot.originalSize,t.modified(),e._screenshot.cameras&&e._screenshot.cameras.forEach(T=>{let{restoreParamsFn:x,arg:m}=T;return x(m)}),t.traverseAllPasses(),e.el.removeChild(e._screenshot.placeHolder),e._screenshot.placeHolder.remove(),e._screenshot=null),g(S);else{const T=document.createElement("img");if(T.style=nU,T.src=S,e._screenshot.placeHolder=e.el.appendChild(T),e.canvas.style.display="none",e._screenshot.originalSize=e.size,e.size=e._screenshot.size,e._screenshot.size=null,t.modified(),c){const x=c!==!0;e._screenshot.cameras=e.renderable.getRenderers().map(m=>{const O=m.getActiveCamera(),w=O.get("focalPoint","position","parallelScale");return{resetCameraArgs:x?{renderer:m}:void 0,resetCameraFn:x?c:m.resetCamera,restoreParamsFn:O.set,arg:JSON.parse(JSON.stringify(w))}}),e._screenshot.cameras.forEach(m=>{let{resetCameraFn:O,resetCameraArgs:w}=m;return O(w)})}t.traverseAllPasses()}})})},t.traverseAllPasses=()=>{if(!e.deleted)if(e.initialized){if(e.renderPasses)for(let o=0;o<e.renderPasses.length;++o)e.renderPasses[o].traverse(t,null);e.commandEncoder&&(e.device.submitCommandEncoder(e.commandEncoder),e.commandEncoder=null,e.notifyStartCaptureImage&&e.device.onSubmittedWorkDone().then(()=>{a()}))}else{t.initialize();const o=t.onInitialized(()=>{o.unsubscribe(),t.traverseAllPasses()})}},t.setViewStream=o=>{if(e.viewStream===o)return!1;if(e.subscription&&(e.subscription.unsubscribe(),e.subscription=null),e.viewStream=o,e.viewStream){const c=e.renderable.getRenderers()[0];c.getBackgroundByReference()[3]=0,t.setUseBackgroundImage(!0),e.subscription=e.viewStream.onImageReady(f=>t.setBackgroundImage(f.image)),e.viewStream.setSize(e.size[0],e.size[1]),e.viewStream.invalidateCache(),e.viewStream.render(),t.modified()}return!0},t.getUniquePropID=()=>e.nextPropID++,t.getPropFromID=o=>{for(let c=0;c<e.children.length;c++){const f=e.children[c].getPropFromID(o);if(f!==null)return f}return null},t.getPixelsAsync=async()=>{const o=e.device,c=e.renderPasses[0].getOpaquePass().getColorTexture(),f={width:c.getWidth(),height:c.getHeight()};f.colorBufferWidth=32*Math.floor((f.width+31)/32),f.colorBufferSizeInBytes=f.colorBufferWidth*f.height*8;const l=ws.newInstance();l.setDevice(o),l.create(f.colorBufferSizeInBytes,GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST);const h=e.device.createCommandEncoder();h.copyTextureToBuffer({texture:c.getHandle()},{buffer:l.getHandle(),bytesPerRow:8*f.colorBufferWidth,rowsPerImage:f.height},{width:f.width,height:f.height,depthOrArrayLayers:1}),o.submitCommandEncoder(h),await l.mapAsync(GPUMapMode.READ),f.colorValues=new Uint16Array(l.getMappedRange().slice()),l.unmap();const d=new Uint8ClampedArray(f.height*f.width*4);for(let v=0;v<f.height;v++)for(let S=0;S<f.width;S++){const T=(v*f.width+S)*4,x=(v*f.colorBufferWidth+S)*4;d[T]=255*Rn.fromHalf(f.colorValues[x]),d[T+1]=255*Rn.fromHalf(f.colorValues[x+1]),d[T+2]=255*Rn.fromHalf(f.colorValues[x+2]),d[T+3]=255*Rn.fromHalf(f.colorValues[x+3])}return f.colorValues=d,f},t.createSelector=()=>{const o=CS.newInstance();return o.setWebGPURenderWindow(t),o};const s=t.setSize;t.setSize=(o,c)=>{const f=s(o,c);return f&&t.invokeWindowResizeEvent({width:o,height:c}),f},t.delete=L.chain(t.delete,t.setViewStream)}const aU={initialized:!1,context:null,adapter:null,device:null,canvas:null,cursorVisibility:!0,cursor:"pointer",containerSize:null,renderPasses:[],notifyStartCaptureImage:!1,imageFormat:"image/png",useOffScreen:!1,useBackgroundImage:!1,nextPropID:1,xrSupported:!1,presentationFormat:null};function sU(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,aU,n),e.canvas=document.createElement("canvas"),e.canvas.style.width="100%",e.bgImage=new Image,e.bgImage.style.position="absolute",e.bgImage.style.left="0",e.bgImage.style.top="0",e.bgImage.style.width="100%",e.bgImage.style.height="100%",e.bgImage.style.zIndex="-1",oS.extend(t,e,n),e.myFactory=V_.newInstance(),e.renderPasses[0]=FN.newInstance(),e.selector||(e.selector=CS.newInstance(),e.selector.setWebGPURenderWindow(t)),L.event(t,e,"imageReady"),L.event(t,e,"initialized"),L.get(t,e,["commandEncoder","device","presentationFormat","useBackgroundImage","xrSupported"]),L.setGet(t,e,["initialized","context","canvas","device","renderPasses","notifyStartCaptureImage","cursor","useOffScreen"]),L.setGetArray(t,e,["size"],2),L.event(t,e,"windowResizeEvent"),rU(t,e)}const wS=L.newInstance(sU,"vtkWebGPURenderWindow");Y1("WebGPU",wS);Xn("vtkRenderWindow",wS);const iU=eF.extractURLParameters();function oU(t,e){const n=t.invokeResize;delete t.invokeResize,e.renderWindow=DB.newInstance(),e.renderer=CB.newInstance(),e.renderWindow.addRenderer(e.renderer),e._apiSpecificRenderWindow=e.renderWindow.newAPISpecificView(iU.viewAPI??e.defaultViewAPI),e.renderWindow.addView(e._apiSpecificRenderWindow),e.interactor=W2.newInstance(),e.interactor.setInteractorStyle(QB.newInstance()),e.interactor.setView(e._apiSpecificRenderWindow),e.interactor.initialize(),t.setBackground=e.renderer.setBackground,t.setBackground(...e.background),t.resize=()=>{if(e.container){const r=e.container.getBoundingClientRect(),a=window.devicePixelRatio||1;e._apiSpecificRenderWindow.setSize(Math.floor(r.width*a),Math.floor(r.height*a)),n(),e.renderWindow.render()}},t.setContainer=r=>{e.container&&e.interactor.unbindEvents(e.container),e.container=r,e._apiSpecificRenderWindow.setContainer(e.container),e.container&&e.interactor.bindEvents(e.container)},t.delete=L.chain(t.setContainer,e._apiSpecificRenderWindow.delete,()=>{window.removeEventListener("resize",t.resize)},t.delete),e.listenWindowResize&&window.addEventListener("resize",t.resize),t.resize()}const uU={background:[.32,.34,.43],listenWindowResize:!0,container:null};function ES(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,uU,n),L.obj(t,e),L.get(t,e,["renderWindow","renderer","_apiSpecificRenderWindow","interactor","container"]),L.moveToProtected(t,e,["_apiSpecificRenderWindow"]),L.event(t,e,"resize"),oU(t,e)}const cU=L.newInstance(ES);var ep={newInstance:cU,extend:ES};const fU=()=>{const t=Y.useRef(null),e=Y.useRef(null),[n,r]=Y.useState(6),[a,s]=Y.useState(2);return Y.useEffect(()=>{if(!e.current&&t.current){console.info("Creation");const o=ep.newInstance();o.setContainer(t.current),console.log("ConeSource");const c=V2.newInstance({height:1}),f=An.newInstance();f.setInputConnection(c.getOutputPort());const l=bn.newInstance();l.setMapper(f);const h=o.getRenderer(),g=o.getRenderWindow();h.addActor(l),h.resetCamera(),g.render(),e.current={fullScreenRenderer:o,renderWindow:g,renderer:h,coneSource:c,actor:l,mapper:f}}return()=>{if(e.current){console.info("Deletion");const{fullScreenRenderer:o,coneSource:c,actor:f,mapper:l}=e.current;f.delete(),l.delete(),c.delete(),o.delete(),e.current=null}}},[t]),Y.useEffect(()=>{if(e.current){console.info("Rendering");const{coneSource:o,renderWindow:c}=e.current;o.setResolution(n),c.render()}},[n]),Y.useEffect(()=>{if(e.current){const{actor:o,renderWindow:c}=e.current;o.getProperty().setRepresentation(a),c.render()}},[a]),_e.jsxs("div",{children:[_e.jsx("div",{style:{width:"800px"},ref:t}),_e.jsx("table",{style:{position:"absolute",top:"25px",left:"25px",background:"white",padding:"12px"},children:_e.jsxs("tbody",{children:[_e.jsx("tr",{children:_e.jsx("td",{children:_e.jsxs("select",{value:a,style:{width:"100%"},onInput:o=>s(Number(o.target.value)),children:[_e.jsx("option",{value:"0",children:"Points"}),_e.jsx("option",{value:"1",children:"Wireframe"}),_e.jsx("option",{value:"2",children:"Surface"})]})})}),_e.jsx("tr",{children:_e.jsx("td",{children:_e.jsx("input",{type:"range",min:"4",max:"80",value:n,onChange:o=>r(Number(o.target.value))})})})]})})]})};var wi={},uy;function lU(){if(uy)return wi;uy=1,Object.defineProperty(wi,"__esModule",{value:!0}),wi.parse=o,wi.serialize=l;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,s=(()=>{const d=function(){};return d.prototype=Object.create(null),d})();function o(d,v){const S=new s,T=d.length;if(T<2)return S;const x=(v==null?void 0:v.decode)||h;let m=0;do{const O=d.indexOf("=",m);if(O===-1)break;const w=d.indexOf(";",m),R=w===-1?T:w;if(O>R){m=d.lastIndexOf(";",O-1)+1;continue}const M=c(d,m,O),D=f(d,O,M),V=d.slice(M,D);if(S[V]===void 0){let B=c(d,O+1,R),z=f(d,R,B);const k=x(d.slice(B,z));S[V]=k}m=R+1}while(m<T);return S}function c(d,v,S){do{const T=d.charCodeAt(v);if(T!==32&&T!==9)return v}while(++v<S);return S}function f(d,v,S){for(;v>S;){const T=d.charCodeAt(--v);if(T!==32&&T!==9)return v+1}return S}function l(d,v,S){const T=(S==null?void 0:S.encode)||encodeURIComponent;if(!t.test(d))throw new TypeError(`argument name is invalid: ${d}`);const x=T(v);if(!e.test(x))throw new TypeError(`argument val is invalid: ${v}`);let m=d+"="+x;if(!S)return m;if(S.maxAge!==void 0){if(!Number.isInteger(S.maxAge))throw new TypeError(`option maxAge is invalid: ${S.maxAge}`);m+="; Max-Age="+S.maxAge}if(S.domain){if(!n.test(S.domain))throw new TypeError(`option domain is invalid: ${S.domain}`);m+="; Domain="+S.domain}if(S.path){if(!r.test(S.path))throw new TypeError(`option path is invalid: ${S.path}`);m+="; Path="+S.path}if(S.expires){if(!g(S.expires)||!Number.isFinite(S.expires.valueOf()))throw new TypeError(`option expires is invalid: ${S.expires}`);m+="; Expires="+S.expires.toUTCString()}if(S.httpOnly&&(m+="; HttpOnly"),S.secure&&(m+="; Secure"),S.partitioned&&(m+="; Partitioned"),S.priority)switch(typeof S.priority=="string"?S.priority.toLowerCase():void 0){case"low":m+="; Priority=Low";break;case"medium":m+="; Priority=Medium";break;case"high":m+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${S.priority}`)}if(S.sameSite)switch(typeof S.sameSite=="string"?S.sameSite.toLowerCase():S.sameSite){case!0:case"strict":m+="; SameSite=Strict";break;case"lax":m+="; SameSite=Lax";break;case"none":m+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${S.sameSite}`)}return m}function h(d){if(d.indexOf("%")===-1)return d;try{return decodeURIComponent(d)}catch{return d}}function g(d){return a.call(d)==="[object Date]"}return wi}lU();/**
 * react-router v7.1.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var cy="popstate";function gU(t={}){function e(r,a){let{pathname:s,search:o,hash:c}=r.location;return s1("",{pathname:s,search:o,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:zi(a)}return hU(e,n,null,t)}function Xe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Kn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function pU(){return Math.random().toString(36).substring(2,10)}function fy(t,e){return{usr:t.state,key:t.key,idx:e}}function s1(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Ls(e):e,state:n,key:e&&e.key||r||pU()}}function zi({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Ls(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function hU(t,e,n,r={}){let{window:a=document.defaultView,v5Compat:s=!1}=r,o=a.history,c="POP",f=null,l=h();l==null&&(l=0,o.replaceState({...o.state,idx:l},""));function h(){return(o.state||{idx:null}).idx}function g(){c="POP";let x=h(),m=x==null?null:x-l;l=x,f&&f({action:c,location:T.location,delta:m})}function d(x,m){c="PUSH";let O=s1(T.location,x,m);l=h()+1;let w=fy(O,l),R=T.createHref(O);try{o.pushState(w,"",R)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;a.location.assign(R)}s&&f&&f({action:c,location:T.location,delta:1})}function v(x,m){c="REPLACE";let O=s1(T.location,x,m);l=h();let w=fy(O,l),R=T.createHref(O);o.replaceState(w,"",R),s&&f&&f({action:c,location:T.location,delta:0})}function S(x){let m=a.location.origin!=="null"?a.location.origin:a.location.href,O=typeof x=="string"?x:zi(x);return O=O.replace(/ $/,"%20"),Xe(m,`No window.location.(origin|href) available to create URL for href: ${O}`),new URL(O,m)}let T={get action(){return c},get location(){return t(a,o)},listen(x){if(f)throw new Error("A history only accepts one active listener");return a.addEventListener(cy,g),f=x,()=>{a.removeEventListener(cy,g),f=null}},createHref(x){return e(a,x)},createURL:S,encodeLocation(x){let m=S(x);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:d,replace:v,go(x){return o.go(x)}};return T}function mS(t,e,n="/"){return dU(t,e,n,!1)}function dU(t,e,n,r){let a=typeof e=="string"?Ls(e):e,s=qr(a.pathname||"/",n);if(s==null)return null;let o=RS(t);vU(o);let c=null;for(let f=0;c==null&&f<o.length;++f){let l=DU(s);c=RU(o[f],l,r)}return c}function RS(t,e=[],n=[],r=""){let a=(s,o,c)=>{let f={relativePath:c===void 0?s.path||"":c,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};f.relativePath.startsWith("/")&&(Xe(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length));let l=gr([r,f.relativePath]),h=n.concat(f);s.children&&s.children.length>0&&(Xe(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${l}".`),RS(s.children,e,h,l)),!(s.path==null&&!s.index)&&e.push({path:l,score:EU(l,s.index),routesMeta:h})};return t.forEach((s,o)=>{var c;if(s.path===""||!((c=s.path)!=null&&c.includes("?")))a(s,o);else for(let f of OS(s.path))a(s,o,f)}),e}function OS(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,a=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return a?[s,""]:[s];let o=OS(r.join("/")),c=[];return c.push(...o.map(f=>f===""?s:[s,f].join("/"))),a&&c.push(...o),c.map(f=>t.startsWith("/")&&f===""?"/":f)}function vU(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:mU(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var yU=/^:[\w-]+$/,TU=3,xU=2,SU=1,CU=10,wU=-2,ly=t=>t==="*";function EU(t,e){let n=t.split("/"),r=n.length;return n.some(ly)&&(r+=wU),e&&(r+=xU),n.filter(a=>!ly(a)).reduce((a,s)=>a+(yU.test(s)?TU:s===""?SU:CU),r)}function mU(t,e){return t.length===e.length&&t.slice(0,-1).every((r,a)=>r===e[a])?t[t.length-1]-e[e.length-1]:0}function RU(t,e,n=!1){let{routesMeta:r}=t,a={},s="/",o=[];for(let c=0;c<r.length;++c){let f=r[c],l=c===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",g=Ec({path:f.relativePath,caseSensitive:f.caseSensitive,end:l},h),d=f.route;if(!g&&l&&n&&!r[r.length-1].route.index&&(g=Ec({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},h)),!g)return null;Object.assign(a,g.params),o.push({params:a,pathname:gr([s,g.pathname]),pathnameBase:VU(gr([s,g.pathnameBase])),route:d}),g.pathnameBase!=="/"&&(s=gr([s,g.pathnameBase]))}return o}function Ec(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=OU(t.path,t.caseSensitive,t.end),a=e.match(n);if(!a)return null;let s=a[0],o=s.replace(/(.)\/+$/,"$1"),c=a.slice(1);return{params:r.reduce((l,{paramName:h,isOptional:g},d)=>{if(h==="*"){let S=c[d]||"";o=s.slice(0,s.length-S.length).replace(/(.)\/+$/,"$1")}const v=c[d];return g&&!v?l[h]=void 0:l[h]=(v||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:t}}function OU(t,e=!1,n=!0){Kn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,f)=>(r.push({paramName:c,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function DU(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Kn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function qr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function MU(t,e="/"){let{pathname:n,search:r="",hash:a=""}=typeof t=="string"?Ls(t):t;return{pathname:n?n.startsWith("/")?n:LU(n,e):e,search:kU(r),hash:BU(a)}}function LU(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function mg(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function _U(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function DS(t){let e=_U(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function MS(t,e,n,r=!1){let a;typeof t=="string"?a=Ls(t):(a={...t},Xe(!a.pathname||!a.pathname.includes("?"),mg("?","pathname","search",a)),Xe(!a.pathname||!a.pathname.includes("#"),mg("#","pathname","hash",a)),Xe(!a.search||!a.search.includes("#"),mg("#","search","hash",a)));let s=t===""||a.pathname==="",o=s?"/":a.pathname,c;if(o==null)c=n;else{let g=e.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),g-=1;a.pathname=d.join("/")}c=g>=0?e[g]:"/"}let f=MU(a,c),l=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(l||h)&&(f.pathname+="/"),f}var gr=t=>t.join("/").replace(/\/\/+/g,"/"),VU=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),kU=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,BU=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function FU(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var LS=["POST","PUT","PATCH","DELETE"];new Set(LS);var NU=["GET",...LS];new Set(NU);var _s=Y.createContext(null);_s.displayName="DataRouter";var Bc=Y.createContext(null);Bc.displayName="DataRouterState";var _S=Y.createContext({isTransitioning:!1});_S.displayName="ViewTransition";var UU=Y.createContext(new Map);UU.displayName="Fetchers";var GU=Y.createContext(null);GU.displayName="Await";var In=Y.createContext(null);In.displayName="Navigation";var Xi=Y.createContext(null);Xi.displayName="Location";var dr=Y.createContext({outlet:null,matches:[],isDataRoute:!1});dr.displayName="Route";var tp=Y.createContext(null);tp.displayName="RouteError";function $U(t,{relative:e}={}){Xe(Ii(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=Y.useContext(In),{hash:a,pathname:s,search:o}=Yi(t,{relative:e}),c=s;return n!=="/"&&(c=s==="/"?n:gr([n,s])),r.createHref({pathname:c,search:o,hash:a})}function Ii(){return Y.useContext(Xi)!=null}function Ba(){return Xe(Ii(),"useLocation() may be used only in the context of a <Router> component."),Y.useContext(Xi).location}var VS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function kS(t){Y.useContext(In).static||Y.useLayoutEffect(t)}function zU(){let{isDataRoute:t}=Y.useContext(dr);return t?ZU():WU()}function WU(){Xe(Ii(),"useNavigate() may be used only in the context of a <Router> component.");let t=Y.useContext(_s),{basename:e,navigator:n}=Y.useContext(In),{matches:r}=Y.useContext(dr),{pathname:a}=Ba(),s=JSON.stringify(DS(r)),o=Y.useRef(!1);return kS(()=>{o.current=!0}),Y.useCallback((f,l={})=>{if(Kn(o.current,VS),!o.current)return;if(typeof f=="number"){n.go(f);return}let h=MS(f,JSON.parse(s),a,l.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:gr([e,h.pathname])),(l.replace?n.replace:n.push)(h,l.state,l)},[e,n,s,a,t])}Y.createContext(null);function Yi(t,{relative:e}={}){let{matches:n}=Y.useContext(dr),{pathname:r}=Ba(),a=JSON.stringify(DS(n));return Y.useMemo(()=>MS(t,JSON.parse(a),r,e==="path"),[t,a,r,e])}function HU(t,e){return BS(t,e)}function BS(t,e,n,r){var m;Xe(Ii(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=Y.useContext(In),{matches:s}=Y.useContext(dr),o=s[s.length-1],c=o?o.params:{},f=o?o.pathname:"/",l=o?o.pathnameBase:"/",h=o&&o.route;{let O=h&&h.path||"";FS(f,!h||O.endsWith("*")||O.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${O}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${O}"> to <Route path="${O==="/"?"*":`${O}/*`}">.`)}let g=Ba(),d;if(e){let O=typeof e=="string"?Ls(e):e;Xe(l==="/"||((m=O.pathname)==null?void 0:m.startsWith(l)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${l}" but pathname "${O.pathname}" was given in the \`location\` prop.`),d=O}else d=g;let v=d.pathname||"/",S=v;if(l!=="/"){let O=l.replace(/^\//,"").split("/");S="/"+v.replace(/^\//,"").split("/").slice(O.length).join("/")}let T=mS(t,{pathname:S});Kn(h||T!=null,`No routes matched location "${d.pathname}${d.search}${d.hash}" `),Kn(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${d.pathname}${d.search}${d.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=PU(T&&T.map(O=>Object.assign({},O,{params:Object.assign({},c,O.params),pathname:gr([l,a.encodeLocation?a.encodeLocation(O.pathname).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?l:gr([l,a.encodeLocation?a.encodeLocation(O.pathnameBase).pathname:O.pathnameBase])})),s,n,r);return e&&x?Y.createElement(Xi.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...d},navigationType:"POP"}},x):x}function bU(){let t=QU(),e=FU(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=Y.createElement(Y.Fragment,null,Y.createElement("p",null,"💿 Hey developer 👋"),Y.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Y.createElement("code",{style:s},"ErrorBoundary")," or"," ",Y.createElement("code",{style:s},"errorElement")," prop on your route.")),Y.createElement(Y.Fragment,null,Y.createElement("h2",null,"Unexpected Application Error!"),Y.createElement("h3",{style:{fontStyle:"italic"}},e),n?Y.createElement("pre",{style:a},n):null,o)}var AU=Y.createElement(bU,null),jU=class extends Y.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?Y.createElement(dr.Provider,{value:this.props.routeContext},Y.createElement(tp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function KU({routeContext:t,match:e,children:n}){let r=Y.useContext(_s);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),Y.createElement(dr.Provider,{value:t},n)}function PU(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,s=n==null?void 0:n.errors;if(s!=null){let f=a.findIndex(l=>l.route.id&&(s==null?void 0:s[l.route.id])!==void 0);Xe(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),a=a.slice(0,Math.min(a.length,f+1))}let o=!1,c=-1;if(n)for(let f=0;f<a.length;f++){let l=a[f];if((l.route.HydrateFallback||l.route.hydrateFallbackElement)&&(c=f),l.route.id){let{loaderData:h,errors:g}=n,d=l.route.loader&&!h.hasOwnProperty(l.route.id)&&(!g||g[l.route.id]===void 0);if(l.route.lazy||d){o=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((f,l,h)=>{let g,d=!1,v=null,S=null;n&&(g=s&&l.route.id?s[l.route.id]:void 0,v=l.route.errorElement||AU,o&&(c<0&&h===0?(FS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,S=null):c===h&&(d=!0,S=l.route.hydrateFallbackElement||null)));let T=e.concat(a.slice(0,h+1)),x=()=>{let m;return g?m=v:d?m=S:l.route.Component?m=Y.createElement(l.route.Component,null):l.route.element?m=l.route.element:m=f,Y.createElement(KU,{match:l,routeContext:{outlet:f,matches:T,isDataRoute:n!=null},children:m})};return n&&(l.route.ErrorBoundary||l.route.errorElement||h===0)?Y.createElement(jU,{location:n.location,revalidation:n.revalidation,component:v,error:g,children:x(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):x()},null)}function np(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function XU(t){let e=Y.useContext(_s);return Xe(e,np(t)),e}function IU(t){let e=Y.useContext(Bc);return Xe(e,np(t)),e}function YU(t){let e=Y.useContext(dr);return Xe(e,np(t)),e}function rp(t){let e=YU(t),n=e.matches[e.matches.length-1];return Xe(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function qU(){return rp("useRouteId")}function QU(){var r;let t=Y.useContext(tp),e=IU("useRouteError"),n=rp("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function ZU(){let{router:t}=XU("useNavigate"),e=rp("useNavigate"),n=Y.useRef(!1);return kS(()=>{n.current=!0}),Y.useCallback(async(a,s={})=>{Kn(n.current,VS),n.current&&(typeof a=="number"?t.navigate(a):await t.navigate(a,{fromRouteId:e,...s}))},[t,e])}var gy={};function FS(t,e,n){!e&&!gy[t]&&(gy[t]=!0,Kn(!1,n))}Y.memo(JU);function JU({routes:t,future:e,state:n}){return BS(t,void 0,n,e)}function Ju(t){Xe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function e4({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:a,static:s=!1}){Xe(!Ii(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),c=Y.useMemo(()=>({basename:o,navigator:a,static:s,future:{}}),[o,a,s]);typeof n=="string"&&(n=Ls(n));let{pathname:f="/",search:l="",hash:h="",state:g=null,key:d="default"}=n,v=Y.useMemo(()=>{let S=qr(f,o);return S==null?null:{location:{pathname:S,search:l,hash:h,state:g,key:d},navigationType:r}},[o,f,l,h,g,d,r]);return Kn(v!=null,`<Router basename="${o}"> is not able to match the URL "${f}${l}${h}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:Y.createElement(In.Provider,{value:c},Y.createElement(Xi.Provider,{children:e,value:v}))}function t4({children:t,location:e}){return HU(i1(t),e)}function i1(t,e=[]){let n=[];return Y.Children.forEach(t,(r,a)=>{if(!Y.isValidElement(r))return;let s=[...e,a];if(r.type===Y.Fragment){n.push.apply(n,i1(r.props.children,s));return}Xe(r.type===Ju,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Xe(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=i1(r.props.children,s)),n.push(o)}),n}var ec="get",tc="application/x-www-form-urlencoded";function Fc(t){return t!=null&&typeof t.tagName=="string"}function n4(t){return Fc(t)&&t.tagName.toLowerCase()==="button"}function r4(t){return Fc(t)&&t.tagName.toLowerCase()==="form"}function a4(t){return Fc(t)&&t.tagName.toLowerCase()==="input"}function s4(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function i4(t,e){return t.button===0&&(!e||e==="_self")&&!s4(t)}var Gu=null;function o4(){if(Gu===null)try{new FormData(document.createElement("form"),0),Gu=!1}catch{Gu=!0}return Gu}var u4=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Rg(t){return t!=null&&!u4.has(t)?(Kn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${tc}"`),null):t}function c4(t,e){let n,r,a,s,o;if(r4(t)){let c=t.getAttribute("action");r=c?qr(c,e):null,n=t.getAttribute("method")||ec,a=Rg(t.getAttribute("enctype"))||tc,s=new FormData(t)}else if(n4(t)||a4(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=t.getAttribute("formaction")||c.getAttribute("action");if(r=f?qr(f,e):null,n=t.getAttribute("formmethod")||c.getAttribute("method")||ec,a=Rg(t.getAttribute("formenctype"))||Rg(c.getAttribute("enctype"))||tc,s=new FormData(c,t),!o4()){let{name:l,type:h,value:g}=t;if(h==="image"){let d=l?`${l}.`:"";s.append(`${d}x`,"0"),s.append(`${d}y`,"0")}else l&&s.append(l,g)}}else{if(Fc(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=ec,r=null,a=tc,o=t}return s&&a==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:a,formData:s,body:o}}function ap(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function f4(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function l4(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function g4(t,e,n){let r=await Promise.all(t.map(async a=>{let s=e.routes[a.route.id];if(s){let o=await f4(s,n);return o.links?o.links():[]}return[]}));return v4(r.flat(1).filter(l4).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function py(t,e,n,r,a,s){let o=(f,l)=>n[l]?f.route.id!==n[l].route.id:!0,c=(f,l)=>{var h;return n[l].pathname!==f.pathname||((h=n[l].route.path)==null?void 0:h.endsWith("*"))&&n[l].params["*"]!==f.params["*"]};return s==="assets"?e.filter((f,l)=>o(f,l)||c(f,l)):s==="data"?e.filter((f,l)=>{var g;let h=r.routes[f.route.id];if(!h||!h.hasLoader)return!1;if(o(f,l)||c(f,l))return!0;if(f.route.shouldRevalidate){let d=f.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((g=n[0])==null?void 0:g.params)||{},nextUrl:new URL(t,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof d=="boolean")return d}return!0}):[]}function p4(t,e){return h4(t.map(n=>{let r=e.routes[n.route.id];if(!r)return[];let a=[r.module];return r.imports&&(a=a.concat(r.imports)),a}).flat(1))}function h4(t){return[...new Set(t)]}function d4(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function v4(t,e){let n=new Set;return new Set(e),t.reduce((r,a)=>{let s=JSON.stringify(d4(a));return n.has(s)||(n.add(s),r.push({key:s,link:a})),r},[])}function y4(t){let e=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function T4(){let t=Y.useContext(_s);return ap(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function x4(){let t=Y.useContext(Bc);return ap(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var sp=Y.createContext(void 0);sp.displayName="FrameworkContext";function NS(){let t=Y.useContext(sp);return ap(t,"You must render this element inside a <HydratedRouter> element"),t}function S4(t,e){let n=Y.useContext(sp),[r,a]=Y.useState(!1),[s,o]=Y.useState(!1),{onFocus:c,onBlur:f,onMouseEnter:l,onMouseLeave:h,onTouchStart:g}=e,d=Y.useRef(null);Y.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let T=m=>{m.forEach(O=>{o(O.isIntersecting)})},x=new IntersectionObserver(T,{threshold:.5});return d.current&&x.observe(d.current),()=>{x.disconnect()}}},[t]),Y.useEffect(()=>{if(r){let T=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(T)}}},[r]);let v=()=>{a(!0)},S=()=>{a(!1),o(!1)};return n?t!=="intent"?[s,d,{}]:[s,d,{onFocus:Ei(c,v),onBlur:Ei(f,S),onMouseEnter:Ei(l,v),onMouseLeave:Ei(h,S),onTouchStart:Ei(g,v)}]:[!1,d,{}]}function Ei(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function C4({page:t,...e}){let{router:n}=T4(),r=Y.useMemo(()=>mS(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?Y.createElement(E4,{page:t,matches:r,...e}):null}function w4(t){let{manifest:e,routeModules:n}=NS(),[r,a]=Y.useState([]);return Y.useEffect(()=>{let s=!1;return g4(t,e,n).then(o=>{s||a(o)}),()=>{s=!0}},[t,e,n]),r}function E4({page:t,matches:e,...n}){let r=Ba(),{manifest:a,routeModules:s}=NS(),{loaderData:o,matches:c}=x4(),f=Y.useMemo(()=>py(t,e,c,a,r,"data"),[t,e,c,a,r]),l=Y.useMemo(()=>py(t,e,c,a,r,"assets"),[t,e,c,a,r]),h=Y.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let v=new Set,S=!1;if(e.forEach(x=>{var O;let m=a.routes[x.route.id];!m||!m.hasLoader||(!f.some(w=>w.route.id===x.route.id)&&x.route.id in o&&((O=s[x.route.id])!=null&&O.shouldRevalidate)||m.hasClientLoader?S=!0:v.add(x.route.id))}),v.size===0)return[];let T=y4(t);return S&&v.size>0&&T.searchParams.set("_routes",e.filter(x=>v.has(x.route.id)).map(x=>x.route.id).join(",")),[T.pathname+T.search]},[o,r,a,f,e,t,s]),g=Y.useMemo(()=>p4(l,a),[l,a]),d=w4(l);return Y.createElement(Y.Fragment,null,h.map(v=>Y.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...n})),g.map(v=>Y.createElement("link",{key:v,rel:"modulepreload",href:v,...n})),d.map(({key:v,link:S})=>Y.createElement("link",{key:v,...S})))}function m4(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var US=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{US&&(window.__reactRouterVersion="7.1.3")}catch{}function R4({basename:t,children:e,window:n}){let r=Y.useRef();r.current==null&&(r.current=gU({window:n,v5Compat:!0}));let a=r.current,[s,o]=Y.useState({action:a.action,location:a.location}),c=Y.useCallback(f=>{Y.startTransition(()=>o(f))},[o]);return Y.useLayoutEffect(()=>a.listen(c),[a,c]),Y.createElement(e4,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:a})}var GS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$S=Y.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:a,reloadDocument:s,replace:o,state:c,target:f,to:l,preventScrollReset:h,viewTransition:g,...d},v){let{basename:S}=Y.useContext(In),T=typeof l=="string"&&GS.test(l),x,m=!1;if(typeof l=="string"&&T&&(x=l,US))try{let z=new URL(window.location.href),k=l.startsWith("//")?new URL(z.protocol+l):new URL(l),U=qr(k.pathname,S);k.origin===z.origin&&U!=null?l=U+k.search+k.hash:m=!0}catch{Kn(!1,`<Link to="${l}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let O=$U(l,{relative:a}),[w,R,M]=S4(r,d),D=L4(l,{replace:o,state:c,target:f,preventScrollReset:h,relative:a,viewTransition:g});function V(z){e&&e(z),z.defaultPrevented||D(z)}let B=Y.createElement("a",{...d,...M,href:x||O,onClick:m||s?e:V,ref:m4(v,R),target:f,"data-discover":!T&&n==="render"?"true":void 0});return w&&!T?Y.createElement(Y.Fragment,null,B,Y.createElement(C4,{page:O})):B});$S.displayName="Link";var O4=Y.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:a=!1,style:s,to:o,viewTransition:c,children:f,...l},h){let g=Yi(o,{relative:l.relative}),d=Ba(),v=Y.useContext(Bc),{navigator:S,basename:T}=Y.useContext(In),x=v!=null&&F4(g)&&c===!0,m=S.encodeLocation?S.encodeLocation(g).pathname:g.pathname,O=d.pathname,w=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;n||(O=O.toLowerCase(),w=w?w.toLowerCase():null,m=m.toLowerCase()),w&&T&&(w=qr(w,T)||w);const R=m!=="/"&&m.endsWith("/")?m.length-1:m.length;let M=O===m||!a&&O.startsWith(m)&&O.charAt(R)==="/",D=w!=null&&(w===m||!a&&w.startsWith(m)&&w.charAt(m.length)==="/"),V={isActive:M,isPending:D,isTransitioning:x},B=M?e:void 0,z;typeof r=="function"?z=r(V):z=[r,M?"active":null,D?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let k=typeof s=="function"?s(V):s;return Y.createElement($S,{...l,"aria-current":B,className:z,ref:h,style:k,to:o,viewTransition:c},typeof f=="function"?f(V):f)});O4.displayName="NavLink";var D4=Y.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:a,state:s,method:o=ec,action:c,onSubmit:f,relative:l,preventScrollReset:h,viewTransition:g,...d},v)=>{let S=k4(),T=B4(c,{relative:l}),x=o.toLowerCase()==="get"?"get":"post",m=typeof c=="string"&&GS.test(c),O=w=>{if(f&&f(w),w.defaultPrevented)return;w.preventDefault();let R=w.nativeEvent.submitter,M=(R==null?void 0:R.getAttribute("formmethod"))||o;S(R||w.currentTarget,{fetcherKey:e,method:M,navigate:n,replace:a,state:s,relative:l,preventScrollReset:h,viewTransition:g})};return Y.createElement("form",{ref:v,method:x,action:T,onSubmit:r?f:O,...d,"data-discover":!m&&t==="render"?"true":void 0})});D4.displayName="Form";function M4(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function zS(t){let e=Y.useContext(_s);return Xe(e,M4(t)),e}function L4(t,{target:e,replace:n,state:r,preventScrollReset:a,relative:s,viewTransition:o}={}){let c=zU(),f=Ba(),l=Yi(t,{relative:s});return Y.useCallback(h=>{if(i4(h,e)){h.preventDefault();let g=n!==void 0?n:zi(f)===zi(l);c(t,{replace:g,state:r,preventScrollReset:a,relative:s,viewTransition:o})}},[f,c,l,n,r,e,t,a,s,o])}var _4=0,V4=()=>`__${String(++_4)}__`;function k4(){let{router:t}=zS("useSubmit"),{basename:e}=Y.useContext(In),n=qU();return Y.useCallback(async(r,a={})=>{let{action:s,method:o,encType:c,formData:f,body:l}=c4(r,e);if(a.navigate===!1){let h=a.fetcherKey||V4();await t.fetch(h,n,a.action||s,{preventScrollReset:a.preventScrollReset,formData:f,body:l,formMethod:a.method||o,formEncType:a.encType||c,flushSync:a.flushSync})}else await t.navigate(a.action||s,{preventScrollReset:a.preventScrollReset,formData:f,body:l,formMethod:a.method||o,formEncType:a.encType||c,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[t,e,n])}function B4(t,{relative:e}={}){let{basename:n}=Y.useContext(In),r=Y.useContext(dr);Xe(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),s={...Yi(t||".",{relative:e})},o=Ba();if(t==null){s.search=o.search;let c=new URLSearchParams(s.search),f=c.getAll("index");if(f.some(h=>h==="")){c.delete("index"),f.filter(g=>g).forEach(g=>c.append("index",g));let h=c.toString();s.search=h?`?${h}`:""}}return(!t||t===".")&&a.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:gr([n,s.pathname])),zi(s)}function F4(t,e={}){let n=Y.useContext(_S);Xe(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=zS("useViewTransitionState"),a=Yi(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=qr(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=qr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Ec(a.pathname,o)!=null||Ec(a.pathname,s)!=null}new TextEncoder;var Rt=Uint8Array,Ra=Uint16Array,WS=Uint32Array,HS=new Rt([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),bS=new Rt([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),N4=new Rt([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),AS=function(t,e){for(var n=new Ra(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var a=new WS(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)a[s]=s-n[r]<<5|r;return[n,a]},jS=AS(HS,2),KS=jS[0],U4=jS[1];KS[28]=258,U4[258]=28;var G4=AS(bS,0),$4=G4[0],o1=new Ra(32768);for(var be=0;be<32768;++be){var Wr=(be&43690)>>>1|(be&21845)<<1;Wr=(Wr&52428)>>>2|(Wr&13107)<<2,Wr=(Wr&61680)>>>4|(Wr&3855)<<4,o1[be]=((Wr&65280)>>>8|(Wr&255)<<8)>>>1}var ki=function(t,e,n){for(var r=t.length,a=0,s=new Ra(e);a<r;++a)t[a]&&++s[t[a]-1];var o=new Ra(e);for(a=0;a<e;++a)o[a]=o[a-1]+s[a-1]<<1;var c;if(n){c=new Ra(1<<e);var f=15-e;for(a=0;a<r;++a)if(t[a])for(var l=a<<4|t[a],h=e-t[a],g=o[t[a]-1]++<<h,d=g|(1<<h)-1;g<=d;++g)c[o1[g]>>>f]=l}else for(c=new Ra(r),a=0;a<r;++a)t[a]&&(c[a]=o1[o[t[a]-1]++]>>>15-t[a]);return c},qi=new Rt(288);for(var be=0;be<144;++be)qi[be]=8;for(var be=144;be<256;++be)qi[be]=9;for(var be=256;be<280;++be)qi[be]=7;for(var be=280;be<288;++be)qi[be]=8;var PS=new Rt(32);for(var be=0;be<32;++be)PS[be]=5;var z4=ki(qi,9,1),W4=ki(PS,5,1),Og=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},yn=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},Dg=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},H4=function(t){return(t+7)/8|0},Nc=function(t,e,n){(e==null||e<0)&&(e=0),(n==null||n>t.length)&&(n=t.length);var r=new(t.BYTES_PER_ELEMENT==2?Ra:t.BYTES_PER_ELEMENT==4?WS:Rt)(n-e);return r.set(t.subarray(e,n)),r},b4=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],kt=function(t,e,n){var r=new Error(e||b4[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,kt),!n)throw r;return r},ip=function(t,e,n){var r=t.length;if(!r||n&&n.f&&!n.l)return e||new Rt(0);var a=!e||n,s=!n||n.i;n||(n={}),e||(e=new Rt(r*3));var o=function(Te){var ye=e.length;if(Te>ye){var De=new Rt(Math.max(ye*2,Te));De.set(e),e=De}},c=n.f||0,f=n.p||0,l=n.b||0,h=n.l,g=n.d,d=n.m,v=n.n,S=r*8;do{if(!h){c=yn(t,f,1);var T=yn(t,f+1,3);if(f+=3,T)if(T==1)h=z4,g=W4,d=9,v=5;else if(T==2){var w=yn(t,f,31)+257,R=yn(t,f+10,15)+4,M=w+yn(t,f+5,31)+1;f+=14;for(var D=new Rt(M),V=new Rt(19),B=0;B<R;++B)V[N4[B]]=yn(t,f+B*3,7);f+=R*3;for(var z=Og(V),k=(1<<z)-1,U=ki(V,z,1),B=0;B<M;){var H=U[yn(t,f,k)];f+=H&15;var x=H>>>4;if(x<16)D[B++]=x;else{var P=0,A=0;for(x==16?(A=3+yn(t,f,3),f+=2,P=D[B-1]):x==17?(A=3+yn(t,f,7),f+=3):x==18&&(A=11+yn(t,f,127),f+=7);A--;)D[B++]=P}}var ne=D.subarray(0,w),ae=D.subarray(w);d=Og(ne),v=Og(ae),h=ki(ne,d,1),g=ki(ae,v,1)}else kt(1);else{var x=H4(f)+4,m=t[x-4]|t[x-3]<<8,O=x+m;if(O>r){s&&kt(0);break}a&&o(l+m),e.set(t.subarray(x,O),l),n.b=l+=m,n.p=f=O*8,n.f=c;continue}if(f>S){s&&kt(0);break}}a&&o(l+131072);for(var se=(1<<d)-1,Q=(1<<v)-1,j=f;;j=f){var P=h[Dg(t,f)&se],G=P>>>4;if(f+=P&15,f>S){s&&kt(0);break}if(P||kt(2),G<256)e[l++]=G;else if(G==256){j=f,h=null;break}else{var N=G-254;if(G>264){var B=G-257,b=HS[B];N=yn(t,f,(1<<b)-1)+KS[B],f+=b}var q=g[Dg(t,f)&Q],le=q>>>4;q||kt(3),f+=q&15;var ae=$4[le];if(le>3){var b=bS[le];ae+=Dg(t,f)&(1<<b)-1,f+=b}if(f>S){s&&kt(0);break}a&&o(l+131072);for(var xe=l+N;l<xe;l+=4)e[l]=e[l-ae],e[l+1]=e[l+1-ae],e[l+2]=e[l+2-ae],e[l+3]=e[l+3-ae];l=xe}}n.l=h,n.p=j,n.b=l,n.f=c,h&&(c=1,n.m=d,n.d=g,n.n=v)}while(!c);return l==e.length?e:Nc(e,0,l)},A4=new Rt(0),zn=function(t,e){return t[e]|t[e+1]<<8},En=function(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0},Mg=function(t,e){return En(t,e)+En(t,e+4)*4294967296},j4=function(t){(t[0]!=31||t[1]!=139||t[2]!=8)&&kt(6,"invalid gzip data");var e=t[3],n=10;e&4&&(n+=t[10]|(t[11]<<8)+2);for(var r=(e>>3&1)+(e>>4&1);r>0;r-=!t[n++]);return n+(e&2)},K4=function(t){var e=t.length;return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0},P4=function(t){((t[0]&15)!=8||t[0]>>>4>7||(t[0]<<8|t[1])%31)&&kt(6,"invalid zlib data"),t[1]&32&&kt(6,"invalid zlib data: preset dictionaries not supported")};function XS(t,e){return ip(t,e)}function X4(t,e){return ip(t.subarray(j4(t),-8),new Rt(K4(t)))}function I4(t,e){return ip((P4(t),t.subarray(2,-4)),e)}function qt(t,e){return t[0]==31&&t[1]==139&&t[2]==8?X4(t):(t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31?XS(t,e):I4(t,e)}var hy=typeof TextEncoder<"u"&&new TextEncoder,u1=typeof TextDecoder<"u"&&new TextDecoder,Y4=0;try{u1.decode(A4,{stream:!0}),Y4=1}catch{}var q4=function(t){for(var e="",n=0;;){var r=t[n++],a=(r>127)+(r>223)+(r>239);if(n+a>t.length)return[e,Nc(t,n-1)];a?a==3?(r=((r&15)<<18|(t[n++]&63)<<12|(t[n++]&63)<<6|t[n++]&63)-65536,e+=String.fromCharCode(55296|r>>10,56320|r&1023)):a&1?e+=String.fromCharCode((r&31)<<6|t[n++]&63):e+=String.fromCharCode((r&15)<<12|(t[n++]&63)<<6|t[n++]&63):e+=String.fromCharCode(r)}};function Q4(t,e){var n;if(hy)return hy.encode(t);for(var r=t.length,a=new Rt(t.length+(t.length>>1)),s=0,o=function(l){a[s++]=l},n=0;n<r;++n){if(s+5>a.length){var c=new Rt(s+8+(r-n<<1));c.set(a),a=c}var f=t.charCodeAt(n);f<128||e?o(f):f<2048?(o(192|f>>6),o(128|f&63)):f>55295&&f<57344?(f=65536+(f&1047552)|t.charCodeAt(++n)&1023,o(240|f>>18),o(128|f>>12&63),o(128|f>>6&63),o(128|f&63)):(o(224|f>>12),o(128|f>>6&63),o(128|f&63))}return Nc(a,0,s)}function It(t,e){if(e){for(var n="",r=0;r<t.length;r+=16384)n+=String.fromCharCode.apply(null,t.subarray(r,r+16384));return n}else{if(u1)return u1.decode(t);var a=q4(t),s=a[0],o=a[1];return o.length&&kt(8),s}}var Z4=function(t,e){return e+30+zn(t,e+26)+zn(t,e+28)},J4=function(t,e,n){var r=zn(t,e+28),a=It(t.subarray(e+46,e+46+r),!(zn(t,e+8)&2048)),s=e+46+r,o=En(t,e+20),c=n&&o==4294967295?eG(t,s):[o,En(t,e+24),En(t,e+42)],f=c[0],l=c[1],h=c[2];return[zn(t,e+10),f,l,a,s+zn(t,e+30)+zn(t,e+32),h]},eG=function(t,e){for(;zn(t,e)!=1;e+=4+zn(t,e+2));return[Mg(t,e+12),Mg(t,e+4),Mg(t,e+20)]};function dy(t,e){for(var n={},r=t.length-22;En(t,r)!=101010256;--r)(!r||t.length-r>65558)&&kt(13);var a=zn(t,r+8);if(!a)return{};var s=En(t,r+16),o=s==4294967295;o&&(r=En(t,r-12),En(t,r)!=101075792&&kt(13),a=En(t,r+32),s=En(t,r+48));for(var c=0;c<a;++c){var f=J4(t,s,o),l=f[0],h=f[1],g=f[2],d=f[3],v=f[4],S=f[5],T=Z4(t,S);s=v,l?l==8?n[d]=XS(t.subarray(T,T+h),new Rt(g)):kt(14,"unknown compression type "+l):n[d]=Nc(t,T,T+h)}return n}const Xt=[];Xt[45]=62;Xt[95]=63;const ds="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(let t=0;t<ds.length;t++)Xt[ds.charCodeAt(t)]=t;function Nn(t){return Xt[t.charCodeAt(0)]!==void 0}function tG(t){const e=t.length,n=[];let r=null;for(let a=0;a<e;a++)Nn(t[a])?(r||(r={start:a,count:0}),r.count++,r.end=a):t[a]==="="&&r&&(n.push(r),r=null);return r&&n.push(r),n}function nG(t,e,n,r){const{start:a,count:s}=e,o=s%4,c=Math.floor(s/4);let f=a,l=null,h=n;for(let g=0;g<c;g++){for(;!Nn(t[f]);)f++;for(l=Xt[t.charCodeAt(f++)]<<18;!Nn(t[f]);)f++;for(l|=Xt[t.charCodeAt(f++)]<<12;!Nn(t[f]);)f++;for(l|=Xt[t.charCodeAt(f++)]<<6;!Nn(t[f]);)f++;l|=Xt[t.charCodeAt(f++)],r[h++]=l>>16&255,r[h++]=l>>8&255,r[h++]=l&255}switch(o){case 3:for(;!Nn(t[f]);)f++;for(l=Xt[t.charCodeAt(f++)]<<10;!Nn(t[f]);)f++;for(l|=Xt[t.charCodeAt(f++)]<<4;!Nn(t[f]);)f++;l|=Xt[t.charCodeAt(f++)]>>2,r[h++]=l>>8&255,r[h++]=l&255;break;case 2:for(;!Nn(t[f]);)f++;for(l=Xt[t.charCodeAt(f++)]<<2;!Nn(t[f]);)f++;l|=Xt[t.charCodeAt(f++)]>>4,r[h++]=l&255;break;case 1:throw new Error("BASE64: remain 1 should not happen")}return h}function rG(t){const e=tG(t),n=e[e.length-1].end+1,r=(4-n%4)%4,a=(n+r)*3/4-r,s=new ArrayBuffer(a),o=new Uint8Array(s);let c=0;for(let f=0;f<e.length;f++)c+=nG(t,e[f],c,o),c+=(4-e[f].count%4)%4;return s}function vy(t,e,n){const r=(t<<16)+(e<<8)+n;return ds[r>>18]+ds[r>>12&63]+ds[r>>6&63]+ds[r&63]}function IS(t){const e=new Uint8Array(t),n=t.byteLength%3,r=t.byteLength-n,a=Array(r/3);for(let s=0;s<a.length;s++){const o=s*3;a[s]=vy(e[o],e[o+1],e[o+2])}if(n>0){const s=vy(e[r],e[r+1]||0,e[r+2]||0);n===1?a.push(`${s.substr(0,2)}==`):n===2&&a.push(`${s.substr(0,3)}=`)}return a.join("")}var aG={toArrayBuffer:rG,fromArrayBuffer:IS};function YS(){const t=new ArrayBuffer(4),e=new Uint8Array(t),n=new Uint32Array(t);return e[0]=161,e[1]=178,e[2]=195,e[3]=212,n[0]===3569595041?"LittleEndian":n[0]===2712847316?"BigEndian":null}const sG=YS();function iG(t,e){if(e<2)return;const n=new Int8Array(t),r=n.length,a=[];for(let s=0;s<r;s+=e){for(let o=0;o<e;o++)a.push(n[s+o]);for(let o=0;o<e;o++)n[s+o]=a.pop()}}var un={ENDIANNESS:sG,getEndianness:YS,swapBytes:iG};const op={};function qS(t){return!!op[t]}function oG(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"http",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return op[t](e)}function Qi(t,e){op[t]=e}var Lg={get:oG,has:qS,registerType:Qi};const{vtkErrorMacro:uG,vtkDebugMacro:cG}=L;let fG=0;function up(t){const e=document.querySelector(`.webResource[data-url="${t}"]`);return e?e.innerHTML:null}function lG(t){return document.querySelector(`.webResource[data-url="${t}"]`)}function QS(t){return t[0]==="/"?t.substr(1):t}function gG(t,e){return new Promise((n,r)=>{const a=up(e);a===null?r(new Error(`No such text ${e}`)):n(a)})}function pG(t,e){return new Promise((n,r)=>{const a=up(QS(e));a===null?r(new Error(`No such JSON ${e}`)):n(JSON.parse(a))})}function hG(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return new Promise((a,s)=>{const o=QS([e,n.ref.basepath,r.compression?`${n.ref.id}.gz`:n.ref.id].join("/")),c=up(o);if(c===null)s(new Error(`No such array ${o}`));else{if(n.dataType==="string"){let f=atob(c);r.compression&&(f=It(qt(f))),n.values=JSON.parse(f)}else{const f=new Uint8Array(aG.toArrayBuffer(c));n.buffer=new ArrayBuffer(f.length),new Uint8Array(n.buffer).set(f),r.compression&&(n.dataType==="string"||n.dataType==="JSON"?n.buffer=It(qt(new Uint8Array(n.buffer))):n.buffer=qt(new Uint8Array(n.buffer)).buffer),n.ref.encode==="JSON"?n.values=JSON.parse(n.buffer):(un.ENDIANNESS!==n.ref.encode&&un.ENDIANNESS&&(cG(`Swap bytes of ${n.name}`),un.swapBytes(n.buffer,Ki[n.dataType])),n.values=L.newTypedArray(n.dataType,n.buffer)),n.values.length!==n.size&&uG(`Error in FetchArray: ${n.name} does not have the proper array size. Got ${n.values.length}, instead of ${n.size}`)}delete n.ref,--fG===0&&(t!=null&&t.invokeBusy)&&t.invokeBusy(!1),t!=null&&t.modified&&t.modified(),a(n)}})}function dG(t,e){return new Promise((n,r)=>{const a=lG(e);a?n(a):r(new Error(`No such image ${e}`))})}const vG={fetchJSON:pG,fetchText:gG,fetchArray:hG,fetchImage:dG};Qi("html",t=>vG);const{vtkErrorMacro:Wi,vtkDebugMacro:yG}=L;let Es=0;function Uc(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=new XMLHttpRequest;return r.open(t,e,!0),n.headers&&Object.entries(n.headers).forEach(a=>{let[s,o]=a;return r.setRequestHeader(s,o)}),n.progressCallback&&r.addEventListener("progress",n.progressCallback),r}function TG(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e&&e.compression&&e.compression!=="gz"&&(Wi("Supported algorithms are: [gz]"),Wi(`Unkown compression algorithm: ${e.compression}`)),new Promise((n,r)=>{const a=Uc("GET",t,e);a.onreadystatechange=s=>{a.readyState===4&&(a.status===200||a.status===0?e.compression?n(qt(new Uint8Array(a.response)).buffer):n(a.response):r({xhr:a,e:s}))},a.responseType="arraybuffer",a.send()})}function xG(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return n.ref&&!n.ref.pending?new Promise((a,s)=>{let o=null;n.ref.url?o=n.ref.url:o=[e,n.ref.basepath,r.compression?`${n.ref.id}.gz`:n.ref.id].join("/");const c=Uc("GET",o,r);c.onreadystatechange=f=>{c.readyState===1&&(n.ref.pending=!0,++Es===1&&(t!=null&&t.invokeBusy)&&t.invokeBusy(!0)),c.readyState===4&&(n.ref.pending=!1,c.status===200||c.status===0?(n.buffer=c.response,r.compression&&(n.dataType==="string"||n.dataType==="JSON"?n.buffer=It(qt(new Uint8Array(n.buffer))):n.buffer=qt(new Uint8Array(n.buffer)).buffer),n.ref.encode==="JSON"?n.values=JSON.parse(n.buffer):(un.ENDIANNESS!==n.ref.encode&&un.ENDIANNESS&&(yG(`Swap bytes of ${n.name}`),un.swapBytes(n.buffer,Ki[n.dataType])),n.values=L.newTypedArray(n.dataType,n.buffer)),n.values.length!==n.size&&Wi(`Error in FetchArray: ${n.name}, does not have the proper array size. Got ${n.values.length}, instead of ${n.size}`),delete n.ref,--Es===0&&(t!=null&&t.invokeBusy)&&t.invokeBusy(!1),t!=null&&t.modified&&t.modified(),a(n)):s({xhr:c,e:f}))},c.responseType=r.compression||n.dataType!=="string"?"arraybuffer":"text",c.send()}):Promise.resolve(n)}function SG(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise((r,a)=>{const s=Uc("GET",e,n);s.onreadystatechange=o=>{s.readyState===1&&++Es===1&&t!=null&&t.invokeBusy&&t.invokeBusy(!0),s.readyState===4&&(--Es===0&&(t!=null&&t.invokeBusy)&&t.invokeBusy(!1),s.status===200||s.status===0?n.compression?r(JSON.parse(It(qt(new Uint8Array(s.response))))):r(JSON.parse(s.responseText)):a({xhr:s,e:o}))},s.responseType=n.compression?"arraybuffer":"text",s.send()})}function CG(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return n&&n.compression&&n.compression!=="gz"&&(Wi("Supported algorithms are: [gz]"),Wi(`Unkown compression algorithm: ${n.compression}`)),new Promise((r,a)=>{const s=Uc("GET",e,n);s.onreadystatechange=o=>{s.readyState===1&&++Es===1&&t!=null&&t.invokeBusy&&t.invokeBusy(!0),s.readyState===4&&(--Es===0&&(t!=null&&t.invokeBusy)&&t.invokeBusy(!1),s.status===200||s.status===0?n.compression?r(It(qt(new Uint8Array(s.response)))):r(s.responseText):a({xhr:s,e:o}))},s.responseType=n.compression?"arraybuffer":"text",s.send()})}function wG(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise((r,a)=>{const s=new Image;n.crossOrigin&&(s.crossOrigin=n.crossOrigin),s.onload=()=>r(s),s.onerror=a,s.src=e})}const EG={fetchArray:xG,fetchJSON:SG,fetchText:CG,fetchBinary:TG,fetchImage:wG};Qi("http",t=>EG);const{vtkErrorMacro:ls,vtkDebugMacro:mG}=L;function RG(t){const e=t.split(".").pop().toLowerCase();return e==="jpg"?"jpeg":e}function OG(t,e,n){return r=>{t.buffer=new ArrayBuffer(r.length),new Uint8Array(t.buffer).set(r),e&&(t.dataType==="string"||t.dataType==="JSON"?t.buffer=It(qt(new Uint8Array(t.buffer))):t.buffer=qt(new Uint8Array(t.buffer)).buffer),t.ref.encode==="JSON"?t.values=JSON.parse(t.buffer):(un.ENDIANNESS!==t.ref.encode&&un.ENDIANNESS&&(mG(`Swap bytes of ${t.name}`),un.swapBytes(t.buffer,Ki[t.dataType])),t.values=L.newTypedArray(t.dataType,t.buffer)),t.values.length!==t.size&&ls(`Error in FetchArray: ${t.name} does not have the proper array size. Got ${t.values.length}, instead of ${t.size}`),n()}}function DG(t,e,n){return r=>{e?t.values=JSON.parse(It(qt(r))):t.values=JSON.parse(r),n()}}function MG(t){return t[0]==="/"?t.substr(1):t}function LG(t){return new URL(t,"http://any").pathname}function mi(t){return MG(LG(t))}function _G(t){return new Promise((e,n)=>{typeof t=="string"?e(Q4(t)):t instanceof Blob?e(t.arrayBuffer().then(r=>new Uint8Array(r))):t instanceof ArrayBuffer?e(new Uint8Array(t)):(t==null?void 0:t.buffer)instanceof ArrayBuffer?e(new Uint8Array(t.buffer)):n(new Error("Invalid datatype to unpack."))})}function VG(t){let e=!1,n=0,r=null,a="";return _G(t.zipContent).then(s=>{r=dy(s),e=!0;const o=[];Object.keys(r).forEach(c=>{c.endsWith("index.json")&&o.push(c)}),o.sort((c,f)=>c.length-f.length),a=o[0].replace(/index\.json$/,""),t.callback&&t.callback(r)}),{fetchArray(s,o,c){let f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return new Promise((l,h)=>{e||ls("ERROR!!! zip not ready...");const g=mi([o,c.ref.basepath,f.compression?`${c.ref.id}.gz`:c.ref.id].join("/"));++n===1&&(s!=null&&s.invokeBusy)&&s.invokeBusy(!0);function d(){delete c.ref,--n===0&&(s!=null&&s.invokeBusy)&&s.invokeBusy(!1),s!=null&&s.modified&&s.modified(),l(c)}const v=r[`${a}${g}`];c.dataType==="string"&&!f.compression?DG(c,f.compression,d)(It(v)):OG(c,f.compression,d)(v)})},fetchJSON(s,o){let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const f=mi(o);e||ls("ERROR!!! zip not ready...");const l=r[`${a}${f}`];if(c.compression){if(c.compression==="gz"){const h=It(qt(l));return Promise.resolve(JSON.parse(h))}return Promise.reject(new Error("Invalid compression"))}return Promise.resolve(JSON.parse(It(l)))},fetchText(s,o){let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const f=mi(o);e||ls("ERROR!!! zip not ready...");const l=r[`${a}${f}`];return c.compression?c.compression==="gz"?Promise.resolve(It(dy(l))):Promise.reject(new Error("Invalid compression")):Promise.resolve(It(l))},fetchImage(s,o){const c=mi(o);e||ls("ERROR!!! zip not ready...");const f=r[`${a}${c}`];return new Promise((l,h)=>{const g=new Image;g.onload=()=>l(g),g.onerror=h;const d=IS(f.buffer);g.src=`data:image/${RG(c)};base64,${d}`})},fetchBinary(s,o){let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const f=mi(o);e||ls("ERROR!!! zip not ready...");const l=r[`${a}${f}`];return c.compression?c.compression==="gz"?Promise.resolve(qt(l).buffer):Promise.reject(new Error("Invalid compression")):Promise.resolve(l.buffer)}}}const kG={create:VG};Qi("zip",t=>kG.create(t));class BG{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.oriented=e,this.edgeMap=new Map}initialize(){this.edgeMap.clear()}computeEdgeKey(e,n){return this.oriented||e<n?.5*(e*n)*(e*n+1)+n:.5*(n*e)*(n*e+1)+e}insertUniqueEdge(e,n,r){const a=this.computeEdgeKey(e,n);let s=this.edgeMap.get(a);return s||(s={key:a,edgeId:this.edgeMap.size,value:r},this.edgeMap.set(a,s)),s}insertEdge(e,n,r){const a=this.computeEdgeKey(e,n),s={key:a,edgeId:this.edgeMap.size,value:r};return this.edgeMap.set(a,s),s}isInsertedEdge(e,n){const r=this.computeEdgeKey(e,n);return this.edgeMap.get(r)}static getEdgePointIds(e){const n=.5*(-1+Math.sqrt(8*e.key+1)),r=e.key-.5*(n+1)*n,a=n-r;return[r,a]}}function FG(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new BG(t.oriented)}var NG={newInstance:FG};const UG=[[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,3,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,9,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,3,8,9,1,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,3,8,1,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[9,11,2,0,9,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[2,3,8,2,8,11,11,8,9,-1,-1,-1,-1,-1,-1,-1],[3,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,2,10,8,0,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,0,9,2,10,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,2,10,1,10,9,9,10,8,-1,-1,-1,-1,-1,-1,-1],[3,1,11,10,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,1,11,0,11,8,8,11,10,-1,-1,-1,-1,-1,-1,-1],[3,0,9,3,9,10,10,9,11,-1,-1,-1,-1,-1,-1,-1],[9,11,8,11,10,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[4,8,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[4,0,3,7,4,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,9,1,8,7,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[4,9,1,4,1,7,7,1,3,-1,-1,-1,-1,-1,-1,-1],[1,11,2,8,7,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[3,7,4,3,4,0,1,11,2,-1,-1,-1,-1,-1,-1,-1],[9,11,2,9,2,0,8,7,4,-1,-1,-1,-1,-1,-1,-1],[2,9,11,2,7,9,2,3,7,7,4,9,-1,-1,-1,-1],[8,7,4,3,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[10,7,4,10,4,2,2,4,0,-1,-1,-1,-1,-1,-1,-1],[9,1,0,8,7,4,2,10,3,-1,-1,-1,-1,-1,-1,-1],[4,10,7,9,10,4,9,2,10,9,1,2,-1,-1,-1,-1],[3,1,11,3,11,10,7,4,8,-1,-1,-1,-1,-1,-1,-1],[1,11,10,1,10,4,1,4,0,7,4,10,-1,-1,-1,-1],[4,8,7,9,10,0,9,11,10,10,3,0,-1,-1,-1,-1],[4,10,7,4,9,10,9,11,10,-1,-1,-1,-1,-1,-1,-1],[9,4,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[9,4,5,0,3,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,4,5,1,0,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[8,4,5,8,5,3,3,5,1,-1,-1,-1,-1,-1,-1,-1],[1,11,2,9,4,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[3,8,0,1,11,2,4,5,9,-1,-1,-1,-1,-1,-1,-1],[5,11,2,5,2,4,4,2,0,-1,-1,-1,-1,-1,-1,-1],[2,5,11,3,5,2,3,4,5,3,8,4,-1,-1,-1,-1],[9,4,5,2,10,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,2,10,0,10,8,4,5,9,-1,-1,-1,-1,-1,-1,-1],[0,4,5,0,5,1,2,10,3,-1,-1,-1,-1,-1,-1,-1],[2,5,1,2,8,5,2,10,8,4,5,8,-1,-1,-1,-1],[11,10,3,11,3,1,9,4,5,-1,-1,-1,-1,-1,-1,-1],[4,5,9,0,1,8,8,1,11,8,11,10,-1,-1,-1,-1],[5,0,4,5,10,0,5,11,10,10,3,0,-1,-1,-1,-1],[5,8,4,5,11,8,11,10,8,-1,-1,-1,-1,-1,-1,-1],[9,8,7,5,9,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[9,0,3,9,3,5,5,3,7,-1,-1,-1,-1,-1,-1,-1],[0,8,7,0,7,1,1,7,5,-1,-1,-1,-1,-1,-1,-1],[1,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[9,8,7,9,7,5,11,2,1,-1,-1,-1,-1,-1,-1,-1],[11,2,1,9,0,5,5,0,3,5,3,7,-1,-1,-1,-1],[8,2,0,8,5,2,8,7,5,11,2,5,-1,-1,-1,-1],[2,5,11,2,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1],[7,5,9,7,9,8,3,2,10,-1,-1,-1,-1,-1,-1,-1],[9,7,5,9,2,7,9,0,2,2,10,7,-1,-1,-1,-1],[2,10,3,0,8,1,1,8,7,1,7,5,-1,-1,-1,-1],[10,1,2,10,7,1,7,5,1,-1,-1,-1,-1,-1,-1,-1],[9,8,5,8,7,5,11,3,1,11,10,3,-1,-1,-1,-1],[5,0,7,5,9,0,7,0,10,1,11,0,10,0,11,-1],[10,0,11,10,3,0,11,0,5,8,7,0,5,0,7,-1],[10,5,11,7,5,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[11,5,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,3,8,5,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[9,1,0,5,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,3,8,1,8,9,5,6,11,-1,-1,-1,-1,-1,-1,-1],[1,5,6,2,1,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,5,6,1,6,2,3,8,0,-1,-1,-1,-1,-1,-1,-1],[9,5,6,9,6,0,0,6,2,-1,-1,-1,-1,-1,-1,-1],[5,8,9,5,2,8,5,6,2,3,8,2,-1,-1,-1,-1],[2,10,3,11,5,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[10,8,0,10,0,2,11,5,6,-1,-1,-1,-1,-1,-1,-1],[0,9,1,2,10,3,5,6,11,-1,-1,-1,-1,-1,-1,-1],[5,6,11,1,2,9,9,2,10,9,10,8,-1,-1,-1,-1],[6,10,3,6,3,5,5,3,1,-1,-1,-1,-1,-1,-1,-1],[0,10,8,0,5,10,0,1,5,5,6,10,-1,-1,-1,-1],[3,6,10,0,6,3,0,5,6,0,9,5,-1,-1,-1,-1],[6,9,5,6,10,9,10,8,9,-1,-1,-1,-1,-1,-1,-1],[5,6,11,4,8,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[4,0,3,4,3,7,6,11,5,-1,-1,-1,-1,-1,-1,-1],[1,0,9,5,6,11,8,7,4,-1,-1,-1,-1,-1,-1,-1],[11,5,6,1,7,9,1,3,7,7,4,9,-1,-1,-1,-1],[6,2,1,6,1,5,4,8,7,-1,-1,-1,-1,-1,-1,-1],[1,5,2,5,6,2,3,4,0,3,7,4,-1,-1,-1,-1],[8,7,4,9,5,0,0,5,6,0,6,2,-1,-1,-1,-1],[7,9,3,7,4,9,3,9,2,5,6,9,2,9,6,-1],[3,2,10,7,4,8,11,5,6,-1,-1,-1,-1,-1,-1,-1],[5,6,11,4,2,7,4,0,2,2,10,7,-1,-1,-1,-1],[0,9,1,4,8,7,2,10,3,5,6,11,-1,-1,-1,-1],[9,1,2,9,2,10,9,10,4,7,4,10,5,6,11,-1],[8,7,4,3,5,10,3,1,5,5,6,10,-1,-1,-1,-1],[5,10,1,5,6,10,1,10,0,7,4,10,0,10,4,-1],[0,9,5,0,5,6,0,6,3,10,3,6,8,7,4,-1],[6,9,5,6,10,9,4,9,7,7,9,10,-1,-1,-1,-1],[11,9,4,6,11,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[4,6,11,4,11,9,0,3,8,-1,-1,-1,-1,-1,-1,-1],[11,1,0,11,0,6,6,0,4,-1,-1,-1,-1,-1,-1,-1],[8,1,3,8,6,1,8,4,6,6,11,1,-1,-1,-1,-1],[1,9,4,1,4,2,2,4,6,-1,-1,-1,-1,-1,-1,-1],[3,8,0,1,9,2,2,9,4,2,4,6,-1,-1,-1,-1],[0,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[8,2,3,8,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1],[11,9,4,11,4,6,10,3,2,-1,-1,-1,-1,-1,-1,-1],[0,2,8,2,10,8,4,11,9,4,6,11,-1,-1,-1,-1],[3,2,10,0,6,1,0,4,6,6,11,1,-1,-1,-1,-1],[6,1,4,6,11,1,4,1,8,2,10,1,8,1,10,-1],[9,4,6,9,6,3,9,3,1,10,3,6,-1,-1,-1,-1],[8,1,10,8,0,1,10,1,6,9,4,1,6,1,4,-1],[3,6,10,3,0,6,0,4,6,-1,-1,-1,-1,-1,-1,-1],[6,8,4,10,8,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[7,6,11,7,11,8,8,11,9,-1,-1,-1,-1,-1,-1,-1],[0,3,7,0,7,11,0,11,9,6,11,7,-1,-1,-1,-1],[11,7,6,1,7,11,1,8,7,1,0,8,-1,-1,-1,-1],[11,7,6,11,1,7,1,3,7,-1,-1,-1,-1,-1,-1,-1],[1,6,2,1,8,6,1,9,8,8,7,6,-1,-1,-1,-1],[2,9,6,2,1,9,6,9,7,0,3,9,7,9,3,-1],[7,0,8,7,6,0,6,2,0,-1,-1,-1,-1,-1,-1,-1],[7,2,3,6,2,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[2,10,3,11,8,6,11,9,8,8,7,6,-1,-1,-1,-1],[2,7,0,2,10,7,0,7,9,6,11,7,9,7,11,-1],[1,0,8,1,8,7,1,7,11,6,11,7,2,10,3,-1],[10,1,2,10,7,1,11,1,6,6,1,7,-1,-1,-1,-1],[8,6,9,8,7,6,9,6,1,10,3,6,1,6,3,-1],[0,1,9,10,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[7,0,8,7,6,0,3,0,10,10,0,6,-1,-1,-1,-1],[7,6,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[7,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[3,8,0,10,6,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,9,1,10,6,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[8,9,1,8,1,3,10,6,7,-1,-1,-1,-1,-1,-1,-1],[11,2,1,6,7,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,11,2,3,8,0,6,7,10,-1,-1,-1,-1,-1,-1,-1],[2,0,9,2,9,11,6,7,10,-1,-1,-1,-1,-1,-1,-1],[6,7,10,2,3,11,11,3,8,11,8,9,-1,-1,-1,-1],[7,3,2,6,7,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[7,8,0,7,0,6,6,0,2,-1,-1,-1,-1,-1,-1,-1],[2,6,7,2,7,3,0,9,1,-1,-1,-1,-1,-1,-1,-1],[1,2,6,1,6,8,1,8,9,8,6,7,-1,-1,-1,-1],[11,6,7,11,7,1,1,7,3,-1,-1,-1,-1,-1,-1,-1],[11,6,7,1,11,7,1,7,8,1,8,0,-1,-1,-1,-1],[0,7,3,0,11,7,0,9,11,6,7,11,-1,-1,-1,-1],[7,11,6,7,8,11,8,9,11,-1,-1,-1,-1,-1,-1,-1],[6,4,8,10,6,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[3,10,6,3,6,0,0,6,4,-1,-1,-1,-1,-1,-1,-1],[8,10,6,8,6,4,9,1,0,-1,-1,-1,-1,-1,-1,-1],[9,6,4,9,3,6,9,1,3,10,6,3,-1,-1,-1,-1],[6,4,8,6,8,10,2,1,11,-1,-1,-1,-1,-1,-1,-1],[1,11,2,3,10,0,0,10,6,0,6,4,-1,-1,-1,-1],[4,8,10,4,10,6,0,9,2,2,9,11,-1,-1,-1,-1],[11,3,9,11,2,3,9,3,4,10,6,3,4,3,6,-1],[8,3,2,8,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1],[0,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,0,9,2,4,3,2,6,4,4,8,3,-1,-1,-1,-1],[1,4,9,1,2,4,2,6,4,-1,-1,-1,-1,-1,-1,-1],[8,3,1,8,1,6,8,6,4,6,1,11,-1,-1,-1,-1],[11,0,1,11,6,0,6,4,0,-1,-1,-1,-1,-1,-1,-1],[4,3,6,4,8,3,6,3,11,0,9,3,11,3,9,-1],[11,4,9,6,4,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[4,5,9,7,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,3,8,4,5,9,10,6,7,-1,-1,-1,-1,-1,-1,-1],[5,1,0,5,0,4,7,10,6,-1,-1,-1,-1,-1,-1,-1],[10,6,7,8,4,3,3,4,5,3,5,1,-1,-1,-1,-1],[9,4,5,11,2,1,7,10,6,-1,-1,-1,-1,-1,-1,-1],[6,7,10,1,11,2,0,3,8,4,5,9,-1,-1,-1,-1],[7,10,6,5,11,4,4,11,2,4,2,0,-1,-1,-1,-1],[3,8,4,3,4,5,3,5,2,11,2,5,10,6,7,-1],[7,3,2,7,2,6,5,9,4,-1,-1,-1,-1,-1,-1,-1],[9,4,5,0,6,8,0,2,6,6,7,8,-1,-1,-1,-1],[3,2,6,3,6,7,1,0,5,5,0,4,-1,-1,-1,-1],[6,8,2,6,7,8,2,8,1,4,5,8,1,8,5,-1],[9,4,5,11,6,1,1,6,7,1,7,3,-1,-1,-1,-1],[1,11,6,1,6,7,1,7,0,8,0,7,9,4,5,-1],[4,11,0,4,5,11,0,11,3,6,7,11,3,11,7,-1],[7,11,6,7,8,11,5,11,4,4,11,8,-1,-1,-1,-1],[6,5,9,6,9,10,10,9,8,-1,-1,-1,-1,-1,-1,-1],[3,10,6,0,3,6,0,6,5,0,5,9,-1,-1,-1,-1],[0,8,10,0,10,5,0,5,1,5,10,6,-1,-1,-1,-1],[6,3,10,6,5,3,5,1,3,-1,-1,-1,-1,-1,-1,-1],[1,11,2,9,10,5,9,8,10,10,6,5,-1,-1,-1,-1],[0,3,10,0,10,6,0,6,9,5,9,6,1,11,2,-1],[10,5,8,10,6,5,8,5,0,11,2,5,0,5,2,-1],[6,3,10,6,5,3,2,3,11,11,3,5,-1,-1,-1,-1],[5,9,8,5,8,2,5,2,6,3,2,8,-1,-1,-1,-1],[9,6,5,9,0,6,0,2,6,-1,-1,-1,-1,-1,-1,-1],[1,8,5,1,0,8,5,8,6,3,2,8,6,8,2,-1],[1,6,5,2,6,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,6,3,1,11,6,3,6,8,5,9,6,8,6,9,-1],[11,0,1,11,6,0,9,0,5,5,0,6,-1,-1,-1,-1],[0,8,3,5,11,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[11,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[10,11,5,7,10,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[10,11,5,10,5,7,8,0,3,-1,-1,-1,-1,-1,-1,-1],[5,7,10,5,10,11,1,0,9,-1,-1,-1,-1,-1,-1,-1],[11,5,7,11,7,10,9,1,8,8,1,3,-1,-1,-1,-1],[10,2,1,10,1,7,7,1,5,-1,-1,-1,-1,-1,-1,-1],[0,3,8,1,7,2,1,5,7,7,10,2,-1,-1,-1,-1],[9,5,7,9,7,2,9,2,0,2,7,10,-1,-1,-1,-1],[7,2,5,7,10,2,5,2,9,3,8,2,9,2,8,-1],[2,11,5,2,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1],[8,0,2,8,2,5,8,5,7,11,5,2,-1,-1,-1,-1],[9,1,0,5,3,11,5,7,3,3,2,11,-1,-1,-1,-1],[9,2,8,9,1,2,8,2,7,11,5,2,7,2,5,-1],[1,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,7,8,0,1,7,1,5,7,-1,-1,-1,-1,-1,-1,-1],[9,3,0,9,5,3,5,7,3,-1,-1,-1,-1,-1,-1,-1],[9,7,8,5,7,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[5,4,8,5,8,11,11,8,10,-1,-1,-1,-1,-1,-1,-1],[5,4,0,5,0,10,5,10,11,10,0,3,-1,-1,-1,-1],[0,9,1,8,11,4,8,10,11,11,5,4,-1,-1,-1,-1],[11,4,10,11,5,4,10,4,3,9,1,4,3,4,1,-1],[2,1,5,2,5,8,2,8,10,4,8,5,-1,-1,-1,-1],[0,10,4,0,3,10,4,10,5,2,1,10,5,10,1,-1],[0,5,2,0,9,5,2,5,10,4,8,5,10,5,8,-1],[9,5,4,2,3,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[2,11,5,3,2,5,3,5,4,3,4,8,-1,-1,-1,-1],[5,2,11,5,4,2,4,0,2,-1,-1,-1,-1,-1,-1,-1],[3,2,11,3,11,5,3,5,8,4,8,5,0,9,1,-1],[5,2,11,5,4,2,1,2,9,9,2,4,-1,-1,-1,-1],[8,5,4,8,3,5,3,1,5,-1,-1,-1,-1,-1,-1,-1],[0,5,4,1,5,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[8,5,4,8,3,5,9,5,0,0,5,3,-1,-1,-1,-1],[9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[4,7,10,4,10,9,9,10,11,-1,-1,-1,-1,-1,-1,-1],[0,3,8,4,7,9,9,7,10,9,10,11,-1,-1,-1,-1],[1,10,11,1,4,10,1,0,4,7,10,4,-1,-1,-1,-1],[3,4,1,3,8,4,1,4,11,7,10,4,11,4,10,-1],[4,7,10,9,4,10,9,10,2,9,2,1,-1,-1,-1,-1],[9,4,7,9,7,10,9,10,1,2,1,10,0,3,8,-1],[10,4,7,10,2,4,2,0,4,-1,-1,-1,-1,-1,-1,-1],[10,4,7,10,2,4,8,4,3,3,4,2,-1,-1,-1,-1],[2,11,9,2,9,7,2,7,3,7,9,4,-1,-1,-1,-1],[9,7,11,9,4,7,11,7,2,8,0,7,2,7,0,-1],[3,11,7,3,2,11,7,11,4,1,0,11,4,11,0,-1],[1,2,11,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[4,1,9,4,7,1,7,3,1,-1,-1,-1,-1,-1,-1,-1],[4,1,9,4,7,1,0,1,8,8,1,7,-1,-1,-1,-1],[4,3,0,7,3,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[9,8,11,11,8,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[3,9,0,3,10,9,10,11,9,-1,-1,-1,-1,-1,-1,-1],[0,11,1,0,8,11,8,10,11,-1,-1,-1,-1,-1,-1,-1],[3,11,1,10,11,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,10,2,1,9,10,9,8,10,-1,-1,-1,-1,-1,-1,-1],[3,9,0,3,10,9,1,9,2,2,9,10,-1,-1,-1,-1],[0,10,2,8,10,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[3,10,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[2,8,3,2,11,8,11,9,8,-1,-1,-1,-1,-1,-1,-1],[9,2,11,0,2,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[2,8,3,2,11,8,0,8,1,1,8,11,-1,-1,-1,-1],[1,2,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,8,3,9,8,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,1,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]],GG=[[0,1],[1,3],[2,3],[0,2],[4,5],[5,7],[6,7],[4,6],[0,4],[1,5],[2,6],[3,7]];function $G(t){return UG[t]}function zG(t){return GG[t]}var yy={getCase:$G,getEdge:zG};const{vtkErrorMacro:WG,vtkDebugMacro:HG}=L;function bG(t,e){e.classHierarchy.push("vtkImageMarchingCubes");const n=[],r=[],a=[],s=[],o=NG.newInstance();t.getVoxelScalars=(c,f,l,h,g,d,v,S)=>{n[0]=l*h+f*g[0]+c,n[1]=n[0]+1,n[2]=n[0]+g[0],n[3]=n[2]+1,n[4]=n[0]+h,n[5]=n[4]+1,n[6]=n[4]+g[0],n[7]=n[6]+1;for(let T=0;T<8;++T)r[T]=S[n[T]]},t.getVoxelPoints=(c,f,l,h,g)=>{s[0]=h[0]+c*g[0],s[1]=h[1]+f*g[1],s[2]=h[2]+l*g[2],s[3]=s[0]+g[0],s[4]=s[1],s[5]=s[2],s[6]=s[0],s[7]=s[1]+g[1],s[8]=s[2],s[9]=s[3],s[10]=s[7],s[11]=s[2],s[12]=s[0],s[13]=s[1],s[14]=s[2]+g[2],s[15]=s[3],s[16]=s[1],s[17]=s[14],s[18]=s[0],s[19]=s[7],s[20]=s[14],s[21]=s[3],s[22]=s[7],s[23]=s[14]},t.getPointGradient=(c,f,l,h,g,d,v,S)=>{let T,x;c===0?(T=v[c+1+f*h[0]+l*g],x=v[c+f*h[0]+l*g],S[0]=(x-T)/d[0]):c===h[0]-1?(T=v[c+f*h[0]+l*g],x=v[c-1+f*h[0]+l*g],S[0]=(x-T)/d[0]):(T=v[c+1+f*h[0]+l*g],x=v[c-1+f*h[0]+l*g],S[0]=.5*(x-T)/d[0]),f===0?(T=v[c+(f+1)*h[0]+l*g],x=v[c+f*h[0]+l*g],S[1]=(x-T)/d[1]):f===h[1]-1?(T=v[c+f*h[0]+l*g],x=v[c+(f-1)*h[0]+l*g],S[1]=(x-T)/d[1]):(T=v[c+(f+1)*h[0]+l*g],x=v[c+(f-1)*h[0]+l*g],S[1]=.5*(x-T)/d[1]),l===0?(T=v[c+f*h[0]+(l+1)*g],x=v[c+f*h[0]+l*g],S[2]=(x-T)/d[2]):l===h[2]-1?(T=v[c+f*h[0]+l*g],x=v[c+f*h[0]+(l-1)*g],S[2]=(x-T)/d[2]):(T=v[c+f*h[0]+(l+1)*g],x=v[c+f*h[0]+(l-1)*g],S[2]=.5*(x-T)/d[2])},t.getVoxelGradients=(c,f,l,h,g,d,v)=>{const S=[];t.getPointGradient(c,f,l,h,g,d,v,S),a[0]=S[0],a[1]=S[1],a[2]=S[2],t.getPointGradient(c+1,f,l,h,g,d,v,S),a[3]=S[0],a[4]=S[1],a[5]=S[2],t.getPointGradient(c,f+1,l,h,g,d,v,S),a[6]=S[0],a[7]=S[1],a[8]=S[2],t.getPointGradient(c+1,f+1,l,h,g,d,v,S),a[9]=S[0],a[10]=S[1],a[11]=S[2],t.getPointGradient(c,f,l+1,h,g,d,v,S),a[12]=S[0],a[13]=S[1],a[14]=S[2],t.getPointGradient(c+1,f,l+1,h,g,d,v,S),a[15]=S[0],a[16]=S[1],a[17]=S[2],t.getPointGradient(c,f+1,l+1,h,g,d,v,S),a[18]=S[0],a[19]=S[1],a[20]=S[2],t.getPointGradient(c+1,f+1,l+1,h,g,d,v,S),a[21]=S[0],a[22]=S[1],a[23]=S[2]},t.produceTriangles=(c,f,l,h,g,d,v,S,T,x,m,O,w)=>{var U;const R=[1,2,4,8,16,32,64,128],M=[0,1,3,2,4,5,7,6],D=[],V=[];let B;t.getVoxelScalars(f,l,h,d,v,S,T,x);let z=0;for(let H=0;H<8;H++)r[M[H]]>=c&&(z|=R[H]);const k=yy.getCase(z);if(!(k[0]<0)){t.getVoxelPoints(f+g[0],l+g[2],h+g[4],S,T),e.computeNormals&&t.getVoxelGradients(f,l,h,v,d,T,x);for(let H=0;k[H]>=0;H+=3){O.push(3);for(let P=0;P<3;P++){const A=yy.getEdge(k[H+P]);if(B=void 0,e.mergePoints&&(B=(U=o.isInsertedEdge(n[A[0]],n[A[1]]))==null?void 0:U.value),B===void 0){const ne=(c-r[A[0]])/(r[A[1]]-r[A[0]]),ae=s.slice(A[0]*3,(A[0]+1)*3),se=s.slice(A[1]*3,(A[1]+1)*3);if(D[0]=ae[0]+ne*(se[0]-ae[0]),D[1]=ae[1]+ne*(se[1]-ae[1]),D[2]=ae[2]+ne*(se[2]-ae[2]),B=m.length/3,m.push(D[0],D[1],D[2]),e.computeNormals){const Q=a.slice(A[0]*3,(A[0]+1)*3),j=a.slice(A[1]*3,(A[1]+1)*3);V[0]=Q[0]+ne*(j[0]-Q[0]),V[1]=Q[1]+ne*(j[1]-Q[1]),V[2]=Q[2]+ne*(j[2]-Q[2]),xs(V),w.push(V[0],V[1],V[2])}e.mergePoints&&o.insertEdge(n[A[0]],n[A[1]],B)}O.push(B)}}}},t.requestData=(c,f)=>{const l=c[0];if(!l){WG("Invalid or missing input");return}console.time("mcubes");const h=l.getOrigin(),g=l.getSpacing(),d=l.getDimensions(),v=l.getPointData().getScalars().getData(),S=[],T=[],x=[],m=l.getExtent(),O=d[0]*d[1];for(let R=0;R<d[2]-1;++R)for(let M=0;M<d[1]-1;++M)for(let D=0;D<d[0]-1;++D)t.produceTriangles(e.contourValue,D,M,R,m,O,d,h,g,v,S,T,x);o.initialize();const w=jn.newInstance();if(w.getPoints().setData(new Float32Array(S),3),w.getPolys().setData(new Uint32Array(T)),e.computeNormals){const R=new Float32Array(x),M=Oe.newInstance({numberOfComponents:3,values:R,name:"Normals"});w.getPointData().setNormals(M)}f[0]=w,HG("Produced output"),console.timeEnd("mcubes")}}const AG={contourValue:0,computeNormals:!1,mergePoints:!1};function ZS(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,AG,n),L.obj(t,e),L.algo(t,e,1,1),L.setGet(t,e,["contourValue","computeNormals","mergePoints"]),L.algo(t,e,1,1),bG(t,e)}const jG=L.newInstance(ZS,"vtkImageMarchingCubes");var KG={newInstance:jG,extend:ZS};function PG(t,e){e.classHierarchy.push("vtkStringArray"),t.getComponent=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.values[n*e.numberOfComponents+r]},t.setComponent=(n,r,a)=>{a!==e.values[n*e.numberOfComponents+r]&&(e.values[n*e.numberOfComponents+r]=a,t.modified())},t.getData=()=>e.values,t.getTuple=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const a=e.numberOfComponents||1;r.length&&(r.length=a);const s=n*a;for(let o=0;o<a;o++)r[o]=e.values[s+o];return r},t.getTupleLocation=function(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:1)*e.numberOfComponents},t.getNumberOfComponents=()=>e.numberOfComponents,t.getNumberOfValues=()=>e.values.length,t.getNumberOfTuples=()=>e.values.length/e.numberOfComponents,t.getDataType=()=>e.dataType,t.newClone=()=>eC({name:e.name,numberOfComponents:e.numberOfComponents,empty:!0}),t.getName=()=>(e.name||t.setName(`vtkStringArray${t.getMTime()}`),e.name),t.setData=(n,r)=>{e.values=n,e.size=n.length,r&&(e.numberOfComponents=r),e.size%e.numberOfComponents!==0&&(e.numberOfComponents=1),t.modified()}}const XG={name:"",numberOfComponents:1,size:0,dataType:"string"};function JS(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Object.assign(e,XG,n),!e.empty&&!e.values&&!e.size)throw new TypeError("Cannot create vtkStringArray object without: size > 0, values");e.values?Array.isArray(e.values)&&(e.values=[...e.values]):e.values=[],e.values&&(e.size=e.values.length),L.obj(t,e),L.set(t,e,["name"]),PG(t,e)}const eC=L.newInstance(JS,"vtkStringArray");var IG={newInstance:eC,extend:JS};const{vtkErrorMacro:tC,vtkDebugMacro:YG}=L,cp=()=>(tC("LiteHttpDataAccessHelper does not support compression. Need to register HttpDataAccessHelper instead."),Promise.reject(new Error("LiteHttpDataAccessHelper does not support compression. Need to register HttpDataAccessHelper instead.")));let ms=0;function Gc(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=new XMLHttpRequest;return r.open(t,e,!0),n.headers&&Object.entries(n.headers).forEach(a=>{let[s,o]=a;return r.setRequestHeader(s,o)}),n.progressCallback&&r.addEventListener("progress",n.progressCallback),r}function qG(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((n,r)=>{const a=Gc("GET",t,e);a.onreadystatechange=s=>{a.readyState===4&&(a.status===200||a.status===0?n(a.response):r({xhr:a,e:s}))},a.responseType="arraybuffer",a.send()})}function QG(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return r&&r.compression?cp():n.ref&&!n.ref.pending?new Promise((a,s)=>{const o=[e,n.ref.basepath,n.ref.id].join("/"),c=Gc("GET",o,r);c.onreadystatechange=f=>{c.readyState===1&&(n.ref.pending=!0,++ms===1&&(t!=null&&t.invokeBusy)&&t.invokeBusy(!0)),c.readyState===4&&(n.ref.pending=!1,c.status===200||c.status===0?(n.buffer=c.response,n.ref.encode==="JSON"?n.values=JSON.parse(n.buffer):(un.ENDIANNESS!==n.ref.encode&&un.ENDIANNESS&&(YG(`Swap bytes of ${n.name}`),un.swapBytes(n.buffer,Ki[n.dataType])),n.values=L.newTypedArray(n.dataType,n.buffer)),n.values.length!==n.size&&tC(`Error in FetchArray: ${n.name}, does not have the proper array size. Got ${n.values.length}, instead of ${n.size}`),delete n.ref,--ms===0&&(t!=null&&t.invokeBusy)&&t.invokeBusy(!1),t!=null&&t.modified&&t.modified(),a(n)):s({xhr:c,e:f}))},c.responseType=n.dataType!=="string"?"arraybuffer":"text",c.send()}):Promise.resolve(n)}function ZG(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return n&&n.compression?cp():new Promise((r,a)=>{const s=Gc("GET",e,n);s.onreadystatechange=o=>{s.readyState===1&&++ms===1&&t!=null&&t.invokeBusy&&t.invokeBusy(!0),s.readyState===4&&(--ms===0&&(t!=null&&t.invokeBusy)&&t.invokeBusy(!1),s.status===200||s.status===0?r(JSON.parse(s.responseText)):a({xhr:s,e:o}))},s.responseType="text",s.send()})}function JG(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return n&&n.compression?cp():new Promise((r,a)=>{const s=Gc("GET",e,n);s.onreadystatechange=o=>{s.readyState===1&&++ms===1&&t!=null&&t.invokeBusy&&t.invokeBusy(!0),s.readyState===4&&(--ms===0&&(t!=null&&t.invokeBusy)&&t.invokeBusy(!1),s.status===200||s.status===0?r(s.responseText):a({xhr:s,e:o}))},s.responseType="text",s.send()})}function e5(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise((r,a)=>{const s=new Image;n.crossOrigin&&(s.crossOrigin=n.crossOrigin),s.onload=()=>r(s),s.onerror=a,s.src=e})}const t5={fetchArray:QG,fetchJSON:ZG,fetchText:JG,fetchBinary:qG,fetchImage:e5};qS("http")||Qi("http",t=>t5);const n5=["pointData","cellData","fieldData"],r5={vtkDataArray:Oe,vtkStringArray:IG},ar={},sr={},a5=1024*1024,s5={vtkPolyData(t){const e=[];return e.push(t.points),["verts","lines","polys","strips"].forEach(n=>{t[n]&&e.push(t[n])}),e},vtkImageData(t){return[]},vtkUnstructuredGrid(t){const e=[];return e.push(t.points),e.push(t.cells),e.push(t.cellTypes),e},vtkRectilinearGrid(t){const e=[];return e.push(t.xCoordinates),e.push(t.yCoordinates),e.push(t.zCoordinates),e}};function i5(t,e,n,r,a,s,o){const c=e.enableArray;e.arrays=[],n5.forEach(d=>{n[d]&&(n[d].arrays.map(v=>v.data).forEach(v=>{e.arrays.push({name:v.name,enable:c,location:d,array:v,registration:v.ref.registration||"addArray"})}),n[d].arrays=[])});const f=[],{progressCallback:l}=e,h=e.fetchGzip?"gz":null;s5[n.vtkClass](n).forEach(d=>{f.push(r(d,{compression:h,progressCallback:l}))});function g(){e.dataset=Yt(n),o?t.loadData().then(()=>{e.output[0]=e.dataset,a(t,e.output[0])}):(e.output[0]=e.dataset,a(t,e.output[0]))}f.length?Promise.all(f).then(g,d=>{s(d)}):g()}function o5(t,e){e.classHierarchy.push("vtkHttpDataSetReader"),e.output[0]=Yt({vtkClass:"vtkPolyData"}),e.dataAccessHelper||(e.dataAccessHelper=Lg.get("http"));function n(r){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=`${r.ref.id}|${r.vtkClass}`;return ar[s]?Promise.resolve(ar[s]).then(o=>{r!==o&&(e.maxCacheSize&&(sr[s].lastAccess=new Date),Object.assign(r,o),delete r.ref)}):ar[s]=e.dataAccessHelper.fetchArray(t,e.baseURL,r,a).then(o=>{if(!e.maxCacheSize)return delete ar[s],o;if(ar[s]=o,sr[s]={lastAccess:new Date},e.maxCacheSize<0)return o;const c={};Object.keys(sr).forEach(g=>{c[g]={array:ar[g],lastAccess:sr[g].lastAccess}});const f=Object.entries(c).sort((g,d)=>Math.sign(d[1].lastAccess-g[1].lastAccess)),l=e.maxCacheSize*a5;let h=Object.values(c).reduce((g,d)=>g+d.array.values.byteLength,0);for(;h>l&&f.length>0;){const[g,d]=f.pop();delete ar[g],delete sr[g],h-=d.array.values.byteLength}return sr[s]||L.vtkWarningMacro("Cache size is too small for the dataset"),o}),Promise.resolve(ar[s])}t.updateMetadata=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return e.compression==="zip"?new Promise((a,s)=>{Lg.get("http").fetchBinary(e.url).then(o=>{e.dataAccessHelper=Lg.get("zip",{zipContent:o,callback:c=>{e.baseURL="",e.dataAccessHelper.fetchJSON(t,"index.json").then(f=>{t.parseObject(f,{loadData:r,deepCopy:!1}).then(a,s)},f=>{s(f)})}})},o=>{s(o)})}):new Promise((a,s)=>{e.dataAccessHelper.fetchJSON(t,e.url).then(o=>{t.parseObject(o,{loadData:r,deepCopy:!1}).then(a,s)},o=>{s(o)})})},t.setUrl=function(r){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(r.indexOf("index.json")===-1&&!a.fullpath)e.baseURL=r,e.url=`${r}/index.json`;else{e.url=r;const s=r.split("/");s.pop(),e.baseURL=s.join("/")}return e.compression=a.compression,t.updateMetadata(!!a.loadData)},t.parseObject=(r,a)=>{let{loadData:s,baseUrl:o,deepCopy:c=!0}=a;o&&(e.baseURL=o);const f=c?structuredClone(r):r;return new Promise((l,h)=>{i5(t,e,f,n,l,h,s)})},t.loadData=()=>{const r=e.dataset,a=e.arrays.filter(s=>s.enable).filter(s=>s.array.ref).map(s=>s.array);return new Promise((s,o)=>{const c=l=>{o(l)},f=()=>{if(a.length){const{progressCallback:l}=e,h=e.fetchGzip?"gz":null;n(a.pop(),{compression:h,progressCallback:l}).then(f,c)}else r&&(e.arrays.filter(l=>l.registration&&!l.array.ref).forEach(l=>{const h=r5[l.array.vtkClass].newInstance(l.array);r[`get${L.capitalize(l.location)}`]()[l.registration](h),delete l.registration}),r.modified(),s(t,r))};f()})},t.requestData=(r,a)=>{},t.enableArray=function(r,a){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const o=e.arrays.filter(c=>c.name===a&&c.location===r);o.length===1&&(o[0].enable=s)},t.getCachedArrayIds=()=>Object.keys(sr),t.clearCache=()=>Object.keys(sr).forEach(r=>{delete ar[r],delete sr[r]}),t.isBusy=()=>!!e.requestCount}const u5={enableArray:!0,fetchGzip:!1,arrays:[],url:null,baseURL:null,requestCount:0,arrayCachingEnabled:!0,maxCacheSize:2048};function nC(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,u5,n),L.obj(t,e),L.get(t,e,["enableArray","fetchGzip","url","baseURL","dataAccessHelper","maxCacheSize"]),L.set(t,e,["dataAccessHelper","progressCallback","maxCacheSize"]),L.getArray(t,e,["arrays"]),L.algo(t,e,0,1),L.event(t,e,"busy"),o5(t,e),e.progressCallback===void 0&&(e.progressCallback=null)}const c5=L.newInstance(nC,"vtkHttpDataSetReader");var rC={newInstance:c5,extend:nC};const f5=()=>{const t=Y.useRef(null),e=Y.useRef(null),[n,r]=Y.useState(20),[a,s]=Y.useState(0),[o,c]=Y.useState(100);return Y.useEffect(()=>{if(!e.current&&t.current){console.info("Creation");const f=ep.newInstance();f.setContainer(t.current);const l=f.getRenderer(),h=f.getRenderWindow(),g=An.newInstance(),d=bn.newInstance(),v=KG.newInstance({contourValue:0,computeNormals:!0,mergePoints:!0});d.setMapper(g),g.setInputConnection(v.getOutputPort());const S=rC.newInstance({fetchGzip:!0});v.setInputConnection(S.getOutputPort()),e.current={fullScreenRenderer:f,renderWindow:h,renderer:l,actor:d,mapper:g,marchingCube:v},S.setUrl("https://kitware.github.io/vtk-js/data/volume/headsq.vti",{loadData:!0}).then(()=>{console.log("Data Fetched");const x=S.getOutputData().getPointData().getScalars().getRange(),m=(x[0]+x[1])/3;r(m),s(x[0]),c(x[1]),console.log(m),console.log(x[0]),console.log(x[1]),v.setContourValue(m),l.addActor(d),l.getActiveCamera().set({position:[1,1,0],viewUp:[0,0,-1]}),l.resetCamera(),h.render()})}return()=>{if(console.log("unmount"),e.current){console.info("Deletion");const{fullScreenRenderer:f,actor:l,mapper:h,marchingCube:g}=e.current;l.delete(),h.delete(),f.delete(),g.delete(),e.current=null}}},[t]),Y.useEffect(()=>{if(e.current){const{marchingCube:f,renderWindow:l}=e.current;console.log(n),f.setContourValue(n),l.render()}},[n]),_e.jsxs("div",{children:[_e.jsx("div",{ref:t}),_e.jsx("table",{style:{position:"absolute",top:"25px",left:"25px",background:"white",padding:"12px"},children:_e.jsx("tbody",{children:_e.jsx("tr",{children:_e.jsx("td",{children:_e.jsx("input",{type:"range",min:a,max:o,value:n,onChange:f=>r(Number(f.target.value))})})})})})]})},{vtkErrorMacro:l5}=L;function g5(t,e){let n=0;return t.map((r,a)=>a===n?(n+=r+1,r):r+e)}function $u(t,e,n,r){t.set(g5(e,n),r)}function p5(t,e){e.classHierarchy.push("vtkAppendPolyData"),t.requestData=(n,r)=>{const a=t.getNumberOfInputPorts();if(!a){l5("No input specified.");return}if(a===1){r[0]=n[0];return}const s=jn.newInstance();let o=0,c=0,f=1,l=1,h=0,g=0,d=0,v=0,S=!0,T=!0,x=!0;for(let U=0;U<a;U++){const H=n[U];if(!H)continue;const P=H.getPoints().getNumberOfPoints();o+=P,h+=H.getVerts().getNumberOfValues(),g+=H.getLines().getNumberOfValues(),d+=H.getStrips().getNumberOfValues(),v+=H.getPolys().getNumberOfValues(),P&&(l&&(l=0,c=H.getPoints().getDataType()),f=H.getPoints().getDataType(),c=c>f?c:f);const A=H.getPointData();A?(S=S&&A.getNormals()!==null,T=T&&A.getTCoords()!==null,x=x&&A.getScalars()!==null):(S=!1,T=!1,x=!1)}e.outputPointsPrecision===dc.SINGLE?c=rt.FLOAT:e.outputPointsPrecision===dc.DOUBLE&&(c=rt.DOUBLE);const m=$i.newInstance({dataType:c});m.setNumberOfPoints(o);const O=m.getData(),w=new Uint32Array(h),R=new Uint32Array(g),M=new Uint32Array(d),D=new Uint32Array(v);let V=null,B=null,z=null;const k=n[a-1];if(S){const U=k.getPointData().getNormals();V=Oe.newInstance({numberOfComponents:3,numberOfTuples:o,size:3*o,dataType:U.getDataType(),name:U.getName()})}if(T){const U=k.getPointData().getTCoords();B=Oe.newInstance({numberOfComponents:2,numberOfTuples:o,size:2*o,dataType:U.getDataType(),name:U.getName()})}if(x){const U=k.getPointData().getScalars();z=Oe.newInstance({numberOfComponents:U.getNumberOfComponents(),numberOfTuples:o,size:o*U.getNumberOfComponents(),dataType:U.getDataType(),name:U.getName()})}o=0,h=0,g=0,d=0,v=0;for(let U=0;U<a;U++){const H=n[U];O.set(H.getPoints().getData(),o*3),$u(w,H.getVerts().getData(),o,h),h+=H.getVerts().getNumberOfValues(),$u(R,H.getLines().getData(),o,g),g+=H.getLines().getNumberOfValues(),$u(M,H.getStrips().getData(),o,d),d+=H.getStrips().getNumberOfValues(),$u(D,H.getPolys().getData(),o,v),v+=H.getPolys().getNumberOfValues();const P=H.getPointData();if(S){const A=P.getNormals();V.getData().set(A.getData(),o*3)}if(T){const A=P.getTCoords();B.getData().set(A.getData(),o*2)}if(x){const A=P.getScalars();z.getData().set(A.getData(),o*z.getNumberOfComponents())}o+=H.getPoints().getNumberOfPoints()}s.setPoints(m),s.getVerts().setData(w),s.getLines().setData(R),s.getStrips().setData(M),s.getPolys().setData(D),V&&s.getPointData().setNormals(V),B&&s.getPointData().setTCoords(B),z&&s.getPointData().setScalars(z),r[0]=s}}const h5={outputPointsPrecision:dc.DEFAULT};function aC(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,h5,n),L.setGet(t,e,["outputPointsPrecision"]),L.obj(t,e),L.algo(t,e,1,1),p5(t,e)}const d5=L.newInstance(aC,"vtkAppendPolyData");var sC={newInstance:d5,extend:aC};function v5(t,e){e.classHierarchy.push("vtkCylinderSource");function n(r,a){if(e.deleted)return;let s=a[0];const o=2*Math.PI/e.resolution;let c=2*e.resolution,f=5*e.resolution;e.capping&&(c=4*e.resolution,f=7*e.resolution+2);const l=L.newTypedArray(e.pointType,c*3);let h=0;const g=new Uint32Array(f),d=new Float32Array(c*3),v=Oe.newInstance({numberOfComponents:3,values:d,name:"Normals"}),S=new Float32Array(c*2),T=Oe.newInstance({numberOfComponents:2,values:S,name:"TCoords"}),x=[0,0,0],m=[0,0,0],O=[0,0,0],w=[0,0,0],R=[0,0],M=[0,0],D=e.otherRadius==null?e.radius:e.otherRadius;for(let V=0;V<e.resolution;V++){x[0]=Math.cos(V*o+e.initAngle),m[0]=x[0],O[0]=e.radius*x[0]+e.center[0],w[0]=O[0],R[0]=Math.abs(2*V/e.resolution-1),M[0]=R[0],O[1]=.5*e.height+e.center[1],w[1]=-.5*e.height+e.center[1],R[1]=0,M[1]=1,x[2]=-Math.sin(V*o+e.initAngle),m[2]=x[2],O[2]=D*x[2]+e.center[2],w[2]=O[2];const B=2*V;for(let z=0;z<3;z++)d[B*3+z]=x[z],d[(B+1)*3+z]=m[z],l[B*3+z]=O[z],l[(B+1)*3+z]=w[z],z<2&&(S[B*2+z]=R[z],S[(B+1)*2+z]=M[z])}for(let V=0;V<e.resolution;V++){g[h++]=4,g[h++]=2*V,g[h++]=2*V+1;const B=(2*V+3)%(2*e.resolution);g[h++]=B,g[h++]=B-1}if(e.capping){for(let V=0;V<e.resolution;V++){O[0]=e.radius*Math.cos(V*o+e.initAngle),w[0]=O[0],R[0]=O[0],M[0]=O[0],O[0]+=e.center[0],w[0]+=e.center[0],x[1]=1,m[1]=-1,O[1]=.5*e.height+e.center[1],w[1]=-.5*e.height+e.center[1],O[2]=-D*Math.sin(V*o+e.initAngle),w[2]=O[2],R[1]=O[2],M[1]=O[2],O[2]+=e.center[2],w[2]+=e.center[2];const B=2*e.resolution+V,z=3*e.resolution+e.resolution-V-1;for(let k=0;k<3;k++)d[3*B+k]=x[k],d[3*z+k]=m[k],l[3*B+k]=O[k],l[3*z+k]=w[k],k<2&&(S[2*B+k]=R[k],S[2*z+k]=M[k])}g[h++]=e.resolution;for(let V=0;V<e.resolution;V++)g[h++]=2*e.resolution+V;g[h++]=e.resolution;for(let V=0;V<e.resolution;V++)g[h++]=3*e.resolution+V}cr.buildFromRadian().translate(...e.center).rotateFromDirections([0,1,0],e.direction).translate(...e.center.map(V=>V*-1)).apply(l),s=jn.newInstance(),s.getPoints().setData(l,3),s.getPolys().setData(g,1),s.getPointData().setNormals(v),s.getPointData().setTCoords(T),a[0]=s}t.requestData=n}const y5={height:1,initAngle:0,radius:1,resolution:6,center:[0,0,0],direction:[0,1,0],capping:!0,pointType:"Float64Array"};function iC(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,y5,n),L.obj(t,e),L.setGet(t,e,["height","initAngle","otherRadius","radius","resolution","capping"]),L.setGetArray(t,e,["center","direction"],3),L.algo(t,e,0,1),v5(t,e)}const T5=L.newInstance(iC,"vtkCylinderSource");var x5={newInstance:T5,extend:iC};function S5(t,e){e.classHierarchy.push("vtkArrowSource");function n(r,a){if(e.deleted)return;const s=x5.newInstance({capping:!0});s.setResolution(e.shaftResolution),s.setRadius(e.shaftRadius),s.setHeight(1-e.tipLength),s.setCenter(0,(1-e.tipLength)*.5,0);const o=s.getOutputData(),c=o.getPoints().getData(),f=o.getPointData().getNormals().getData();cr.buildFromDegree().rotateZ(-90).apply(c).apply(f);const l=V2.newInstance();l.setResolution(e.tipResolution),l.setHeight(e.tipLength),l.setRadius(e.tipRadius);const h=l.getOutputData(),g=h.getPoints().getData();cr.buildFromRadian().translate(1-e.tipLength*.5,0,0).apply(g);const d=sC.newInstance();d.setInputData(o),d.addInputData(h);const v=d.getOutputData(),S=v.getPoints().getData();cr.buildFromRadian().translate(-.5+e.tipLength*.5,0,0).apply(S),e.invert?(cr.buildFromRadian().rotateFromDirections([1,0,0],e.direction).scale(-1,-1,-1).apply(S),a[0]=v):(cr.buildFromRadian().rotateFromDirections([1,0,0],e.direction).scale(1,1,1).apply(S),a[0]=d.getOutputData())}t.requestData=n}const C5={tipResolution:6,tipRadius:.1,tipLength:.35,shaftResolution:6,shaftRadius:.03,invert:!1,direction:[1,0,0],pointType:"Float64Array"};function oC(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,C5,n),L.obj(t,e),L.setGet(t,e,["tipResolution","tipRadius","tipLength","shaftResolution","shaftRadius","invert"]),L.setGetArray(t,e,["direction"],3),L.algo(t,e,0,1),S5(t,e)}const w5=L.newInstance(oC,"vtkArrowSource");var _g={newInstance:w5,extend:oC};function Vg(t){const e=t.getPoints().getBounds(),n=[-(e[0]+e[1])*.5,-(e[2]+e[3])*.5,-(e[4]+e[5])*.5];cr.buildFromDegree().translate(...n).apply(t.getPoints().getData())}function kg(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const r=t.getPoints().getBounds(),a=[0,0,0];n?a[e]=-r[e*2+1]:a[e]=-r[e*2],cr.buildFromDegree().translate(...a).apply(t.getPoints().getData())}function Bg(t,e,n,r){const a=t.getPoints().getData().length,s=new Uint8ClampedArray(a);let o=0;for(;o<a;)s[o++]=e,s[o++]=n,s[o++]=r;t.getPointData().setScalars(Oe.newInstance({name:"color",numberOfComponents:3,values:s}))}function E5(t,e){e.classHierarchy.push("vtkAxesActor");const n=An.newInstance();t.setMapper(n),t.update=()=>{let a={...e.config,...e.xConfig};const s=_g.newInstance({direction:[1,0,0],...a}).getOutputData();e.config.recenter?Vg(s):kg(s,0,a.invert),Bg(s,...a.color),a={...e.config,...e.yConfig};const o=_g.newInstance({direction:[0,1,0],...a}).getOutputData();e.config.recenter?Vg(o):kg(o,1,a.invert),Bg(o,...a.color),a={...e.config,...e.zConfig};const c=_g.newInstance({direction:[0,0,1],...a}).getOutputData();e.config.recenter?Vg(c):kg(c,2,a.invert),Bg(c,...a.color);const f=sC.newInstance();f.setInputData(s),f.addInputData(o),f.addInputData(c),n.setInputConnection(f.getOutputPort())},t.update();const r=L.debounce(t.update,0);t.setXAxisColor=a=>t.setXConfig({...t.getXConfig(),color:a}),t.setYAxisColor=a=>t.setYConfig({...t.getYConfig(),color:a}),t.setZAxisColor=a=>t.setZConfig({...t.getZConfig(),color:a}),t.getXAxisColor=()=>e.getXConfig().color,t.getYAxisColor=()=>e.getYConfig().color,t.getZAxisColor=()=>e.getZConfig().color,e._onConfigChanged=r,e._onXConfigChanged=r,e._onYConfigChanged=r,e._onZConfigChanged=r}function m5(t){return{config:{recenter:!0,tipResolution:60,tipRadius:.1,tipLength:.2,shaftResolution:60,shaftRadius:.03,invert:!1,...t==null?void 0:t.config},xConfig:{color:[255,0,0],invert:!1,...t==null?void 0:t.xConfig},yConfig:{color:[255,255,0],invert:!1,...t==null?void 0:t.yConfig},zConfig:{color:[0,128,0],invert:!1,...t==null?void 0:t.zConfig}}}function uC(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};bn.extend(t,e,m5(n)),L.setGet(t,e,["config","xConfig","yConfig","zConfig"]),E5(t,e)}const R5=L.newInstance(uC,"vtkAxesActor");var O5={newInstance:R5,extend:uC};const D5={RGB:0,HSV:1,LAB:2,DIVERGING:3},M5={LINEAR:0,LOG10:1};var cC={ColorSpace:D5,Scale:M5};const{ColorSpace:sn,Scale:fp}=cC,{ScalarMappingTarget:zu}=Lc,{vtkDebugMacro:L5,vtkErrorMacro:ir,vtkWarningMacro:_5}=L;function Ty(t,e){const n=t[0],r=t[1],a=t[2],s=Math.sqrt(n*n+r*r+a*a),o=s>.001?Math.acos(n/s):0,c=o>.001?Math.atan2(a,r):0;e[0]=s,e[1]=o,e[2]=c}function V5(t,e){const n=t[0],r=t[1],a=t[2];e[0]=n*Math.cos(r),e[1]=n*Math.sin(r)*Math.cos(a),e[2]=n*Math.sin(r)*Math.sin(a)}function xy(t,e){if(t[0]>=e-.1)return t[2];const n=t[1]*Math.sqrt(e*e-t[0]*t[0])/(t[0]*Math.sin(t[1]));return t[2]>-.3*Math.PI?t[2]+n:t[2]-n}function k5(t,e){let n=t-e;for(n<0&&(n=-n);n>=2*Math.PI;)n-=2*Math.PI;return n>Math.PI&&(n=2*Math.PI-n),n}function Sy(t,e,n,r){const a=[],s=[];ps(e,a),ps(n,s);const o=[],c=[];Ty(a,o),Ty(s,c);let f=t;if(o[1]>.05&&c[1]>.05&&k5(o[2],c[2])>.33*Math.PI){let g=Math.max(o[0],c[0]);g=Math.max(88,g),t<.5?(c[0]=g,c[1]=0,c[2]=0,f*=2):(o[0]=g,o[1]=0,o[2]=0,f=2*f-1)}o[1]<.05&&c[1]>.05?o[2]=xy(c,o[0]):c[1]<.05&&o[1]>.05&&(c[2]=xy(o,c[0]));const l=[];l[0]=(1-f)*o[0]+f*c[0],l[1]=(1-f)*o[1]+f*c[1],l[2]=(1-f)*o[2]+f*c[2];const h=[];V5(l,h),Pg(h,r)}function B5(t,e){e.classHierarchy.push("vtkColorTransferFunction"),t.getSize=()=>e.nodes.length,t.addRGBPoint=(n,r,a,s)=>t.addRGBPointLong(n,r,a,s,.5,0),t.addRGBPointLong=function(n,r,a,s){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.5,c=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0;if(o<0||o>1)return ir("Midpoint outside range [0.0, 1.0]"),-1;if(c<0||c>1)return ir("Sharpness outside range [0.0, 1.0]"),-1;e.allowDuplicateScalars||t.removePoint(n);const f={x:n,r,g:a,b:s,midpoint:o,sharpness:c};e.nodes.push(f),t.sortAndUpdateRange();let l=0;for(;l<e.nodes.length&&e.nodes[l].x!==n;l++);return l<e.nodes.length?l:-1},t.addHSVPoint=(n,r,a,s)=>t.addHSVPointLong(n,r,a,s,.5,0),t.addHSVPointLong=function(n,r,a,s){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.5,c=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0;const f=[];return fs([r,a,s],f),t.addRGBPoint(n,f[0],f[1],f[2],o,c)},t.setNodes=n=>{if(e.nodes!==n){const r=JSON.stringify(e.nodes);e.nodes=n;const a=JSON.stringify(e.nodes);if(t.sortAndUpdateRange()||r!==a)return t.modified(),!0}return!1},t.sortAndUpdateRange=()=>{const n=JSON.stringify(e.nodes);e.nodes.sort((s,o)=>s.x-o.x);const r=JSON.stringify(e.nodes),a=t.updateRange();return!a&&n!==r?(t.modified(),!0):a},t.updateRange=()=>{const n=[2];n[0]=e.mappingRange[0],n[1]=e.mappingRange[1];const r=e.nodes.length;return r?(e.mappingRange[0]=e.nodes[0].x,e.mappingRange[1]=e.nodes[r-1].x):(e.mappingRange[0]=0,e.mappingRange[1]=0),n[0]===e.mappingRange[0]&&n[1]===e.mappingRange[1]?!1:(t.modified(),!0)},t.removePoint=n=>{let r=0;for(;r<e.nodes.length&&e.nodes[r].x!==n;r++);const a=r;if(r>=e.nodes.length)return-1;let s=!1;return e.nodes.splice(r,1),(r===0||r===e.nodes.length)&&(s=t.updateRange()),s||t.modified(),a},t.movePoint=(n,r)=>{if(n!==r){t.removePoint(r);for(let a=0;a<e.nodes.length;a++)if(e.nodes[a].x===n){e.nodes[a].x=r,t.sortAndUpdateRange();break}}},t.removeAllPoints=()=>{e.nodes=[],t.sortAndUpdateRange()},t.addRGBSegment=(n,r,a,s,o,c,f,l)=>{t.sortAndUpdateRange();for(let h=0;h<e.nodes.length;)e.nodes[h].x>=n&&e.nodes[h].x<=o?e.nodes.splice(h,1):h++;t.addRGBPointLong(n,r,a,s,.5,0),t.addRGBPointLong(o,c,f,l,.5,0),t.modified()},t.addHSVSegment=(n,r,a,s,o,c,f,l)=>{const h=[r,a,s],g=[c,f,l],d=[],v=[];fs(h,d),fs(g,v),t.addRGBSegment(n,d[0],d[1],d[2],o,v[0],v[1],v[2])},t.mapValue=n=>{const r=[];return t.getColor(n,r),[Math.floor(255*r[0]+.5),Math.floor(255*r[1]+.5),Math.floor(255*r[2]+.5),255]},t.getColor=(n,r)=>{if(e.indexedLookup){const a=t.getSize(),s=t.getAnnotatedValueIndexInternal(n);if(s<0||a===0){const o=t.getNanColorByReference();r[0]=o[0],r[1]=o[1],r[2]=o[2]}else{const o=[];t.getNodeValue(s%a,o),r[0]=o[1],r[1]=o[2],r[2]=o[3]}return}t.getTable(n,n,1,r)},t.getRedValue=n=>{const r=[];return t.getColor(n,r),r[0]},t.getGreenValue=n=>{const r=[];return t.getColor(n,r),r[1]},t.getBlueValue=n=>{const r=[];return t.getColor(n,r),r[2]},t.getTable=(n,r,a,s)=>{const o=Number(n),c=Number(r);if(lc(o)||lc(c)){for(let z=0;z<a;z++)s[z*3+0]=e.nanColor[0],s[z*3+1]=e.nanColor[1],s[z*3+2]=e.nanColor[2];return}let f=0;const l=e.nodes.length;let h=0,g=0,d=0;l!==0&&(h=e.nodes[l-1].r,g=e.nodes[l-1].g,d=e.nodes[l-1].b);let v=0,S=0,T=0;const x=[0,0,0],m=[0,0,0];let O=0,w=0;const R=[];let M=e.scale===fp.LOG10;M&&(M=e.mappingRange[0]>0);let D=0,V=0,B=0;M&&(D=Math.log10(o),V=Math.log10(c));for(let z=0;z<a;z++){const k=3*z;if(a>1?M?(B=D+z/(a-1)*(V-D),v=10**B):v=o+z/(a-1)*(c-o):M?(B=.5*(D+V),v=10**B):v=.5*(o+c),e.discretize){const U=e.mappingRange;if(v>=U[0]&&v<=U[1]){const H=e.numberOfValues,P=U[1]-U[0];if(H<=1)v=U[0]+P/2;else{const A=(v-U[0])/P,ne=AO(H*A);v=U[0]+ne/(H-1)*P}}}for(;f<l&&v>e.nodes[f].x;)f++,f<l&&(S=e.nodes[f-1].x,T=e.nodes[f].x,M&&(S=Math.log10(S),T=Math.log10(T)),x[0]=e.nodes[f-1].r,m[0]=e.nodes[f].r,x[1]=e.nodes[f-1].g,m[1]=e.nodes[f].g,x[2]=e.nodes[f-1].b,m[2]=e.nodes[f].b,O=e.nodes[f-1].midpoint,w=e.nodes[f-1].sharpness,O<1e-5&&(O=1e-5),O>.99999&&(O=.99999));if(v>e.mappingRange[1])s[k]=0,s[k+1]=0,s[k+2]=0,e.clamping&&(t.getUseAboveRangeColor()?(s[k]=e.aboveRangeColor[0],s[k+1]=e.aboveRangeColor[1],s[k+2]=e.aboveRangeColor[2]):(s[k]=h,s[k+1]=g,s[k+2]=d));else if(v<e.mappingRange[0]||e3(v)&&v<0)s[k]=0,s[k+1]=0,s[k+2]=0,e.clamping&&(t.getUseBelowRangeColor()?(s[k]=e.belowRangeColor[0],s[k+1]=e.belowRangeColor[1],s[k+2]=e.belowRangeColor[2]):l>0&&(s[k]=e.nodes[0].r,s[k+1]=e.nodes[0].g,s[k+2]=e.nodes[0].b));else if(f===0&&(Math.abs(v-o)<1e-6||e.discretize))l>0?(s[k]=e.nodes[0].r,s[k+1]=e.nodes[0].g,s[k+2]=e.nodes[0].b):(s[k]=0,s[k+1]=0,s[k+2]=0);else{let U=0;if(M?U=(B-S)/(T-S):U=(v-S)/(T-S),U<O?U=.5*U/O:U=.5+.5*(U-O)/(1-O),w>.99)if(U<.5){s[k]=x[0],s[k+1]=x[1],s[k+2]=x[2];continue}else{s[k]=m[0],s[k+1]=m[1],s[k+2]=m[2];continue}if(w<.01){if(e.colorSpace===sn.RGB)s[k]=(1-U)*x[0]+U*m[0],s[k+1]=(1-U)*x[1]+U*m[1],s[k+2]=(1-U)*x[2]+U*m[2];else if(e.colorSpace===sn.HSV){const G=[],N=[];vu(x,G),vu(m,N),e.hSVWrap&&(G[0]-N[0]>.5||N[0]-G[0]>.5)&&(G[0]>N[0]?G[0]-=1:N[0]-=1);const b=[];b[0]=(1-U)*G[0]+U*N[0],b[0]<0&&(b[0]+=1),b[1]=(1-U)*G[1]+U*N[1],b[2]=(1-U)*G[2]+U*N[2],fs(b,R),s[k]=R[0],s[k+1]=R[1],s[k+2]=R[2]}else if(e.colorSpace===sn.LAB){const G=[],N=[];ps(x,G),ps(m,N);const b=[];b[0]=(1-U)*G[0]+U*N[0],b[1]=(1-U)*G[1]+U*N[1],b[2]=(1-U)*G[2]+U*N[2],Pg(b,R),s[k]=R[0],s[k+1]=R[1],s[k+2]=R[2]}else e.colorSpace===sn.DIVERGING?(Sy(U,x,m,R),s[k]=R[0],s[k+1]=R[1],s[k+2]=R[2]):ir("ColorSpace set to invalid value.",e.colorSpace);continue}U<.5?U=.5*(U*2)**(1+10*w):U>.5&&(U=1-.5*((1-U)*2)**(1+10*w));const H=U*U,P=H*U,A=2*P-3*H+1,ne=-2*P+3*H,ae=P-2*H+U,se=P-H;let Q,j;if(e.colorSpace===sn.RGB)for(let G=0;G<3;G++)Q=m[G]-x[G],j=(1-w)*Q,s[k+G]=A*x[G]+ne*m[G]+ae*j+se*j;else if(e.colorSpace===sn.HSV){const G=[],N=[];vu(x,G),vu(m,N),e.hSVWrap&&(G[0]-N[0]>.5||N[0]-G[0]>.5)&&(G[0]>N[0]?G[0]-=1:N[0]-=1);const b=[];for(let q=0;q<3;q++)Q=N[q]-G[q],j=(1-w)*Q,b[q]=A*G[q]+ne*N[q]+ae*j+se*j,q===0&&b[q]<0&&(b[q]+=1);fs(b,R),s[k]=R[0],s[k+1]=R[1],s[k+2]=R[2]}else if(e.colorSpace===sn.LAB){const G=[],N=[];ps(x,G),ps(m,N);const b=[];for(let q=0;q<3;q++)Q=N[q]-G[q],j=(1-w)*Q,b[q]=A*G[q]+ne*N[q]+ae*j+se*j;Pg(b,R),s[k]=R[0],s[k+1]=R[1],s[k+2]=R[2]}else e.colorSpace===sn.DIVERGING?(Sy(U,x,m,R),s[k]=R[0],s[k+1]=R[1],s[k+2]=R[2]):ir("ColorSpace set to invalid value.");for(let G=0;G<3;G++)s[k+G]=s[k+G]<0?0:s[k+G],s[k+G]=s[k+G]>1?1:s[k+G]}}},t.getUint8Table=function(n,r,a){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(t.getMTime()<=e.buildTime&&e.tableSize===a&&e.tableWithAlpha!==s)return e.table;if(e.nodes.length===0)return ir("Attempting to lookup a value with no points in the function"),e.table;const o=s?4:3;(e.tableSize!==a||e.tableWithAlpha!==s)&&(e.table=new Uint8Array(a*o),e.tableSize=a,e.tableWithAlpha=s);const c=[];t.getTable(n,r,a,c);for(let f=0;f<a;f++)e.table[f*o+0]=Math.floor(c[f*3+0]*255+.5),e.table[f*o+1]=Math.floor(c[f*3+1]*255+.5),e.table[f*o+2]=Math.floor(c[f*3+2]*255+.5),s&&(e.table[f*o+3]=255);return e.buildTime.modified(),e.table},t.buildFunctionFromArray=n=>{t.removeAllPoints();const r=n.getNumberOfComponents();for(let a=0;a<n.getNumberOfTuples();a++)switch(r){case 3:{e.nodes.push({x:a,r:n.getComponent(a,0),g:n.getComponent(a,1),b:n.getComponent(a,2),midpoint:.5,sharpness:0});break}case 4:{e.nodes.push({x:n.getComponent(a,0),r:n.getComponent(a,1),g:n.getComponent(a,2),b:n.getComponent(a,3),midpoint:.5,sharpness:0});break}case 5:{e.nodes.push({x:a,r:n.getComponent(a,0),g:n.getComponent(a,1),b:n.getComponent(a,2),midpoint:n.getComponent(a,4),sharpness:n.getComponent(a,5)});break}case 6:{e.nodes.push({x:n.getComponent(a,0),r:n.getComponent(a,1),g:n.getComponent(a,2),b:n.getComponent(a,3),midpoint:n.getComponent(a,4),sharpness:n.getComponent(a,5)});break}}t.sortAndUpdateRange()},t.buildFunctionFromTable=(n,r,a,s)=>{let o=0;t.removeAllPoints(),a>1&&(o=(r-n)/(a-1));for(let c=0;c<a;c++){const f={x:n+o*c,r:s[c*3],g:s[c*3+1],b:s[c*3+2],sharpness:0,midpoint:.5};e.nodes.push(f)}t.sortAndUpdateRange()},t.getNodeValue=(n,r)=>n<0||n>=e.nodes.length?(ir("Index out of range!"),-1):(r[0]=e.nodes[n].x,r[1]=e.nodes[n].r,r[2]=e.nodes[n].g,r[3]=e.nodes[n].b,r[4]=e.nodes[n].midpoint,r[5]=e.nodes[n].sharpness,1),t.setNodeValue=(n,r)=>{if(n<0||n>=e.nodes.length)return ir("Index out of range!"),-1;const a=e.nodes[n].x;return e.nodes[n].x=r[0],e.nodes[n].r=r[1],e.nodes[n].g=r[2],e.nodes[n].b=r[3],e.nodes[n].midpoint=r[4],e.nodes[n].sharpness=r[5],a!==r[0]?t.sortAndUpdateRange():t.modified(),1},t.getNumberOfAvailableColors=()=>{var r;if(e.indexedLookup&&t.getSize())return t.getSize();if(e.tableSize)return e.tableSize;const n=((r=e.nodes)==null?void 0:r.length)??0;return Math.max(4094,n)},t.getIndexedColor=(n,r)=>{const a=t.getSize();if(a>0&&n>=0){const o=[];t.getNodeValue(n%a,o);for(let c=0;c<3;++c)r[c]=o[c+1];r[3]=1;return}const s=t.getNanColorByReference();r[0]=s[0],r[1]=s[1],r[2]=s[2],r[3]=1},t.fillFromDataPointer=(n,r)=>{if(!(n<=0||!r)){t.removeAllPoints();for(let a=0;a<n;a++)t.addRGBPoint(r[a*4],r[a*4+1],r[a*4+2],r[a*4+3])}},t.setMappingRange=(n,r)=>{const a=[n,r],s=t.getRange();if(s[1]===a[1]&&s[0]===a[0])return;if(a[1]===a[0]){ir("attempt to set zero width color range");return}const o=(a[1]-a[0])/(s[1]-s[0]),c=a[0]-s[0]*o;for(let f=0;f<e.nodes.length;++f)e.nodes[f].x=e.nodes[f].x*o+c;e.mappingRange[0]=a[0],e.mappingRange[1]=a[1],t.modified()},t.adjustRange=n=>{const r=t.getRange(),a=[];r[0]<n[0]?(t.getColor(n[0],a),t.addRGBPoint(n[0],a[0],a[1],a[2])):(t.getColor(r[0],a),t.addRGBPoint(n[0],a[0],a[1],a[2])),r[1]>n[1]?(t.getColor(n[1],a),t.addRGBPoint(n[1],a[0],a[1],a[2])):(t.getColor(r[1],a),t.addRGBPoint(n[1],a[0],a[1],a[2])),t.sortAndUpdateRange();for(let s=0;s<e.nodes.length;)e.nodes[s].x>=n[0]&&e.nodes[s].x<=n[1]?e.nodes.splice(s,1):++s;return 1},t.estimateMinNumberOfSamples=(n,r)=>{const a=t.findMinimumXDistance();return Math.ceil((r-n)/a)},t.findMinimumXDistance=()=>{if(e.nodes.length<2)return-1;let n=Number.MAX_VALUE;for(let r=0;r<e.nodes.length-1;r++){const a=e.nodes[r+1].x-e.nodes[r].x;a<n&&(n=a)}return n},t.mapScalarsThroughTable=(n,r,a,s)=>{if(t.getSize()===0){L5("Transfer Function Has No Points!");return}e.indexedLookup?t.mapDataIndexed(n,r,a,s):t.mapData(n,r,a,s)},t.mapData=(n,r,a,s)=>{if(t.getSize()===0){_5("Transfer Function Has No Points!");return}const o=Math.floor(t.getAlpha()*255+.5),c=n.getNumberOfTuples(),f=n.getNumberOfComponents(),l=r.getData(),h=n.getData(),g=[];if(a===zu.RGBA)for(let d=0;d<c;d++){const v=h[d*f+s];t.getColor(v,g),l[d*4]=Math.floor(g[0]*255+.5),l[d*4+1]=Math.floor(g[1]*255+.5),l[d*4+2]=Math.floor(g[2]*255+.5),l[d*4+3]=o}if(a===zu.RGB)for(let d=0;d<c;d++){const v=h[d*f+s];t.getColor(v,g),l[d*3]=Math.floor(g[0]*255+.5),l[d*3+1]=Math.floor(g[1]*255+.5),l[d*3+2]=Math.floor(g[2]*255+.5)}if(a===zu.LUMINANCE)for(let d=0;d<c;d++){const v=h[d*f+s];t.getColor(v,g),l[d]=Math.floor(g[0]*76.5+g[1]*150.45+g[2]*28.05+.5)}if(a===zu.LUMINANCE_ALPHA)for(let d=0;d<c;d++){const v=h[d*f+s];t.getColor(v,g),l[d*2]=Math.floor(g[0]*76.5+g[1]*150.45+g[2]*28.05+.5),l[d*2+1]=o}},t.applyColorMap=n=>{const r=JSON.stringify(e.colorSpace);n.ColorSpace&&(e.colorSpace=sn[n.ColorSpace.toUpperCase()],e.colorSpace===void 0&&(ir(`ColorSpace ${n.ColorSpace} not supported, using RGB instead`),e.colorSpace=sn.RGB));let a=r!==JSON.stringify(e.colorSpace);const s=a||JSON.stringify(e.nanColor);if(n.NanColor)for(e.nanColor=[].concat(n.NanColor);e.nanColor.length<4;)e.nanColor.push(1);a=a||s!==JSON.stringify(e.nanColor);const o=a||JSON.stringify(e.nodes);if(n.RGBPoints){const l=n.RGBPoints.length;e.nodes=[];const h=.5,g=0;for(let d=0;d<l;d+=4)e.nodes.push({x:n.RGBPoints[d],r:n.RGBPoints[d+1],g:n.RGBPoints[d+2],b:n.RGBPoints[d+3],midpoint:h,sharpness:g})}const c=t.sortAndUpdateRange(),f=!c&&(a||o!==JSON.stringify(e.nodes));return f&&t.modified(),c||f}}const F5={clamping:!0,colorSpace:sn.RGB,hSVWrap:!0,scale:fp.LINEAR,nanColor:null,belowRangeColor:null,aboveRangeColor:null,useAboveRangeColor:!1,useBelowRangeColor:!1,allowDuplicateScalars:!1,table:null,tableSize:0,buildTime:null,nodes:null,discretize:!1,numberOfValues:256};function fC(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,F5,n),Lc.extend(t,e,n),e.table=[],e.nodes=[],e.nanColor=[.5,0,0,1],e.belowRangeColor=[0,0,0,1],e.aboveRangeColor=[1,1,1,1],e.buildTime={},L.obj(e.buildTime),L.get(t,e,["buildTime","mappingRange"]),L.setGet(t,e,["useAboveRangeColor","useBelowRangeColor","discretize","numberOfValues",{type:"enum",name:"colorSpace",enum:sn},{type:"enum",name:"scale",enum:fp}]),L.setArray(t,e,["nanColor","belowRangeColor","aboveRangeColor"],4),L.getArray(t,e,["nanColor","belowRangeColor","aboveRangeColor"]),B5(t,e)}const N5=L.newInstance(fC,"vtkColorTransferFunction");var U5={newInstance:N5,extend:fC,...cC};const G5=()=>{const t=Y.useRef(null),e=Y.useRef(null);return Y.useEffect(()=>{if(!e.current&&t.current){let n=function(){const S=v.getPosition(),T=v.getFocalPoint(),x=v.getViewUp();console.log("Camera Position:",S),console.log("Camera Focal Point:",T),console.log("Camera View Up:",x)};console.info("Creation");const r=ep.newInstance();r.setContainer(t.current),r.resize();const a=r.getRenderer(),s=r.getRenderWindow(),o=An.newInstance(),c=bn.newInstance();c.setMapper(o);const f=rC.newInstance({fetchGzip:!1});o.setInputConnection(f.getOutputPort());const l=O5.newInstance(),h=K1.newInstance();h.setCamera(a.getActiveCamera());const g=U5.newInstance();g.addRGBPoint(0,0,0,1),g.addRGBPoint(300,1,0,0),g.build(),o.setLookupTable(g),o.setScalarRange(0,300);const d=P1.newInstance();d.setScalarsToColors(g),d.setAxisLabel("Temperatura K"),a.addActor(c),a.addActor(l),a.addActor(h),a.addActor(d),e.current={fullScreenRenderer:r,renderWindow:s,renderer:a,actor:c,mapper:o,axesActor:l,scalarBar:d,cubeAxesActor:h};const v=a.getActiveCamera();v.onModified(()=>{n()}),n(),f.setUrl("/sources/egypt.vti",{loadData:!0}).then(()=>{console.log("Data Fetched");const S=f.getOutputData();let T=S.getCellData().getArray("temp");if(!T){let x=S.getNumberOfCells(),m=[];for(let O=0;O<x;O++)m.push(2),m.push(Math.random()*300);T=Oe.newInstance({size:x,values:m}),T.setName("temp"),S.getCellData().setScalars(T)}T.getRange()[0],T.getRange()[1];try{c.modified(),h.setDataBounds(c.getBounds()),a.getActiveCamera().setPosition(.2,15,-7),a.getActiveCamera().setFocalPoint(-.2,0,10),a.getActiveCamera().setViewUp(1,0,0),a.resetCamera(),s.render()}catch{}})}return()=>{if(console.log("Unmount"),e.current){console.info("Deletion");const{fullScreenRenderer:n,actor:r,mapper:a,axesActor:s,scalarBar:o,cubeAxesActor:c}=e.current;r.delete(),a.delete(),s.delete(),o.delete(),n.delete(),c.delete(),e.current=null}}},[t]),_e.jsx("div",{children:_e.jsx("div",{style:{width:"800px",height:"800px"},ref:t})})};function $5(){return _e.jsxs(t4,{children:[_e.jsx(Ju,{index:!0,element:_e.jsx(fU,{})}),_e.jsx(Ju,{path:"example2",element:_e.jsx(f5,{})}),_e.jsx(Ju,{path:"example3",element:_e.jsx(G5,{})})]})}dE.createRoot(document.getElementById("root")).render(_e.jsx(Y.StrictMode,{children:_e.jsx(R4,{children:_e.jsx($5,{})})}));
